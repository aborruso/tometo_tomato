This file is a merged representation of a subset of the codebase, containing specifically included files, combined into a single document by Repomix.
The content has been processed where security check has been disabled.

# File Summary

## Purpose
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.

## File Format
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  a. A header with the file path (## File: path/to/file)
  b. The full contents of the file in a code block

## Usage Guidelines
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.

## Notes
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Only files matching these patterns are included: docs/**/*.qmd
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Security check has been disabled - content may contain sensitive information
- Files are sorted by Git change count (files with more changes are at the bottom)

# Directory Structure
```
docs/
  advanced/
    inspect/
      index.qmd
    jupyter/
      kernel-execution.qmd
    typst/
      brand-yaml.qmd
      typst-css.qmd
    environment-vars.qmd
    index.qmd
  authoring/
    _embed-examples/
      sample-notebook-view.qmd
      sample.qmd
    _figure-examples/
      _examples.qmd
    _mermaid-examples/
      customize.qmd
      dark.qmd
      darkly.qmd
      default.qmd
      forest.qmd
      neutral.qmd
      sandstone.qmd
      solar.qmd
      vapor.qmd
    code-annotation-example/
      revealjs.qmd
    _brand-example.qmd
    _cross-reference-divs-diagram.qmd
    _cross-reference-divs-figure.qmd
    _cross-reference-divs-listing.qmd
    _cross-reference-divs-table.qmd
    _cross-reference-divs-video.qmd
    _cross-references-callouts.qmd
    _cross-references-listings.qmd
    _embeds-ipynb.qmd
    _kbd.qmd
    _mermaid-theming.qmd
    _pagebreak.qmd
    _shortcodes.qmd
    appendices.qmd
    article-layout.qmd
    brand.qmd
    callouts.qmd
    citations.qmd
    code-annotation.qmd
    conditional.qmd
    contents.qmd
    create-citeable-articles.qmd
    cross-reference-options.qmd
    cross-references-custom.qmd
    cross-references-divs.qmd
    cross-references.qmd
    diagrams.qmd
    figures.qmd
    front-matter.qmd
    includes.qmd
    language.qmd
    lipsum.qmd
    markdown-basics.qmd
    notebook-embed.qmd
    penguins-qmd.qmd
    placeholder.qmd
    shortcodes.qmd
    tables.qmd
    title-blocks.qmd
    variables.qmd
    version.qmd
    videos.qmd
  blog/
    posts/
      2022-02-13-feature-callouts/
        index.qmd
      2022-02-15-feature-tables/
        index.qmd
      2022-02-17-advanced-layout/
        index.qmd
      2022-06-21-rstudio-conf-2022-quarto/
        index.qmd
      2022-07-25-feature-extensions/
        index.qmd
      2022-10-25-shinylive-extension/
        index.qmd
      2023-03-13-code-annotation/
        index.qmd
      2023-03-15-multi-format/
        index.qmd
      2023-03-17-jupyter-cell-embedding/
        index.qmd
      2023-03-20-confluence/
        index.qmd
      2023-04-26-1.3-release/
        index.qmd
      2023-05-15-get-started/
        index.qmd
      2023-05-22-quarto-for-academics/
        index.qmd
      2023-12-05-asa-traveling-courses/
        index.qmd
      2023-12-07-quarto-dashboards-demo/
        index.qmd
      2024-01-24-1.4-release/
        index.qmd
      2024-03-26-hugging-face/
        index.qmd
      2024-04-01-manuscripts-rmedicine/
        index.qmd
      2024-05-28-conf-workshops/
        index.qmd
      2024-07-02-beautiful-tables-in-typst/
        examples/
          great-tables-oceania.qmd
          great-tables-solar-zenith.qmd
          gt-cars.qmd
          gt-islands.qmd
          pandas-acting-on-data.qmd
          pandas-confusion-matrix.qmd
        index.qmd
      2024-07-11-1.5-release/
        index.qmd
      2024-10-15-conf-workshops-materials/
        index.qmd
      2024-11-06-conf-talks/
        index.qmd
      2024-11-22-dashboards-workshop/
        index.qmd
      2024-11-25-1.6-release/
        index.qmd
      2024-12-04-websites-workshop/
        index.qmd
      2024-12-12-includes-meta/
        index.qmd
      2025-01-15-quarto-tip-brand-positron/
        index.qmd
      2025-04-28-1.7-release/
        index.qmd
      2025-05-19-quarto-codespaces/
        index.qmd
      2025-xx-xx-1.7-release/
        index.qmd
      _quarto-1.3-feature.qmd
    index.qmd
  books/
    _book-vs-website-key.qmd
    book-basics.qmd
    book-crossrefs.qmd
    book-output.qmd
    book-structure.qmd
  computations/
    caching.qmd
    execution-options.qmd
    inline-code.qmd
    julia.qmd
    ojs.qmd
    parameters.qmd
    python.qmd
    r.qmd
    render-scripts.qmd
  dashboards/
    _examples/
      inputs/
        card-toolbar.qmd
        column-layout.qmd
        inline-sidebar.qmd
        inline-toolbar.qmd
        input-panel.qmd
        page-sidebar.qmd
        right-sidebar.qmd
        toolbar.qmd
      julia/
        julia-plotly.qmd
      python/
        python-itables.qmd
        python-tabulate.qmd
      r/
        dt.qmd
      _TODO.qmd
      altair.qmd
      cell-layout.qmd
      flow.qmd
      gapminder-content.qmd
      gapminder.qmd
      leaflet.qmd
      markdown.qmd
      navigation.qmd
      penguins-obervable.qmd
      python-wide.qmd
      shiny-diamonds.qmd
      shiny-global-sidebar.qmd
      shiny-python-simple.qmd
      shiny-sidebar.qmd
      valuebox.qmd
    interactivity/
      shiny-python/
        _shiny-requirements.qmd
        execution.qmd
        index.qmd
        running.qmd
      index.qmd
      observable.qmd
      shiny-r.qmd
    _inputs.qmd
    _layouts-old.qmd
    data-display.qmd
    deployment.qmd
    index.qmd
    inputs.qmd
    layout.qmd
    parameters.qmd
    theming.qmd
  download/
    changelog/
      1.1/
        index.qmd
      1.2/
        index.qmd
      1.3/
        index.qmd
      1.4/
        index.qmd
      1.5/
        index.qmd
      1.6/
        index.qmd
    index.qmd
    prerelease.qmd
    release.qmd
    tarball.qmd
  extensions/
    _extension-trust.qmd
    _formats-common.qmd
    _listing-chooser.qmd
    _listing-footer.qmd
    _listing-preamble.qmd
    _shortcode-escaping.qmd
    creating.qmd
    distributing.qmd
    filters.qmd
    formats.qmd
    index.qmd
    listing-filters.qmd
    listing-formats.qmd
    listing-journals.qmd
    listing-revealjs.qmd
    lua-api.qmd
    lua.qmd
    managing.qmd
    metadata.qmd
    nbfilter.qmd
    project-types.qmd
    revealjs.qmd
    shortcodes.qmd
    starter-templates.qmd
  faq/
    index.qmd
    rmarkdown.qmd
  gallery/
    index.qmd
  get-started/
    authoring/
      _authoring-complete.qmd
      _authoring.qmd
      index.qmd
      jupyter.qmd
      neovim.qmd
      rstudio.qmd
      text-editor.qmd
      vscode.qmd
    computations/
      _computations-complete.qmd
      _computations-text-editor.qmd
      _computations.qmd
      index.qmd
      jupyter.qmd
      neovim.qmd
      rstudio.qmd
      text-editor.qmd
      vscode.qmd
    hello/
      rstudio/
        _hello.qmd
      _hello.qmd
      index.qmd
      jupyter.qmd
      neovim.qmd
      rstudio.qmd
      text-editor.qmd
      vscode.qmd
    index.qmd
  guide/
    index.qmd
  interactive/
    ojs/
      examples/
        _shiny/
          binning/
            binning-shiny-ojs.qmd
          data/
            data-shiny-ojs.qmd
          kmeans/
            kmeans-shiny-ojs.qmd
        arquero.qmd
        github.qmd
        layout.qmd
        noaa-co2.qmd
        penguins.qmd
        population.qmd
        sunburst.qmd
      _reactivity.qmd
      code-reuse.qmd
      data-sources.qmd
      index.qmd
      libraries.qmd
      ojs-cells.qmd
      shiny.qmd
    shiny/
      _examples/
        covid19-bicartogram/
          covid19-bicartogram.qmd
        diamonds/
          shiny-diamonds.qmd
        k-means/
          shiny-k-means.qmd
        old-faithful/
          shiny-old-faithful.qmd
      execution.qmd
      index.qmd
      resources.qmd
      running.qmd
    widgets/
      htmlwidgets.qmd
      jupyter.qmd
    index.qmd
    layout.qmd
  journals/
    _draft/
      create-extensions.qmd
      extension-templates.qmd
    authors.qmd
    formats.qmd
    index.qmd
    templates.qmd
  manuscripts/
    authoring/
      _authoring-content.qmd
      _citations.qmd
      _cross-refs.qmd
      _embeds-ipynb.qmd
      _embeds-qmd.qmd
      _equations.qmd
      _figures.qmd
      _files.qmd
      _footer.qmd
      _front-matter.qmd
      _inline-computations.qmd
      _markdown.qmd
      _overview.qmd
      _setup.qmd
      _structure.qmd
      _tables.qmd
      _visual-editor.qmd
      _workflow-ipynb.qmd
      _workflow-qmd.qmd
      _workflow.qmd
      index.qmd
      jupyterlab.qmd
      rstudio.qmd
      vscode.qmd
    components.qmd
    index.qmd
    next-steps.qmd
    publishing.qmd
  output-formats/
    examples/
      gt-temps.qmd
      pandas-temps.qmd
    _ssg-intro.qmd
    _ssg-workflow.qmd
    all-formats.qmd
    docusaurus.qmd
    gfm.qmd
    html-basics.qmd
    html-code.qmd
    html-lightbox-figures.qmd
    html-multi-format.qmd
    html-publishing.qmd
    html-themes-more.qmd
    html-themes.qmd
    hugo.qmd
    ms-word-templates.qmd
    ms-word.qmd
    page-layout.qmd
    pdf-basics.qmd
    pdf-engine.qmd
    typst-custom.qmd
    typst.qmd
  prerelease/
    1.3/
      custom-ast-nodes/
        callout.qmd
        conditional-block.qmd
        tabset.qmd
      _highlights.qmd
      _pre-release-feature.qmd
      ast.qmd
      index.qmd
      tables.qmd
      website-nav.qmd
    1.4/
      _highlights.qmd
      _pre-release-feature.qmd
      ast.qmd
      crossref.qmd
      email.qmd
      index.qmd
      lua_changes.qmd
    1.5/
      _highlights.qmd
      index.qmd
    1.6/
      _highlights.qmd
      _pre-release-feature.qmd
      index.qmd
    1.7/
      _highlights.qmd
      _pre-release-feature.qmd
      index.qmd
    1.8/
      _highlights.qmd
      index.qmd
    _highlights-prerelease.qmd
    _highlights-release.qmd
  presentations/
    revealjs/
      demo/
        mini/
          absolute.qmd
          auto-animate-code.qmd
          auto-animate-movement.qmd
          auto-animate-stack.qmd
          auto-animate.qmd
          fragments-custom.qmd
          fragments-nested.qmd
          fragments.qmd
          stack.qmd
          zoom.qmd
        index.qmd
      examples/
        _theme-dark.qmd
        background-color.qmd
        background-gradient.qmd
        background-no-title.qmd
        code-echo.qmd
        columns.qmd
        creating-slides-1.qmd
        creating-slides-2.qmd
        creating-slides-3.qmd
        executable-code-figure-size.qmd
        footer-and-logo.qmd
        image-background.qmd
        incremental-lists-1.qmd
        incremental-lists-2.qmd
        incremental-lists-3.qmd
        incremental-pause.qmd
        index.qmd
        line-highlighting-1.qmd
        line-highlighting-2.qmd
        line-highlighting-3.qmd
        line-highlighting-4.qmd
        no-footer-on-a-slide.qmd
        per-slide-footer.qmd
        scrollable-and-smaller.qmd
        scrollable.qmd
        slide-with-speaker-notes.qmd
        smaller.qmd
        tabset.qmd
      _callout-auto-stretch-scrollable.qmd
      advanced.qmd
      index.qmd
      presenting.qmd
      themes.qmd
    beamer.qmd
    index.qmd
    powerpoint.qmd
  projects/
    binder.qmd
    code-execution.qmd
    environment.qmd
    profiles.qmd
    quarto-projects.qmd
    scripts.qmd
    virtual-environments.qmd
  publishing/
    _confluence_examples/
      confluence-demo.qmd
    ci.qmd
    confluence.qmd
    github-pages.qmd
    hugging-face.qmd
    index.qmd
    netlify.qmd
    other.qmd
    posit-cloud.qmd
    quarto-pub.qmd
    rstudio-connect.qmd
  reference/
    cells/
      cells-jupyter.qmd
      cells-knitr.qmd
      cells-ojs.qmd
      index.qmd
    formats/
      markdown/
        commonmark.qmd
        gfm.qmd
        markua.qmd
      presentations/
        beamer.qmd
        pptx.qmd
        revealjs.qmd
      wiki/
        dokuwiki.qmd
        jira.qmd
        mediawiki.qmd
        xwiki.qmd
        zimwiki.qmd
      asciidoc.qmd
      context.qmd
      dashboard.qmd
      docbook.qmd
      docx.qmd
      epub.qmd
      fb2.qmd
      haddock.qmd
      html.qmd
      icml.qmd
      ipynb.qmd
      jats.qmd
      man.qmd
      ms.qmd
      muse.qmd
      odt.qmd
      opml.qmd
      org.qmd
      rst.qmd
      rtf.qmd
      tei.qmd
      texinfo.qmd
      textile.qmd
      typst.qmd
    metadata/
      brand.qmd
      citation.qmd
      crossref.qmd
    projects/
      books.qmd
      manuscripts.qmd
      options.qmd
      websites.qmd
    dates.qmd
    globs.qmd
    index.qmd
  tools/
    _examples/
      diagrams.qmd
      python.qmd
    positron/
      index.qmd
      notebook.qmd
      visual-editor.qmd
    vscode/
      index.qmd
      notebook.qmd
      visual-editor.qmd
    _jupyter-lab-extension-install.qmd
    jupyter-lab-extension.qmd
    jupyter-lab.qmd
    neovim.qmd
    rstudio.qmd
    text-editors.qmd
  triaging/
    index.qmd
  troubleshooting/
    index.qmd
  visual-editor/
    content.qmd
    index.qmd
    markdown.qmd
    options.qmd
    technical.qmd
  websites/
    website-about.qmd
    website-basics.qmd
    website-blog.qmd
    website-drafts.qmd
    website-listings-custom.qmd
    website-listings.qmd
    website-navigation.qmd
    website-search.qmd
    website-tools.qmd
```

# Files

## File: docs/advanced/inspect/index.qmd
```````
---
title: Quarto Inspect
summary: Project and document information in a machine-readable format
format: html
---

## Overview

The `quarto inspect` command produces a JSON object with information about the configuration of a Quarto project or document.
This information is particularly useful for authors of downstream tools and libraries which analyze Quarto content.

Whenever possible, we recommend using `quarto inspect` instead of direct inspection of documents or projects.

## Information available

`quarto inspect` provides information for Quarto projects, for individual documents outside of projects, and for documents within a project.

### Document-level information

Document-level information is obtained by calling `quarto inspect <DOCUMENT>`.
If no additional parameters are given, the output is produced on standard output.
If an additional parameter is given, the output is written to the specified path.

- `quarto`: an object describing the quarto version
- `engines`: the engine used in the document, as a singleton array (for simplicity of the schema, in compatibility with the project-wide information below)
- `formats`: an object whose keys are the document format name, and values are metadata associated with the document.
- `resources`: an array of paths describing additional resources required for the document to be rendered.
- `fileInformation`: an object whose keys are file names, and values are objects describing:
  - `includeMap`: an array of `source` and `target` paths describing the use of `include` shortcodes
  - `codeCells`: an array of objects describing the code cells in the document (including those referenced to from an include). The object has:
    - `start`: the line where the code cell starts
    - `end`: the line where the code cell ends
    - `file`: the path of the file where the code cell resides (this can be different from the original file because of includes)
    - `source`: the content of the code cell
    - `language`: the language of the code cell
    - `metadata`: the cell-level metadata for the code cell
- `project`: If the document is part of a project, then this contains the output that would be produced by `quarto inspect` on the project

### Project-level information

Project-level information is obtained by calling `quarto inspect` within a project, or explicitly passing a path, `quarto inspect <PATH_TO_PROJECT>`.
If no additional parameters are given, the output is produced on standard output.
If an additional parameter is given, the output is written to the specified path.

- `quarto`: an object describing the quarto version
- `dir`: the path to the directory where the project resides
- `engines`: an array of strings listing the engines used in the project.
- `config`: the project configuration metadata in JSON format
- `files`: information about the project files in an object. The object has:
  - `input`: an array of paths listing the input files
  - `resources`: an array of paths describing additional resources required for the project to be rendered.
  - `config`: the YAML configuration files that make up this project's configuration
  - `configResources`: an array of paths describing resources that are implied by the project configuration.
- `fileInformation`: an object containing information about each of the documents to be rendered by the project. 
  The keys of this object are the document paths, and the values are themselves objects with the following keys:
  - `includeMap`: an array of `source` and `target` paths describing the use of `include` shortcodes
  - `codeCells`: an array of objects describing the code cells in the document (including those referenced to from an include). The object has:
    - `start`: the line where the code cell starts
    - `end`: the line where the code cell ends
    - `file`: the path of the file where the code cell resides (this can be different from the original file because of includes)
    - `source`: the content of the code cell
    - `language`: the language of the code cell
    - `metadata`: the cell-level metadata for the code cell

## JSON Schemas

### Project data

This schema is also available as a [standalone file](./quarto-inspect-project-json-schema.json).

```json
{{< include quarto-inspect-project-json-schema.json >}}
```

### Document data

This schema is also available as a [standalone file](./quarto-inspect-document-json-schema.json).

```json
{{< include quarto-inspect-document-json-schema.json >}}
```
```````

## File: docs/advanced/jupyter/kernel-execution.qmd
```````
---
title: Jupyter Kernel Execution
format: html
summary: How to support Quarto from a Jupyter kernel
---

Quarto executes Jupyter notebooks using [`nbclient`](https://github.com/jupyter/nbclient) together with a few additional options
to support some of Quarto's features. Quarto has built-in support for these features in the `python` and `julia` Jupyter kernels.

In addition, starting in Quarto 1.5, any Jupyter kernel can configure itself to support the features described below.

## Setup and cleanup cells

In order for Quarto notebooks and documents to communicate global options
with a Jupyter Kernel, Quarto uses special _setup_ and _cleanup_ cells.

In `python` and `julia` kernels, the setup and cleanup cells are defined by the following files:

- Julia:
  - [setup](https://github.com/quarto-dev/quarto-cli/blob/main/src/resources/jupyter/lang/julia/setup.jl)
  - [cleanup](https://github.com/quarto-dev/quarto-cli/blob/main/src/resources/jupyter/lang/julia/cleanup.jl)
- Python:
  - [setup](https://github.com/quarto-dev/quarto-cli/blob/main/src/resources/jupyter/lang/python/setup.py)
  - [cleanup](https://github.com/quarto-dev/quarto-cli/blob/main/src/resources/jupyter/lang/python/cleanup.py)

### Adding support to a Jupyter kernel

{{< include /docs/prerelease/1.5/_pre-release-feature.qmd >}}

If a Jupyter kernel wants to execute in awareness of Quarto's context, it should signal its support by adding the following files to the kernelspec directory:

- `quarto_setup_cell`: the source code for a setup cell to be executed by nbclient at the beginning of execution of any Quarto notebook or document. Quarto will create a Jupyter notebook cell with the contents of this file as the `source` field.
- `quarto_cleanup_cell`: analogously to above, the source code for a cleanup cell.

::: callout-tip

In order to make the implementation of these features easier for writers of custom kernels, we have made available a fork of Jupyter's `echo_kernel`. 
This example kernel is meant to showcase the basics of a custom kernel implementation, and our fork adds the setup cell functionality.
See the [source for more](https://github.com/quarto-dev/quarto_echo_kernel).

:::

## Quarto document options

{{< include /docs/prerelease/1.5/_pre-release-feature.qmd >}}

Jupyter kernels can have access to a number of Quarto options that can affect cell execution.

Currently, the supported options are:

- `format`: the format that will be used to produce the document
- `params`: the parameters that will be used in a [parameterized execution](/docs/computations/parameters.qmd#jupyter)
- `allow_errors`: if `true`, then the kernel is asked to not stop execution if a cell produces an error
- `fig_width`: the requested figure width in inches
- `fig_height`: the requested figure height in inches
- `fig_format`: the requested format for figure output (`png`, `jpg`, etc)
- `fig_dpi`: the requested resolution for images in dots per inch
- `cache`: if `true`, then Jupyter cache will be used

Quarto uses [Jupyter Comms](https://jupyter-client.readthedocs.io/en/latest/messaging.html#custom-messages) to provide its options to a kernel during execution. Specifically, Quarto will
open a comm with target name `quarto_kernel_setup`, and its initialization message content will contain these options under the `options` key.

::: callout-tip

In order to make the implementation of these features easier for writers of custom kernels, we have made available a fork of Jupyter's `echo_kernel`. 
This example kernel is meant to showcase the basics of a custom kernel implementation, and our fork adds the setup cell functionality.
See the [source for more](https://github.com/quarto-dev/quarto_echo_kernel).

:::

## Daemonization

Quarto offers built-in support for `julia` and `python` kernels by default, see the docs for more ([Julia](/docs/computations/julia.qmd#kernel-daemon), [Python](/docs/computations/python.qmd#kernel-daemon)).

### Adding support to a Jupyter kernel

{{< include /docs/prerelease/1.5/_pre-release-feature.qmd >}}

Arbitrary Jupyter kernels can indicate support for daemons. To do so, provide a `quarto_setup_cell` file in the kernelspec directory so that setup cells can be executed, and ensure that the execution of the setup cell returns an output result with metadata indicating support for running as a daemon. The supported metadata options are:

- `daemonize`: if a kernel returns `true` when executing Quarto's setup cell, then Quarto will maintain a persistent kernel. The daemon options are the same as in the [documentation above](/docs/computations/python.qmd#kernel-daemon).
- `restart_kernel`: if a kernel returns `true`, then Quarto will forcibly restart the kernel. This allows kernels to detect that their configuration has been changed such that it cannot support continued execution in the same process.

::: callout-tip

In order to make the implementation of these features easier for writers of custom kernels, we have made available a fork of Jupyter's `echo_kernel`. 
This example kernel is meant to showcase the basics of a custom kernel implementation, and our fork adds the setup cell functionality.
See the [source for more](https://github.com/quarto-dev/quarto_echo_kernel).

:::
```````

## File: docs/advanced/typst/brand-yaml.qmd
```````
---
title: Typst Brand YAML
summary: Technical details on support for Brand YAML in Typst and Quarto
---

## Overview

Brand YAML allows consistent colors, fonts, and typography across formats and applications.

This document describes some details of the Typst implementation of Brand YAML for Quarto, and provides troubleshooting tips.

In general, Brand YAML properties use CSS conventions, so this feature relies on [Typst CSS](typst-css.qmd) functionality.

## Color

Brand YAML palette and theme colors are available in Typst `brand-color`, e.g. `brand-color.lime` or `brand-color.primary`.

Lighter versions of the colors, suitable as background colors, are available in `brand-background-color`, e.g. `brand-background-color.success`.

## Typography

Brand YAML is specified for the following elements and Brand YAML properties. Combinations that are not supported are marked NA.


|                  | base | headings | title[^1] | subtitle | monospace-inline | monospace-block | link  |
|------------------|------|----------|-----------|----------|------------------|-----------------|-------|
| family           |   ✓  |    ✓     |     ✓     |    ✓     |        ✓         |        ✓        |   NA  |
| size             |   ✓  |    NA    |     NA    |    NA    |        ✓         |        ✓        |   NA  |
| weight           |   ✓  |    ✓     |     ✓     |    ✓     |        ✓         |        ✓        |   ✓   |
| style            |  NA  |    ✓     |     ✓     |    ✓     |        NA        |        NA       |   NA  |
| color            |   ✓  |    ✓     |     ✓     |    ✓     |        ✓         |        ✓        |   ✓   |
| background-color |  NA  |    NA    |     NA    |    NA    |        ✓         |        ✓        |   ✓   |
| decoration       |  NA  |    NA    |     NA    |    NA    |        NA        |        NA       |   ✓   |
| line-height      |   ✓  |    ✓     |     ✓     |    ✓     |        NA        |        ✓        |   NA  |

[^1]: While being styled as headings, title and subtitle have a separate implementation.

The Quarto Typst and HTML implementations of Brand YAML implement all combinations (except size in revealjs).

Many of the NA combinations are possible in Typst, but were removed for compatibility with the spec in [1bd7a48](https://github.com/quarto-dev/quarto-cli/commit/1bd7a48a41fe683abf6437b55b3d4f4370ef347b). If any of those are desired, they can be implemented via a Typst raw block or `include-in-header`; consult that commit for details.

### Missing fonts in Typst

When Typst is unable to find the requested font, it will fall back to a default font. In Typst 0.13, shipped with Quarto 1.7, the default is Libertinus Serif.

Typst will warn `unknown font family` in this case.

To tell Typst to not fall back (and not to display fonts it can't find), you can add

```typst
#set text(fallback: false)
```

to your document.

Typst Brand YAML will automatically download fonts from Google Fonts and cache them in `.quarto/typst-font-cache`

Then it tells Typst to use this font directory, in addition to any system fonts available to Typst.

In rare cases, there may be ambiguities about a font's name that will cause Typst not to find the font. To see if a font is available to Typst, run

```
quarto typst fonts --ignore-system-fonts --font-path .quarto/typst-font-cache/
```

to list only the fonts downloaded by Quarto. (Adding ``--variants`` can be helpful for more detail.)

If the font is listed but it still isn't working, check for variation in the font name. For example, the Sono font can be downloaded from Google Fonts as Sono, but Typst will only accept Sono Extralight Monospace.

### "Big number" bug

![](big-number-bug.png)

If you encounter issue [#11683](https://github.com/quarto-dev/quarto-cli/issues/11683), with numbers displaying larger than surrounding text in table output, this is happening because none of the text fonts requested by your table package are available, but some of the emoji fonts are.

Please specify an available font to your table package. In the future, Quarto may implement "font stacks" like `system-ui` and `sans-serif` in Typst CSS to fix this bug, but currently these are passed through verbatim, and Typst won't recognize font stacks.

### Typography Test coverage

Which kitchen sink test files contain unique tests for a feature/element combination?

For non-unique tests, first file index is listed.

|                  | base | headings |   title   | subtitle | monospace-inline | monospace-block | link  |
|------------------|------|----------|-----------|----------|------------------|-----------------|-------|
| family           |   1  |    1     |     1     |    1     |        1         |        1        |   R   |
| size             |   1  |    NA    |     NA    |    NA    |        1         |        1        |   R   |
| weight           |   1  |    1     |     1     |    1     |        1         |        2        |   2   |
| style            |   R  |    1     |     1     |    1     |        R         |        R        |   R   |
| color            |   1  |    1     |     1     |    1     |        1         |        1        |   1   |
| background-color |   R  |    R     |     R     |    R     |        1         |        1        |   1   |
| decoration       |   R  |    R     |     R     |    R     |        R         |        R        |   1   |
| line-height      |   1  |    1     |     1     |    1     |        NA        |        1        |   NA  |
```````

## File: docs/advanced/typst/typst-css.qmd
```````
---
title: Typst CSS
summary: Quarto's translation of CSS properties to Typst properties
---

## Overview

The Typst CSS feature translates CSS properties into Typst properties, to allow similar styling between the HTML formats and the Typst format.

It is tuned for two use-cases:

- HTML Tables styled by table packages
- HTML `<pre>` tags representing console output with spans decorated with colors, e.g. from ANSI.

This document is designed for: 

* package developers who want to produce `table` or `pre` output which can be translated to Typst
* extension developers who want to improve the translation of CSS properties, or add other CSS properties

It describes how Typst CSS works, how to enable and disable this feature and the related `pre` tag processing, troubleshooting, and adding or changing the translation filters. 

## How Typst CSS works

Unless [table processing is disabled](/docs/authoring/tables.qmd#disabling-quarto-table-processing), tables in HTML raw blocks will be parsed into the Pandoc AST and then written by the output format. 

When the output format is Typst, Quarto will [`juice`](https://github.com/Automattic/juice) the HTML input, annotating the HTML elements with CSS properties from the rules in any style sheets included in the HTML raw block.
A Quarto post-processing filter translates the HTML attributes and CSS properties into attributes of the form `typst:property` or `typst:text:property`, and the Typst writer in Pandoc writes the output appropriately.

You can opt-in to have `pre` tags processed in the same way: see [`pre` tag processing](#pre-tags).

## Supported Elements and Properties

Typst CSS works for the specific combinations of HTML elements and CSS properties below:

|                  | span | div | table | td  |
|------------------|------|-----|-------|-----|
| background-color |   ✓  |  ✓  |       |  ✓  |
| border[^1]       |      |     |       |  ✓  |
| color            |   ✓  |  ✓  |       |  ✓  |
| font-family      |      |  ✓  |   ✓   |     |
| font-size        |      |  ✓  |   ✓   |     |
| opacity          |   ✓  |     |       |  ✓  |
| align[^2]        |      |     |       |  ✓  |


[^1]: `border`, `border-left` etc, `border-width`, `border-style`, `border-color`, `border-left-width` etc

[^2]: `text-align`, `vertical-align`


## Disabling Typst CSS

The CSS-to-Typst Lua filter operates over the entire AST (not just tables and pre-tags). For troubleshooting purposes, the filter can be disabled with:

``` yaml
format:
  typst:
    css-property-processing: none
```
    

## `pre` tag processing {#pre-tags}

`pre`-tag processing is intended for automatic translation of ANSI to Typst via HTML. Quarto does not currently capture ANSI output from execution, but this feature is available for packages and extensions.

`pre` tag processing is opt-in with `html-pre-tag-processing="parse"` on a div directly enclosing the HTML raw block:

```` markdown
::: {html-pre-tag-processing="parse"}

```{=html}
<pre>...</pre>
```
:::
````

## Troubleshooting

To make sure that a package is outputting HTML tables that can be translated with Typst CSS, render the document with `keep-md: true`. Then check the `.typst.md` file for HTML Raw Blocks like 

````html
```{=html}
<table>
</table>
```
````
The raw block must contain an HTML `<table>` tag, which may be preceded by stylesheets (`<style>`).

Similarly, a raw block intended for `pre` tag processing must contain a `<pre>` tag, which may be preceded by stylesheets.

## Modifying the translation

You can add your own Lua filters to add or change the translation of CSS properties into Typst properties.

Consult the Pandoc documentation for [Typst property output](https://pandoc.org/typst-property-output.html) and the source of the [Lua filter which translates CSS properties to Typst](https://github.com/quarto-dev/quarto-cli/blob/main/src/resources/filters/quarto-post/typst-css-property-processing.lua).

You can override the Typst CSS Lua filter's behavior by running your filter before it and removing CSS properties (untested). You can add support for other CSS properties by running your filter before or after the Typst CSS Lua filter.
```````

## File: docs/advanced/environment-vars.qmd
```````
---
title: "Environment Variables"
summary: Environment variables Quarto inspects and sets
format: html
---

## Variables Quarto inspects

These are variables that you can set to control how Quarto renders documents. For example, you can set them explicitly before running `quarto render`:

``` {.bash filename="Terminal"}
export QUARTO_R=/opt/R/4.2.3/bin
quarto render
```

You can read about other ways to set environment variables in Quarto Projects in [Environment Variables](/docs/projects/environment.qmd).

+---------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Variable                        | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
+=================================+=============================================================================================================================================================================================================================================================================================================================================================================================================================================================+
| `QUARTO_R`                      | Explicit path to the version of `Rscript` to be used by the `knitr` engine and `quarto run *.R` command.                                                                                                                                                                                                                                                                                                                                                    |
+---------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `QUARTO_PYTHON`                 | Explicit path to the version of `python` to be used by the `jupyter` engine and `quarto run *.py` command.                                                                                                                                                                                                                                                                                                                                                  |
+---------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `QUARTO_JULIA`                  | Explicit path to the version of `julia` to be used by the `julia` engine.                                                                                                                                                                                                                                                                                                                                                                                   |
+---------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `QUARTO_VERSION_REQUIREMENT`    | A [`semver`](https://semver.org/) string describing the Quarto version requested by the environment. If this check fails, Quarto will not run.                                                                                                                                                                                                                                                                                                              |
+---------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `QUARTO_KNITR_RSCRIPT_ARGS`     | Comma separated list of command line argument to pass to `Rscript` started by Quarto when rendering with `knitr` engine, e.g.                                                                                                                                                                                                                                                                                                                               |
|                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|                                 | ```                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|                                 | QUARTO_KNITR_RSCRIPT_ARGS="--no-init-file,--max-connections=258"                                                                                                                                                                                                                                                                                                                                                                                            |
|                                 | ```                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
+---------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `QUARTO_TEXLIVE_BINPATH`        | Explicit path to the TeX Live binaries to be passed to `tlmgr option sys_bin` used when setting `tlmgr` and related to `PATH` using `tlmgr add path` . By default, Quarto looks in known places.                                                                                                                                                                                                                                                            |
+---------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `QUARTO_CHROMIUM`               | Explicit path to binary to use for chrome headless. Quarto uses [Chrome Devtools Protocol](https://chromedevtools.github.io/devtools-protocol/) to do screenshot of HTML diagrams for PDF insertion. The binary must be compatible with this protocol. (e.g. Chrome, Chromium, Chrome Headless Shell, Edge, ...)                                                                                                                                            |
+---------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `QUARTO_CHROMIUM_HEADLESS_MODE` | Used for adaption of the `--headless` mode used with `QUARTO_CHROMIUM` binary. Set to `"none"` for `--headless` , or to `"old"` or `"new"` to pass as argument, e.g. `--headless=<QUARTO_CHROMIUM_HEADLESS_MODE>` . Quarto 1.6 sets `"old"` as default, which works from Chrome 112 to 131. Starting Quarto 1.7.13, `"none"` is the default as [Chrome 132 removed old headless mode](https://developer.chrome.com/blog/removing-headless-old-from-chrome). |
+---------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `QUARTO_LOG`                    | Those variables controls the logging behavior:                                                                                                                                                                                                                                                                                                                                                                                                              |
|                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `QUARTO_LOG_LEVEL`              | -   `QUARTO_LOG` is the same as using `--log` at command line. It is used to set the path to the log file                                                                                                                                                                                                                                                                                                                                                   |
|                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `QUARTO_LOG_FORMAT`             | -   `QUARTO_LOG_LEVEL` is the same as using `--log-level` at command line. It is used to set the max level that will be log. Possible values are `DEBUG`, `INFO`(default), `WARNING`, and `ERROR`.                                                                                                                                                                                                                                                          |
|                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|                                 | -   `QUARTO_LOG_FORMAT` is the same as using `--log-format` at command line. It is used to set the format for the log. Possible values are `plain` (default) and `json-stream`.                                                                                                                                                                                                                                                                             |
+---------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

## Variables Quarto sets

These variables are set by Quarto you can query them. For example, you can query them in an executable code cell:

::: panel-tabset
## R

``` r
Sys.getenv("QUARTO_DOCUMENT_PATH")
```

## Python

``` python
import os
print(os.environ["QUARTO_DOCUMENT_PATH"])
```

## Julia

``` julia
ENV["QUARTO_DOCUMENT_PATH"]
```
:::

+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Variable                                   | Description                                                                                                                                                                                     |
+============================================+=================================================================================================================================================================================================+
| `QUARTO_PROJECT_ROOT`                      | Root of the project, or the directory of the file if not in project mode                                                                                                                        |
+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `QUARTO_DOCUMENT_PATH`                     | Directory of the document being rendered                                                                                                                                                        |
+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `QUARTO_DOCUMENT_FILE`                     | Name of the file being rendered                                                                                                                                                                 |
+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `QUARTO_PROFILE`                           | Profile used, e.g `QUARTO_PROFILE=advanced,production` for `quarto render --profile advanced,production`                                                                                        |
+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `QUARTO_FIG_WIDTH` and `QUARTO_FIG_HEIGHT` | Values for `fig-width` and `fig-height` as set in the document metadata                                                                                                                         |
+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `QUARTO_RUN_NO_NETWORK`                    | When `true`, Quarto project scripts written in TypeScript won't be allowed to use the network to download sources. In this setting, those scripts will not have access to the standard library. |
+--------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
```````

## File: docs/advanced/index.qmd
```````
---
title: "Advanced User Documentation"
format: html
search: false
listing: 
  type: table
  fields: [title, summary]
  field-display-names:
    summary: Summary
---

Topics on this page may be of interest to advanced users of Quarto.
```````

## File: docs/authoring/_embed-examples/sample-notebook-view.qmd
```````
---
title: Exploration of penguin characteristics
author: Norah Jones
toc: true
notebook-view:
  - notebook: penguins.ipynb
    title: "Plots and Computations"
    url: https://colab.research.google.com/drive/12GsIPQ644SI4vkEEHiZn-Qqfbr-bD1
---

## How distinct are the species on the bill dimensions?

One interesting aspect of penguins is their bill shapes. Different species of penguins have bills that are adapted to their specific diet and habitat. 

{{< embed ../penguins.ipynb#fig-bill-marginal >}}

## What if we look at both dimensions together?
```````

## File: docs/authoring/_embed-examples/sample.qmd
```````
---
title: Exploration of penguin characteristics
author: Norah Jones
toc: true
---

## How distinct are the species on the bill dimensions?

One interesting aspect of penguins is their bill shapes. Different species of penguins have bills that are adapted to their specific diet and habitat. 

{{< embed ../penguins.ipynb#fig-bill-marginal >}}

## What if we look at both dimensions together?
```````

## File: docs/authoring/_figure-examples/_examples.qmd
```````
---
title: Examples used in `../figures.qmd`
fontsize: 1.5em
---

``` {.bash filename="Terminal"}
quarto render _examples.qmd
quarto render _examples.qmd --to pdf
quarto render _examples.qmd --to docx
quarto run take-screenshots.R
```

## Figure Basics

![Elephant](elephant.png){width="400px"}


## Subfigures

::: {#fig-elephants layout-ncol=2}

![Surus](surus.png){#fig-surus}

![Hanno](hanno.png){#fig-hanno}

Famous Elephants
:::

## Figure Panels

::: {#elephant-figures-no-subcaption layout-ncol=2}
![Surus](surus.png)

![Hanno](hanno.png)
:::

## Multiple Rows

::: {#elephant-rows layout-nrow=2}
![Surus](surus.png)

![Hanno](hanno.png)

![Abdul Abbas](abdul-abbas.png)

![Lin Wang](lin-wang.png)
:::

## Custom Layouts

::: {#layout-attrib layout="[[1,1], [1]]"}
![Surus](surus.png)

![Hanno](hanno.png)

![Lin Wang](lin-wang.png)
:::

::: {#layout-attrib-negative layout="[[40,-20,40], [100]]"}
![Surus](surus.png)

![Hanno](hanno.png)

![Lin Wang](lin-wang.png)
:::

## Vertical Alignment

::: {#valign layout="[15,-2,10]" layout-valign="bottom"}
![Surus](surus.png)

![Lin Wang](lin-wang.png)
:::
```````

## File: docs/authoring/_mermaid-examples/customize.qmd
```````
---
format:
  html:
    css: custom.css
---

```{mermaid}
flowchart LR
  qmd --> J([Jupyter])
  qmd --> K([knitr])
  J --> md
  K --> md
  md --> P([pandoc])
  P --> pdf
  P --> html
  P --> docx
```
```````

## File: docs/authoring/_mermaid-examples/dark.qmd
```````
---
format:
  html:
    mermaid:
      theme: dark
---

```{mermaid}
flowchart LR
  qmd --> J([Jupyter])
  qmd --> K([knitr])
  J --> md
  K --> md
  md --> P([pandoc])
  P --> pdf
  P --> html
  P --> docx
```
```````

## File: docs/authoring/_mermaid-examples/darkly.qmd
```````
---
format:
  html:
    theme: darkly
---

## Quarto Render

```{mermaid}
flowchart LR
  qmd --> J([Jupyter])
  qmd --> K([knitr])
  J --> md
  K --> md
  md --> P([pandoc])
  P --> pdf
  P --> html
  P --> docx
```

Read more on the [Quarto documentation site](https://quarto.org)
```````

## File: docs/authoring/_mermaid-examples/default.qmd
```````
---
format:
  html:
    mermaid:
      theme: default
---

```{mermaid}
flowchart LR
  qmd --> J([Jupyter])
  qmd --> K([knitr])
  J --> md
  K --> md
  md --> P([pandoc])
  P --> pdf
  P --> html
  P --> docx
```
```````

## File: docs/authoring/_mermaid-examples/forest.qmd
```````
---
format:
  html:
    mermaid:
      theme: forest
---

```{mermaid}
flowchart LR
  qmd --> J([Jupyter])
  qmd --> K([knitr])
  J --> md
  K --> md
  md --> P([pandoc])
  P --> pdf
  P --> html
  P --> docx
```
```````

## File: docs/authoring/_mermaid-examples/neutral.qmd
```````
---
format:
  html:
    mermaid:
      theme: neutral
---

```{mermaid}
flowchart LR
  qmd --> J([Jupyter])
  qmd --> K([knitr])
  J --> md
  K --> md
  md --> P([pandoc])
  P --> pdf
  P --> html
  P --> docx
```
```````

## File: docs/authoring/_mermaid-examples/sandstone.qmd
```````
---
format:
  html:
    theme: sandstone
---

## Quarto Render

```{mermaid}
flowchart LR
  qmd --> J([Jupyter])
  qmd --> K([knitr])
  J --> md
  K --> md
  md --> P([pandoc])
  P --> pdf
  P --> html
  P --> docx
```

Read more on the [Quarto documentation site](https://quarto.org)
```````

## File: docs/authoring/_mermaid-examples/solar.qmd
```````
---
format:
  html:
    theme: sandstone
---

## Quarto Render

```{mermaid}
flowchart LR
  qmd --> J([Jupyter])
  qmd --> K([knitr])
  J --> md
  K --> md
  md --> P([pandoc])
  P --> pdf
  P --> html
  P --> docx
```

Read more on the [Quarto documentation site](https://quarto.org)
```````

## File: docs/authoring/_mermaid-examples/vapor.qmd
```````
---
format:
  html:
    theme: vapor
---

## Quarto Render

```{mermaid}
flowchart LR
  qmd --> J([Jupyter])
  qmd --> K([knitr])
  J --> md
  K --> md
  md --> P([pandoc])
  P --> pdf
  P --> html
  P --> docx
```

Read more on the [Quarto documentation site](https://quarto.org)
```````

## File: docs/authoring/code-annotation-example/revealjs.qmd
```````
---
format: revealjs
code-annotations: hover
---

## Reveal Presentation

``` r
library(tidyverse)
library(palmerpenguins)
penguins |>                                      # <1>
  mutate(                                        # <2>
    bill_ratio = bill_depth_mm / bill_length_mm, # <2>
    bill_area  = bill_depth_mm * bill_length_mm  # <2>
  )                                              # <2>
```

1.  Take `penguins`, and then,
2.  add new columns for the bill ratio and bill area.
```````

## File: docs/authoring/_brand-example.qmd
```````
As an example, consider the following `_brand.yml` file:

``` {.yaml filename="_brand.yml"}
color:
  palette:
    dark-grey: "#222222"
    blue: "#ddeaf1"
  background: blue
  foreground: dark-grey
  primary: black

logo: 
  medium: logo.png

typography:
  fonts:
    - family: Jura
      source: google
  base: Jura
  headings: Jura
```

When this `_brand.yml` is placed in a project, webpages, presentations, PDF reports, and dashboards will share a common appearance:

::::::: {.column-body-outset-right layout-ncol="4"}
::: {}
![Webpage: `html`](/docs/authoring/images/brand-html.png){.lightbox group="brand-formats" fig-alt="Screenshot of a webpage. The text is dark grey on a light blue background, using a rounded sans-serif typeface, a logo appears in the navbar."}
:::

::: {}
![Dashboard `dashboard`](/docs/authoring/images/brand-dashboard.png){.lightbox group="brand-formats" fig-alt="Screenshot of a dashboard. The text is dark grey on a light blue background, using a rounded sans-serif typeface, a logo appears in the navbar."}
:::

::: {}
![Presentation: `revealjs`](/docs/authoring/images/brand-revealjs.png){.lightbox group="brand-formats" fig-alt="Screenshot of a presentation. The text is dark grey on a light blue background, using a rounded sans-serif typeface, a logo appears in bottom left of the slide."}
:::

:::{}
![PDF: `typst`](/docs/authoring/images/brand-typst.png){.lightbox group="brand-formats" fig-alt="Screenshot of a PDF document. The text is dark grey on a light blue background, using a rounded sans-serif typeface, a logo appears in top right of the page."}
::: 
:::


View the example: [Source](https://github.com/quarto-dev/quarto-examples/tree/main/brand/brand-simple#brand-simple) | [Live website](https://examples.quarto.pub/brand-simple)
```````

## File: docs/authoring/_cross-reference-divs-diagram.qmd
```````
To create a cross-references to a diagram using div syntax, treat it like a figure. For example, @fig-simple is created using:

````markdown
::: {#fig-simple}

```{dot}
graph {
  A -- B
}
```

This is a simple graphviz graph
:::
````

::: {#fig-simple .column-margin}

```{dot}
//| fig-width: 1.5
graph {
  A -- B
}
```

This is a simple graphviz graph
:::

If you would rather give diagrams a label and counter distinct from figures, consider defining [Custom Cross-Reference Types](cross-references-custom.qmd).
```````

## File: docs/authoring/_cross-reference-divs-figure.qmd
```````
To create a cross-reference to a figure using div syntax, create a fenced div with an id starting with `fig-`, include the image followed by the caption inside the div:

````markdown
::: {#fig-elephant}

![](elephant.png)

An Elephant
:::
````
```````

## File: docs/authoring/_cross-reference-divs-listing.qmd
```````
To create a cross-reference to a code listing using div syntax, create a fenced div with an id starting with `lst-`, include the code cell followed by the caption inside the div:   

````markdown
::: {#lst-customers}

```{.sql}
SELECT * FROM Customers
```

Customers Query

:::
````
```````

## File: docs/authoring/_cross-reference-divs-table.qmd
```````
To create a cross-reference to a table using div syntax, create a fenced div with an id starting with `tbl-`, include the table followed by the caption inside the div:

````markdown
::: {#tbl-letters}

| Col1 | Col2 | Col3 |
|------|------|------|
| A    | B    | C    |
| E    | F    | G    |
| A    | G    | G    |

My Caption

::: 
````
```````

## File: docs/authoring/_cross-reference-divs-video.qmd
```````
To add a cross-reference to a video, use the [cross-reference div syntax](cross-references-divs.qmd) and treat it like a figure. For example, 

````{.markdown shortcodes=false}
::: {#fig-cern}

{{< video https://www.youtube.com/embed/wo9vZccmqwc >}}

The video "CERN: The Journey of Discovery"

:::

In @fig-cern...
````

Which renders as:

![](images/crossrefs-video.png){fig-alt="Screenshot that shows a YouTube video followed by the caption, 'Figure 1: The video CERN: The Journey of Discovery'. Below the caption is the text 'In Figure 1 ...'."}

If you would rather give videos a label and counter distinct from figures, consider defining [Custom Cross-Reference Types](cross-references-custom.qmd).
```````

## File: docs/authoring/_cross-references-callouts.qmd
```````
To cross-reference a callout, add an ID attribute that starts with the appropriate callout prefix (see @tbl-callout-prefixes). You can then reference the callout using the usual `@` syntax. For example, here we add the ID `#tip-example` to the callout, and then refer back to it:

``` markdown
::: {#tip-example .callout-tip}
## Cross-Referencing a Tip

Add an ID starting with `#tip-` to reference a tip.
:::

See @tip-example...
```

This renders as follows:

::: {.border .p-3}
::: {#tip-example .callout-tip}
## Cross-Referencing a Tip

Add an ID starting with `#tip-` to reference a tip.
:::

See @tip-example...
:::

The prefixes for each type of callout are:

| Callout Type | Prefix  |
|--------------|---------|
| `note`       | `#nte-` |
| `tip`        | `#tip-` |
| `warning`    | `#wrn-` |
| `important`  | `#imp-` |
| `caution`    | `#cau-` |

: Prefixes for callout cross-references {#tbl-callout-prefixes}
```````

## File: docs/authoring/_cross-references-listings.qmd
```````
To cross-reference code from an executable code block, add the code cell options `lst-label` and `lst-cap`. The option `lst-label` provides the cross reference identifier and must begin with the prefix `lst-` to be treated as a code listing. The value of `lst-cap` provides the caption for the code listing. For example:

````{.markdown}
```{{python}}
#| lst-label: lst-import
#| lst-cap: Import pyplot

import matplotlib.pyplot as plt
```

@lst-import...
````

When rendered, this results in the following:

::: {.border .p-3}

```{python}
#| lst-label: lst-import
#| lst-cap: Import pyplot

import matplotlib.pyplot as plt
```

@lst-import...

:::

If the code cell produces a figure or table, you can combine the `lst-` options with `label` and `fig-cap`/`tbl-cap` to create cross references to both the code and output:

````{.markdown}
```{{python}}
#| label: fig-plot
#| fig-cap: Figure caption
#| lst-label: lst-plot
#| lst-cap: Listing caption

plt.plot([1,23,2,4])
plt.show()
```

The code in @lst-plot produces the figure in @fig-plot.
````

When rendered, this produces the following output:

:::{.border .p-3}
```{python}
#| label: fig-plot
#| fig-cap: Figure caption
#| lst-label: lst-plot
#| lst-cap: Listing caption

plt.plot([1,23,2,4])
plt.show()
```

The code in @lst-plot produces the plot in @fig-plot.
:::
```````

## File: docs/authoring/_embeds-ipynb.qmd
```````
An alternative to including computations directly in the article notebook is to embed output from other notebooks. This manuscript project includes the notebook `data-screening.ipynb` in the `notebooks/` folder.

To embed output from a notebook, you can use the `embed` shortcode. Quarto shortcodes are special markdown directives that generate content. The `embed` shortcode is used in `{{< meta tool.article-file >}}` in the line:

``` {.markdown shortcodes="false"}
{{< embed notebooks/data-screening.ipynb#fig-spatial-plot >}}
```

The double curly braces (`{{`) and angle brackets (`<`) indicate this is a shortcode. The `embed` shortcode requires a path to a notebook cell. In this case, it's the file path to `data-screening.ipynb`, followed by `#` and a cell identifier. Here, the cell identifier is the cell label, set using the Quarto cell option `label` in code cell in the `data-screening.ipynb` notebook:

``` {.python filename="data-screening.ipynb"}
#| label: fig-spatial-plot
#| fig-cap: "Locations of earthquakes on La Palma since 2017."
#| fig-alt: "A scatterplot of earthquake locations plotting latitude 
#|   against longitude."
from matplotlib import colormaps
cmap = colormaps['viridis_r']
ax = df.plot.scatter(x="Longitude", y="Latitude", 
                     s=40-df["Depth(km)"], c=df["Magnitude"], 
                     figsize=(12,10), grid="on", cmap=cmap)
colorbar = ax.collections[0].colorbar
colorbar.set_label("Magnitude")

plt.show()
```

Just like any figure, using a label starting with `fig-` allows it to be cross referenced in the text. Any other options, like the figure caption (`fig-cap`) and alt text (`fig-alt`), can also be set in the source notebook.

In this manuscript, the notebook `data-screening.ipynb` isn't reproducible: you can't regenerate all the outputs because some inputs (e.g. the data) aren't included in the project. However, you can change the Quarto cell options without rerunning the code cells in the notebook. If you edit the caption to:

``` python
#| fig-cap: "Earthquakes on La Palma since 2017."
```

When you save `data-screening.ipynb`, you'll find the preview updates and the caption is reflected in the article itself.
```````

## File: docs/authoring/_kbd.qmd
```````
{{< include ../_require-1.3.qmd >}}

The `kbd` [shortcode](shortcodes.qmd) can be used to describe keyboard shortcuts in documentation. On Javascript formats, it will attempt to detect the operating system of the format and show the correct shortcut. On print formats, it will print the keyboard shortcut information for all operating systems.

For example, writing the following markdown:

``` md
To print, press {{{< kbd Shift-Ctrl-P >}}}. To open an existing new project, press {{{< kbd mac=Shift-Command-O win=Shift-Control-O linux=Shift-Ctrl-L >}}}.
```

will render the keyboard shortcuts as:

To print, press {{< kbd Shift-Ctrl-P >}}. To open an existing new project, press {{< kbd mac=Shift-Command-O win=Shift-Control-O linux=Shift-Ctrl-L >}}.
```````

## File: docs/authoring/_mermaid-theming.qmd
```````
{{< include ../_require-1.3.qmd >}}

The following sections describe the ways in which you can control the color theme of Mermaid diagrams:

- Using the current document theme.
- Using one of Mermaid's own color themes via a YAML option.
- Using SCSS and CSS variables.

### Default Colors for Mermaid Diagrams

If you use Quarto's [bootswatch built-in themes](/docs/output-formats/html-themes.qmd), including the default theme, or a custom theme that uses the same SCSS variables, your Mermaid diagrams will automatically follow your theme.

The following examples demonstrate this with a few of Quarto's built-in bootswatch themes.

::: panel-tabset

## Darkly

![](images/mermaid-darkly.png){fig-alt="A screenshot of a Mermaid flowchart in a document using bootswatch's Darkly theme."}

## Sandstone

![](images/mermaid-sandstone.png){fig-alt="A screenshot of a Mermaid flowchart in a document using bootswatch's Sandstone theme."}

## Vapor

![](images/mermaid-vapor.png){fig-alt="A screenshot of a Mermaid flowchart in a document using bootswatch's Vapor theme."}
:::

You can read more about the correspondence between Bootstrap's SCSS variables and Quarto's Mermaid SCSS variables, and how to change it, below in [Customizing the Mermaid Theme](#customizing-mermaid).

### Using Mermaid's Built-in Themes

If you want to use Mermaid's own themes, you can do so by configuring the `mermaid` option in your YAML front matter:

``` yml
format:
  html:
    mermaid:
      theme: forest
```

The available themes from mermaid are: `default`, `dark`, `forest`, and `neutral`.

::: panel-tabset
## default

![](images/mermaid-default.png){fig-alt="A screenshot of a Mermaid flowchart using the Mermaid's default theme."}

## dark

![](images/mermaid-dark.png){fig-alt="A screenshot of a Mermaid flowchart using the Mermaid's dark theme."}

## forest

![](images/mermaid-forest.png){fig-alt="A screenshot of a Mermaid flowchart using the Mermaid's forest theme."}

## neutral

![](images/mermaid-neutral.png){fig-alt="A screenshot of a Mermaid flowchart using the Mermaid's neutral theme."}

:::

### Customizing the Mermaid Theme {#customizing-mermaid}

Quarto provides its own Mermaid SCSS and CSS variables that can be overwritten to allow some customization of the diagram theme. The SCSS variables, together with their default values, are:

<!-- This comes from quarto-dev/quarto-cli/src/resources/formats/html/_quarto-rules.scss -->

``` scss
$mermaid-bg-color: $body-bg;
$mermaid-edge-color: $secondary;
$mermaid-node-fg-color: $body-color;
$mermaid-fg-color: $body-color;
$mermaid-fg-color--lighter: lighten($body-color, 10%);
$mermaid-fg-color--lightest: lighten($body-color, 20%);
$mermaid-font-family: $font-family-sans-serif;
$mermaid-label-bg-color: $body-bg;
$mermaid-label-fg-color: $primary;
$mermaid-node-bg-color: rgba($primary, 0.1);
$mermaid-node-fg-color: $primary;

```

Their CSS variable counterparts are:

``` css
:root {
  --mermaid-bg-color: #{$mermaid-bg-color};
  --mermaid-edge-color: #{$mermaid-edge-color};
  --mermaid-node-fg-color: #{$mermaid-node-fg-color};
  --mermaid-fg-color: #{$mermaid-fg-color};
  --mermaid-fg-color--lighter: #{$mermaid-fg-color--lighter};
  --mermaid-fg-color--lightest: #{$mermaid-fg-color--lightest};
  --mermaid-font-family: #{$mermaid-font-family};
  --mermaid-label-bg-color: #{$mermaid-label-bg-color};
  --mermaid-label-fg-color: #{$mermaid-label-fg-color};
  --mermaid-node-bg-color: #{$mermaid-node-bg-color};
  --mermaid-node-fg-color: #{$mermaid-node-fg-color};
}
```

For example, to provide a custom color for the background of the nodes you could [add a custom CSS stylesheet](/docs/output-formats/html-basics.qmd#css-styles) containing:

```css
:root {
  --mermaid-node-bg-color: #375a7f;
}
```

You can find the correspondence between Quarto's variables and Mermaid's native CSS classes in Quarto's source code in the file [embed-mermaid.css](https://github.com/quarto-dev/quarto-cli/blob/main/src/resources/formats/html/mermaid/embed-mermaid.css).
```````

## File: docs/authoring/_pagebreak.qmd
```````
## Page Breaks

The `pagebreak` [shortcode](shortcodes.qmd) enables you to insert a native pagebreak into a document (.e.g in LaTeX this would be a `\newpage`, in MS Word a docx-native pagebreak, in HTML a `page-break-after: always` CSS directive, etc.):

```{.markdown shortcodes="false"}
page 1

{{< pagebreak >}}

page 2
```

Native pagebreaks are supported for HTML, LaTeX, Context, MS Word, Open Document, and ePub (for other formats a form-feed character `\f` is inserted).
```````

## File: docs/authoring/_shortcodes.qmd
```````
## Overview

Shortcodes are special markdown directives that generate various types of content. Quarto shortcodes are similar in form and function to [Hugo shortcodes](https://gohugo.io/content-management/shortcodes/) and [WordPress shortcodes](https://codex.wordpress.org/Shortcode).

For example, the following shortcode prints the `title` from document metadata:

``` {.markdown shortcodes="false"}
{{< meta title >}}
```

## Built-in Shortcodes

Quarto supports several shortcodes natively:

| Shortcode                                                     | Description                              |
|---------------------------------------------------------------|------------------------------------------|
| [version](/docs/authoring/version.qmd)                        | Print Quarto CLI version                 |
| [var](/docs/authoring/variables.qmd#var)                      | Print value from `_variables.yml` file   |
| [meta](/docs/authoring/variables.qmd#meta)                    | Print value from document metadata       |
| [env](/docs/authoring/variables.qmd#url)                      | Print system environment variable        |
| [pagebreak](/docs/authoring/markdown-basics.qmd#page-breaks)  | Insert a native page-break               |
| [kbd](/docs/authoring/markdown-basics.qmd#keyboard-shortcuts) | Describe keyboard shortcuts              |
| [video](/docs/authoring/videos.qmd)                           | Embed a video in a document              |
| [include](/docs/authoring/includes.qmd)                       | Include contents of another qmd          |
| [embed](/docs/authoring/notebook-embed.qmd)                   | Embed cells from a Jupyter Notebook      |
| [placeholder](/docs/authoring/placeholder.qmd)                | Add placeholder images to your document  |
| [lipsum](/docs/authoring/lipsum.qmd)                          | Add placeholder text to your document    |
| [contents](/docs/authoring/contents.qmd)                      | Rearrange content in your document       |
```````

## File: docs/authoring/appendices.qmd
```````
---
title: Appendices
---

## Overview

HTML pages rendered with Quarto include a formatted appendix at the end of the article. The appendix includes sections for citations and footnotes in the document, as well the attribution information (if specified) for the document itself.

A simple example document appendix looks like:

![](images/document-appendix-simple.png){.border fig-alt="Appendix with two sections: References, and Footnotes."}

To learn more about including document attribution information in the appendix, see [Creating Citeable Articles](/docs/authoring/create-citeable-articles.qmd).

## Custom Appendix Sections

Sections of your document can be added to the Appendix that appears at the end of your article by adding the `.appendix` class to any heading. For example:

``` yaml
## Acknowledgments {.appendix}

I am grateful for the insightful comments offered by the anonymous peer reviewers at Books & Texts. The generosity and expertise of one and all have improved this study in innumerable ways and saved me from many errors; those that inevitably remain are entirely my own responsibility.
```

Any sections marked with the `.appendix` class will be included at the front of the appendix in the order in which they appear in the document. A more complete example appendix including attribution and the above custom appendix section looks like:

![](images/document-appendix-full.png){.border fig-alt="Appendix with Acknowledgements, References, Footnes, and Citation sections. The Citation section contains both BibTex citation, and plain text for attribution."}

## License

If you include a license in the front matter or citation information for your document, a 'Reuse' section will automatically be added to the appendix. Read more about specifying a license in [Front Matter](/docs/authoring/front-matter.qmd#license).

Here is an example of a complete appendix including all the fields with an Attribution-ShareAlike Creative Commons license.

![](images/document-appendix-reuse.png){.border fig-alt="Appendix with Acknowledgements, References, Footnotes, Reuse, and Citation sections. The Reuse section contains a link to the Attribution-ShareAlike Creative Commons license."}


## Appendix Style

You can control how Quarto process the appendix of your document using the `appendix-style` option. There are three options available:

`default`

:   The default appendix treatment create a smaller font face and gathers the various sections into stylized groups at the end of the document.

`plain`

:   The plain treatment will do all the appendix processing (gathering and organizing the sections at the end of the document, creating sections like 'Reuse'), but will not apply the default appendix styling.

`none`

:   `none` disables appendix processing altogether. Content will not be processed or organized and information like 'Citation' and 'Reuse' will not be included in the document.
```````

## File: docs/authoring/article-layout.qmd
```````
---
title: "Article Layout"
format: html
reference-location: margin
citation-location: margin
aliases:
  - page-layout.html
---

## Overview

Quarto supports a variety of page layout options that enable you to author content that:

-   Fills the main content region
-   Overflows the content region
-   Spans the entire page
-   Occupies the document margin
-   Uses landscape mode in paginated formats

Quarto uses the concept of columns to describe page layout (e.g. the "body" column, the "margin" column, etc.). Below we'll describe how to arrange content into these columns. If you need to adjust the widths of the columns, see [Page Layout - Grid Customization](/docs/output-formats/page-layout.qmd#grid-customization).

All of the layout capabilities described in this document work for HTML output and many work for PDF and LaTeX output. For details about the PDF / LaTeX output, see [PDF/LaTeX Layout].

## Body Column

By default, elements are position in the body of the document and are allowed to span the content of the document, like the below.

::: {.layout-example .column-body}
.column-body
:::

But if you'd like, you can extend content slightly outside the bounds of the body by creating a div with the .`column-body-outset` class. For example:

``` markdown
:::{.column-body-outset}
Outset content...
:::
```

::: {.layout-example .column-body-outset}
.column-body-outset
:::

## Page Column

If you need even more space for your content, you can use the `.column-page` class to make the content much wider, though stopping short of extending across the whole document.

::: {.layout-example .column-page}
.column-page
:::

For example, to create a wider image, you could use:

``` markdown
:::{.column-page}
![](images/elephant.jpg)
:::
```

::: column-page
![](images/elephant.jpg){fig-alt="Three walking elephants in silhouette against the backdrop of a sunset."}
:::

For computational output, you can specify the page column in your code cell options. For example:

```{r}
#| column: page
#| echo: fenced

knitr::kable(
  mtcars[1:6, 1:10]
)
```

In addition, you can use `.column-page-inset` to inset the element from the page slightly, like so:

::: {.layout-example .column-page-inset}
.column-page-inset
:::

## Screen Column

You can have content span the full width of the page with no margin (full bleed). For this, use the `.column-screen` class or specify `column: screen` on a code cell. For example:

``` md
::: {.column-screen}
![A full screen image](/image.png)
:::
```

::: {.layout-example .column-screen}
.column-screen
:::

The following code displays a Leaflet map across the whole page.

```{r}
#| column: screen
#| echo: fenced

library(leaflet)
leaflet() %>%
  addTiles() %>%  # Add default OpenStreetMap map tiles
  addMarkers(lng=174.768, lat=-36.852, popup="The birthplace of R")
```

### Screen Inset

If you'd like a full width appearance, but would like to retain a margin, you can use inset or inset-shaded modifiers on the column. For example:

``` md
::: {.column-screen-inset}
![A full screen image](/image.png)
:::
```

::: {.layout-example .column-screen-inset}
.column-screen-inset
:::

The inset-shaded modifier results in a block spanning the full width but wrapped with a lightly shaded background. For example:

```{r}
#| column: screen-inset-shaded
#| echo: fenced

library(leaflet)
leaflet() %>%
  addTiles() %>%  # Add default OpenStreetMap map tiles
  addMarkers(lng=174.768, lat=-36.852, popup="The birthplace of R")
```

Column layouts like `screen-inset-shaded` will work with advanced figure layout. For example, it is straightforward to create a multi column presentation of figures that spans the document:

```{r}
#| column: screen-inset-shaded
#| layout-nrow: 1
#| echo: fenced

plot(cars)
plot(iris)
plot(pressure)
```

## Margin Content

You can place content within the right margin of Quarto document. For example, here we use the `.column-margin` class to place an image in the margin:

``` md
::: {.column-margin}
![A margin image](image.png)
:::
```

::: {.layout-example .column-margin style="margin-top: 18px;"}
.column-margin
:::

This also works for text content:

``` md
::: {.column-margin}
We know from *the first fundamental theorem of calculus* that for $x$ in $[a, b]$:

$$\frac{d}{dx}\left( \int_{a}^{x} f(u)\,du\right)=f(x).$$
:::
```

::: column-margin
We know from *the first fundamental theorem of calculus* that for $x$ in $[a, b]$:

$$\frac{d}{dx}\left( \int_{a}^{x} f(u)\,du\right)=f(x).$$
:::

### Margin Figures

Figures that you create using code cells can be placed in the margin by using the `column: margin` code cell option. If the code produces more than one figure, each of the figures will be placed in the margin.

```{r}
#| label: fig-mtcars
#| fig-cap: "MPG vs horsepower, colored by transmission."
#| column: margin
#| echo: fenced

library(ggplot2)
mtcars2 <- mtcars
mtcars2$am <- factor(
  mtcars$am, labels = c('automatic', 'manual')
)
ggplot(mtcars2, aes(hp, mpg, color = am)) +
  geom_point() +
  geom_smooth(formula = y ~ x, method = "loess") +
  theme(legend.position = 'bottom')
```

### Margin Tables

You can also place tables in the margin of your document by specifying `column: margin`.

```{r}
#| column: margin
#| echo: fenced

knitr::kable(
  mtcars[1:6, 1:3]
)
```

### Multiple Outputs

You can also target specific output types (for example, figures) to be placed in the margin. For example, the following code will render a table showing part of the `mtcars` dataset and produce a plot in the margin next to the table.

```{r}
#| fig-column: margin
#| echo: fenced

mtcars2 <- mtcars
mtcars2$am <- factor(
  mtcars$am, labels = c('automatic', 'manual')
)

knitr::kable(
  mtcars[1:6, 1:6]
)

library(ggplot2)
ggplot(mtcars2, aes(hp, mpg, color = am)) +
  geom_point() +
  geom_smooth(formula = y ~ x, method = "loess") +
  theme(legend.position = 'bottom')
```

{{< include _pagebreak.qmd >}}

## Margin References

Footnotes and the bibliography typically appear at the end of the document, but you can choose to have them placed in the margin by setting the following option[^1] in the document front matter:

``` yaml
---
reference-location: margin
citation-location: margin
---
```

With these options set, footnotes and citations will (respectively) be automatically be placed in the margin of the document rather than the bottom of the page. As an example, when I cite @xie2018, the citation bibliography entry itself will now appear in the margin.

### Asides

Asides allow you to place content aside from the content it is placed in. Asides look like footnotes, but do not include the footnote mark (the superscript number). [This is a span that has the class `aside` which places it in the margin without a footnote number.]{.aside}

``` markdown
[This is a span that has the class `aside` which places it in the margin without a footnote number.]{.aside}
```

## Margin Captions

For figures and tables, you may leave the content in the body of the document while placing the caption in the margin of the document. Using `cap-location: margin` in a code cell or document front matter to control this. For example:

```{r}
#| label: fig-cap-margin
#| fig-cap: "MPG vs horsepower, colored by transmission."
#| cap-location: margin
#| echo: fenced

library(ggplot2)
mtcars2 <- mtcars
mtcars2$am <- factor(
  mtcars$am, labels = c('automatic', 'manual')
)
ggplot(mtcars2, aes(hp, mpg, color = am)) +
  geom_point() +
  geom_smooth(formula = y ~ x, method = "loess") +
  theme(legend.position = 'bottom')
```

## Overflowing Content

You can also extend content outside the body region on only the left or right side of the document by using the `right` and `left` versions of the `body`, `page`, and `screen` columns to layout your content. The `left` or `right` version of these columns are as follows:

::: {.layout-example .column-body-outset-right .left}
.column-body-outset-right
:::

::: {.layout-example .column-page-inset-right .left}
.column-page-inset-right
:::

::: {.layout-example .column-page-right .left}
.column-page-right
:::

::: {.layout-example .column-screen-inset-right .left}
.column-screen-inset-right
:::

::: {.layout-example .column-screen-right .left}
.column-screen-right
:::

::: {.layout-example .column-body-outset-left .right}
.column-body-outset-left
:::

::: {.layout-example .column-page-inset-left .right}
.column-page-inset-left
:::

::: {.layout-example .column-page-left .right}
.column-page-left
:::

::: {.layout-example .column-screen-inset-left .right}
.column-screen-inset-left
:::

::: {.layout-example .column-screen-left .right}
.column-screen-left
:::

Use a div with one of the above classes to align content into one of the overflow regions. This also works using the `column` option of executable code cells:

```{r}
#| column: screen-inset-right
#| echo: fenced

library(leaflet)
leaflet() %>%
  addTiles() %>%  # Add default OpenStreetMap map tiles
  addMarkers(lng=174.768, lat=-36.852, popup="The birthplace of R")
```

## Options Reference

### Global Options

Some layout options can be specified globally in document yaml. For example:

``` yaml
---
fig-cap-location: margin
reference-location: margin
---
```

All of the below options currently only support setting a value of `margin` which tells Quarto to place the corresponding element in the margin.

+----------------------+---------------------------------------------------------------------------------------------------------+
| Option               | Description                                                                                             |
+======================+=========================================================================================================+
| `reference-location` | Where to place footnotes. Defaults to `document`.\                                                      |
|                      | \[`document` \| `section` \| `block` \| `margin` \]                                                     |
+----------------------+---------------------------------------------------------------------------------------------------------+
| `citation-location`  | Where to place citations. Defaults to `document`.\                                                      |
|                      | \[`document` \| `margin` \]                                                                             |
+----------------------+---------------------------------------------------------------------------------------------------------+
| `cap-location`       | Where to place figure and table captions. Defaults to `bottom` for figures and `top` for tables.\ |
|                      | \[`top` \| `bottom` \| `margin`\]                                                                       |
+----------------------+---------------------------------------------------------------------------------------------------------+
| `fig-cap-location`   | Where to place figure captions. Defaults to `bottom`.\                                                  |
|                      | \[`top` \| `bottom` \| `margin`\]                                                                       |
+----------------------+---------------------------------------------------------------------------------------------------------+
| `tbl-cap-location`   | Where to place table captions. Defaults to `top`.\                                                      |
|                      | \[`top` \| `bottom` \| `margin`\]                                                                       |
+----------------------+---------------------------------------------------------------------------------------------------------+

### Code Cell Options

You can also set layout column on specific code cells. This controls the layout of content that is produced by the code cell.

```{{r}}
#| column: page

plot(cars)
```

::: column-page-right
+--------------------+------------------------------------------------------------------------------------------------------------------------------+
| Option             | Description                                                                                                                  |
+====================+==============================================================================================================================+
| `column`           | Layout column to use for code cell outputs. See column options below.                                                        |
+--------------------+------------------------------------------------------------------------------------------------------------------------------+
| `fig-column`       | Layout column to use for code cell figure outputs. See column options below.                                                 |
+--------------------+------------------------------------------------------------------------------------------------------------------------------+
| `tbl-column`       | Layout column to use for code cell table outputs. See column options below.                                                  |
+--------------------+------------------------------------------------------------------------------------------------------------------------------+
| `cap-location`     | Where to place figure and table captions produced by this code cell. Defaults to `bottom` for figures and `top` for tables.\ |
|                    | \[`top` \| `bottom` \| `margin`\]                                                                                            |
+--------------------+------------------------------------------------------------------------------------------------------------------------------+
| `fig-cap-location` | Where to place captions for figures produced by this code cell. Defaults to `inline`.\                                       |
|                    | \[`inline` \| `margin`\]                                                                                                     |
+--------------------+------------------------------------------------------------------------------------------------------------------------------+
| `tbl-cap-location` | Where to place captions for tables produced by this code cell. Defaults to `inline`.\                                        |
|                    | \[`inline` \| `margin`\]                                                                                                     |
+--------------------+------------------------------------------------------------------------------------------------------------------------------+
:::

### Using Classes

In addition to global and code cell specific options, you may use divs with layout classes (prefixed with `.column-`) to arrange content into columns:

``` md
::: {.column-margin}
This content will appear in the margin!
:::
```

### Available Columns

Here are all of the available column specifiers:

::: column-page-right
+--------------+---------------------------------+---------------------------------+
| Column       | Code Cell `column`              | Class Name                      |
+==============+=================================+=================================+
| Body         |     column: body                |     .column-body                |
|              |     column: body-outset         |     .column-body-outset         |
|              |     column: body-outset-left    |     .column-body-outset-left    |
|              |     column: body-outset-right   |     .column-body-outset-right   |
+--------------+---------------------------------+---------------------------------+
| Page Inset   |     column: page-inset          |     .column-page-inset          |
|              |     column: page-inset-left     |     .column-page-inset-left     |
|              |     column: page-inset-right    |     .column-page-inset-right    |
+--------------+---------------------------------+---------------------------------+
| Page         |     column: page                |     .column-page                |
|              |     column: page-left           |     .column-page-left           |
|              |     column: page-right          |     .column-page-right          |
+--------------+---------------------------------+---------------------------------+
| Screen Inset |     column: screen-inset        |     .column-screen-inset        |
|              |     column: screen-inset-shaded |     .column-screen-inset-shaded |
|              |     column: screen-inset-left   |     .column-screen-inset-left   |
|              |     column: screen-inset-right  |     .column-screen-inset-right  |
+--------------+---------------------------------+---------------------------------+
| Screen       |     column: screen              |     .column-screen              |
|              |     column: screen-left         |     .column-screen-left         |
|              |     column: screen-right        |     .column-screen-right        |
+--------------+---------------------------------+---------------------------------+
| Margin       |     column: margin              |     .column-margin              |
+--------------+---------------------------------+---------------------------------+
:::

## PDF/LaTeX Layout {data-link="PDF/LaTeX Layout"}

While most of the layout capabilities described are supported for both HTML and PDF output, some are available only for HTML output. You can use the full set of columns for HTML. Then, when you render PDF or LaTeX output, content will automatically be placed in the most appropriate related column (typically this will mean using the main column and right margin). Here is how columns are mapped:

-   Any column that uses the right margin (e.g. `page`, `screen`, `screen-right`, etc.) will be rendered as `page-right` in LaTeX.
-   Any column that uses the left margin will be rendered as normal body content.

### Page Geometry

When you render a PDF using content in the margin or content that spans the page, Quarto will automatically adjust the page geometry for the default Quarto LaTeX document classes (KOMA `scrartcl`, `scrreport`, or `scrbook`) to create a slightly narrower body content region and a slightly wider margin region. This adjustment will incorporate known paper sizes to create a reasonable page geometry for most content.

You can control the page geometry directly yourself by setting `geometry` options in your document's front matter. For example:

``` yaml
---
geometry:
  - left=.75in
  - textwidth=4.5in
  - marginparsep=.25in
  - marginparwidth=2.25in
---
```

You can use these options to control the page geometry for the built-in document classes or to customize the geometry of other document classes that you may be using.

::: {.callout-tip appearance="simple"}
If you'd like to view the page geometry in your rendered PDF, you can pass `showframe` to the `geometry` option as in the below example.

``` {.yaml style="background: none;"}
---
geometry:
  - showframe
---
```
:::

### Code Blocks

When rendering a PDF that uses the margins for content, Quarto automatically adjusts the appearance of code blocks. Rather than having a solid background color, a left border treatment is used.

This enables non-breaking code to overflow into the margin without cosmetic issues created by the code block background (which does not overflow into the margin region).

You can disable this treatment by setting the following `code-block-border-left: false` in your document front matter.

## Landscape mode

In `docx`, `pdf` and `typst` formats, you can set portions of the document to landscape mode by wrapping the content around a fenced div with class `landscape`:

````markdown
---
format:
  docx: default
  typst: default
  pdf: default
---

This will appear in portrait mode.

::: {.landscape}

This will appear in landscape.

:::

This will appear in portrait mode again.
````



[^1]: You can also position references in other location (such as the bottom of the block, section, or document).
```````

## File: docs/authoring/brand.qmd
```````
---
title: Multiformat branding with `_brand.yml`
---

## Overview

Quarto supports [**brand.yml**](https://posit-dev.github.io/brand-yml/)---a single YAML file that can be used to customize the appearance of your documents across multiple formats. This is particularly useful for organizations that need a unified look across various formats.

{{< include _brand-example.qmd >}}

On this page:

-   Learn how to add a brand file.

-   Learn about the elements of **brand.yml** and how they are used in Quarto.

-   Learn how to access brand values outside of the brand file.

-   See a more comprehensive example.

-   Learn how to migrate projects created without `_brand.yml` to easily support `_brand.yml` features.

::: callout-warning
## Limitation

The **brand.yml** specification is an active area of work at Posit. Quarto's support for **brand.yml** is not yet complete. For now, we've highlighted places where Quarto doesn't yet support the full spec with special **Limitation** callouts, like this one.

Currently, the formats that support **brand.yml** are: `html`, `dashboard`, `revealjs` and `typst`.
:::

## Applying Brand

To specify a brand, create a `_brand.yml` file in the root directory of your project (i.e. alongside `_quarto.yml`).
Quarto will detect the presence of `_brand.yml` and automatically apply the brand to all documents of the supported formats in the project.

You can create a `_brand.yml` file outside of a Quarto project (e.g. without a `_quarto.yml`).
In this case, `_brand.yml` will automatically apply to documents in the same directory.

You can also set brand options in a document by specifying brand elements under the `brand` option:

```{.yaml filename="document.qmd"}
---
brand:
  color:
    background: "#eeeeee"
---
```

If you set `brand` in a document header, it will replace the entire brand from `_brand.yml`.

You can disable brand for a document by setting `brand` to `false`:

```{.yaml filename="document.qmd"}
---
brand: false
---
```

You can put  `_brand.yml` in a subdirectory of your project, and then use the `brand` key to specify the path to the brand file.
For example, to use the brand file at `brand/_brand.yml` for a single  document, add `brand` to the header:

```{.yaml filename="document.qmd"}
---
brand: brand/_brand.yml
---
```

To use the brand file at `brand/_brand.yml` for all documents in the project add `brand` to `_quarto.yml`:

```{.yaml filename="_quarto.yml"}
brand: brand/_brand.yml
```

Paths specified in `_brand.yml` are relative to the location of the brand file.

### Dark Brand

As with [Themes](/docs/output-formats/html-themes.qmd#dark-mode), you can specify both light and dark brands, making both a light and a dark version of your output available:

```{.yaml filename="document.qmd"}
---
brand:
  light: light-brand.yml
  dark: dark-brand.yml
---
```

This also works with brands specified directly in the document:

```{.yaml filename="document.qmd"}
---
brand:
  light:
    color:
      background: "#ffffff"
      foreground: "#333333"
  dark:
    color:
      background: "#333333"
      foreground: "#ffffff"
---
```

Light and dark brands can also be specified at the project-level:

```{.yaml filename="_quarto.yml"}
brand:
  light: light-brand.yml
  dark: dark-brand.yml
```


::: {.callout-warning}

## Limitation

The `revealjs` format does not support switching between light and dark modes.

:::


#### Typst

To choose a dark brand in Typst output use `brand-mode: dark`:

```{.yaml filename="document.qmd"}
---
format:
  typst:
    brand-mode: dark
---
```


## Brand Elements

The elements of **brand.yml** are specified in the documentation for the [**brand.yml** project](https://posit-dev.github.io/brand-yml/){.external}. 
In this section, learn how these elements are used in Quarto.

### Color 

[Color in the **brand.yml** docs](https://posit-dev.github.io/brand-yml/brand/color.html){.external}

Use `color` to define your brand's color palette and map your palette to the roles colors play, a.k.a semantic colors. A simple example might define the value `background` to a light blue:

``` {.yaml filename="_brand.yml"}
color:
  background: "#ddeaf1"
```

Use the `palette` key to define a set of named colors that can be referenced elsewhere in the `_brand.yml`. For example, you might define `blue` and set it as the `background`:

``` {.yaml filename="_brand.yml"}
color:
  palette:
    blue: "#ddeaf1"
  background: blue
```

The most commonly used semantic colors include `foreground`, `background` and `primary`:

``` {.yaml filename="_brand.yml"}
color:
  palette:
    dark-grey: "#222222"
    blue: "#ddeaf1"
  background: blue
  foreground: dark-grey
  primary: black
```

The colors `foreground` and `background` are used consistently across formats to set the color of the main text and color of the page it appears on.
The color `primary` sets the link color, navbar color (`html` and `dashboard`), and progress bar color (`revealjs`).

For HTML formats that use Bootstrap (`html`, `dashboard`) the remaining semantic colors are mapped directly to their Bootstrap counterparts with the same name.

::: {.callout-tip collapse="true"}

## Full list of semantic colors 

The full list of semantic colors you can set in `color` is:

+-----------------------+-------------------------------------------------------------------------------------------------------------------------------+
| Name                  | Description                                                                                                                   |
+=======================+===============================================================================================================================+
| `foreground`          | The main text color. Typically will be close to black and must have high contrast with the background color.                  |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------+
| `background`          | The main background color. Tyically will be close to white and must have high contrast with the foreground color.             |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------+
| `primary`             | The primary accent color, used for hyperlinks, active states, and primary action buttons.                                     |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------+
| `secondary`           | The secondary accent color, often used for lighter text or disabled states.                                                   |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------+
| `tertiary`            | The tertiary accent color, used for hover states, accents, and wells.                                                         |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------+
| `success`             | The color used for positive or successful actions and information.                                                            |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------+
| `info`                | The color used for neutral or informational actions and information.                                                          |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------+
| `warning`             | The color used for warning or cautionary actions and information.                                                             |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------+
| `danger`              | The color used for errors, dangerous actions, or negative information.                                                        |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------+
| `light`               | A bright color, used as a high-contrast foreground color on dark elements or low-contrast background color on light elements. |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------+
| `dark`                | A dark color, used as a high-contrast foreground color on light elements or high-contrast background color on light elements. |
+-----------------------+-------------------------------------------------------------------------------------------------------------------------------+

:::

You can access both named and semantic colors from your brand in SCSS and using the `brand` shortcode. See [Using `_brand.yml` values](#using-brand-values) for more details.

### Logo

[Logo in the **brand.yml** docs](https://posit-dev.github.io/brand-yml/brand/logo.html){.external}

Use `logo` to specify the logo for your brand:

``` {.yaml filename="_brand.yml"}
logo: 
  medium: logo.png
```

You can specify a local file path, relative to the location of `_brand.yml`, or a URL.

A single logo may not work well in all locations so **brand.yml** allows you to set three different logos: `small`, `medium` and `large`. For example:

``` {.yaml filename="_brand.yml"}
logo: 
  small: logo-small.png
  medium: logo.png
  large: logo-large.png
```

You don't need to specify all three---Quarto will use what you provide based on the following preferences:

+---------------------------+----------------------------------------------+-------------------------------+
| Format                    | Location                                     | Logo Preference (high to low) |
+===========================+==============================================+===============================+
| `html`/`dashboard`        | Top navigation bar                           | `small`\> `medium`\>`large`   |
+---------------------------+----------------------------------------------+-------------------------------+
| `html`                    | Side navigation                              | `medium`\>`small`\>`large`    |
+---------------------------+----------------------------------------------+-------------------------------+
| `typst`                   | Top left, control with `format: typst: logo` | `medium`\>`small`\>`large`    |
+---------------------------+----------------------------------------------+-------------------------------+
| `revealjs`                | Bottom right corner of slides                | `medium`\>`small`\>`large`    |
+---------------------------+----------------------------------------------+-------------------------------+
| `website`/`book` project  | `favicon` shown in browser tab               | `small`                       |
+---------------------------+----------------------------------------------+-------------------------------+

You can also specify named logos under `images` which you can reference in `small`, `medium` and `large`. In particular, this allows you to set alternative text for your logos using `alt`:

``` {.yaml filename="_brand.yml"}
logo: 
  images:
    quarto-logo: 
      path: https://quarto.org/quarto.png
      alt: "Quarto icon"
  small: quarto-logo
```

::: {.callout-warning}

## Limitation

The **brand.yml** specification allows you to specify a `light` and `dark` version of your logo, but Quarto currently only uses the `light` version.

::: 

#### Document logo customization

You can further customize the logo at the document level with the `logo` option.

For example, you can specify a particular brand logo resource:
```{.yaml filename="document.qmd"}
---
logo: large
---
```

Or, specify a brand logo and change the alt text:

```{.yaml filename="document.qmd"}
---
logo:
  path: large
  alt: Alternate alternate text
---
```

::: {.callout-warning}

## Limitation

It is [not currently possible](https://github.com/quarto-dev/quarto-cli/issues/11309) to customize the logo for a specific page within a website. Only the project's `_brand.yml` is applied.

::: 

The Typst implementation allows customization of the logo position at the document level:

```{.yaml filename="document.qmd"}
---
format:
  typst:
    logo:
      width: 1in
      location: right-top
      padding-right: 0.5in
      padding-top: 0.25in
      alt: Alternate alternate text
---
```

+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------+
| Option                   | Description                                                                                                                                    |
+==========================+================================================================================================================================================+
| `width`                  | Width in CSS units. Default `1.5in`.                                                                                                           |    
+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------+
| `location`               | Location on the page in `X-Y`, where `X` is `left`, `center`, or `right` and Y is `top`, `middle`, or `bottom`.                                |
|                          | Applied as Typst [`align`](https://typst.app/docs/reference/layout/align/).                                                                    |
+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------+
| `padding`, `padding-top`,| Amount of padding to add to each side of the logo, using CSS [`padding`](https://developer.mozilla.org/en-US/docs/Web/CSS/padding) conventions.| 
| `padding-right`,         | Padding options are applied in alphabetical order.                                                                                             |
| `padding-bottom`,        | Applied as Typst [`block.inset`](https://typst.app/docs/reference/layout/block/#parameters-inset).                                             |
| `padding-left`           | Default `padding: 0.75in`.                                                                                                                     |
+--------------------------+------------------------------------------------------------------------------------------------------------------------------------------------+


### Typography

[Typography in the **brand.yml** docs](https://posit-dev.github.io/brand-yml/brand/typography.html){.external}

The `typography` element allows you to specify fonts and their style. Use `fonts` to specify a list of fonts to use for your brand:

``` {.yaml filename="_brand.yml"}
typography:
  fonts:
    - family: Jura
      source: google
```

The properties you can set for a font under `fonts` depends on the `source`. You can see the other properties available in our [Reference for Brand](/docs/reference/metadata/brand.qmd#font-resource-definitions).


::: {.callout-warning}
## Limitation

HTML formats do not currently support `source: file`.
:::


You can then refer to fonts by `family` in the remaining typography options:

``` {.yaml filename="_brand.yml"}
typography:
  fonts:
    - family: Jura
      source: google
  base: Jura
  headings: Jura
```

The options `base` and `headings` set the typographic style of the main text and headings respectively. 
Use `links` to apply specific styles to links.
The option `monospace` sets the typographic style of code in general, and `monospace-inline` and `monospace-block` can be further used to style code that appears inline and in blocks respectively:

``` {.yaml filename="_brand.yml"}
typography:
  fonts:
    - family: Jura
      source: google
    - family: Space Mono
      source: google
  base: Jura
  headings: Jura
  link:
    decoration: underline
  monospace: Space Mono
  monospace-inline:
    color: "#222222"
    background-color: "#ddeaf1" # or use a named color from `color`
  monospace-block: 
    background-color: "#eef4f8"
```



The fields allowed for each element differ, expand the callout below to see what is supported in each field.

::: {.callout-tip collapse="true"}

## Full set of text elements and supported fields.

The full set of text elements that you can style with `typography` is:

+--------------------+--------------------------------------------------------------------------------------------------------+------------------------+
| Attribute          | Description                                                                                            | Supported Fields       |
+====================+========================================================================================================+========================+
| `base`             | Default text, primarily used in the document body.                                                     | -   `family`           |
|                    |                                                                                                        | -   `size`             |
|                    |                                                                                                        | -   `line-height`      |
|                    |                                                                                                        | -   `weight`           |
+--------------------+--------------------------------------------------------------------------------------------------------+------------------------+
| `headings`         | All heading levels (h1, h2, etc.).                                                                     | -   `family`           |
|                    |                                                                                                        | -   `weight`           |
|                    |                                                                                                        | -   `style`            |
|                    |                                                                                                        | -   `line-height`      |
|                    |                                                                                                        | -   `color`            |
+--------------------+--------------------------------------------------------------------------------------------------------+------------------------+
| `monospace`        | General monospaced text, typically used in code blocks and other programming-related content.          | -   `family`           |
|                    |                                                                                                        | -   `size`             |
|                    |                                                                                                        | -   `weight`           |
+--------------------+--------------------------------------------------------------------------------------------------------+------------------------+
| `monospace-inline` | Inline monospaced text, usually used for code snippets within regular text. Inherits from `monospace`. | -   `family`           |
|                    |                                                                                                        | -   `size`             |
|                    |                                                                                                        | -   `weight`           |
|                    |                                                                                                        | -   `color`            |
|                    |                                                                                                        | -   `background-color` |
+--------------------+--------------------------------------------------------------------------------------------------------+------------------------+
| `monospace-block`  | Block (multi-line) monospaced text, typically used for code blocks. Inherits from `monospace`.         | -   `family`           |
|                    |                                                                                                        | -   `size`             |
|                    |                                                                                                        | -   `weight`           |
|                    |                                                                                                        | -   `line-height`      |
|                    |                                                                                                        | -   `color`            |
|                    |                                                                                                        | -   `background-color` |
+--------------------+--------------------------------------------------------------------------------------------------------+------------------------+
| `link`             | Hyperlinks.                                                                                            | -   `weight`           |
|                    |                                                                                                        | -   `color`            |
|                    |                                                                                                        | -   `background-color` |
|                    |                                                                                                        | -   `decoration`       |
+--------------------+--------------------------------------------------------------------------------------------------------+------------------------+

The supported fields are generally described as follows:

-   `family`: The font family to be used for a typographic element. This should match a font resource declared in `typography.fonts`.

-   `size`: The font size for a typographic element. Should be specified using a CSS length unit (e.g., "14px", "1em", "0.9rem").

-   `weight`: The font weight (or boldness) of the text. Can be a numeric value between 100 and 900, or a string like "normal" or "bold".

-   `style`: The font style for the text, typically either "normal" or "italic".

-   `line-height`: The line height of the text, which refers to the vertical space between lines. Often expressed as a multiple of the font size or in fixed units.

-   `color`: The color of the text. Can be any CSS-compatible color definition or a reference to a color defined in the brand's color palette.

-   `background-color`: The background color for the text element. Can be any CSS-compatible color definition or a reference to a color defined in the brand's color palette.

-   `decoration`: The text decoration, typically used for links. Common values include "underline", "none", or "overline".

::: 

#### Typst

See [the Advanced documentation](/docs/advanced/typst/brand-yaml.qmd#typography) for more details on the Typst implementation, and troubleshooting tips for fonts.


### Defaults

[Defaults in the **brand.yml** docs](https://posit-dev.github.io/brand-yml/brand/defaults.html){.external}

The `defaults` section of **brand.yml** allows users to set options for specific tools that don't otherwise fit into the **brand.yml** schema. Quarto's implementation currently supports `defaults: bootstrap`.

#### Bootstrap

The `bootstrap` section of `defaults` follows [**brand.yml**](https://posit-dev.github.io/brand-yml/brand/defaults.html) and applies to the `html` and `dashboard` formats.
Quarto merges the options set under `defaults: bootstrap` in the appropriate layer of [Quarto's SCSS layering system](/docs/output-formats/html-themes-more.qmd).

The `defaults` option inside `bootstrap`, can take a string, or key-value pairs
corresponding to SCSS variable name-value pairs.
Building on our initial example, you could use `bootstrap: defaults` to set the SCSS variables `link-decoration` and `navbar-fg`:

``` {.yaml filename="_brand.yml"}
defaults:
  bootstrap:
    defaults: # defaults also supports a string as its value
      link-decoration: underline
      navbar-fg: "#fff"
```

The resulting HTML pages will have links that are underlined and use white for text in the navigation bar.

::::::: {.column-body-outset-right layout-ncol="2"}
::: {}
![Without `defaults: bootstrap` setting](/docs/authoring/images/brand-html-no-defaults.png){.lightbox group="brand-bootstrap-defaults" fig-alt="Screenshot of a webpage. The text is dark grey on a light blue background, using a rounded sans-serif typeface, a logo appears in the navbar."}
:::

::: {}
![With `defaults: bootstrap` setting: note the link decoration and the white color for the navbar text](/docs/authoring/images/brand-html-defaults.png){.lightbox group="brand-bootstrap-defaults" fig-alt="Screenshot of a webpage. It looks identical to the previous image, except for underlined links and white text on the navbar."}
:::
:::::::

In addition to the `defaults` option, Quarto supports `uses`, `functions`, `mixins` and `rules`, which all take a string value. 
For example, you could use `rules` to provide a CSS rule to remove the border below second-level headings:

```{.yaml filename="_brand.yml"}
defaults:
  bootstrap:
    # uses: <string>
    # functions: <string>
    # mixins: <string>
    rules: |
      h2 {
        border: none;
      }
```

### Meta

[Meta in the **brand.yml** docs](https://posit-dev.github.io/brand-yml/brand/meta.html){.external}

You can set brand metadata using the `meta` key:

``` {.yaml filename="_brand.yml"}
meta:
  name: Acme Corporation
  link: https://www.acmecorp.com
```

::: {.callout-warning}

## Limitation

Quarto does nothing with `meta` values.

::: 


## Using `_brand.yml` values {#using-brand-values}

Beyond the automatic application of your brand file, you can also directly access `_brand.yml` values in Quarto documents. In this section, you'll learn how to use the `brand` shortcode, use brand variables in SCSS files, and some format-specific ways to use access brand values.

### Shortcode - `{{{< brand >}}}`

Some values from the `_brand.yml` configuration file can be accessed via the `brand` shortcode. In particular, you can access colors and logos by name:

-   Use `{{{< brand color COLOR_NAME BRAND_MODE >}}}` to return the brand color named `COLOR_NAME` as a string.
-   Use `{{{< brand logo LOGO_NAME BRAND_MODE >}}}` to return the brand logo named `LOGO_NAME` as an image.

The `BRAND_MODE` is optional and defaults to `light`. To return the color from the [dark brand](#dark-brand) use `dark`.

For example, you could use the shortcode to place a brand image you've named `icon` in a dashboard sidebar:

````{.markdown filename="dashboard.qmd" shortcodes="false"}
---
format: dashboard
---

## Inputs {.sidebar}

{{< brand logo icon >}}

````

Or, you could use the shortcode to set the background of a revealjs slide to your `primary` brand color:

````{.markdown filename="slides.qmd" shortcodes="false"}
---
format: revealjs
---

## Slide Title {background-color='{{< brand color primary >}}'}
````


::: {.callout-warning}
## Limitation

You can't currently access `typography`, `meta`, or `defaults` values using the `brand` shortcode.
:::

### In SCSS

The colors defined in `palette` are set as SCSS variables of the form `brand-COLOR_NAME`. 
For example, if `_brand.yml` defines `blue`:

```{.yaml filename="_brand.yml"}
color:
  palette:
    blue: "#ddeaf1"
```

Then the variable `$brand-blue` is will be set to `#ddeaf1` in the `defaults` layer of  [Quarto's SCSS layering system](/docs/output-formats/html-themes-more.html#bootstrap-bootswatch-layering). 
You can add a custom SCSS file, `styles.scss`, in the usual way:
```{.yaml filename="_quarto.yml"}
format:
  html:
    theme: [styles.scss]
```

Then `styles.scss` can use these brand variables to make style tweaks. 
For example, you might want all `h1` elements to be `blue`:

```{.scss filename="styles.scss"}
/*-- scss:rules --*/

h1 {
  color: $brand-blue;
}
```

When you specify SCSS files without an explicit `brand` element, it is equivalent to listing them after `brand`.
For instance, the above `theme` is equivalent to:

```{.yaml filename="_quarto.yml"}
format:
  html:
    theme: [brand, styles.scss]
```

The order of elements in `theme` controls their priority. 
For example, you could layer brand and your custom SCSS on top of a built-in theme:

```{.yaml filename="_quarto.yml"}
format:
  html:
    theme: [cosmo, brand, styles.scss]
```

You can learn more about layering themes in [More About Quarto Themes](/docs/output-formats/html-themes-more.qmd).

### Typst

In Typst documents, brand colors are set in a [dictionary](https://typst.app/docs/reference/foundations/dictionary/) called `brand-color`. 
You can access them directory in raw Typst blocks using the syntax `brand-color.COLOR_NAME`.
For example, you could make a rectangle filled with your `primary` brand color:

````{.markdown filename="document.qmd"}

```{=typst}
#rect(fill: brand-color.primary)
```
````

### Lua API

Filters and shortcodes can access brand values using the `brand` Lua module.

``` lua
local brand = require('modules/brand/brand')
local primary = brand.get_color('primary')
```

## Migrating to `_brand.yml`: use the `brand` string in `theme`

::: callout-note

The following information is only necessary if you are migrating projects created with Quarto 1.5 and earlier to use `_brand.yml`.

:::

Migrating existing projects to Quarto 1.6's `_brand.yml` support is a straightforward process.
The usual way to create themes in Quarto 1.5 and earlier is to use one of the predefined bootswatch themes.
This is often combined with an additional user-defined `.scss` file.
In Quarto 1.5, a `_quarto.yml` file usually has an entry like the following:

```yaml
# Quarto 1.5 syntax
theme:
  - cosmo       # a predefined bootswatch theme
  - tweaks.scss # a user-defined customization
```

When using this syntax with Quarto 1.6's `_brand.yml` support, keep in mind that `_brand.yml` always takes _lowest_ priority in styles.
In other words, the configuration above is equivalent to the following:

```yaml
# Quarto 1.6 syntax
theme:
  - brand        # theming derived from `_brand.yml`
  - cosmo        # a predefined bootswatch theme
  - tweaks.scss  # a user-defined customization
```

As a result, values set by `brand` here are potentially overriden by the `cosmo` theme or by `tweaks.scss`.
This is sometimes useful, but often you will want to make `brand` _more_ important than the theme.
For these situations, use the following:

```yaml
# Quarto 1.6 syntax
theme:
  - cosmo        # a predefined bootswatch theme
  - brand        # theming derived from `_brand.yml`
  - tweaks.scss  # a user-defined customization
```

The analogous syntax also works for combining light and dark brands with light and dark themes:

```yaml
# Quarto 1.7 syntax
theme:
  light:
    - cosmo
    - brand
  dark:
    - slate
    - brand
```

Learn more about how Quarto generates styles in [More About Quarto Themes](/docs/output-formats/html-themes-more.qmd).
```````

## File: docs/authoring/callouts.qmd
```````
---
title: Callout Blocks
format: html
---

Callouts are an excellent way to draw extra attention to certain concepts, or to more clearly indicate that certain content is supplemental or applicable to only some scenarios.

## Callout Types

There are five different types of callouts available.

-   `note`
-   `warning`
-   `important`
-   `tip`
-   `caution`

The color and icon will be different depending upon the type that you select. Here are what the various types look like in HTML output:

::: callout-note
Note that there are five types of callouts, including: `note`, `tip`, `warning`, `caution`, and `important`.
:::

::: callout-warning
Callouts provide a simple way to attract attention, for example, to this warning.
:::

::: callout-important
## This is Important

Danger, callouts will really improve your writing.
:::

::: callout-tip
## Tip With Title

This is an example of a callout with a title.
:::

::: {.callout-caution collapse="true"}
## Expand To Learn About Collapse

This is an example of a 'collapsed' caution callout that can be expanded by the user. You can use `collapse="true"` to collapse it by default or `collapse="false"` to make a collapsible callout that is expanded by default.
:::

This feature is not available for Revealjs presentations yet (See Issue [1328](https://github.com/quarto-dev/quarto-cli/issues/1328))

## Markdown Syntax

Create callouts in markdown using the following syntax (note that the first markdown heading used within the callout is used as the callout heading):

``` markdown
::: {.callout-note}
Note that there are five types of callouts, including:
`note`, `warning`, `important`, `tip`, and `caution`.
:::

::: {.callout-tip}
## Tip with Title

This is an example of a callout with a title.
:::

::: {.callout-caution collapse="true"}
## Expand To Learn About Collapse

This is an example of a 'folded' caution callout that can be expanded by the user. You can use `collapse="true"` to collapse it by default or `collapse="false"` to make a collapsible callout that is expanded by default.
:::
```

Note that above callout titles are defined by using a heading at the top of the callout. If you prefer, you can also specify the title using the `title` attribute. For example:

```markdown
::: {.callout-tip title="Tip with Title"}
This is a callout with a title.
:::
```

## Customizing Appearance

### Collapse

You can create 'folded' callouts that can be expanded by the user by settings the `collapse` attribute on the callout. If you set `collapse=true`, the callout will be expandable, but will be collapsed by default. If you set `collapse=false`, the callout will be expandable, but will be expanded by default.

### Appearance

Callouts have 3 different looks you can use.

|           |                                                                                                                 |
|-----------|-----------------------------------------------------------------------------------------------------------------|
| `default` | The default appearance with colored header and an icon.                                                         |
| `simple`  | A lighter weight appearance that doesn't include a colored header background.                                   |
| `minimal` | A minimal treatment that applies borders to the callout, but doesn't include a header background color or icon. |

You can set the callout appearance either globally in the document (or project yaml):

``` yaml
callout-appearance: simple
```

or by setting the `appearance` attribute on the callout. For example

``` markdown
::: {.callout-note appearance="simple"}

## Pay Attention

Using callouts is an effective way to highlight content that your reader give special consideration or attention.

:::
```

which appears as:

::: {.callout-note appearance="simple"}
## Pay Attention

Using callouts is an effective way to highlight content that your reader give special consideration or attention.
:::

### Icons

In addition to controlling the appearance of the callout, you can also choose to directly suppress the icon by setting the global option in your document (or project) yaml:

``` yaml
callout-icon: false
```

or by setting an attribute directly on the callout:

``` markdown
::: {.callout-note icon=false}

## Pay Attention

Using callouts is an effective way to highlight content that your reader give special consideration or attention.

:::
```

Which will appear as:

::: {.callout-note icon="false"}
## Pay Attention

Using callouts is an effective way to highlight content that your reader give special consideration or attention.
:::

## Format Support

The following formats render callouts as illustrated above:

-   HTML
-   PDF
-   MS Word
-   EPUB
-   Revealjs (without collapse option)

Note that callout rendering for HTML is not available when you disable the standard HTML theme (e.g. if you specify the `theme: none` option). Also, some features are specific to document using Bootstrap, like collapsible callouts, and won't work in other documents.

When the target format doesn't support callouts, they are rendered as a simple blockquote with the title in bold.

## Cross-References

{{< include _cross-references-callouts.qmd >}}

Cross-referencing callouts is currently only supported for HTML, PDF and MS Word.
```````

## File: docs/authoring/citations.qmd
```````
---
title: Citations
format: html
link-citations: true
aliases: 
  - /docs/authoring/footnotes-and-citations.html
---

## Overview {#citations}

Quarto will use Pandoc to automatically generate citations and a bibliography in a number of styles. To use this capability, you will need:

-   A quarto document formatted with citations (see [Citation Markdown](#sec-citations)).

-   A bibliographic data source, for example a BibLaTeX (`.bib`) or BibTeX (`.bibtex`) file.

-   Optionally, a `CSL` file which specifies the formatting to use when generating the citations and bibliography (when not using `natbib` or `biblatex` to generate the bibliography).

::: {.callout-note}

When using `format: typst`, by default citation processing is handled by Typst, not Pandoc. See the [Typst](#typst) section below for more details.

::: 

## Bibliography Files

Quarto supports bibliography files in a wide variety of formats including BibLaTeX and CSL. Add a bibliography to your document using the `bibliography` YAML metadata field. For example:

``` yaml
---
title: "My Document"
bibliography: references.bib
---
```

::: callout-tip
You can provide more than one bibliography file if you would like by setting the `bibliography` field's value to a YAML array.
:::

See the [Pandoc Citations](https://pandoc.org/MANUAL.html#citations) documentation for additional information on bibliography formats.

## Citation Syntax {#sec-citations}

Quarto uses the standard Pandoc markdown representation for citations (e.g. `[@citation]`) --- citations go inside square brackets and are separated by semicolons. Each citation must have a key, composed of '\@' + the citation identifier from the database, and may optionally have a prefix, a locator, and a suffix. The citation key must begin with a letter, digit, or `_`, and may contain alphanumerics, `_`, and internal punctuation characters (`:.#$%&-+?<>~/`). Here are some examples:

+-------------------------------------------+---------------------------------------------------------------------+---------------------------------------------------------------------+
| Markdown Format                           | Output (default)                                                    | Output(`csl: diabetologia.csl`, see @sec-citations-style)           |
+===========================================+=====================================================================+=====================================================================+
|     Blah Blah [see @knuth1984, pp. 33-35; | Blah Blah [see @knuth1984, pp. 33-35; also @wickham2015, chap. 1]   | Blah Blah see [1], pp. 33-35; also [1], chap. 1                     |
|     also @wickham2015, chap. 1]           |                                                                     |                                                                     |
+-------------------------------------------+---------------------------------------------------------------------+---------------------------------------------------------------------+
|     Blah Blah [@knuth1984, pp. 33-35,     | Blah Blah [@knuth1984, pp. 33-35, 38-39 and passim]                 | Blah Blah [1], pp. 33-35, 38-39 and passim                          |
|     38-39 and passim]                     |                                                                     |                                                                     |
+-------------------------------------------+---------------------------------------------------------------------+---------------------------------------------------------------------+
|     Blah Blah [@wickham2015; @knuth1984]. | Blah Blah [@wickham2015; @knuth1984].                               | Blah Blah [1, 2].                                                   |
+-------------------------------------------+---------------------------------------------------------------------+---------------------------------------------------------------------+
|     Wickham says blah [-@wickham2015]     | Wickham says blah [-@wickham2015]                                   | Wickham says blah [1]                                               |
+-------------------------------------------+---------------------------------------------------------------------+---------------------------------------------------------------------+

You can also write in-text citations, as follows:

+-----------------------------------+-------------------------------+-------------------------------+
| Markdown Format                   | Output (author-date format)   | Output (numerical format)     |
+===================================+===============================+===============================+
|     @knuth1984 says blah.         | @knuth1984 says blah.         | [1] says blah.                |
+-----------------------------------+-------------------------------+-------------------------------+
|     @knuth1984 [p. 33] says blah. | @knuth1984 [p. 33] says blah. | [1] [p. 33] says blah.        |
+-----------------------------------+-------------------------------+-------------------------------+

See the [Pandoc Citations](https://pandoc.org/MANUAL.html#citations) documentation for additional information on citation syntax.

## Citation Style  {#sec-citations-style}


Quarto uses Pandoc to format citations and bibliographies. By default, Pandoc will use the [Chicago Manual of Style](https://chicagomanualofstyle.org/) author-date format, but you can specify a custom formatting using CSL ([Citation Style Language](https://citationstyles.org)). To provide a custom citation stylesheet, provide a path to a CSL file using the `csl` metadata field in your document, for example:

``` yaml
---
title: "My Document"
bibliography: references.bib
csl: nature.csl
---
```

You can find CSL files or learn more about using styles at the [CSL Project](https://github.com/citation-style-language/styles). You can browse the list of more than 8,500 Creative Commons CSL definitions in the CSL Project's [central repository](https://github.com/citation-style-language/styles) or Zotero's [style repository](https://www.zotero.org/styles).

`CSL` styling is only available when the `cite-method` is `citeproc` (which it is by default). If you are using another `cite-method`, you can control the formatting of the references using the mechanism provided by that method.

## Bibliography Generation

By default, Pandoc will automatically generate a list of works cited and place it in the document if the style calls for it. It will be placed in a div with the id `refs` if one exists:

``` markdown
### References

::: {#refs}
:::
```

If no such div is found, the works cited list will be placed at the end of the document. 

::: callout-tip
You can suppress generation of a bibliography by including `suppress-bibliography: true` option in your document metadata
:::

Here's an example of a generated bibliography:

::: {#refs}
:::

## Including Uncited Items

If you want to include items in the bibliography without actually citing them in the body text, you can define a dummy `nocite` metadata field and put the citations there:

```markdown
---
nocite: |
  @item1, @item2
---

@item3
```

In this example, the document will contain a citation for `item3` only, but the bibliography will contain entries for `item1`, `item2`, and `item3`.

It is possible to create a bibliography with all the citations, whether or not they appear in the document, by using a wildcard:

```markdown
---
nocite: |
  @*
---
```

## LaTeX: using BibLaTeX or natbib {#sec-biblatex}

{{< include ../output-formats/_pdf-citations.md >}} 

## Typst 

{{< include ../output-formats/_typst-citations.md >}}
```````

## File: docs/authoring/code-annotation.qmd
```````
---
title: Code Annotation
code-annotations: below
aliases:
  - /docs/prerelease/1.3/code-annotation.html
---

{{< include ../_require-1.3.qmd >}}

## Overview

Code blocks and executable code cells in Quarto can include line-based annotations. Line-based annotations provide a way to attach explanation to lines of code much like footnotes. 

For example, this code uses annotation to describe the steps in an R dplyr pipeline in plain language:

```r
library(tidyverse)
library(palmerpenguins)
penguins |>                                            # <1>
  mutate(                                              # <2>
    bill_ratio = bill_depth_mm / bill_length_mm,       # <2>
    bill_area  = bill_depth_mm * bill_length_mm        # <2>
  )                                                    # <2>
```
1. Take `penguins`, and then,
2. add new columns for the bill ratio and bill area.

The default HTML annotation style displays annotations in a list below the code block. Clicking on the annotation number in the list highlights the relevant lines in the code. Other [HTML styles](#html-styles) hide the annotations, revealing them in a tooltip when a user hovers or selects a marker, as illustrated in this example of a Revealjs presentation:

```{.yaml code-preview="code-annotation-example/revealjs.qmd"}
format: revealjs
```

The PDF format also allows for annotations, numbering, and displaying the annotation text below the code. In other formats, like Word and GitHub Markdown, annotations are instead labeled with the line of code (or lines of code) to which the annotation text applies.

::: panel-tabset
#### PDF

![](images/annote-pdf.png){fig-alt="Screenshot of output in PDF format showing code annotation."}

#### GitHub Flavored Markdown

````markdown
``` r
library(tidyverse)
library(palmerpenguins)
penguins |>
  mutate(
    bill_ratio = bill_depth_mm / bill_length_mm,
    bill_area  = bill_depth_mm * bill_length_mm
  )
```

Line 3  
Take `penguins`, and then,

Lines 4-7  
add new columns for the bill ratio and bill area.
````
:::


To add code annotation to a code block, you need to add two things: specially formatted code comments in your code cell, and an ordered list below the code cell with the annotation text. Read more in [Annotation Syntax](#annotation-syntax).

The `code-annotations` option controls how annotations appear in the HTML format (`below` (default), `hover` or `select`), and in all formats, whether annotation is disabled (`false`), or if annotations should be removed from the output (`none`).

## Annotation Syntax {#annotation-syntax}

Annotations for a code cell consist of two related elements:

1.  Each annotated line should be terminated with a comment (using the code cell's language comment character) followed by a space and then an annotation number enclosed in angle brackets (e.g. `# <2>`). You may repeat an annotation number if the annotation spans multiple lines.

2.  An ordered list that appears immediately after the code cell which includes the contents of each annotation. Each numbered item in the ordered list will correspond to the line(s) of code with the same annotation number.

For example, the annotations in the overview were produced with the following:

```` markdown
```r
library(tidyverse)
library(palmerpenguins)
penguins |>                                      # <1>
  mutate(                                        # <2>
    bill_ratio = bill_depth_mm / bill_length_mm, # <2>
    bill_area  = bill_depth_mm * bill_length_mm  # <2>
  )                                              # <2>
```
1. Take `penguins`, and then,
2. add new columns for the bill ratio and bill area.
````

## Annotation Style {#html-styles}

For HTML output, there are three annotation styles you can set with the `code-annotations` document option:

`below`

:   By default (or if `code-annotations: below` is specified), code annotation text will appear below the code cell.

`hover`

:   Code annotation text will be displayed when the user hovers over the annotation marker for a line of code. 

`select`

:   Code annotation text will be displayed when the user clicks on an annotation marker (selecting it). The annotation text can be dismissed by clicking the annotation marker once again.

For example, to set the display style to hover, the complete Quarto file would be:

```` markdown
---
code-annotations: hover
---

```r
library(tidyverse)
library(palmerpenguins)
penguins |>                                      # <1>
  mutate(                                        # <2>
    bill_ratio = bill_depth_mm / bill_length_mm, # <2>
    bill_area  = bill_depth_mm * bill_length_mm  # <2>
  )                                              # <2>
```
1. Take `penguins`, and then,
2. add new columns for the bill ratio and bill area.
````

You can control the colors used to highlight lines in a custom theme with [Code Annotation Sass Variables](/docs/output-formats/html-themes.qmd#code-annotation).

## Removing Annotations

For some formats, you may prefer to remove annotations from the output. In this case, you can set `code-annotations: none`, which will remove the annotation comments from your code and suppress the output of the ordered list which contains the annotation text.

## Disabling Annotation

You can disable code annotation by including the option `code-annotations: false` in your document. This will stop the processing of code annotations and leave your code (including the annotation comments) and the original ordered list as is.
```````

## File: docs/authoring/conditional.qmd
```````
---
title: "Conditional Content"
---

In some cases you may want to create content that only displays for a given output format (or only displays when *not* rendering to a format). You can accomplish this by creating divs, spans and code blocks with the `.content-visible` and `.content-hidden` classes.

## .content-visible

To make content visible only for a given format, you can create a div (`:::`) with the `.content-visible` class. For example, here we mark content as only visible in HTML:

``` markdown
::: {.content-visible when-format="html"}

Will only appear in HTML.

:::
```

You can also set conditions on non-executable code blocks:

```` markdown
```{.python .content-visible when-format="html"}
# code shown only in HTML
2+2
```
````

To apply a condition only to a part of a paragraph, use a span (`[]{}`):

``` markdown
Some text
[in HTML.]{.content-visible when-format="html"}
[in PDF.]{.content-visible when-format="pdf"}
```

You can also mark content as visible for all formats *except* a specified format. For example:

``` markdown
::: {.content-visible unless-format="pdf"}

Will not appear in PDF.

:::
```

Then `when-format` and `unless-format` attributes match the current Pandoc output format with some additional intelligence to alias related formats (e.g. html, html4, and html5). Details are provided below in [Format Matching](#format-matching)

`when-format` and `unless-format` can also be combined to create more complex conditions:

``` markdown
::: {.content-visible when-format="html" unless-format="revealjs"}

Will only appear in HTML and not in Reveal.js, but actually it appears.

:::

::: {.content-visible when-format="revealjs"}

Will only appear in Reveal.js and not in HTML or other formats.

:::
```

## .content-hidden

To prevent content from being displayed when rendering to a given format, use the `.content-hidden` class. For example, here we mark content as hidden in HTML:

``` markdown
::: {.content-hidden when-format="html"}

Will not appear in HTML.

:::
```

You can also mark content as hidden for all formats *except* a specified format. For example:

``` markdown
::: {.content-hidden unless-format="pdf"}

Will only appear in PDF.

:::
```

## Format Matching {#format-matching}

The `when-format` and `unless-format` clauses do some aliasing of related formats to make it more straightforward to target content. The following aliases are implemented:

{{< include _format-aliases.md >}}

## Matching against metadata

{{< include /docs/_require-1.4.qmd >}}

It's possible to match against boolean metadata values.
Use the attributes `unless-meta` and `when-meta`, and use periods `.` to separate metadata keys.
For example:

```` markdown
::: {.content-hidden unless-meta="path.to.metadata"}

This content will be hidden unless there exists a metadata entry like such:

```yml
path:
  to:
    metadata: true
```

:::
````

This feature is often useful alongside [project profiles](/docs/projects/profiles.qmd).
Different profiles can set different metadata values, and so can control the metadata used in conditional content.
```````

## File: docs/authoring/contents.qmd
```````
---
title: "`contents`: Rearrange content in your documents"
---

## Overview

Sometimes it's useful to define content in your document in an order that is different from
the order in which you want the document to be presented.
Although you can develop [Lua filters](/docs/extensions/filters.qmd) that solve this kind of problem, Quarto 1.6 and
later offers a simpler solution that works in many use cases: the `{{{< contents >}}}` shortcode.

Here's a minimal example of how it can be used:

````markdown
## A section

Here we define a plot.

```{{python}}
#| echo: false
#| label: a-cell
import matplotlib.pyplot as plt
plt.plot([1,2,3])
```

## Another section

Here we use the plot, inside a callout:

::: callout-note

## Note the following plot

{{{< contents a-cell >}}}

:::
````

The code above produces the following output:

![A screenshot of the resulting document](./images/use-cell-example.jpg)

## Why

`{{{< contents >}}}` increases your freedom in defining the document the most comfortable way you can.
It can simply be because you want to write the code in the middle of a different explanation, but you want the result to appear elsewhere.

One particularly important reason is that Jupyter notebooks do not allow code cells to "nest" inside Markdown. 
Many of Quarto's features are defined in terms of fenced divs, with Markdown that looks like this:

````markdown
::: {#div-id .class1 .class2 key1="value1"}

The contents of a fenced div

:::
````

In this case, authoring Quarto documents with `.ipynb` would otherwise be cumbersome. `{{{< contents >}}}` allows you to use the contents of a code cell inside a Markdown cell without having to split the Markdown in a way that Jupyter Notebook, Jupyter Lab, and Quarto's JupyterLab extensions don't know how to render.

## How it works

Quarto takes `{{{< contents <id> >}}}` shortcodes to mean "take the contents of cell with id `id` from the document and place it here instead". 

The most natural use case is for code cells, but `{{{< contents >}}}` also works with any document divs or spans, and uses the div and span ids.

::: callout-caution

The id of the following div is `a-div`, and _not_ `#a-div`.
As a result, refer to it in a `contents` shortcode as `{{{< contents a-div >}}}`.

```
::: {#a-div}

The contents of a fenced div

:::
```

:::

When using divs and spans with `{{{< contents >}}}`, make sure that you're moving them to appropriate locations.
Specifically, a div cannot be placed in the middle of a paragraph; that requires a span. As a result, you _cannot_ do the following:

````
```{{python}}
#| label: a-cell
print("some code")
```

The output of the code cell is {{{< contents a-cell >}}}. Etc.
````

If this is the style of organization you wish to use, you need to write the code inline, and wrap it in a span:

````markdown
We will define some values here. [`{python} "some code"`]{#a-span}

The output of that inline code cell is {{{< contents a-span >}}}. Etc.
````

## Limitations

Currently, `{{{< contents >}}}` itself does not work inside code elements. We may lift that limitation in the future.
```````

## File: docs/authoring/create-citeable-articles.qmd
```````
---
title: Creating Citeable Articles
---

You can make it easier for others to cite your work by providing additional metadata with the YAML front-matter of your article. Citations can be provided for both articles published to the web or for articles published in journals (with or without a DOI).

## Web Articles

To provide a citation for an article published to the web, include author and date metadata as well as a citation url. For example:

``` yaml
---
title: "Summarizing Output for Reproducible Documents"
description: | 
  A summary of the best practices for summarizing output of reproducible scientific documents.
date: 5/4/2018
author:
  - name: Norah Jones 
    url: https://example.com/norahjones
    affiliation: Spacely Sprockets
    affiliation-url: https://example.com/spacelysprockets
citation:
  url: https://example.com/summarizing-output
bibliography: biblio.bib
---
```
Name particles can be further defined in the `name` key following the [Citation Style Language (CSL) specification for naming particles](https://docs.citationstyles.org/en/stable/specification.html#name-particles). If you omit the citation url, Quarto will attempt to generate a citation url by using the `site-url` and the current page's location. If you'd like to allow Quarto to generate the citation url, you can omit the citation url and simply enable citation output on the page. For example:

``` yaml
---
title: "Summarizing Output for Reproducible Documents"
description: | 
  A summary of the best practices for summarizing output of reproducible scientific documents.
date: 5/4/2018
author:
  - name: Norah Jones 
    url: https://example.com/norahjones
    affiliation: Spacely Sprockets
    affiliation-url: https://example.com/spacelysprokets
citation: true
bibliography: biblio.bib
---
```

When this metadata is available, a citation appendix is automatically added to the article. The citation appendix will present both a copy-able `bibtex` representation of the document and a formatted representation of the citation (based upon the document's CSL file, if specified). For example:

![](images/appendix-citation.png){.border fig-alt="Appearance of a citation appendix contains both BibTeX citation and plain text citation for attribution."}

By default both the `bibtex` and formatted representations are displayed. You can use the `appendix-cite-as` option to control this behavior:

+-----------------------------+------------------------------------------------+
| `appendix-cite-as: false`   | Do not include any citations in the appendix.  |
+-----------------------------+------------------------------------------------+
| `appendix-cite-as: bibtex`  | Show only the BibTeX version of the citation.  |
+-----------------------------+------------------------------------------------+
| `appendix-cite-as: display` | Show only the display version of the citation. |
+-----------------------------+------------------------------------------------+

: {tbl-colwidths="\[50,50\]"}

## Journal Articles

If your article is published within a Journal, you can add the following the additional fields to generate the appropriate citation entry:

``` yaml
---
title: "Summarizing Output for Reproducible Documents"
description: | 
  A summary of the best practices for summarizing output of reproducible scientific documents.
date: 5/4/2018
author:
  - name: Norah Jones 
    url: https://example.com/norahjones
    affiliation: Spacely Sprockets
    affiliation-url: https://example.com/spacelysprokets
citation:
  type: article-journal
  container-title: "Journal of Data Science Software"
  doi: "10.23915/reprodocs.00010"
  url: https://example.com/summarizing-output
bibliography: biblio.bib
---
```

This is how the citation is presented in the appendix:

![](images/appendix-citation-journal.png){.border fig-alt="Appearance of a journal citation in document appendix with both BibTex and plain text citations given for attribution."}

## Other Types of Documents

The BibTeX and formatted attribution displayed in the document will be generated based upon the complete citation information that is present in the `citation` key, which is based upon the [Citation Style Language (CSL) specification for items](https://docs.citationstyles.org/en/stable/specification.html). You can learn more about the available options in the [Citation Metadata Reference](/docs/reference/metadata/citation.qmd).

## Google Scholar

Quarto documents can include metadata compatible with the format indexed by [Google Scholar](https://scholar.google.com). This makes it easy for indexing engines (Google Scholar or otherwise) to extract not only a citation for your article but also information on other sources which you cited. To enable this use the `google-scholar` option:

``` yaml
title: "Summarizing Output for Reproducible Documents"
description: | 
  A summary of the best practices for summarizing output of reproducible scientific documents.
date: 5/4/2018
author:
  - name: Norah Jones 
    url: https://example.com/norahjones
    affiliation: Spacely Sprockets
    affiliation-url: https://example.com/spacelysprokets
citation:
  type: article-journal
  container-title: "Journal of Data Science Software"
  doi: "10.23915/reprodocs.00010"
  url: https://example.com/summarizing-output
bibliography: biblio.bib 
google-scholar: true
```

For example, here is the Google Scholar metadata automatically included for a document created with the above metadata:

``` {.html style="font-size: 0.9em;"}
<meta name="citation_title" content="Summarizing Output for Reproducible Documents">
<meta name="citation_author" content="Norah Jones">
<meta name="citation_online_date" content="2018-05-04">
<meta name="citation_fulltext_html_url" content="https://example.com/summarizing-output">
<meta name="citation_publication_date" content="2018-05-04">
<meta name="citation_journal_title" content="Journal of Data Science Software">
<meta name="citation_reference" content="citation_title=Donald knuth;,citation_fulltext_html_url=http://dx.doi.org/10.7551/mitpress/
5485.003.0041;,citation_publication_date=1989;,citation_journal_title
=undefined;">
```

In the addition to the citation metadata from this document described above, Quarto will automatically generate a `citatation_reference` entry for each of the entries included in the document's bibliography.

## Citation Fields

Quarto's approach to emitting scholarly metadata is to take the standard CSL fields and make them into the corresponding Google Scholar / Zotero / Highwire metadata tags as appropriate. The following fields, when specified under the `citation` key of the document metadata, will generate scholarly meta tags in the rendered HTML document as described. These fields comprise the required Google Scholar fields as well as additional, optional fields that may also be included.

+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| Document Yaml                                                                                                                                 | Metadata Tag                                                                            |
+===============================================================================================================================================+=========================================================================================+
| `title`\                                                                                                                                      | `citation_title`                                                                        |
| <sub>Document `title` will be used if not provided.</sub>                                                                                     |                                                                                         |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `author`\                                                                                                                                     | `citation_author`                                                                       |
| <sub>One or more authors[^1]. Document `author` will be used if not provided as a citation subkey.</sub>                                      |                                                                                         |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `editor`\                                                                                                                                     | `citation_editor`                                                                       |
| <sub>One or more editors[^2].</sub>                                                                                                           |                                                                                         |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `abstract`\                                                                                                                                   | `citation_abstract`                                                                     |
| <sub>Document `abstract` will be used if not provided.</sub>                                                                                  |                                                                                         |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `keyword`[^3]\                                                                                                                                | `citation_keywords`                                                                     |
| <sub>Document `keywords` will be used if not provided.</sub>                                                                                  |                                                                                         |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `issued`\                                                                                                                                     | `citation_publication_date`                                                             |
| <sub>Document `date` will be used if not provided.</sub>                                                                                      |                                                                                         |
|                                                                                                                                               | <sub>In addition, the issued date will be used to populate the following fields:</sub>\ |
|                                                                                                                                               | \                                                                                       |
|                                                                                                                                               | `citation_cover_date`\                                                                  |
|                                                                                                                                               | `citation_year`                                                                         |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `available-date`\                                                                                                                             | `citation_online_date`                                                                  |
| <sub>Document `date` will be used if not provided.</sub>                                                                                      |                                                                                         |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `url`\                                                                                                                                        | `citation_fulltext_html_url`                                                            |
| <sub>`url` will be synthesized for current document if a [`site-url`](/docs/websites/website-tools.qmd#preview-images) has been specified.</sub> |                                                                                         |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `pdf-url`                                                                                                                                     | `citation_pdf_url`                                                                      |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `language`\                                                                                                                                   | `citation_language`                                                                     |
| <sub>Document `lang` will be used if not provided.</sub>                                                                                      |                                                                                         |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `type`\                                                                                                                                       | `<none>`                                                                                |
| <sub>A valid CSL type. See <https://docs.citationstyles.org/en/stable/specification.html#appendix-iii-types></sub>.                           |                                                                                         |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `doi`\                                                                                                                                        | `citation_doi`                                                                          |
| <sub>Document `doi` will be used if not provided.</sub>                                                                                       |                                                                                         |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `isbn`                                                                                                                                        | `citation_isbn`                                                                         |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `issn`                                                                                                                                        | `citation_issn`                                                                         |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `eissn`                                                                                                                                       | `citation_eissn`                                                                        |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `pmid`                                                                                                                                        | `citation_pmid`                                                                         |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `issue`                                                                                                                                       | `citation_issue`                                                                        |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `volume`                                                                                                                                      | `citation_volume`                                                                       |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `page`\                                                                                                                                       | `citation_firstpage`                                                                    |
| <sub>Will be split on `-` to create appropriate page metadata.</sub>                                                                          |                                                                                         |
|                                                                                                                                               | `citation_lastpage`                                                                     |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `page-first`                                                                                                                                  | `citation_firstpage`                                                                    |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `page-last`                                                                                                                                   | `citation_lastpage`                                                                     |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `abstract-url`                                                                                                                                | `citation_abstract_html_url`                                                            |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `container-title`                                                                                                                             | `citation_journal_title`                                                                |
|                                                                                                                                               |                                                                                         |
|                                                                                                                                               | <small> For specific types, other meta tags will be produced:                           |
|                                                                                                                                               |                                                                                         |
|                                                                                                                                               | -   type: paper-conference\                                                             |
|                                                                                                                                               |     `citation_conference_title`                                                         |
|                                                                                                                                               |                                                                                         |
|                                                                                                                                               | -   type: book\                                                                         |
|                                                                                                                                               |     `citation_book_title`                                                               |
|                                                                                                                                               |                                                                                         |
|                                                                                                                                               | -   type: chapter\                                                                      |
|                                                                                                                                               |     `citation_inbook_title` </small>                                                    |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `number`                                                                                                                                      | `citation_technical_report_number`                                                      |
|                                                                                                                                               |                                                                                         |
|                                                                                                                                               | <sub>`citation_technical_report_number` will be created if the type is report.</sub>    |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `publisher`                                                                                                                                   | `citation_publisher`                                                                    |
|                                                                                                                                               |                                                                                         |
|                                                                                                                                               | <small>For specific types, other meta tags will be produced:                            |
|                                                                                                                                               |                                                                                         |
|                                                                                                                                               | -   type: paper-conference\                                                             |
|                                                                                                                                               |     `citation_conference`                                                               |
|                                                                                                                                               |                                                                                         |
|                                                                                                                                               | -   type: thesis\                                                                       |
|                                                                                                                                               |     `citation_dissertation_institution`                                                 |
|                                                                                                                                               |                                                                                         |
|                                                                                                                                               | -   type:report\                                                                        |
|                                                                                                                                               |     `citation_technical_report_institution`                                             |
|                                                                                                                                               |                                                                                         |
|                                                                                                                                               | </small>                                                                                |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `container-title-short`                                                                                                                       | `citation_journal_abbrev`                                                               |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
| `collection-title`                                                                                                                            | `citation_series_title`                                                                 |
+-----------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+

[^1]: Specify one or more authors using one of the following:

    ``` yaml
    author: Norah Jones
    ```

    or multiple values like:

    ``` yaml
    author:
    -   Norah Jones
    -   Nick Fury
    ```

    The list of authors provded under the citation key will be used instead of the document authors when generating the html metadata.

[^2]: Specify one or more editors using one of the following:

    ``` yaml
    editors: Norah Jones
    ```

    or multiple values like:

    ``` yaml
    editors:
    -   Norah Jones
    -   Nick Fury
    ```

[^3]: Note that the `keyword` citation field is a comma separated string of keywords (consistent with CSL).

For example, citation data for a published conference paper defined as such in the document front matter:

``` yaml
title: A Published Conference Paper
author:
  - name: Norah Jones
    affiliation: School of Hard Knocks
    orcid: 0000-0001-8715-9476
citation:
  type: paper-conference
  container-title: "Proceedings of the annual conference of the Society for Research"
  publisher: "Society for Research"
  issued: 2020/09/23
  volume: 2
  doi: "10.23915/reprodocs.00010"
  url: https://example.com/summarizing-output
  page-first: 46
  page-last: 53
  editor:
  - Don Draper
  - Nick Fury
google-scholar: true  
```

provides HTML metadata like:

``` html
<meta name="citation_title" content="A Published Conference Paper">
<meta name="citation_author" content="Norah Jones">
<meta name="citation_editor" content="Nick Cage">
<meta name="citation_editor" content="Don Draper">
<meta name="citation_publication_date" content="2020-09-23">
<meta name="citation_cover_date" content="2020-09-23">
<meta name="citation_year" content="2020">
<meta name="citation_fulltext_html_url" content="https://example.com/summarizing-output">
<meta name="citation_doi" content="10.23915/reprodocs.00010">
<meta name="citation_volume" content="2">
<meta name="citation_language" content="en">
<meta name="citation_conference_title" content="Proceedings of the annual conference of the Society for Research">
<meta name="citation_conference" content="Society for Research">
```
```````

## File: docs/authoring/cross-reference-options.qmd
```````
---
title: "Cross-Reference Options"
format: html
---

## Overview 

There are a wide variety of options available for customizing caption labels and references. These options are all specified within the `crossref` key of document metadata.

On this page we highlight some of the most useful, but you can find all available `crossref` options on the [Cross-Reference Options](/docs/reference/metadata/crossref.qmd) reference page.

::: {.callout-note appearance="simple"}
Note that since LaTeX does its own formatting and layout of figures and tables, not all of these options will apply when rendering to PDF. Specifically, delimiter options like `title-delim` and numbering options like `labels` don't work for PDF output. Additionally, formatting directives are not applied (e.g. italicizing the figure title) for LaTeX titles.
:::

## Titles

You can specify the title prefix used for captions using `*-title` options. You can also specify the delimiter used between the prefix and the caption using the `title-delim` option. For example:

``` yaml
---
title: "My Document"
crossref:
  fig-title: Fig     # (default is "Figure")
  tbl-title: Tbl     # (default is "Table")
  title-delim: "—"   # (default is ":")
---
```

## References {#references}

You can specify the prefix used for inline reference type using `*-prefix` options. You can also specify whether references should be hyper-linked using the `ref-hyperlink` option. For example:

``` yaml
---
title: "My Document"
crossref:
  fig-prefix: figure   # (default is "Figure")
  tbl-prefix: table    # (default is "Table")
  ref-hyperlink: false # (default is true)
---
```

## Numbering

There are a variety of numbering schemes available for cross-references, including:

-   `arabic` (1, 2, 3)

-   `roman` (I, II, III, IV)

-   `roman i` (i, ii, iii, iv)

-   `alpha x` (start from letter 'x')

-   `alpha X` (start from letter 'X')

You can specify the numbering scheme used for all types (other than sub-references) using the `labels` option. For sub-references (e.g. subfigures), you can specify the number scheme using the `subref-labels` option. For example:

``` yaml
---
title: "My Document"
crossref:
  labels: alpha a        # (default is arabic)
  subref-labels: roman i # (default is alpha a)
---
```

If you would like, you can specify the number scheme for a specific type using the `*-labels` options. For example:

``` yaml
---
title: "My Document"
crossref:
  fig-labels: alpha a    # (default is arabic)
  tbl-labels: alpha a    # (default is arabic)
  subref-labels: roman i # (default is alpha a)
---
```

If both `labels` and a type specific label option is provided, the type specific option will override the `labels` option.

## Chapter Numbering

You can use the `crossref: chapters` option to indicate that top-level headings (H1) in your document correspond to chapters, and that cross-references should be sub-numbered by chapter. For example:

``` markdown
---
title: "My Document"
author: "Jane Doe"
number-sections: true
crossref:
  chapters: true
---

# Introduction

![Elephant](elephant.png){#fig-elephant}

See @fig-elephant for an illustration.
```

![](images/crossref-chapters.png){fig-alt="A line drawing of an elephant. Above it is the text '1 Introduction' in large, bold font. The label 'Figure 1.1: Elephant' is centered underneath it. The text 'See fig. 1.1 for an illustration' is aligned to the left underneath that."}
```````

## File: docs/authoring/cross-references-custom.qmd
```````
---
title: Custom Float Cross-Reference Types
crossref:
  custom:
    - kind: float
      reference-prefix: Video
      key: vid
---

{{< include /docs/_require-1.4.qmd >}}

## Overview

Cross-referenceable [figures](#figures), [tables](#tables) and [code listings](#code-listings) are examples of *float* cross-references. Floats can appear in the rendered document at locations other than where they are defined, i.e. they float, and usually have captions. 

You can define custom float cross-reference types using the `custom` key to the `crossref` option either in your document or project metadata. At a minimum, a custom type needs:

- `kind`, which currently can only be `float`
- `key`, the abbreviation used in the reference identifier ("In `@fig-1`, ...")
- `reference-prefix`, used for the reference in output ("In Figure 1, ...")

For example, the following YAML defines a new cross-reference type for videos:

``` yaml
crossref:
  custom:
    - kind: float
      reference-prefix: Video
      key: vid
```

You can then use this new type with the [Cross-Reference Div Syntax](cross-references-divs.qmd) in a document:

``` {.markdown shortcodes="false"}
::: {#vid-cern}

{{< video https://www.youtube.com/embed/wo9vZccmqwc >}}

"CERN: The Journey of Discovery"

:::

In @vid-cern...
```

Which renders as:

::: {#vid-cern}
{{< video https://www.youtube.com/embed/wo9vZccmqwc >}}

"CERN: The Journey of Discovery"
:::

In @vid-cern...

There are some additional options that give you more control over the appearance of the cross-reference:

- `caption-prefix`, the text used to construct the caption title shown under the float ("Figure 1: ..."). If unspecified, Quarto will use the value of `reference-prefix`.

- `caption-location`, the position of the the caption. Options are: `top`, `bottom` (default) or `margin`.

- `space-before-numbering`, whether there is a space between the prefix and number. Set to `false` to omit the space (e.g. "Figure1").


You can find a complete listing of the options available for the `custom` key on the [Cross-Reference Options](/docs/reference/metadata/crossref.qmd#custom) reference page.

## PDF Output

If your output format is `pdf` you'll also need to specify `latex-env`, a name to be used for the float environment wrapped around the element in the intermediate TeX. For example, to use the custom video reference type you could add `latex-env: video`:

``` yaml
format: pdf
crossref:
  custom:
    - kind: float
      reference-prefix: Video
      key: vid
      latex-env: video
```

You can add a listing of your custom cross-references to your document by including a raw LaTeX `\listof` command. The name of the command is `listof` followed by the value of `latex-env`, followed by an `s`. For example, for the custom video type above, where the `latex-env` was `video`, the command is `\listofvideos{}`:

``` yaml
---
format: pdf
crossref:
  custom:
    - kind: float
      reference-prefix: Video
      key: vid
      latex-env: video
---

\listofvideos{}

```

By default, the title of the listing (e.g "List of Videos") is constructed from the `reference-prefix` value. You can specify something else with the `latex-list-of-description` value.

## Example: Supplemental Figures

As another example of a custom cross-reference type consider a document with supplemental figures. For instance, you might require: 

-   Supplemental figures have their own counter, distinct from that of figures.
-   Supplemental figures have labels that look like "Figure S1", "Figure S2" etc.
-   Supplemental figures appear in their own "List of Supplementary Figures" listing.

You could define this supplemental figure type with the following:

```yaml
crossref:
  custom:
    - kind: float
      key: suppfig
      latex-env: suppfig
      reference-prefix: Figure S
      space-before-numbering: false
      latex-list-of-description: Supplementary Figure
```

Note the use of `space-before-numbering: false`, which prevents a space between the `reference-prefix` or `caption-prefix` and the counter, so that labels will appear as "Figure S1", "Figure S2" etc.
```````

## File: docs/authoring/cross-references-divs.qmd
```````
---
title: Cross-Reference Div Syntax
---

{{< include /docs/_require-1.4.qmd >}}

## Overview

Cross-referenceable [figures](#figures), [tables](#tables) and [code listings](#listings) are known as *float* cross-references. Floats can appear in the rendered document at locations other than where they are defined, i.e. they float, and usually have captions. 

Along with compact syntax for the most common uses of cross-references, Quarto also provides a more general div syntax for declaring floats that can be cross-referenced. To declare a cross-referenceable float, place the content inside a fenced div with the reference identifier as an attribute. The last paragraph inside the fenced div will be treated as the caption. For example:

````{.markdown}
::: {#fig-example}

CONTENT

Caption

:::
````

To be recognized as a cross-reference the identifier must begin with one of the built-in float reference types (Figures (`fig-`), Tables (`tbl-`) and Listings (`lst-`)), or be defined as a [custom float cross-reference](cross-references-custom.qmd) type.

You can then refer to the element as usual with the `@` syntax, e.g. 

```markdown
@fig-example shows...
```

The content can be any Quarto markdown. For example, @fig-table is a markdown table treated like a figure:

````markdown
::: {#fig-table}

| A | B |
|---|---|
| C | D |

A table treated like a figure 

:::
````

::: {#fig-table .column-margin}

| A | B |
|---|---|
| C | D |

A table treated like a figure 

:::

@tbl-table is an image treated like a table:

````markdown
::: {#tbl-table}

![](table.png)

An image treated like a table

:::
````

::: {#tbl-table .column-margin}

![](images/crossref-div-table.png)

An image treated like a table

:::

@fig-code is a code cell treated like a figure:

````markdown
::: {#fig-code}

```r
library(tidyverse)
starwars |> 
  ggplot(aes(height, mass)) + 
  geom_point()
```

A code cell treated like a figure.

:::
````

::: {#fig-code .column-margin}

```r
library(tidyverse)
starwars |> 
  ggplot(aes(height, mass)) + 
  geom_point()
```

A code cell treated like a figure.

:::


On this page, we illustrate common use cases for [Figures](#figures), [Tables](#tables) and [Code Listings](#listings) then some applications of the div syntax to:

* [Cross-reference a video](#videos)
* [Cross-reference a diagram](#diagrams)
* [Produce subreferences to mixed content](#subreferences)
* [Use computed values in a caption](#computed-captions)

## Figures {#figures}

{{< include _cross-reference-divs-figure.qmd >}}

You can cross-reference a figure created by an executable code cell by including the code cell as the content:

````markdown
::: {#fig-line-plot}

```{{python}}
import matplotlib.pyplot as plt
plt.plot([1,23,2,4])
plt.show()
```

A line plot
:::
````

In the above example, you can reference the figure with `@fig-line-plot`, but not the code, which appears inline. If you would also like to be able to refer to the code, you can do so using code chunk options rather than the div syntax, see [Cross-References for Executable Code Blocks](cross-references.qmd#code-listings) for details.


## Tables

{{< include _cross-reference-divs-table.qmd >}}

If the table is produced by an executable code cell, put the cell inside the div as content, e.g:

````markdown
::: {#tbl-planets}

```{{python}}
from IPython.display import Markdown
from tabulate import tabulate
table = [["Sun","696,000",1.989e30],
         ["Earth","6,371",5.972e24],
         ["Moon","1,737",7.34e22],
         ["Mars","3,390",6.39e23]]
Markdown(tabulate(
  table, 
  headers=["Astronomical object","R (km)", "mass (kg)"]
))
```

Astronomical object

:::
````

In the above example, you can reference the table with `@tbl-planets`, but not the code, which appears inline. If you would also like to be able to refer to the code, you can do so using code chunk options rather than the div syntax, see [Cross-References for Executable Code Blocks](cross-references.qmd#code-listings) for details.

## Listings

{{< include _cross-reference-divs-listing.qmd >}}

This also works for executable code cells that produce no output:

````markdown
::: {#lst-assign}

```{{r}}
x <- 1
```

Assignment in R

:::
````

However, if any output is produced, it is assumed the output should be the content of the cross-reference, and the code is lifted out and placed inline. For example, the code cell here produces output:

````{.markdown}
::: {#lst-assign-output}

```{{r}}
x <- 1
x
```

Assignment in R

:::

@lst-assign-output

````

When rendered the above results in output being the contents of the listing, with the code appearing before the listing:

![](images/crossrefs-listing-output.png){fig-alt="Screenshot of a listing cross-reference. A code cell comes first, followed by Listing 1 which contains code output."}

If you need to reference both the code its output, use a combination of a display block and a code block with the code cell option `echo: false`:

````{.markdown}
::: {#lst-assign-both}

```r
x <- 1
x
```

```{{r}}
#| echo: false
x <- 1
x
```

Assignment in R

:::

````

When the output is a figure or table, you can reference the code and the output individually by using code cell options, rather than the div syntax, as described in [Cross-References for Executable Code Blocks](cross-references.qmd#code-listings).


## Diagrams

{{< include _cross-reference-divs-diagram.qmd >}}

## Videos 

{{< include _cross-reference-divs-video.qmd >}}

## Subreferences

::: callout-note

When your sub-content is either all figures or all tables there is abbreviated syntax, see the Cross References page for [Subfigures](cross-references.qmd#subfigures) and [Subtables](cross-references.qmd#subtables) for details.

:::

Cross-reference divs can be nested to create elements with subreferences. For example, the outer div here defines the `fig-subrefs` reference along with the main caption, while the inner divs define `fig-first` and `fig-second` along with their respective captions:

````markdown
:::: {#fig-subrefs}

::: {#fig-first}

CONTENT 1

First caption
:::

::: {#fig-second}

CONTENT 2

Second caption
:::

Main caption
::::
````

This renders as:

:::: {#fig-subrefs}

::: {#fig-first}

CONTENT 1

First caption
:::

::: {#fig-second}

CONTENT 2

Second caption
:::

Main caption
::::

Both the main element and the sub elements can be referenced directly in the text, e.g. 

```markdown
@fig-subrefs, @fig-first, @fig-second
```

This renders as: @fig-subrefs, @fig-first, @fig-second.

Combined with layout attributes, you can create complex layouts of mixed content where each element can be referenced. For example:

````markdown
:::: {#fig-complex layout="[[1, 1], [1]]"}

::: {#fig-elephant}

![](images/elephant.jpg)

An image file
:::

::: {#fig-scatterplot}

```{{r}}
#| echo: false
plot(1:10)
```

A computational figure
:::

::: {#fig-diagram}

```{dot}
//| fig-height: 2
digraph {
  rankdir = "LR";
  Transform -> Visualize
}
```

A diagram
:::

Example figure combining different types of content
::::
````

This renders as:

![](images/crossrefs-complex-layout.png){fig-alt="A screenshot of a figure layout with two rows. The top row has two columns: on the left an image of an elephant silhouetted against a sunset with the caption (a) An image file; on the right a scatterplot with the caption (b) A computational figure. In the bottom row is a flow chart with a node Transform linked to the node Visualize with the caption (c) A diagram. Below the layout is the caption: Figure 1: Example figure combining different types of content."}


## Computed Captions

If you want to include computed values in a caption, use the cross-reference div syntax, along with an [inline code expression](/docs/computations/execution-options.qmd#inline-code). For example:

:::: {.panel-tabset}

## Python


````markdown
::: {#fig-box}

```{{python}}
#| echo: false
import matplotlib.pyplot as plt

x = [1, 2, 3, 4, 5, 10]
p = plt.boxplot(x)
plt.show()
```

This dataset has `{python} len(x)` observations.

:::
````

## R

````markdown
::: {#fig-box}

```{{r}}
#| echo: false


x <- c(1, 2, 3, 4, 5, 10)
boxplot(x)

```

This dataset has `{r} length(x)` observations.

:::
````

::::

## Conditional Content

The cross-reference div syntax combined with [conditional content](/docs/authoring/conditional.qmd) allows the content of your reference to vary by format. For example, you might want an interactive JavaScript based plot when the format is HTML, but otherwise produce a static plot:


````markdown

::: {#fig-scatterplot}  
  
:::: {.content-visible when-format="html"}

```{{r}}
# Code to produce JavaScript based plot
```
::::

:::: {.content-visible unless-format="html"}

```{{r}}
# Code to produce static plot
```
::::

Scatterplot

:::

@fig-scatterplot
````
```````

## File: docs/authoring/cross-references.qmd
```````
---
title: "Cross References"
format: html
toc-expand: 2
toc-depth: 4
aliases: 
  - /docs/authoring/cross-references-listings.html
  - /docs/authoring/cross-references-callouts.html
---

## Overview

Cross-references make it easier for readers to navigate your document by providing numbered references and hyperlinks to various entities like figures and tables. Every cross-referenceable entity requires a label---a unique identifier prefixed with a cross-reference type e.g. `#fig-element`. For example, this is a cross-referenceable figure:

``` markdown
![Elephant](elephant.png){#fig-elephant}
```

The presence of the label (`#fig-elephant`) makes this figure referenceable. This enables you to use the following syntax to refer to it elsewhere in the document:

``` markdown
See @fig-elephant for an illustration.
```

Here is what this would look like rendered to HTML:

![](images/crossref-figure.png){.border fig-alt="A line drawing of an elephant. The caption 'Figure 1: Elephant' is centered beneath it." width="100%"}

Note that cross reference identifiers must start with their type (e.g. `fig-` or `tbl-`). So the identifier `#fig-elephant` is valid for a cross-reference but the identifiers `#elephant` and `#elephant-fig` are not.

::: {#reserved-prefixes}
::: {.callout-warning}

## Reserved Prefixes 

Unless you are creating a cross-reference, avoid using the reserved cross-reference prefixes for code cell labels (e.g. set using the `label` code cell option) and element IDs (set using a `#` in an attribute). 
 
The reserved prefixes are: `fig`, `tbl`, `lst`, `tip`, `nte`, `wrn`, `imp`, `cau`, `thm`, `lem`, `cor`, `prp`, `cnj`, `def`, `exm`, `exr`, `sol`, `rem`, `eq`, `sec`.

Also avoid using underscores (`_`) in labels and IDs as this can cause problems when rendering to PDF with LaTeX.

:::
:::

Quarto enables you to create cross-references to figures, tables, equations, sections, code listings, theorems, proofs, and more. Cross references can also be applied to dynamic output from Knitr and Jupyter. 

On this page you'll learn:

*  Different ways to use the `@` syntax to create [References](#references).
*  How to add [Lists](#lists) of references in LaTeX / PDF output.

Then, we enumerate the syntax for the different types of elements you might want to reference:

*  [Floats](#floats): [Figures](#figures), [Tables](#tables) and [Code Listings](#code-listings)
* Blocks: [Callouts](#callouts), [Theorems and Proofs](#theorems-and-proofs) and [Equations](#equations) 
*  [Sections](#sections)

There are options available that control the text used for titles and references. For example, you could change "Figure 1" to read "Fig 1" or "fig. 1". See the [options documentation](cross-reference-options.qmd) for details on how to customize the text used for cross-references.

## References

The examples on this page all use the default syntax for inline references (e.g. `@fig-elephant`), which results in the reference text "Figure 1", "Table 1", etc.

You can customize the appearance of inline references by either changing the syntax of the inline reference or by setting options. Here are the various ways to compose a cross-reference and their resulting output:

| Type          | Syntax                | Output   |
|---------------|-----------------------|----------|
| Default       | `@fig-elephant`       | Figure 1 |
| Capitalized   | `@Fig-elephant`       | Figure 1 |
| Custom Prefix | `[Fig @fig-elephant]` | Fig 1    |
| No Prefix     | `[-@fig-elephant]`    | 1        |

Note that the capitalized syntax makes no difference for the default output, but would indeed capitalize the first letter if the default prefix had been changed via an [option](cross-reference-options.qmd#references) to use lower case (e.g. "fig.").

These syntax variations work not only for Figures, but for all cross-referenceable elements in Quarto such as Tables, Equations, Theorems, and so on.

You can also group cross-references using the following syntax:

``` markdown
As illustrated in [@fig-elephant; @fig-panther; @fig-rabbit].
```

There are a number of options that can be used to further customize the treatment of cross-references. See the guide on [Cross Reference Options](cross-reference-options.qmd#references) for additional details.

## Lists

For LaTeX / PDF output, you can use the raw LaTeX commands `\listoffigures`, `\listoftables` and `\listoflistings` to produce listings of all figures, tables, etc. within a document. You can use the `lof-title`, `lot-title`, and `lol-title` crossref options to customize the title of the listing.

For example:

``` markdown
---
title: "My Document"
crossref:
  lof-title: "List of Figures"
format: pdf
---

\listoffigures
```

Note that the default titles for the lists use the form displayed above (i.e. "List of \<Type\>").

## Floats

[Figures](#figures), [tables](#tables) and [code listings](#code-listings) are known as "float" cross-references. Floats can appear in the rendered document at locations other than where they are defined, i.e. they float, and usually have captions. 

In addition to the compact syntax for the most common uses of float cross-references, you can also define float cross-references with a div syntax. Use the div syntax when you need more flexibility in the content of your cross-reference, for example, to have a [video](cross-references-divs.qmd#videos) be referenced as a figure. Basic examples of the div syntax are included in the sections below, but you can find more complicated examples in [Cross-Reference Div Syntax](cross-references-divs.qmd). 

You can also define custom types of float cross-reference to reference elements beyond figures, tables and code listings. Read more at [Custom Float Cross-References](cross-references-custom.qmd).


### Figures

As described on the Overview above, this is the markdown used to create a cross-referenceable figure and then refer to it:

``` markdown
![Elephant](elephant.png){#fig-elephant}

See @fig-elephant for an illustration.
```

Note again that cross-reference identifiers must start with their type (e.g. `#fig-`) and that cross-reference identifiers must be all lower case.

{{< include _cross-reference-divs-figure.qmd >}}

You can read about using div syntax with figures at [Cross-Reference Div Syntax](cross-references-divs.qmd#figures).

#### Subfigures

You may want to create a figure composed of multiple subfigures. To do this, enclose the figures in a div (with its own label and caption) and give each subfigure its own label and (optionally) caption. You can then refer to either the entire figure in a reference or a single subfigure:

``` markdown
::: {#fig-elephants layout-ncol=2}

![Surus](surus.png){#fig-surus}

![Hanno](hanno.png){#fig-hanno}

Famous Elephants
:::

See @fig-elephants for examples. In particular, @fig-hanno.
```

Here is what this looks like when rendered as HTML:

![](images/crossref-subfigures.png){.preview-image .border fig-alt="An artistic rendition of Surus, Hannibal's last war elephant, is on the left. Underneath this picture is the caption '(a) Surus.' On the right is a line drawing of Hanno, a famous elephant. Underneath this picture is the caption '(b) Hanno.' The words 'Figure 1: Famous elephants' are centered beneath both pictures. The text 'See fig. 1 for examples. In particular, fig. 1(b).' is underneath this text and is aligned to the left." width="100%"}

Note that we also used the `layout-ncol` attribute to specify a two-column layout. See the article on [Figures](figures.qmd) for more details on laying out panels of figures.

#### Computations

Figures produced by Jupyter and Knitr can also be cross-referenced. To do this, add a `label` and `fig-cap` option at the top of the code block. For example:

::: panel-tabset
##### Jupyter

    ```{{python}}
    #| label: fig-plot
    #| fig-cap: "Plot"

    import matplotlib.pyplot as plt
    plt.plot([1,23,2,4])
    plt.show()
    ```

    For example, see @fig-plot.

![](images/crossref-figure-jupyter.png){fig-alt="A line plot with the label 'Figure 1: Plot' centered underneath it. The text 'For example, see fig. 1' is underneath this label and aligned to the left."}

##### Knitr

    ```{{r}}
    #| label: fig-plot
    #| fig-cap: "Plot"

    plot(cars)
    ```

    For example, see @fig-plot.

![](images/crossref-figure-r.png){fig-alt="A scatter plot of speed versus distance for the `cars` dataset. The label 'Figure 1: Plot' is centered beneath it. The text 'For example, see fig. 1' is aligned to the left underneath that."}
:::

{{< include _computed-caption.md >}}

You can also create multiple figures within a code cell and reference them as subfigures. To do this use `fig-cap` for the main caption, and `fig-subcap` to provide an array of subcaptions. For example:

    ```{{python}}
    #| label: fig-plots
    #| fig-cap: "Plots" 
    #| fig-subcap:
    #|   - "Plot 1"
    #|   - "Plot 2" 
    #| layout-ncol: 2

    import matplotlib.pyplot as plt
    plt.plot([1,23,2,4])
    plt.show()

    plt.plot([8,65,23,90])
    plt.show()
    ```

    See @fig-plots for examples. In particular, @fig-plots-2.

![](images/crossref-subfigures-jupyter.png){fig-alt="Two line plots side-by-side. The plot on the left has the caption '(a) Plot 1' centered underneath it. The plot on the right has the caption '(b) Plot 2' centered underneath it. The text 'Figure 1: Plots' is centered underneath both of these plots. The text 'See fig. 1 for examples. In particular, fig. 1(b)' is aligned to the left underneath that."}

Note that subfigure reference labels are created automatically based on the main chunk label (e.g. `@fig-plots-1`, `@fig-plots-2`, etc.).

If you'd like subfigure captions that include only an identifier, e.g. "(a)", and not a text caption, then specify `fig-subcap: true` rather than providing explicit subcaption text:

```{{python}}
#| label: fig-plots
#| fig-cap: "Plots" 
#| fig-subcap: true
#| layout-ncol: 2
```

### Tables

{{< include _table-crossrefs.md >}}

::: callout-important
## Label Prefix

In order for a table to be cross-referenceable, its label must start with the `tbl-` prefix.
:::

{{< include _cross-reference-divs-table.qmd >}}

You can read more about using div syntax with tables at [Cross-Reference Div Syntax](cross-references-divs.qmd#tables).

#### Subtables

{{< include _table-crossrefs-subtables.md >}}

#### Computations

You can also cross-reference tables created from code executed via computations. To do this, add the `label` and `tbl-cap` cell options. For example:

```{{r}}
#| label: tbl-iris
#| tbl-cap: "Iris Data"

library(knitr)
kable(head(iris))
```

![](/docs/authoring/images/crossref-table-knitr.png){fig-alt="Example table output." fig-align="center" width="80%"}

{{< include _computed-caption.md >}}

You can also create multiple tables within a code cell and reference them as subtables. To do this, add a `tbl-subcap` option with an array of subcaptions. For example:

```{{r}}
#| label: tbl-tables
#| tbl-cap: "Tables"
#| tbl-subcap:
#|   - "Cars"
#|   - "Pressure"
#| layout-ncol: 2

library(knitr)
kable(head(cars))
kable(head(pressure))
```

![](/docs/authoring/images/crossref-subtable-knitr.png){fig-alt="Two tables side-by-side. Each table has 2 columns and 8 rows. The table on the left is titled '(a) Cars'. The table on the right is titled '(b) Pressure'. Centered underneath both tables is the text 'Table 1: Tables.'" fig-align="center" width="80%"}

If you'd like subtable captions that include only an identifier, e.g. "(a)", and not a text caption, then specify `tbl-subcap: true` rather than providing explicit subcaption text:

```{{r}}
#| label: tbl-tables
#| tbl-cap: "Tables"
#| tbl-subcap: true
#| layout-ncol: 2

library(knitr)
kable(head(cars))
kable(head(pressure))
```

![](/docs/authoring/images/crossref-subtable-nocaption-knitr.png){fig-align="center" width="80%"}


### Code Listings

To create a reference-able code block, add a `#lst-` identifier along with a `lst-cap` attribute. For example:

```` markdown
```{#lst-customers .sql lst-cap="Customers Query"}
SELECT * FROM Customers
```

Then we query the customers database (@lst-customers).
````

{{< include _cross-reference-divs-listing.qmd >}}

You can read more about using div syntax for code listings in [Cross-Reference Div Syntax](cross-references-divs.qmd).

{{< include _cross-references-listings.qmd >}}

## Callouts

{{< include _cross-references-callouts.qmd >}}

## Theorems and Proofs

Theorems are commonly used in articles and books in mathematics. To include a reference-able theorem, create a div with a `#thm-` label (or one of other theorem-type labels described below). You also need to specify a theorem name either via the first heading in the block. You can include any content you like within the div. For example:

``` markdown
::: {#thm-line}

## Line

The equation of any straight line, called a linear equation, can be written as:

$$
y = mx + b
$$
:::

See @thm-line.
```

![](images/crossref-theorem.png){fig-alt="A snippet of a LaTeX document. The first line reads: 'Thereom 1 (Line) The equation of any straight line, called a linear equation, can be written as:' Cenetered on a separate line is the equation 'y = mx + b'. The text 'See thm. 1' is aligned to the left underneath that."}

For LaTeX output, the [amsthm](https://ctan.org/pkg/amsthm?lang=en) package is used for typesetting theorems. For other formats an appropriate treatment is used (the above is an example of HTML output).

There are a number of theorem variations supported, each with their own label prefix:

| **Label Prefix** | **Printed Name** | **LaTeX Environment** |
|------------------|------------------|-----------------------|
| `#thm-`          | Theorem          | theorem               |
| `#lem-`          | Lemma            | lemma                 |
| `#cor-`          | Corollary        | corollary             |
| `#prp-`          | Proposition      | proposition           |
| `#cnj-`          | Conjecture       | conjecture            |
| `#def-`          | Definition       | definition            |
| `#exm-`          | Example          | example               |
| `#exr-`          | Exercise         | exercise              |
| `#sol-`          | Solution         | solution              |
| `#rem-`          | Remark           | remark                |

The `proof` environment receives similar typesetting as theorems, however it is not numbered (and therefore cannot be cross-referenced). To create a proof add the `.proof` class to a div:

``` markdown
::: {.proof}
By induction.
:::
```

As with theorems you can optionally include a heading as the first element of the div (or a `name` attribute) to give the environment a caption for typesetting (this typically appears in parentheses after the environment title).

For LaTeX output the [amsthm](https://ctan.org/pkg/amsthm?lang=en) package is used to typeset these environments. For other formats a similar treatment is used, but you can further customizing this using CSS.

## Equations

Provide an `#eq-` label immediately after an equation to make it referenceable. For example:

``` markdown
Black-Scholes (@eq-black-scholes) is a mathematical model that seeks to explain the behavior of financial derivatives, most commonly options:

$$
\frac{\partial \mathrm C}{ \partial \mathrm t } + \frac{1}{2}\sigma^{2} \mathrm S^{2}
\frac{\partial^{2} \mathrm C}{\partial \mathrm S^2}
  + \mathrm r \mathrm S \frac{\partial \mathrm C}{\partial \mathrm S}\ =
  \mathrm r \mathrm C 
$$ {#eq-black-scholes}
```

Black-Scholes (@eq-black-scholes) is a mathematical model that seeks to explain the behavior of financial derivatives, most commonly options:

$$
\frac{\partial \mathrm C}{ \partial \mathrm t } + \frac{1}{2}\sigma^{2} \mathrm S^{2}
\frac{\partial^{2} \mathrm C}{\partial \mathrm S^2}
  + \mathrm r \mathrm S \frac{\partial \mathrm C}{\partial \mathrm S}\ =
  \mathrm r \mathrm C 
$$ {#eq-black-scholes}

Note that the equation number is included (via `\qquad`) in the right margin of the equation.

## Sections

To reference a section, add a `#sec-` identifier to any heading. For example:

``` markdown
## Introduction {#sec-introduction}

See @sec-introduction for additional context.
```

Note that when using section cross-references, you will also need to enable the `number-sections` option (so that section numbering is visible to readers). For example:

``` yaml
---
title: "My Document"
number-sections: true
---
```
```````

## File: docs/authoring/diagrams.qmd
```````
---
title: "Diagrams"
aliases:
  - /docs/prerelease/1.3/mermaid.html
---

## Overview

Quarto has native support for embedding [Mermaid](https://mermaid-js.github.io/mermaid/#/) and [Graphviz](https://graphviz.org/) diagrams. This enables you to create flowcharts, sequence diagrams, state diagrams, gantt charts, and more using a plain text syntax inspired by markdown.

For example, here we embed a flowchart created using Mermaid:

```{mermaid}
%%| echo: fenced
flowchart LR
  A[Hard edge] --> B(Round edge)
  B --> C{Decision}
  C --> D[Result one]
  C --> E[Result two]
```

As illustrated above, Mermaid diagrams are embedded using `{mermaid}` executable cells.  Graphviz diagrams are embedded using `{dot}` executable cells. Note that cell options are added with slightly different syntax: `%%|` for `{mermaid}`, and `//|` for `{dot}`. 


::: callout-note
For print output formats like `pdf` or `docx`, diagram rendering makes use of the Chrome or Edge web browser to create a high-quality PNG. Quarto can automatically use an existing version of Chrome or Edge on your system, or alternatively if you don't have either installed, can use a lighter-weight library version of Chrome (see [Chrome Install](#chrome-install) below for details).
:::

## Mermaid

Mermaid is a Javascript based diagramming and charting tool that uses Markdown-inspired text definitions and a renderer to create and modify complex diagrams.

Mermaid diagrams use `%%` as their comment syntax, and so cell options are declared using `%%|`. Cell options **must** be included directly beneath the start of the diagram code chunk.

Above we demonstrated a flowchart created with Mermaid, here is a sequence diagram (also embedded using a `{mermaid}` executable cell):

```{mermaid}
%%| echo: fenced
sequenceDiagram
  participant Alice
  participant Bob
  Alice->>John: Hello John, how are you?
  loop Healthcheck
    John->>John: Fight against hypochondria
  end
  Note right of John: Rational thoughts <br/>prevail!
  John-->>Alice: Great!
  John->>Bob: How about you?
  Bob-->>John: Jolly good!
```

Note that Mermaid output varies depending on the target format (e.g. HTML vs. print-based). See the section below on [Mermaid Formats](#mermaid-formats) for additional details.

To learn more about using Mermaid, see the [Mermaid website](https://mermaid-js.github.io/mermaid/) or the [Mermaid book](https://www.amazon.com/Official-Guide-Mermaid-js-beautiful-flowcharts-dp-1801078025/dp/1801078025) (which is written by the creator of Mermaid).

## Graphviz

The Graphviz layout programs take descriptions of graphs in a simple text language, and make diagrams in useful formats. Graphviz has many useful features for concrete diagrams, such as options for colors, fonts, tabular node layouts, line styles, hyperlinks, and custom shapes.

Graphviz diagrams use `//` as their comment syntax, and so cell options are declared using `//|`. Cell options **must** be included directly beneath the start of the diagram code chunk.

For example, here is a simple undirected graph created using graphviz:

```{dot}
//| echo: fenced
graph G {
  layout=neato
  run -- intr;
  intr -- runbl;
  runbl -- run;
  run -- kernel;
  kernel -- zombie;
  kernel -- sleep;
  kernel -- runmem;
  sleep -- swap;
  swap -- runswap;
  runswap -- new;
  runswap -- runmem;
  new -- runmem;
  sleep -- runmem;
}
```


To learn more about Graphviz, see the [Graphviz website](https://graphviz.org/), this list of simple [Graphiz Examples](https://renenyffenegger.ch/notes/tools/Graphviz/examples/index), or the [Graphviz Gallery](https://graphviz.org/gallery/).

## Authoring

There are a variety of tools available to improve your productivity authoring diagrams:

1)  The [Mermaid Live Editor](https://mermaid.live/) is an online tool for editing and previewing Mermaid diagrams in real time.

2)  [Graphviz Online](https://dreampuf.github.io/GraphvizOnline/) provides a similar tool for editing Graphviz diagrams.

3)  [RStudio](https://www.rstudio.com/products/rstudio/download/) includes support for editing and previewing `.mmd` and `.dot` files (with help from the [DiagrammeR](https://rich-iannone.github.io/DiagrammeR/) package).

4)  The Quarto [VS Code Extension](https://marketplace.visualstudio.com/items?itemName=quarto.quarto) supports live preview of diagrams embedded in `.qmd` files and in `.mmd` and `.dot` files:

    ![](images/vscode-graphviz.gif){.border fig-alt="A Quarto document being edited in Visual Studio Code, with a live preview of the currenly edited diagram shown in a pane to the right"}

    Note that you should be sure to have installed the [very latest](https://marketplace.visualstudio.com/items?itemName=quarto.quarto) version of the Quarto VS Code extension to try this out.

## Cross-References

Diagrams can be treated as figures the same way that images and plot output are. For example, if we added the following figure options to the diagram above:

```{{dot}}
//| label: fig-simple
//| fig-cap: "This is a simple graphviz graph."
```

We'd get this output:

```{dot}
//| label: fig-simple
//| fig-cap: "This is a simple graphviz graph."
graph G {
  layout=neato
  run -- intr;
  intr -- runbl;
  runbl -- run;
  run -- kernel;
  kernel -- zombie;
  kernel -- sleep;
  kernel -- runmem;
  sleep -- swap;
  swap -- runswap;
  runswap -- new;
  runswap -- runmem;
  new -- runmem;
  sleep -- runmem;
}
```

We could then create a cross-reference to the diagram with:

```markdown
@fig-simple
```

{{< include _cross-reference-divs-diagram.qmd >}}

## File Include

You might find it more convenient to edit your diagram in a standalone `.dot` or `.mmd` file and then reference it from within your `.qmd` document. You can do this by adding the `file` option to a Mermaid or Graphviz cell.

For example, here we include a very complex diagram whose definition would be too unwieldy to provide inline:

```{{dot}}
//| label: fig-linux-kernel
//| fig-cap: "A diagram of the Linux kernel."
//| file: linux-kernel-diagram.dot
```

```{dot}
//| label: fig-linux-kernel
//| fig-cap: "A diagram of the Linux kernel."
//| file: images/linux-kernel-diagram.dot
```

Note that the `label` and `fig-cap` attributes still work as expected with `file` includes.

## Sizing

By default, diagrams are rendered at their natural size (i.e. they are not stretched to fit the default figure size for the current document). Within HTML output formats, diagrams are also made responsive, so that their width doesn't overflow the current page column. This is similar to the treatment given to images and dynamic JavaScript widgets.

You can disable responsive sizing by specifying the `fig-responsive: false` option. You can also specify explicit sizes via `fig-width` and `fig-height`. For example, here we want to make a mermaid diagram a bit bigger because it contains only a few elements:

```{mermaid}
%%| echo: fenced
%%| fig-width: 6.5
flowchart LR
  A[Hard edge] --> B(Round edge)
  B --> C{Decision}
```

## Mermaid Formats {#mermaid-formats}

When you include a Mermaid diagram in a document, the diagram format used is chosen automatically based on the output format:

| Format                              | Output                      |
|-------------------------------------|-----------------------------|
| HTML (`html`, `revealjs`, etc.)     | Mermaid native (JavaScript) |
| GitHub Flavored Markdown (`gfm`)    | Mermaid code block          |
| Other Formats (`pdf`, `docx`, etc.) | PNG image                   |

The Mermaid native format is used by default whenever the underlying output format supports JavaScript.

When using `format: gfm`, diagrams will be emitted as plain `mermaid` code blocks. This is because both [GitHub](https://github.blog/2022-02-14-include-diagrams-markdown-files-mermaid/) and [GitLab](https://docs.gitlab.com/ee/user/markdown.html#mermaid) natively support rendering Mermaid diagrams from code.

For formats that don't do special handling of Mermaid or lack a JavaScript run-time (e.g. formats like `pdf`, `docx`, `epub`, etc.) a PNG image is created using [Chrome](#chrome-install).

You can change the default behavior using the `mermaid-format` option. For example:

``` yaml
---
format:
  gfm:
    mermaid-format: png
---
```

Valid values for `mermaid-format` include `js`, `png`, and `svg`,

## Mermaid Themes {#mermaid-theming}

{{< include _mermaid-theming.qmd >}}

## Code Echo

Note that unlike other executable cell handlers (e.g. `{python}`), cells with diagrams don't display their code in the rendered document by default. You can display code by adding an `echo: true` option in a comment at the top the cell.

To include code for `{mermaid}`, add `%%| echo: true` to the top of the cell. For example:

```{{mermaid}}
%%| echo: true
```

To include code for `{dot}`, add `//| echo: true` to the top of the cell. For example:

```{{dot}}
//| echo: true
```

## Chrome Install {#chrome-install}

For printing to output formats like `pdf` or `docx`, diagram rendering makes use of the Chrome or Edge web browser to create a high-quality PNG.

Quarto can automatically use an existing version of Chrome or Edge on your system for rendering. Alternatively, if you don't have either, you can install a minimal version of Chrome for use by Quarto with the following command:

``` {.bash filename="Terminal"}
quarto install chromium
```

::: callout-note
Quarto installs headless Chromium via Puppeteer. The bundled Chromium that Puppeteer installs may not work on Docker containers; please check [the Puppeteer documentation](https://github.com/puppeteer/puppeteer/blob/main/docs/troubleshooting.md#running-puppeteer-in-docker) as well as [this article](https://pptr.dev/next/troubleshooting#running-puppeteer-on-wsl-windows-subsystem-for-linux) if you are attempting to install within Windows Subsystem for Linux (WSL).
:::
```````

## File: docs/authoring/figures.qmd
```````
---
title: "Figures"
format: html
aliases: 
  - figures-and-layout.html
  - figure-layout.html
---

Quarto includes a number of features aimed at making it easier to work with figures and subfigures, as well as for laying out panels that contain multiple figures, tables, or other content.

## Figure Basics

In Pandoc markdown, a figure is created whenever a captioned image appears by-itself in a paragraph. For example:

``` markdown
![Elephant](elephant.png)
```

This results in the following treatment for various output types:

| HTML                                                                              | PDF                                                                  | Word                                                                  |
|---------------------------|-----------------------|-----------------------|
| ![](images/html-figure.png){fig-alt="A line drawing of an elephant." width="340"} | ![](images/pdf-figure.png){fig-alt="A line drawing of an elephant."} | ![](images/word-figure.png){fig-alt="A line drawing of an elephant."} |

Note that for LaTeX / PDF output figures are automatically numbered (you can arrange for figures to be numbered in other formats using [Cross References](cross-references.qmd)).

### Figure Sizing

By default figures are displayed using their actual size (subject to the width constraints imposed by the page they are rendered within). You can change the display size by adding the `width` and `height` attributes to the figure. For example:

``` markdown
![Elephant](elephant.png){width=300}
```

Note that if only `width` is specified then `height` is calculated automatically. If you need to modify the default behaviour just add an explicit `height` attribute.

The default units for `width` and `height` are pixels. You can also specify sizes using a percentage or a conventional measurement like inches or millimetres. For example:

``` markdown
![Elephant](elephant.png){width=80%}
![Elephant](elephant.png){width=4in}
```

### Linked Figures

When rendering with Quarto, you can enclose a figure within a link and it will still be treated within output as a captioned figure. For example:

``` markdown
[![Elephant](elephant.png)](https://en.wikipedia.org/wiki/Elephant)
```

### Figure Alignment

Figures are center aligned by default. Add the `fig-align` attribute to the image to use a different alignment. For example:

``` markdown
![Elephant](elephant.png){fig-align="left"}
```

Note that figure captions are left aligned to accommodate longer caption text (which looks odd when center aligned).

### Alt Text

You can add alternative text to a figure by adding the `fig-alt` attribute to the image. For example, the following Markdown...

``` markdown
![](elephant.png){fig-alt="A drawing of an elephant."}
```

... will create the following HTML with the corresponding alt tag:

``` html
<img src="elephant.png" alt="A drawing of an elephant.">
```

Note that the figure caption, title, and alt text can all be different. For example, the following code...

``` markdown
![Elephant](elephant.png "Title: An elephant"){fig-alt="A drawing of an elephant."}
```

...produces this HTML:

``` html
<img src="elephant.png" title="Title: An elephant" alt="A drawing of an elephant.">
```

To render the caption instead as alt text
you can append a backslash to the line
as detailed in [the Pandoc documentation](https://pandoc.org/MANUAL.html#extension-implicit_figures):

``` markdown
![A drawing of an elephant.](elephant.png)\
```

### Multiformat Figures

You can write markdown that provides a distinct image file format depending on the target output format. To do this simply leave-off the extension, for example:

``` markdown
![](elephant)
```

By default this will look for `elephant.png`, however if you are rendering to PDF it will look for `elephant.pdf`. You can customize this behavior using the `default-image-extension` option. For example:

``` yaml
format:
  html:
    default-image-extension: svg
  pdf:
    default-image-extension: tex
```

### Lightbox Figures

In HTML output formats you can add  lightbox styling and behavior to images to allow a reader to click to see a larger version of the image. For example, the following image has lightbox treatment (click on the image to see lightbox in action):

![An elephant](elephant.png){.lightbox width=50%}

Lightbox treatment can be added by adding the class `.lightbox` to an image: 

```markdown
![An elephant](elephant.png){.lightbox}
```

For further details and other ways to enable and disable lightbox treatment see [Lightbox Figures](/docs/output-formats/html-lightbox-figures.qmd).

### Applying Multiple Parameters 
To combine the above methods, separate arguments by a space, for example:
``` markdown
![](elephant.png){fig-alt="A drawing of an elephant." fig-align="left" width=20%}
```

## Cross References

You can cross-reference figures by adding an ID with the `fig-` prefix to them, and then referencing the figure using the `@` prefix. For example:

``` markdown
![An Elephant](elephant.png){#fig-elephant}

This is illustrated well by @fig-elephant.
```

For figures produced by executable code cells, include a `label` with a `fig-` prefix to make them cross-referenceable. For example:

```` markdown
For a demonstration of a line plot, see @fig-line-plot.

```{{python}}
#| label: fig-line-plot
#| fig-cap: "A line plot "

import matplotlib.pyplot as plt
plt.plot([1,23,2,4])
plt.show()
```
````

::: callout-important
## Label Prefix

In order for a figure to be cross-referenceable, its label must start with the `fig-` prefix.
:::

See the article on [Cross References](cross-references.qmd) for additional details.

## Subfigures

If you have several figures that appear as a group, you can create a figure div to enclose them. For example:

``` markdown
::: {#fig-elephants layout-ncol=2}

![Surus](surus.png){#fig-surus}

![Hanno](hanno.png){#fig-hanno}

Famous Elephants
:::
```

Again, the last paragraph provides the main caption, and the individual figures carry the sub-captions. Here is what this looks like when rendered as HTML:

![](images/elephant-subfigures.png){fig-alt="An artistic rendition of Surus, Hannibal's last war elephant, is on the left. Underneath this picture is the caption '(a) Surus.' On the right is a line drawing of Hanno, a famous elephant. Underneath this picture is the caption '(b) Hanno.' The words 'Figure 1: Famous elephants' are centered beneath both pictures."}

Note that the empty lines between the figures (and between the last figure and the caption) are required (it's what indicates that these images belong to their own paragraphs rather than being multiple images within the same paragraph).

Note also that we also used a `layout-ncol` attribute to specify a two-column layout. The next section delves more into customizing figure layouts.

## Figure Panels

Above we demonstrate laying out two side-by-side figures with subcaptions and a main caption. You may or may not want the caption / sub-caption treatment, and you might also want to use multiple rows of figures. All of these variations are possible.

To layout two figures with their own standalone captions (and no main caption), just eliminate the `#fig` identifiers and main caption at the bottom:

``` markdown
::: {layout-ncol=2}
![Surus](surus.png)

![Hanno](hanno.png)
:::
```

![](images/elephant-figures-no-subcaption.png){fig-alt="An artistic rendition of Surus, Hannibal's last war elephant, is on the left. Underneath this picture is the caption 'Surus.' On the right is a line drawing of Hanno, a famous elephant. Underneath this picture is the caption 'Hanno.'"}

You can also eliminate the captions entirely:

``` markdown
::: {layout-ncol=2}
![](surus.png)

![](hanno.png)
:::
```

### Multiple Rows

If you have more than 2 images, you might want to lay them out across multiple rows. You can do this using the `layout-nrow` attribute. For example:

``` markdown
::: {layout-nrow=2}
![Surus](surus.png)

![Hanno](hanno.png)

![Abdul Abbas](abdul-abbas.png)

![Lin Wang](lin-wang.png)
:::
```

![](images/elephant-rows.png){fig-alt="A 2x2 grid of pictures of elephants. There are labels underneath each of the pictures. Clockwise from the upper left, the labels say: Surus, Hanno, Lin Wang, and Abdul Abbas."}

More complex figure arrangements (e.g. rows with varying column layouts) are possible. See the [Custom Layouts](#complex-layouts) section below for more details.

## Figure Divs

You can treat any markdown content you want as a figure by enclosing it in Pandoc div block with an identifier prefaced with `#fig-`. For example, here we create a figure that includes an embedded iframe:

``` markdown
::: {#fig-elephant}

<iframe width="560" height="315" src="https://www.youtube.com/embed/SNggmeilXDQ"></iframe>

Elephant
:::
```

Note that the last paragraph in the div block is used as the figure caption.

## LaTeX Figures

This section describes some figure handling options that are specific to LaTeX output.

One very important thing to note is that using the `fig-env` and `fig-pos` options described below will trigger the creation of a LaTeX floating environment (most often `\begin{figure}`). Depending upon where this LaTeX is generated (e.g., within another `\begin{figure}`), this could produce invalid LaTeX. To be on the safe side, these attributes should typically only be used for images at the very top level of your document.

### Environments

There are a number of LaTeX packages that provide custom figure environments. For example, in two-column formats, the `figure*` environment spans both columns of the document. You can explicitly pass the figure environment to use as the `fig-env` attribute of the image or the fenced div:

``` markdown
![Elephant](surus.jpg){#fig-elephant fig-env="figure*"}

::: {#fig-elephant-2 fig-env="figure*"}

![](surus.jpg)

Another elephant.

:::
```

### Figure Position

The default LaTeX `figure` is a floating environment, so the specific location it appears in your document will depend on its size and the nature of the other content around it. You can exercise some control over this behavior using the `fig-pos` option. The `fig-pos` option provides a placement specifier for the `figure` environment. For example, the `ht` in this LaTeX snippet is the `fig-pos`:

``` latex
\begin{figure}[ht]

\end{figure}
```

You can specify `fig-pos` either at the document level, as an executable code block option, or within markdown. Here we do all three:

```` markdown
---
title: "My Document"
format:
  pdf:
    fig-pos: 'h'
---

```{{python}}
#| fig-pos: 't'

```

![](figure.png){fig-pos='b'}
````

See [this article](https://www.latex-project.org/publications/2014-FMi-TUB-tb111mitt-float-placement.pdf) for additional details on LaTeX figure positioning.

::: callout-note
## Figures and Code Blocks

If your figure was generated by an executable code block and the code was included in the output (`echo: true`), then `fig-pos` will be set to `H` by default (to try to keep it alongside the code that generated it). In all other cases, default LaTeX handing of figure position is used unless you specify an explicit `fig-pos`.
:::

### Short Captions

You can provide a short caption that is used in the "List of Figures" using the `fig-scap` option.
You can specify `fig-scap` as an executable code block option or as an attribute on an image:

````markdown
```{{python}}
#| fig-cap: "Long caption"
#| fig-scap: "Short caption"

```

![Long Caption](figure.png){fig-scap='Short caption'}
````


### PGF/Ti*k*Z Graphics

If you are creating LaTeX output, Quarto will automatically emit the correct LaTeX for markdown images that reference `.tex` files containg [PGF/Ti*k*Z](https://en.wikipedia.org/wiki/PGF/TikZ) vector graphics. For example, the following markdown images:

``` markdown
![](image1.tex)

![](image2.tex){width=80%}
```

Will be written to LaTeX as:

``` tex
\input{image1.tex}

\resizebox{0.8\linewidth}{!}{\input{image2.tex}}
```

As shown above, `width` and `height` percentages are automatically converted to `\linewidth` scaled. Alternatively you can specify custom LaTeX for the `width` and `height` arguments of `\resizebox`.

## Caption Locations

By default, figure captions are positioned below figures. In HTML and PDF formats, you can modify this behavior using the `fig-cap-location` option. For example:

``` yaml
---
fig-cap-location: top
---
```

Note that this option is specified at the top level so that it can be shared by both PDF and HTML formats. If you are only targeting a single format you can place it alongside other `format` specific options.

Valid values for the caption location include:

| Value    | Description                            |
|----------|----------------------------------------|
| `top`    | Position the caption above the figure. |
| `bottom` | Position the caption below the figure. |
| `margin` | Position the caption in the margin.    |

See the article on [Article Layout](article-layout.qmd#margin-captions) for additional details on placing captions in the margin.

## Custom Layouts {#complex-layouts}

The examples above used the `layout-ncol` or `layout-nrow` attributes to create straightforward layouts where all columns are of equal sizes. The `layout` attribute enables the creation of much more complex layouts.

For example, this defines a layout with two equally sized figures in the first row, then another image that spans the entire second row:

``` markdown
::: {layout="[[1,1], [1]]"}
![Surus](surus.png)

![Hanno](hanno.png)

![Lin Wang](lin-wang.png)
:::
```

![](images/layout-attrib.png){fig-alt="Three elephant pictures arranged such that two pictures are side-by-side in the first row, and the third picture is underneath both of these. The picture on the left in the first row is captioned 'Surus' and the picture on the right is captioned 'Hanno'. The picture underneath these two is captioned 'Lin Wang' and is as as wide and tall as the other two put together."}

The `layout` attribute is a 2-dimensional array where the first dimension defines rows and the second columns. In this case `"layout="[[1,1], [1]]"` translates to: create two rows, the first of which has two columns of equal size and the second of which has a single column.

Note that the numbers in a row are arbitrary and don't need to add up to a particular total. You can therefore use whatever scheme is most natural. For example, here we define columns that occupy varying percentage widths of the row:

``` markdown
::: {layout="[[70,30], [100]]"}
![Surus](surus.png)

![Hanno](hanno.png)

![Lin Wang](lin-wang.png)
:::
```

You can also use negative values to create space between elements. For example:

``` markdown
::: {layout="[[40,-20,40], [100]]"}
![Surus](surus.png)

![Hanno](hanno.png)

![Lin Wang](lin-wang.png)
:::
```

![](images/layout-attrib-negative.png){fig-alt="Three elephant pictures arranged such that two pictures are side-by-side in the first row, and the third picture is underneath both of these. The picture on the left in the first row is captioned 'Surus' and the picture on the right is captioned 'Hanno'. The two pictures are separated by some whitespace. The picture underneath these two is captioned 'Lin Wang' and is wider and taller than the other two put together."}

### Vertical Alignment

If you have a layout with a row of images of differing heights, you can control their vertical alignment using the `layout-valign` attribute. A simple example:

``` markdown
::: {layout="[15,-2,10]" layout-valign="bottom"}
![Surus](surus.png)

![Lin Wang](lin-wang.png)
:::
```

![](images/valign.png){fig-alt="Two pictures of elephants side by side. The picture on the left has the label 'Figure 1: Surus' underneath it. The picture on the right has the label 'Figure 2: Lin Wang' underneath it. The figure on the left is more than twice the width and height of the figure on the right."}

Note that vertical alignment isn't limited to images, you can also vertically align any other elements that are included in a panel.

## Computations

Figures produced by executable code blocks are automatically included in your document. 
To set the ID, caption and link, use the chunk options `label`, `fig-cap` and `fig-link` respectively. 
Other attributes, e.g. `fig-align` and `fig-alt`, can be set using the chunk option of the same name.

You can control the default size for computational figures using the `fig-width` and `fig-height` options in the document header.  
Read more about these options in [Execution Options: Figure Options](/docs/computations/execution-options.qmd#figure-options).

### Layout 

Note that figure layout attributes also work for figures produced by executable code blocks. Here are examples for both Jupyter and Knitr:

::: panel-tabset
#### Jupyter

```{{python}}
#| layout-ncol: 2
#| fig-cap: 
#|   - "Line Plot 1"
#|   - "Line Plot 2"

import matplotlib.pyplot as plt
plt.plot([1,23,2,4])
plt.show()

plt.plot([8,65,23,90])
plt.show()
```

![](images/jupyter-figure-layout.png){fig-alt="Two line plots rendered by Jupyter side-by-side."}

#### Knitr

```{{r}}
#| layout-ncol: 2
#| fig-cap: 
#|   - "Speed and Stopping Distances of Cars"
#|   - "Vapor Pressure of Mercury as a Function of Temperature"

plot(cars)
plot(pressure)
```

![](images/knitr-figure-layout.png){fig-alt="Two scatter plots arranged side-by-side."}
:::

Note that in these examples we also use the `fig-cap` option to apply a caption to each of the generated figures.

### Subcaptions

You can create subcaptions for computational output by combining the `fig-cap` and `fig-subcap` options. When applying captions to computational output you can optionally include a `label` with a `fig-` prefix---if you do this then the figure will be numbered and [cross-referenceable](cross-references.qmd).

::: panel-tabset
#### Jupyter

```{{python}}
#| label: fig-charts
#| fig-cap: "Charts"
#| fig-subcap: 
#|   - "First"
#|   - "Second"
#| layout-ncol: 2

import matplotlib.pyplot as plt
plt.plot([1,23,2,4])
plt.show()

plt.plot([8,65,23,90])
plt.show()
```

![](images/jupyter-figure-layout-caption.png){fig-alt="Two line plots with captions rendered by Jupyter side-by-side."}

#### Knitr

```{{r}}
#| label: fig-charts
#| fig-cap: "Charts"
#| fig-subcap: 
#|   - "Cars"
#|   - "Pressure"
#| layout-ncol: 2

plot(cars)
plot(pressure)
```

![](images/knitr-figure-layout-caption.png){fig-alt="Two scatter plots with captions arranged side-by-side."}
:::

### Custom Layout

The `layout` works the same way for figures produced by Knitr or Jupyter. For example, here's an Rmd code chunk that produces 3 plots and defines a custom layout for them:

```{{r}}
#| layout: [[45,-10, 45], [100]]

plot(cars)
plot(pressure)
plot(mtcars)
```

![](images/knitr-layout-complex.png){.preview-image fig-alt="Two plots arranged side-by-side with a large plot underneath it. The top two plots are scatter plots visualizing the `cars` and `pressure` datasets. These two plots are separated by some additional white space. The plot on the bottom visualizes the `mtcars` dataset and is wider and taller than the other two plots combined. This plot is an 11 by 11 grid plotting each of the 11 variables in the `mtcars` dataset against each other as a scatterplot. Instead of scatter plots in the diagonal starting in the upper left and going to the lower right are text labels for each of the variable names. These are: 'mpg', 'cyl', 'disp', 'hp', 'drat', 'wt', 'qsec', 'vs', 'am', 'gear', and 'carb'."}

## Block Layout

While the examples above illustrate laying out figures, it's important to note that layout attributes can be used to layout any sort of block content. For example, here we layout 2 lists side-by-side:

``` markdown
::: {layout-ncol=2}
### List One

- Item A
- Item B
- Item C

### List Two

- Item X
- Item Y
- Item Z
:::
```

Note that headings are automatically combined with the block that follows them, so this markdown has a total of 2 columns to lay out. Here's an example of a paragraph next to a bullet list (without headings):

``` markdown
::: {layout-ncol=2}
- Item X
- Item Y
- Item Z

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur gravida eu erat et fring. Morbi congue augue vel eros ullamcorper, eget convallis tortor sagittis. Fusce sodales viverra mauris a fringilla. Donec feugiat, justo eu blandit placerat, enim dui volutpat turpis, eu dictum lectus urna eu urna. Mauris sed massa ornare, interdum ipsum a, semper massa. 
:::
```

For more complicated content use divs (`:::`) to divide your content into blocks for the layout. For example, here's how you could lay out a code cell along with some text, next to a figure:

````markdown
:::: {layout="[ 40, 60 ]"}

::: {#first-column}
```r
# Some code
```

Some text that should be laid out below the code
:::

::: {#second-column}
![](elephant.png)
:::

::::
````

The id attributes (`#first-column` and `#second-column`) are optional, 
but aid readability.
```````

## File: docs/authoring/front-matter.qmd
```````
---
title: Front Matter
---

## Overview

Scholarly articles require much more detail in their front matter than simply a title and an author. Quarto provides a rich set of YAML metadata keys to describe these details. On this page, you'll learn how to specify authors and their affiliations, article summaries like an abstract and keywords, and how to include information on copyright, licensing and funding.

This YAML header includes examples of all the top level keys discussed on this page:

``` {.yaml filename="document.qmd"}
---
title: "Toward a Unified Theory of High-Energy Metaphysics: Silly String Theory"
date: 2008-02-29
author:
  - name: Josiah Carberry
    id: jc
    orcid: 0000-0002-1825-0097
    email: josiah@psychoceramics.org
    affiliation: 
      - name: Brown University
        city: Providence
        state: RI
        url: www.brown.edu
abstract: > 
  The characteristic theme of the works of Stone is 
  the bridge between culture and society. ...
keywords:
  - Metaphysics
  - String Theory
license: "CC BY"
copyright: 
  holder: Josiah Carberry
  year: 2008
citation: 
  container-title: Journal of Psychoceramics
  volume: 1
  issue: 1
  doi: 10.5555/12345678
funding: "The author received no specific funding for this work."
---
```

The documents produced by the above metadata for the HTML and JATS formats are shown below.

::: panel-tabset
## JATS

![](images/scholarly-front-matter-jats.png){fig-alt="Screenshot of the JATS preview from the document with the above metadata."}

## HTML

![](images/scholarly-front-matter-html.png){fig-alt="Screenshot of the HTML preview from the document with the above metadata."}
:::

Not all of the metadata keys are used in every format. However, the tags described on this page will generally be supported in [journal article formats](/docs/extensions/listing-journals.qmd). Currently the JATS format makes use of the broadest set of metadata tags, so if you want to check how things render we recommend previewing with `format: jats`.

## Authors & Affiliations {#authors-and-affiliations}

The simplest way to describe an author is with a string directly to the `author` key:

``` yaml
---
author: Norah Jones
---
```

However, the `author` key has a number of sub-keys that provide the additional detail required for scholarly articles. For instance, you can add an author's affiliation by using the `affiliation` key. In the simplest form, an author along with their affiliation can be described by passing a string to each of `name` and `affiliation`:

``` yaml
---
author:
  name: Norah Jones
  affiliation: Carnegie Mellon University
---
```

You can read about the other keys you can provide to `author` and `affiliation` in the corresponding [Author](#author) and [Affiliation](#affiliation) sections below.

Both `author` and `affiliation` can take multiple elements to describe multiple authors, or authors with multiple affiliations. As an example, here is the YAML to describe a document with two authors, the first of which has two affiliations:

``` yaml
---
author:
  - name: Norah Jones
    affiliation: 
      - Carnegie Mellon University
      - University of Chicago
  - name: Josiah Carberry
    affiliation: Brown University
---
```

Notice that each element of `author` and `affiliation` is prefaced by a `-` and indented appropriately. You can read more about shortcuts to avoid repetition when authors share affiliations in the [Multiple Authors](#multiple-authors) section below.

::: callout-note
## Singular or Plural?

Both of these keys can be specified using a singular (`author` and `affiliation`) or plural (`authors` and `affiliations`) form.
:::

### Author {#author}

Beyond `name` and `affiliation`, `author` can also take any of the following:

+----------------------+----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `email`\             | string         | Contact details for the author. Converted to hyperlinks in many formats.                                                                                            |
| `phone`\             |                |                                                                                                                                                                     |
| `fax`\               |                |                                                                                                                                                                     |
| `url`                |                |                                                                                                                                                                     |
+----------------------+----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `degrees`            | string(s)      | Academic titles or professional certifications displayed following a personal name.                                                                                 |
+----------------------+----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `orcid`              | string         | Author's Open Researcher and Contributor ID ([ORCID](https://orcid.org/)), in the form `0000-0000-0000-0000`. Creates a link to the author's ORCID in many formats. |
+----------------------+----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `note`\              | string         | Notes to attach to an author, such as contribution details;\                                                                                                        |
| `acknowledgements`   |                | Author's acknowledgements.                                                                                                                                          |
+----------------------+----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `roles`              | string(s)      | Author's roles. Read more in [Author Roles](#roles) below.                                                                                                          |
+----------------------+----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `corresponding`\     | `true`/`false` | Set this author as:\                                                                                                                                                |
| `equal-contributor`\ |                | the corresponding author;\                                                                                                                                          |
| `deceased`           |                | as having contributed equally with all other contributors;\                                                                                                         |
|                      |                | and/or deceased.                                                                                                                                                    |
+----------------------+----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `id`                 | string         | An identifier to be used to refer to this author in other fields. See an example in [Funding].                                                                      |
+----------------------+----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------+

: Available keys to `author`

An `affiliations-url` key can also be provided to `author`, and will be propagated to the `url` key of `affiliation`.

As an example, a more complete description of an author might look like:

``` yaml
---
author:
  - name: Josiah Carberry
    orcid: 0000-0002-1825-0097
    url: https://en.wikipedia.org/wiki/Josiah_S._Carberry
    email: josiah@psychoceramics.org
    corresponding: true
---
```

#### Name Components

Quarto will automatically parse the `name` key into its components. However, if this parsing is incorrect you can specify the components, `given`, `family`, `dropping-particle`, and `non-dropping-particle` directly, for example:

``` yaml
---
author: 
  - name: 
      given: Charles
      family: Gaulle
      non-dropping-particle: de
  - name: 
      given: Ludwig
      family: Beethoven
      dropping-particle: van
---
```

#### Degrees

You may specify degrees or academic titles using the `degrees` field of authors:

``` yaml
author:
  - name: Josiah Carberry
    degrees: 
      - B.S.
      - PhD
```

#### Author Roles {#roles}

Use `roles` to describe an author's contributions to the work. You can use free form text as a string:

``` yaml
author:
  - name: Josiah Carberry
    roles: "Conceived and designed the study, analysed the results and wrote the manuscript."
```

Or alternatively, make use of the [Contributor Roles Taxonomy (CRediT)](https://credit.niso.org). To use CRediT roles provide one of the [14 contributor](#credit-roles) roles, e.g.:

``` yaml
author:
  - name: Josiah Carberry
    roles: conceptualization
```

Or, an array of roles:

``` yaml
author:
  - name: Josiah Carberry
    roles: [investigation, data curation]
```

Or specify the role along with a degree of contribution:

``` yaml
author:
  - name: Josiah Carberry
    roles: 
      - investigation: lead 
      - data curation: supporting
```

::: {#credit-roles .callout-tip collapse="true"}
## Expand to see the 14 Contributor Roles

+-------------------------------------------------------------------------------------------------+-------------+
| Value                                                                                           | Alias       |
+=================================================================================================+=============+
| [conceptualization](https://credit.niso.org/contributor-roles/conceptualization/)               |             |
+-------------------------------------------------------------------------------------------------+-------------+
| [data curation](https://credit.niso.org/contributor-roles/data-curation/)                       |             |
+-------------------------------------------------------------------------------------------------+-------------+
| [formal analysis](https://credit.niso.org/contributor-roles/formal-analysis/)                   | analysis    |
+-------------------------------------------------------------------------------------------------+-------------+
| [funding acquisition](https://credit.niso.org/contributor-roles/funding-acquisition/)           | funding     |
+-------------------------------------------------------------------------------------------------+-------------+
| [investigation](https://credit.niso.org/contributor-roles/investigation/)                       |             |
+-------------------------------------------------------------------------------------------------+-------------+
| [methodology](https://credit.niso.org/contributor-roles/methodology/)                           |             |
+-------------------------------------------------------------------------------------------------+-------------+
| [project administration](https://credit.niso.org/contributor-roles/project-administration/)     |             |
+-------------------------------------------------------------------------------------------------+-------------+
| [resources](https://credit.niso.org/contributor-roles/resources/)                               |             |
+-------------------------------------------------------------------------------------------------+-------------+
| [software](https://credit.niso.org/contributor-roles/software/)                                 |             |
+-------------------------------------------------------------------------------------------------+-------------+
| [supervision](https://credit.niso.org/contributor-roles/supervision/)                           |             |
+-------------------------------------------------------------------------------------------------+-------------+
| [validation](https://credit.niso.org/contributor-roles/validation/)                             |             |
+-------------------------------------------------------------------------------------------------+-------------+
| [visualization](https://credit.niso.org/contributor-roles/visualization/)                       |             |
+-------------------------------------------------------------------------------------------------+-------------+
| [writing – review & editing](https://credit.niso.org/contributor-roles/writing-review-editing/) | editing     |
+-------------------------------------------------------------------------------------------------+-------------+
| [writing – original draft](https://credit.niso.org/contributor-roles/writing-original-draft/)   | writing     |
+-------------------------------------------------------------------------------------------------+-------------+

: CRediT contributor values available in `roles`
:::

### Affiliation {#affiliation}

Like `author`, you can provide a string is directly to `affiliation`, as in:

``` yaml
---
author:
  name: Norah Jones
  affiliation: Carnegie Mellon University
---
```

Alternatively, you can provide the name explicitly to the `name` key, like:

``` yaml
---
author:
  name: Norah Jones
  affiliation: 
    name: Carnegie Mellon University
---
```

In addition to `name`, `affiliation` can take any of the following:

+----------------------+-----------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| `department`         | String    |                                                                                                                                               |
+----------------------+-----------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| `group`              | String    | Team or research group within the affiliation                                                                                                 |
+----------------------+-----------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| `address`\           | String    | Affiliation's location. Provide one of `region` or `state`, and any combination of the other keys.                                            |
| `city`\              |           |                                                                                                                                               |
| `region` or `state`\ |           |                                                                                                                                               |
| `country`\           |           |                                                                                                                                               |
| `postal-code`        |           |                                                                                                                                               |
+----------------------+-----------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| `url`                | String    | Affiliation's website. Converted to a link in many formats.                                                                                   |
+----------------------+-----------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| \                    | \         | Affiliation IDs:\                                                                                                                             |
| `isni`\              | Numeric\  | 16 digit [International Standard Name Identifier (ISNI)](https://isni.org/);\                                                                 |
| `ringgold`\          | Numeric\  | 4-6 digit [Ringgold ID](https://www.ringgold.com/ringgold-identifier/);\                                                                      |
| `ror`                | String    | [Research Organization Registry (ROR) ID](https://ror.org/), starting with `https://ror.org/`, followed by a 9 digit alphanumeric identifier. |
+----------------------+-----------+-----------------------------------------------------------------------------------------------------------------------------------------------+

: Available keys to `affiliation`

For example, a more complete `affiliation` for an author might look like:

``` yaml
---
author:
  name: Josiah Carberry
  orcid: 0000-0002-1825-0097
  url: https://en.wikipedia.org/wiki/Josiah_S._Carberry
  email: josiah@psychoceramics.org
  corresponding: true
  affiliation: 
    - name: Brown University
      department: Psychoceramics
      city: Providence
      state: RI
      country: US
      url: www.brown.edu
      ringgold: 6752
      isni: 0000000419369094
---
```

### Multiple Authors {#multiple-authors}

When there are multiple authors of a document, it is common that they share affiliations. To avoid repeating an affiliation's details, you can describe an affiliation once, assign it an id, and then refer to the id in other fields.

One approach is to assign an `id` to each affiliation where they are described within an author. For example, here we assign the author's affiliations the ids `cmu` and `chicago`:

``` yaml
---
author:
  - name: Norah Jones
    affiliation:
      - id: cmu
        name: Carnegie Mellon University
      - id: chicago
        name: University of Chicago
---
```

Then, when adding additional authors, you can refer to affiliations using `ref:`:

``` yaml
---
author:
  - name: Norah Jones
    affiliation:
      - id: cmu
        name: Carnegie Mellon University
      - id: chicago
        name: University of Chicago
  - name: John Hamm
    affiliation:
      - ref: cmu
---
```

An alternative approach is to define affiliations at the top level, as opposed to within an `author`:

``` yaml
---
author:
  - name: Norah Jones
    affiliation:
      - ref: cmu
      - ref: chicago
  - name: John Hamm
    affiliation:
      - ref: cmu
affiliations:
  - id: cmu
    name: Carnegie Mellon University
  - id: chicago
    name: University of Chicago
---
```

This approach may be more convenient in cases where you also want to refer to affiliations in fields other than `author`, e.g. `funding`.

## Abstract

You can add an abstract with the `abstract` key. Since abstracts are generally longer than a line, and may contain markdown, you'll need to provide it using YAML's literal block style. That is, place a `|` on the same line as `abstract:` and indent your raw abstract text by two spaces.

For example:

``` yaml
---
abstract: |
  This article evaluates novel approaches to do
  some really important things.
---
```

## Keywords

Keywords can be added with `keywords`:

``` yaml
---
keywords: 
  - open-source 
  - scientific publishing
  - reproducible research
---
```

## Copyright

You can specify copyright in two ways. Either directly as a string to `copyright`:

``` yaml
---
copyright: "Copyright Acme, Inc. 2021. All Rights Reserved"
---
```

Which is equivalent to providing the same string to the `statement` sub-key:

``` yaml
---
copyright: 
  statement: "Copyright Acme, Inc. 2021. All Rights Reserved"
---
```

Or, alternatively, by specifying a `holder` and `year`:

``` yaml
---
copyright: 
  holder: Acme, Inc
  year: 2021
---
```

When specifying `year` you can also use a range (`year: 2021 - 2023`) or an array (`year: [2021, 2022, 2023]`).

## License

To specify a license, you can pass a string directly to `license`:

``` yaml
---
license: "This work is dedicated to the Public Domain"
---
```

This is equivalent to specifying the `text` sub-key directly:

``` yaml
---
license:
  text: "This work is dedicated to the Public Domain"
---
```

You can add additional details by providing the `type` and `url` sub-keys:

``` yaml
---
license:
  text: > 
    Permission is granted to copy, distribute and/or 
    modify this document under the terms of the GNU Free 
    Documentation License, Version 1.3 or any later version 
    published by the Free Software Foundation; with no 
    Invariant Sections, no Front-Cover Texts, and no 
    Back-Cover Texts. A copy of the license is included in 
    the section entitled "GNU Free Documentation License
  type: open-access
  url: https://www.gnu.org/licenses/fdl-1.3-standalone.html
---
```

If you are choosing a Creative Commons license you may simply pass an abbreviation:

``` yaml
---
license: "CC BY"
---
```

The available abbreviations are covered in the [Creative Commons](#cc) section below.

### Creative Commons {#cc}

The Creative Commons copyright licenses and tools forge a balance inside the traditional "all rights reserved" setting that copyright law creates. These tools give everyone from individual creators to large companies and institutions a simple, standardized way to grant copyright permissions to their creative work.

Here are some of the common forms of Creative Commons content license:

+---------------+--------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| License       | Name                                 | Description                                                                                                                                                                                                                                                                                                                                                                           |
+===============+======================================+=======================================================================================================================================================================================================================================================================================================================================================================================+
| `CC BY`       | Attribution                          | This license lets others distribute, remix, tweak, and build upon your work, even commercially, as long as they credit you for the original creation. This is the most accommodating of licenses offered.                                                                                                                                                                             |
+---------------+--------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `CC BY-SA`    | Attribution-ShareAlike               | This license lets others remix, tweak, and build upon your work even for commercial purposes, as long as they credit you and license their new creations under the identical terms. This license is often compared to "copyleft" free and open source software licenses. All new works based on yours will carry the same license, so any derivatives will also allow commercial use. |
+---------------+--------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `CC BY-ND`    | Attribution-NoDerivs                 | This license allows for redistribution, commercial and non-commercial, as long as it is passed along unchanged and in whole, with credit to you.                                                                                                                                                                                                                                      |
+---------------+--------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `CC BY-NC`    | Attribution-NonCommercial            | This license lets others remix, tweak, and build upon your work non-commercially, and although their new works must also acknowledge you and be non-commercial, they don't have to license their derivative works on the same terms.                                                                                                                                                  |
+---------------+--------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `CC BY-NC-SA` | Attribution-NonCommercial-ShareAlike | This license lets others remix, adapt, and build upon your work non-commercially, as long as they credit you and license their new creations under the identical terms. \|                                                                                                                                                                                                            |
+---------------+--------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `CC BY-NC-ND` | Attribution-NonCommercial-NoDerivs   | This license is the most restrictive of the six main licenses, only allowing others to download your works and share them with others as long as they credit you, but they can't change them in any way or use them commercially.                                                                                                                                                     |
+---------------+--------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `CC0`         |                                      | CC0 (aka CC Zero) is a public dedication tool, which enables creators to give up their copyright and put their works into the worldwide public domain. CC0 enables reusers to distribute, remix, adapt, and build upon the material in any medium or format, with no conditions.                                                                                                      |
+---------------+--------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

If you specify a Creative Commons license for your content, Quarto will automatically include the relevant link to the appropriate license.

## Citation

The `citation` key allows you to specify additional metadata that is used to create a citation for the document. You can read more about this in [Creating Citeable Articles](/docs/authoring/create-citeable-articles.qmd).

## Funding

The `funding` key can directly take a string:

``` yaml
---
funding: "The author(s) received no specific funding for this work."
---
```

This is equivalent to providing the `statement` sub-key directly:

``` yaml
---
funding: 
  statement: "The author(s) received no specific funding for this work."
---
```

The `funding` key can also take the sub-keys `source`, `recipient` and `investigator`. Both `recipient` and `investigator` can take a string, or a reference to an author or affiliation using `ref:`. For example, this front matter adds funding where the investigator is specified using an author id:

``` yaml
---
author:
  - name: Norah Jones
    id: nj
funding:
  - source: "NIH (Grant #: 1-R01-MH99999-01A1)"
    investigator: 
      - ref: nj
---
```
```````

## File: docs/authoring/includes.qmd
```````
---
title: "Includes"
---

## Overview

Includes are a convenient way to re-use content across documents. Includes work for plain markdown content as well as for `.qmd` files with executable code cells (note however that the cells must all use the same engine -- i.e. knitr or jupyter, but not both).

To include a file, add the `{{{< include >}}}` shortcode at the location in your document where you want it included.

``` markdown
{{{< include _content.qmd >}}}
```

::: callout-important

Include shortcodes are equivalent to copying and pasting the text from the included file into the main file.
This means that relative references (links, images, other includes, etc.) inside the included file resolve based on the directory of the main file not the included file.
Use absolute (to the project root) paths for links, images, or other includes, in included files to ensure they resolve correctly, *e.g.*, `[A Figure Reused](/path/to/image.png)` or `{{< include /path/to/_file.qmd >}}`.

It also means that if the included file has a metadata block, that block will take effect in all included files. In most cases, having metadata blocks in an included file will cause unexpected behavior.

:::

::: callout-important

Include shortcodes need to appear by themselves in a line, and they need to be surrounded by empty lines. This means that you cannot use an include shortcode inside markdown syntax (such as an item in a bulleted list).

:::

## Content

A concrete example would be if you have several articles about a topic that share a common introduction. Here, we have an article titled "Revealjs Presentations" that wants to include some basic information on presentations not specific to Revealjs (we do that by including `_basics.qmd`). We also have some demo code stored as scripts that we want to include as non-executed examples (we do that by including `_demo.R` and `_demo.py` inside source code blocks):

```` markdown
---
title: "Revealjs Presentations"
---

## Overview

Revealjs Presentations are a great way to
present your ideas to others!

{{{< include _basics.qmd >}}}

## Revealjs Options

More content here...

## Do it yourself with R

```r 
{{{< include _demo.R >}}}
```

Copy the R code above in your session.

## Do it yourself with Python

```python
{{{< include _demo.py >}}}
```

Copy the Python code above and run it.


````

Note that we use an underscore (`_`) prefix for the included files. You should always use an underscore prefix with included files so that they are automatically ignored (i.e. not treated as standalone files) by a `quarto render` of a project.

## Computations

You can also include files with computational cells. For example, here we include a `.qmd` that does some data preprocessing that we want shared across multiple documents:

``` markdown
---
title: "My Document"
---

{{{< include _data.qmd >}}}


Use the data...
```

where the content would be 

````{.markdown filename="_data.qmd"}

Load the `sp500` from [`great_tables`](https://posit-dev.github.io/great-tables/)

```{{python}}
import great_tables as gt
from great_tables.data import sp500
sp500.head()
```

````

A couple of important things to remember when using computational includes:

1)  All computations still share a single engine (e.g. knitr or jupyter)

2)  Computational includes work only in `.qmd` files (they don't work in `.ipynb` notebook files)

Note that you can't use  the `include` shortcode within a computational code block itself - as the example above shows, the executable code block needs to be inside the included document.

```{=html}
<style type="text/css">
code span.in {
  font-style:  normal;
}
</style>
```
```````

## File: docs/authoring/language.qmd
```````
---
title: "Document Language"
---

## Overview

Document language plays a role in Pandoc's processing of most formats, and controls hyphenation in PDF output when using LaTeX (through [`babel`](https://ctan.org/pkg/babel) and [`polyglossia`](https://ctan.org/pkg/polyglossia)) or ConTeXt.

Additonally, Quarto, Pandoc, and LaTeX will sometimes generate textual output that requires localization. For example, "Figure" or "List of Figures" for cross references, callout captions like "Note" or "Warning", or the "Code" caption for folded code chunks.

## `lang` Option

The [`lang`](https://pandoc.org/MANUAL.html#language-variables) document option identifies the main language of the document using IETF language tags (following the [BCP 47](https://tools.ietf.org/html/bcp47) standard), such as `en` or `en-GB`. The [Language subtag lookup](https://r12a.github.io/app-subtags/) tool can look up or verify these tags.

For example, this document specifies the use of French:

``` yaml
---
title: "My Document"
lang: fr    
---
```

This will result in the use of French translations as well as the application of other language specific rules to document processing. The following languages currently have full translations available:

-   English (`en`, used by default)
-   Chinese (`zh`)
-   Spanish (`es`)
-   French (`fr`)
-   Japanese (`ja`)
-   German (`de`)
-   Portuguese (`pt`)
-   Russian (`ru`)
-   Czech (`cs`)
-   Finnish (`fi`)
-   Dutch (`nl`)
-   Italian (`it`)
-   Polish (`pl`)
-   Korean (`ko`)

## Alternate Language

If you aren't happy with the default language used for a given part of a document you can provide alternate language via the `language` key (this can be used at a document or project level). For example, to override the values for the "Author" and "Published" captions used within title blocks you could do this:

``` yaml
---
title: "My Document"
author: "Norah Jones"
date: 5/22/2022
language: 
  title-block-author-single: "Writer"
  title-block-published: "Updated"
---
```

As described below, you can also provide these translations in a standalone YAML file and reference it as follows:

``` yaml
---
title: "My Document"
author: "Norah Jones"
date: 5/22/2022
language: custom.yml
---
```

You can discover all of the `language` values that can be customized by referencing this file: <https://github.com/quarto-dev/quarto-cli/blob/main/src/resources/language/_language.yml>.

### Per-Language Alternates

Alternate values can be restricted to a particular target language using subkeys of the `language` key. This way, distinct values can be defined for each language. For example, you can override the English and French versions of the "Published" caption:

``` yaml
---
title: "My Document"
author: "Norah Jones"
date: 5/22/2022
lang: fr
language:
  en:
    title-block-published: "Updated"
  fr:
    title-block-published: "Mis à jour"
---
```

In this case the French "Mis à jour" will be used since `lang` is set to `fr`.

These language-specific alternate values can also be provided in a standalone YAML file. For example, the following file could be used by setting `language: custom-language.yml` in the metadata:

``` {.yaml filename="custom-language.yml"}
en:
  title-block-published: "Updated"
fr:
  title-block-published: "Mis à jour"
```

## Custom Translations

You can create and use a custom translation for a new language not supported by Quarto as follows:

1.  Make a copy of the default `_language.yml` file (<https://github.com/quarto-dev/quarto-cli/blob/main/src/resources/language/_language.yml>).

2.  Provide translations from the default English values.

3.  Specify the custom translation file using the `language` option. For example:

    ``` yaml
    ---
    language: custom.yml
    ---
    ```

The `language` option can be specified at a project or document level. Additionally, if you include a `_language.yml` file in the root of your project alongside your `_quarto.yml` config file it will be automatically used.

If you create a language translation file please consider contributing it so others can benefit from it. See the documentation on [contributing language translations](https://github.com/quarto-dev/quarto-cli/tree/main/src/resources/language) for additional details.
```````

## File: docs/authoring/lipsum.qmd
```````
---
title: Adding Placeholder Text to Your Documents
aliases:
  - /docs/prerelease/1.5/lipsum.html
---

## Overview

When you need to visualize how text will look in your document or your website, the `{{{< lipsum >}}}` shortcode comes in handy.
It inserts "Lorem Ipsum" dummy text, which is standard placeholder text used in the publishing and design industries.

## Example

Here's an example of `lipsum` generating two paragraphs of text, by adding `{{{< lipsum 2 >}}}` in a paragraph by itself.

{{< lipsum 2 >}}

## Usage

::: {layout-ncol=1}
```markdown
{{{< lipsum 1 >}}}
```
:::: {.border}
{{< lipsum 1 >}}
::::
:::

`lipsum` takes an optional parameter, in two possible formats:

- `{{{< lipsum nparas >}}}`: `nparas` describes the number of paragraphs of placeholder text to include in the document. 
- `{{{< lipsum start-end >}}}`: `start` and `end` are two numbers that describe the range of lorem ipsum paragraphs to include in the document.

`lipsum` produces placeholder text in a predictable manner[^1]. This means that the same parameters will always yield identical text.
However, you can choose to set `random=true` to generate a paragraph or a random collection of paragraphs.


- `{{{< lipsum 1 random=true >}}}`: This will generate a single paragraph of random lorem ipsum text.

[^1]: Since Quarto 1.7.14. Earlier versions of Quarto generate random text.
```````

## File: docs/authoring/markdown-basics.qmd
```````
---
title: Markdown Basics
format: html
language: 
  section-title-footnotes: Example Footnotes
aliases: 
  - /docs/authoring/
---

## Overview

Quarto is based on Pandoc and uses its variation of markdown as its underlying document syntax. Pandoc markdown is an extended and slightly revised version of John Gruber's [Markdown](https://daringfireball.net/projects/markdown/) syntax.

Markdown is a plain text format that is designed to be easy to write, and, even more importantly, easy to read:

> A Markdown-formatted document should be publishable as-is, as plain text, without looking like it's been marked up with tags or formatting instructions. -- [John Gruber](https://daringfireball.net/projects/markdown/syntax#philosophy)

This document provides examples of the most commonly used markdown syntax. See the full documentation of [Pandoc's Markdown](https://pandoc.org/MANUAL.html#pandocs-markdown) for more in-depth documentation.

## Text Formatting

+-----------------------------------------+-----------------------------------------+
| Markdown Syntax                         | Output                                  |
+=========================================+=========================================+
| ``` markdown                            | *italics*, **bold**, ***bold italics*** |
| *italics*, **bold**, ***bold italics*** |                                         |
| ```                                     |                                         |
+-----------------------------------------+-----------------------------------------+
| ``` markdown                            | superscript^2^ / subscript~2~           |
| superscript^2^ / subscript~2~           |                                         |
| ```                                     |                                         |
+-----------------------------------------+-----------------------------------------+
| ``` markdown                            | ~~strikethrough~~                       |
| ~~strikethrough~~                       |                                         |
| ```                                     |                                         |
+-----------------------------------------+-----------------------------------------+
| ``` markdown                            | `verbatim code`                         |
| `verbatim code`                         |                                         |
| ```                                     |                                         |
+-----------------------------------------+-----------------------------------------+

## Headings {#headings}

+------------------+-----------------------------------+
| Markdown Syntax  | Output                            |
+==================+===================================+
| ``` markdown     | # Heading 1 {.heading-output}     |
| # Heading 1      |                                   |
| ```              |                                   |
+------------------+-----------------------------------+
| ``` markdown     | ## Heading 2 {.heading-output}    |
| ## Heading 2     |                                   |
| ```              |                                   |
+------------------+-----------------------------------+
| ``` markdown     | ### Heading 3 {.heading-output}   |
| ### Heading 3    |                                   |
| ```              |                                   |
+------------------+-----------------------------------+
| ``` markdown     | #### Heading 4 {.heading-output}  |
| #### Heading 4   |                                   |
| ```              |                                   |
+------------------+-----------------------------------+
| ``` markdown     | ##### Heading 5 {.heading-output} |
| ##### Heading 5  |                                   |
| ```              |                                   |
+------------------+-----------------------------------+
| ``` markdown     | ###### Heading 6 {.heading-output}|
| ###### Heading 6 |                                   |
| ```              |                                   |
+------------------+-----------------------------------+

: {tbl-colwidths="[50, 50]"}

```{=html}
<style type="text/css">
.heading-output {
  border-bottom: none;
  margin-top: 0;
  margin-bottom: 0;
}
</style>
```
## Links & Images

+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+
| Markdown Syntax                                              | Output                                                                                                 |
+==============================================================+========================================================================================================+
| ``` markdown                                                 | <https://quarto.org>                                                                                   |
| <https://quarto.org>                                         |                                                                                                        |
| ```                                                          |                                                                                                        |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+
| ``` markdown                                                 | [Quarto](https://quarto.org)                                                                           |
| [Quarto](https://quarto.org)                                 |                                                                                                        |
| ```                                                          |                                                                                                        |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+
| ``` markdown                                                 | ![Caption](elephant.png){fig-alt="A line drawing of an elephant."}                                     |
| ![Caption](elephant.png)                                     |                                                                                                        |
| ```                                                          |                                                                                                        |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+
| ``` markdown                                                 | [![Caption](elephant.png)](https://quarto.org)                                                         |
| [![Caption](elephant.png)](https://quarto.org)               |                                                                                                        |
| ```                                                          |                                                                                                        |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+
| ``` markdown                                                 | [![Caption](elephant.png "An elephant"){fig-alt="A line drawing of an elephant."}](https://quarto.org) |
| [![Caption](elephant.png "An elephant")](https://quarto.org) |                                                                                                        |
| ```                                                          |                                                                                                        |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+
| ``` markdown                                                 | [![](elephant.png){fig-alt="A line drawing of an elephant."}](https://quarto.org)                      |
| [![](elephant.png){fig-alt="Alt text"}](https://quarto.org)  |                                                                                                        |
| ```                                                          |                                                                                                        |
+--------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+

## Lists

+-----------------------------------+---------------------------------+
| Markdown Syntax                   | Output                          |
+===================================+=================================+
| ``` markdown                      |                                 |
| * unordered list                  | * unordered list                |
|   + sub-item 1                    |   + sub-item 1                  |
|   + sub-item 2                    |   + sub-item 2                  |
|     - sub-sub-item 1              |     - sub-sub-item 1            |
| ```                               |                                 |
+-----------------------------------+---------------------------------+
| ``` markdown                      |                                 |
| *   item 2                        | -   item 2                      |
|                                   |                                 |
|     Continued (indent 4 spaces)   |     Continued (indent 4 spaces) |
| ```                               |                                 |
+-----------------------------------+---------------------------------+
| ``` markdown                      |                                 |
| 1. ordered list                   |  1. ordered list                |
| 2. item 2                         |  2. item 2                      |
|    i) sub-item 1                  |     i) sub-item 1               |
|       A.  sub-sub-item 1          |        A.  sub-sub-item 1       |
| ```                               |                                 |
+-----------------------------------+---------------------------------+
| ```` markdown                     |                                 |
| 1. ordered list                   |  1. ordered list                |
| 2. item 2                         |  2. item 2                      |
|                                   |                                 |
|    ```python                      |     ```python                   |
|    print("Hello, World!")         |     print("Hello, World!")      |
|    ```                            |     ```                         |
|                                   |                                 |
|    A.  sub-sub-item 1             |     A.  sub-sub-item 1          |
| ````                              |                                 |
+-----------------------------------+---------------------------------+
| ``` markdown                      |                                 |
| - [ ] Task 1                      | - [ ] Task 1                    |
| - [x] Task 2                      | - [x] Task 2                    |
| ```                               |                                 |
+-----------------------------------+---------------------------------+
| ``` markdown                      |                                 |
| (@)  A list whose numbering       |  (1) A list whose numbering     |
|                                   |                                 |
| continues after                   |  continues after                |
|                                   |                                 |
| (@)  an interruption              |  (2) an interruption            |
| ```                               |                                 |
+-----------------------------------+---------------------------------+
| ``` markdown                      |                                 |
| ::: {}                            | ::: {}                          |
| 1. A list                         | 1. A list                       |
| :::                               | :::                             |
|                                   |                                 |
| ::: {}                            | ::: {}                          |
| 1. Followed by another list       | 1. Followed by another list     |
| :::                               | :::                             |
| ```                               |                                 |
+-----------------------------------+---------------------------------+
| ``` markdown                      |                                 |
| term                              | term                            |
| : definition                      | : definition                    |
| ```                               |                                 |
+-----------------------------------+---------------------------------+

Note that unlike other Markdown renderers (notably Jupyter and GitHub), lists in Quarto require an entire blank line above the list. Otherwise the list will not be rendered in list form, rather it will all appear as normal text along a single line.

## Footnotes

Pandoc supports numbering and formatting footnotes using the following syntax:

``` markdown
Here is a footnote reference,[^1] and another.[^longnote]

[^1]: Here is the footnote.

[^longnote]: Here's one with multiple blocks.

    Subsequent paragraphs are indented to show that they
belong to the previous footnote.

        { some.code }

    The whole paragraph can be indented, or just the first
    line.  In this way, multi-paragraph footnotes work like
    multi-paragraph list items.

This paragraph won't be part of the note, because it
isn't indented.
```

The above syntax generates the following output:

:::{.border .p-3}
Here is a footnote reference,[^1] and another.[^2]

This paragraph won't be part of the note, because it isn't indented.
:::

In addition, you can also write single paragraph footnotes inline using the following syntax:

``` markdown
Here is an inline note.^[Inlines notes are easier to write,
since you don't have to pick an identifier and move down to
type the note.]
```

This syntax generates the following output:

::: {.border .p-3}
Here is an inline note.[^3]
:::

::: {.callout-note}

## Footnote IDs should be unique

Footnote identifiers, e.g., the `1` in `^1`, need to be unique within a document. 
In Quarto books, chapters are combined into a single document for certain formats (including PDF, DOCX, and EPUB),
so footnote identifiers need to be unique **across** chapters. 

:::

The footnotes that are generated from the above examples are included in the [Example Footnotes](#example-footnotes) section at the bottom of the page. See the [Pandoc Footnotes](https://pandoc.org/MANUAL.html#footnotes) for additional information.

[^1]: Here is the footnote.

[^2]: Here's one with multiple blocks.

    Subsequent paragraphs are indented to show that they belong to the previous footnote.

        { some.code }

    The whole paragraph can be indented, or just the first line. In this way, multi-paragraph footnotes work like multi-paragraph list items.

[^3]: Inlines notes are easier to write, since you don't have to pick an identifier and move down to type the note.


## Tables

#### Markdown Syntax

``` markdown
| Right | Left | Default | Center |
|------:|:-----|---------|:------:|
|   12  |  12  |    12   |    12  |
|  123  |  123 |   123   |   123  |
|    1  |    1 |     1   |     1  |
```

#### Output

| Right | Left | Default | Center |
|------:|:-----|---------|:------:|
|    12 | 12   | 12      |   12   |
|   123 | 123  | 123     |  123   |
|     1 | 1    | 1       |   1    |

Learn more in the article on [Tables](tables.qmd).

## Source Code

Use ```` ``` ```` to delimit blocks of source code:

```` markdown
```
code
```
````

Add a language to syntax highlight code blocks:

```` markdown
```python
1 + 1
```
````

Pandoc supports syntax highlighting for over [140 different languages](https://github.com/jgm/skylighting/tree/master/skylighting-core/xml). If your language is not supported then you can use the `default` language to get a similar visual treatment:

```` markdown
```default
code
```
````

Equivalent to the short form used in the examples above is a longer form that uses the language as a class (i.e. `.python`) inside braces:

```` markdown
```{.python}
1 + 1
```
````

The longer form allows you to add attributes to the block in a similar way to [Divs](#sec-divs-and-spans).  Some specific features that use this syntax are [Lines Numbers](/docs/output-formats/html-code.qmd#line-numbers) and [Code Filename](/docs/output-formats/html-code.qmd#code-filename). Here is an example of the latter:

```` markdown
```{.python filename="run.py"}
code
```
````

If you are creating HTML output there is a wide variety of options available for code block output. See the article on [HTML Code](/docs/output-formats/html-code.qmd) for additional details.

## Raw Content

Raw content can be included directly without Quarto parsing it using [Pandoc's raw attribute](https://pandoc.org/MANUAL.html#extension-raw_attribute). A raw block starts with ` ```{=` followed by a format and closing `}`, e.g. here's a raw HTML block:

```` markdown
```{=html}
<iframe src="https://quarto.org/" width="500" height="400"></iframe>
```
````

For PDF output use a raw LaTeX block:

```` markdown
```{=latex}
\renewcommand*{\labelitemi}{\textgreater}
```
````

As another example, if you are using the [Typst format](/docs/output-formats/typst.qmd) you can use a raw block to include Typst syntax:

```` markdown
```{=typst} 
#set text(fill: red)
This text is red.
```
````

You can also include raw content inline:
```markdown
 Here's some raw inline HTML: `<a>html</a>`{=html}
```

## Equations

Use `$` delimiters for inline math and `$$` delimiters for display math. For example:

+---------------------------+-------------------------+
| Markdown Syntax           | Output                  |
+===========================+=========================+
| ``` markdown              |                         |
| inline math: $E = mc^{2}$ | inline math: $E=mc^{2}$ |
| ```                       |                         |
+---------------------------+-------------------------+
| ``` markdown              |                         |
| display math:             | display math:           |
|                           |                         |
| $$E = mc^{2}$$            | $$E = mc^{2}$$          |
| ```                       |                         |
+---------------------------+-------------------------+

If you want to define custom TeX macros, include them within `$$` delimiters enclosed in a `.hidden` block. For example:

``` tex
::: {.hidden}
$$
 \def\RR{{\bf R}}
 \def\bold#1{{\bf #1}}
$$
:::
```

For HTML math processed using [MathJax](https://docs.mathjax.org/) (the default) you can use the `\def`, `\newcommand`, `\renewcommand`, `\newenvironment`, `\renewenvironment`, and `\let` commands to create your own macros and environments.  

## Diagrams

Quarto has native support for embedding [Mermaid](https://mermaid-js.github.io/mermaid/#/) and [Graphviz](https://graphviz.org/) diagrams. This enables you to create flowcharts, sequence diagrams, state diagrams, Gantt charts, and more using a plain text syntax inspired by markdown.

For example, here we embed a flowchart created using Mermaid:

```{mermaid}
%%| echo: fenced
flowchart LR
  A[Hard edge] --> B(Round edge)
  B --> C{Decision}
  C --> D[Result one]
  C --> E[Result two]
```

Learn more in the article on [Diagrams](diagrams.qmd).

## Videos

You can include videos in documents using the `{{{< video >}}}` [shortcode](shortcodes.qmd). For example, here we embed a YouTube video:

``` {.markdown shortcodes="false"}
{{< video https://www.youtube.com/embed/wo9vZccmqwc >}}
```

Videos can refer to video files (e.g. MPEG) or can be links to videos published on YouTube, Vimeo, or Brightcove. Learn more in the article on [Videos](videos.qmd).

{{< include _pagebreak.qmd >}}

## Divs and Spans {#sec-divs-and-spans}

You can add classes, attributes, and other identifiers to regions of content using Divs and Spans.
Although the terms *Div* and *Span* originate in HTML, the syntax is used in Quarto across output formats.
For example, [Callout Blocks](#callout-blocks) are specified using the div syntax, and [Small Caps](#other-spans) are specified using the span syntax, and both work for many formats beyond HTML.
You may also use CSS and/or a [Filter](/docs/extensions/filters.qmd) along with Divs and Spans to provide styling or other behavior within rendered documents beyond what Quarto provides.

### Divs

For example, here we add the "border" class to a region of content using a div (`:::`):

``` markdown
::: {.border}
This content can be styled with a border
:::
```

Once rendered to HTML, Quarto will translate the markdown into:

``` html
<div class="border">
  <p>This content can be styled with a border</p>
</div>
```

Divs start with a fence containing at least three consecutive colons plus some attributes. The attributes may optionally be followed by another string of consecutive colons. The Div ends with another line containing a string of at least three consecutive colons. The Div should be separated by blank lines from preceding and following blocks. Divs may also be nested. For example

``` markdown
::::: {#special .sidebar}

::: {.warning}
Here is a warning.
:::

More content.
:::::
```

Once rendered to HTML, Quarto will translate the markdown into:

``` html
<div id="special" class="sidebar">
  <div class="warning">
    <p>Here is a warning.</p>
  </div>
  <p>More content.</p>
</div>
```

Fences without attributes are always closing fences. Unlike with fenced code blocks, the number of colons in the closing fence need not match the number in the opening fence. However, it can be helpful for visual clarity to use fences of different lengths to distinguish nested divs from their parents.

### Spans 

A bracketed sequence of inlines, as one would use to begin a link, will be treated as a `Span` with attributes if it is followed immediately by attributes:

``` markdown
[This is *some text*]{.class key="val"}
```

Once rendered to HTML, Quarto will translate the markdown into:

``` html
<span class="class" data-key="val">
  This is <em>some text</em>
</span>
```

### Ordering of Attributes

Both divs and spans in Pandoc can have any combination of identifiers, classes, and (potentially many) key-value attributes. In order for these to be recognized by Pandoc, they have to be provided in a specific order: identifiers, classes, and then key-value attributes. Any of these can be omitted, but must follow that order if they are provided. For example, the following is valid:

``` markdown
[This is good]{#id .class key1="val1" key2="val2"}
```

However, the following *will not be recognized by Pandoc*:

``` markdown
[This does *not* work!]{.class key="val" #id}
```

This ordering restriction applies to both divs and spans. See Pandoc's documentation on [Divs and Spans](https://pandoc.org/MANUAL.html#divs-and-spans) for additional details.

## Callout Blocks

#### Markdown Syntax

``` markdown
:::{.callout-note}
Note that there are five types of callouts, including: 
`note`, `tip`, `warning`, `caution`, and `important`.
:::
```

#### Output

::: callout-note
Note that there are five types of callouts, including `note`, `tip`, `warning`, `caution`, and `important`.
:::

Learn more in the article on [Callout Blocks](callouts.qmd).

## Other Blocks

+--------------------------+--------------------------+
| Markdown Syntax          | Output                   |
+==========================+==========================+
| ``` markdown             | > Blockquote             |
| > Blockquote             |                          |
| ```                      |                          |
+--------------------------+--------------------------+
| ``` markdown             | ::: classname            |
| ::: {.classname}         | Div                      |
| Div                      | :::                      |
| :::                      |                          |
| ```                      |                          |
+--------------------------+--------------------------+
| ``` markdown             | | Line Block             |
| | Line Block             | |    Spaces and newlines |
| |   Spaces and newlines  | |    are preserved       |
| |   are preserved        |                          |
| ```                      |                          |
+--------------------------+--------------------------+

## Other Spans {#other-spans}

To create text in small caps, that is underlined, or that is highlighted, use a span with one of the 
classes `.smallcaps`, `.underline` or `.mark` respectively.

+----------------------------------------+-------------------------------------------+
| Markdown Syntax                        | Output                                    |
+========================================+===========================================+
| ``` markdown                           | [This text is smallcaps]{.smallcaps}      |
| [This text is smallcaps]{.smallcaps}   |                                           |
| ```                                    |                                           |
+----------------------------------------+-------------------------------------------+
| ``` markdown                           | [This text is underlined]{.underline}     |
| [This text is underlined]{.underline}  |                                           |
| ```                                    |                                           |
+----------------------------------------+-------------------------------------------+
| ``` markdown                           | [This text is highlighted]{.mark}         |
| [This text is highlighted]{.mark}      |                                           |
| ```                                    |                                           |
+----------------------------------------+-------------------------------------------+

::: {.callout-note}

## In supported formats only

Support for these classes comes directly from Pandoc. 
Not all formats support all of these classes. 
In particular, `.mark` is not currently supported in `format: pptx`.

:::

## Special Characters

+-----------------+---------------+
| Markdown Syntax | Output        |
+=================+===============+
| ``` markdown    | endash: --    |
| endash: --      |               |
| ```             |               |
+-----------------+---------------+
| ``` markdown    | emdash: ---   |
| emdash: ---     |               |
| ```             |               |
+-----------------+---------------+

## Keyboard Shortcuts {#keyboard-shortcuts}

{{< include _kbd.qmd >}}
```````

## File: docs/authoring/notebook-embed.qmd
```````
---
title: Embedding from Other Documents
aliases:
  - /docs/prerelease/1.3/embed.html
---

{{< include ../_require-1.4.qmd >}}

## Overview

You can include the output of another Quarto document (`.qmd` or `.ipynb`) with the `embed` shortcode. To embed the output of a code block or notebook cell, provide the path to document and an identifier for the block or cell. For example, this Jupyter notebook called `penguins.ipynb` has a cell labelled `fig-bill-scatter`:

![](images/notebook-simple.png){fig-alt="A screenshot of a Jupyter Notebook with the name 'penguins.ipynb', with a cell highlighted that has the code chunk option label set to fig-bill-scatter. Below the cell is the resulting plot." width=80%}

You can use the following shortcode to embed the output of this cell:

```{.markdown shortcodes=false}
{{< embed penguins.ipynb#fig-bill-scatter >}}
```

This will embed the plot as follows:

{{< embed penguins.ipynb#fig-bill-scatter >}}

A link to the source notebook is automatically provided beneath the plot. Following the link takes users to a rendered version of the notebook, allowing them to explore the notebook without having to download and run it locally. For example, clicking on the link to `penguins.ipynb` gets you to a page that looks like the following:

![](images/notebook-view.png){.border fig-alt="A screenshot of webpage with the title 'penguins.ipynb', a large blue button labelled 'Download Notebook', followed by the notebook contents."}

You can embed output to and from both Jupyter Notebooks (`.ipynb`) and Quarto documents (`.qmd`). In this article, we'll refer to the source document generically as a *notebook*.

Beyond this basic usage, you can also:

-   Specify cells or blocks in multiple ways, see [Specifying Cells](#specifying-cells).

-   Control the output using code cell options in the source notebook, including things like figure captions, figure layout, and code display, see [Code Cell Options](#code-cell-options).

-   Include the code along with the output by adding an `echo` option to the shortcode, see [Embedding Code](#embedding-code).

-   Customize or exclude the link to the source notebook, see [Links to Source Notebooks](#linked-source-notebooks).

## Specifying Cells {#specifying-cells}

The `embed` shortcode specifies source notebooks using a relative path followed by a cell or code block identifier (e.g. `penguins.ipynb#fig-bill-scatter`). If the identifier is omitted, all of the cells or code blocks in the notebook will be embedded in the document.

### Quarto Documents

When the source is a Quarto document (`.qmd`), use the `label` of the code block as the identifier. For example, if the source document `penguins.qmd` contained the following code block:

````{.markdown filename="penguins.qmd"}
```{{r}}
#| label: fig-size-scatter
ggplot(penguins, aes(body_mass_g, flipper_length_mm)) +
  geom_point(aes(color = species)) +
  scale_color_manual(values = colors) +
  theme_minimal()
```
````

You would embed the output of that block with:

```{.markdown shortcodes=false}
{{< embed penguins.qmd#fig-size-scatter >}}
```

Which results in the following output:

{{< embed penguins-qmd.qmd#fig-size-scatter >}}


### Jupyter Notebooks

When the source is a Jupyter Notebook, the identifier used to locate the proper cell follows these heuristics:

1.  **Cell `id`**\
    First, the cell metadata will be checked for a matching `id`. ([Cell IDs](https://jupyter.org/enhancement-proposals/62-cell-id/cell-id.html) are a newer feature of Jupyter Notebooks that are not yet well supported in Jupyter front ends, but `id` is checked first to allow for future compatibility as they become more common).
2.  **Label**\
    If no cell with a matching `id` is found, Quarto will use a cell that has a `label` in the code metadata which matches the cell identifier.
3.  **Tags**\
    If no cell has been found, Quarto will use a cell or cell(s) whose tag matches the cell identifier.

#### Cell Tags

For example, to embed the output of a cell that you have given the tag `bill-ratio` within Jupyter Lab:

![](images/notebook-tag.png){.border fig-alt="Screenshot of a code cell in a Jupyter Notebook with the cell tags open in the cell toolbar and displaying the tag 'bill-ratio'." width=80%}

You would use the following embed:

```{.markdown shortcodes=false}
{{< embed penguins.ipynb#bill-ratio >}}
```

Which results in the following output:

{{< embed penguins.ipynb#bill-ratio >}}

## Code Cell Options {#code-cell-options}

Code cell options from the source notebook are propagated to the document in which they are embedded. For instance, you may specify code cell options like `fig-cap`, `fig-alt` and `layout-ncol`, to control aspects of embedded figures. For example, this cell in `penguins.ipynb` specifies figure options including a caption, sub-caption, alt text and layout:

```{.python filename="penguins.ipynb"}
#| label: fig-bill-marginal
#| fig-cap: "Marginal distributions of bill dimensions"
#| fig-subcap: 
#|   - "Gentoo penguins tend to have thinner bills,"
#|   - "and Adelie penguins tend to have shorter bills."
#| fig-alt:
#|   - "Density plot of bill depth by species."
#|   - "Density plot of bill length by species."
#| layout-ncol: 2

sns.displot(penguins, 
            x = "bill_depth_mm", 
            hue = "species", 
            kind = "kde", fill = True, aspect = 2, height = 3)
plt.show()
sns.displot(penguins, 
            x = "bill_length_mm", 
            hue = "species", 
            kind = "kde", fill = True, aspect = 2, height = 3)
plt.show()
```

When this cell is embedded:

```{.markdown shortcodes=false}
{{< embed penguins.ipynb#fig-bill-marginal >}}
```

The following output is produced:

{{< embed penguins.ipynb#fig-bill-marginal >}}

## Embedding Code {#embedding-code}

You may include the code from a cell or block along with the output by using the `echo=true` option to the `embed` shortcode. For example, to include the code and the plot from the cell labelled `species-counts` in `penguins.ipynb` the embed would be:

```{.markdown shortcodes=false}
{{< embed penguins.ipynb#species-counts echo=true >}}
```

The result in the document is both the code and output for the cell:

{{< embed penguins.ipynb#species-counts echo=true >}}

Like figure options, options for displaying the code will propagate from the source notebook. For example, to fold the code for this cell, you could add `code-fold: true` to the options for the `species-counts` cell:

```{.python filename="penguins.ipynb"}
#| label: species-counts
#| code-fold: true
penguins.groupby("species").size().reset_index(name = "count")
```

The options set in the YAML header for the document in which these cells are embedded will also control these code cells. For example, to fold all the code, including the code embedded from `penguins.ipynb`, you could add `code-fold: true` to the document YAML:

```{.yaml filename="sample.qmd"}
title: Exploration of penguin characteristics
author: Norah Jones
toc: true
format:
  html:
    code-fold: true
```

## Links to Source Notebooks {#linked-source-notebooks}

When you embed the contents of notebooks in a Quarto document and render the document to HTML, Quarto will automatically include links to the source notebooks that provided the embedded content. These links will by default appear both inline below the embedded content, as well as below the table of contents. For example, the following document embeds content from the notebook `penguins.ipynb`. You can see the links in the rendered HTML document below:

![](images/notebook-links.png){.border fig-alt="Screenshot of a rendered page with an embedded plot. A link to the Source 'penguins.ipynb' is shown directly below the plot. A similar link is shown below the table of contents under the heading 'Notebooks'."}

### Link Placement

You can control the placement of the links to source notebooks by specifying the option `notebook-links`{spellcheck="false"} in the document YAML with one of the following values:

`true`{spellcheck="false"} (default)

:   Display links to source notebooks inline below the embedded content, and alongside the table of contents.

`false`{spellcheck="false"}

:   Do not display any links to source notebooks.

`inline`{spellcheck="false"}

:   Display only the links inline below the embedded content.

`global`{spellcheck="false"}

:   Display only the links alongside the table of contents. 

### Notebook Views

By default, the link to the source notebook goes to an automatically generated HTML render of the notebook. This makes it easier for users to view the notebook contents without needing to download and run the notebook locally. This notebook view displays the contents of the notebook and includes a button to download the notebook.  For example:

![](images/notebook-view.png){.border fig-alt="A screenshot of webpage with the title 'penguins.ipynb', a large blue button labelled 'Download Notebook', followed by the notebook contents."}

As an example, you can view the live previews for the [`penguins.ipynb` notebook](penguins-preview.html) and [`penguins.qmd` notebook](penguins-qmd.embed-preview.html) used in this document.

### View Options

You can control the behavior of notebook views using `notebook-view`. For each source notebook, you can provide a `title` and a `url`. The `title` will be used as the text of the any links to the source notebook and will also appear at the top of the rendered notebook view. The `url`, if provided, will be used as the `href` of any links to the source notebook. This is useful if you have deployed a copy of the source notebook to a site like Github, Google Colab, or Kaggle and would rather link to that instead.

For example:

``` {.markdown style="whitespace: pre-wrap;"}
notebook-view:
  - notebook: penguins.ipynb
    title: "Plots and Computations"
    url: https://colab.research.google.com/drive/12GsIPQ644SI4vkEEHiZn-Qqfbr-bD1__
```

will result in links to the source notebook like so:

![](images/notebook-links-updated.png){.border fig-alt="Screenshot of a rendered page with an embedded plot. A link to the Source 'Plots and Computations' is shown directly below the plot. A similar link is shown below the table of contents under the heading 'Notebooks'."}

To disable the notebook views, and instead link directly to the notebook (so the user may download the notebook with no intermediary view), set `notebook-view` to `false`.
```````

## File: docs/authoring/penguins-qmd.qmd
```````
---
title: "Palmer Penguins (.qmd)"
---

```{r}
library(tidyverse)
library(palmerpenguins)
```

Data from [Palmer Penguins R package](https://allisonhorst.github.io/palmerpenguins/)


```{r}
penguins |> count(species)
```


```{r}
colors <- c("#FF8C00", "#A020F0", "#008B8B")
```

```{r}
#| label: fig-size-scatter
#| fig-width: 3
#| fig-height: 3
ggplot(penguins, aes(body_mass_g, flipper_length_mm)) +
  geom_point(aes(color = species)) +
  scale_color_manual(values = colors) +
  theme_minimal()
```
```````

## File: docs/authoring/placeholder.qmd
```````
---
title: Adding Placeholder Images to Your Documents
aliases:
  - /docs/prerelease/1.5/lipsum.html
---

## Overview

The `{{{< placeholder >}}}` shortcode generates a placeholder image, which is incredibly useful when you're designing your document or website layout but the final images aren't ready yet.
It helps maintain the design integrity without interrupting the development flow.
Placeholder images can have configurable sizes and will be generated in either PNG or SVG format.

## Example

Here's an example of a placeholder image:

{{< placeholder >}}

By default, the `placeholder` shortcode creates 100x100 pixel images in the PNG format.
You can customize the size and format of the image by providing parameters to the shortcode.

## Usage

The `placeholder` shortcode can take additional arguments controling the size and format of the image:

::: {layout-ncol=1}
```markdown
{{{< placeholder 400 200 format=svg >}}}
```

{{< placeholder 400 200 format=svg >}}
:::
This will create a scalable vector graphic (SVG) placeholder image with dimensions of 400x200 pixels.

It also takes an optional `format` keyword argument.

- `{{{< placeholder >}}}`: Create a 100x100 pixel PNG placeholder image.
- `{{{< placeholder width >}}}`: Create a `width`x`width` pixel PNG placeholder image.
- `{{{< placeholder width height >}}}`: Create a `width`x`height` pixel PNG placeholder image.
- `{{{< placeholder format="svg" >}}}`: Create a 100x100 SVG placeholder image.
- `{{{< placeholder width format="svg" >}}}`: Create a `width`x`width` SVG placeholder image.
- `{{{< placeholder width height format="svg" >}}}`: Create a `width`x`height` SVG placeholder image.
```````

## File: docs/authoring/shortcodes.qmd
```````
---
title: Shortcodes
---

{{< include /docs/authoring/_shortcodes.qmd >}}

If you want to dive in to creating your own shortcode, check out the article on [Creating Shortcodes](/docs/extensions/shortcodes.qmd).
```````

## File: docs/authoring/tables.qmd
```````
---
title: Tables
engine: jupyter
aliases: 
  - /docs/prerelease/1.5/lua-table-processing.html
---

## Overview

Quarto includes a number of features aimed at making it easy to to author and customize markdown table output, including:

-   Specifying column alignment and widths.
-   Providing captions, subcaptions, and cross-references.
-   Generating tables dynamically from executable code cells.

This article covers using these features in-depth.

## Markdown Tables

The most commonly used markdown table is known as a pipe table. Pipe tables support specifying per column alignment as well as captions. For example:


::: {layout-ncol="2"}

:::: {}

``` markdown
| Default | Left | Right | Center |
|---------|:-----|------:|:------:|
| 12      | 12   |    12 |   12   |
| 123     | 123  |   123 |  123   |
| 1       | 1    |     1 |   1    |

: Demonstration of pipe table syntax
```

::::

:::: {}

| Default | Left | Right | Center |
|---------|:-----|------:|:------:|
| 12      | 12   |    12 |   12   |
| 123     | 123  |   123 |  123   |
| 1       | 1    |     1 |   1    |

: Demonstration of pipe table syntax

::::

:::

The beginning and ending pipe characters are optional, but pipes are required between all columns. The colons indicate column alignment as shown. The header cannot be omitted, however you can simulate a headerless table by including a header with blank cells.

Since the pipes indicate column boundaries, columns need not be vertically aligned, as they are in the above example. So, this is a perfectly legal (though ugly) pipe table:

``` markdown
fruit| price
-----|-----:
apple|2.05
pear|1.37
orange|3.09
```

The cells of pipe tables cannot contain block elements like paragraphs and lists, and cannot span multiple lines. If a pipe table contains a row whose markdown content is wider than the column width (see `columns` option), then the table will take up the full text width and the cell contents will wrap, with the relative cell widths determined by the number of dashes in the line separating the table header from the table body.

For example `---|-` would make the first column 3/4 and the second column 1/4 of the full text width. On the other hand, if no lines are wider than column width, then cell contents will not be wrapped, and the cells will be sized to their contents.

### Using Bootstrap classes

Bootstrap table classes given as attributes next to a table caption are inserted into the `<table>` element.
The classes permitted are those that apply expressly to the entire table, and these are:
`"primary"`, `"secondary"`, `"success"`, `"danger"`, `"warning"`, `"info"`, `"light"`, `"dark"`, `"striped"`, `"hover"`, `"active"`, `"bordered"`, `"borderless"`, `"sm"`, `"responsive"`, `"responsive-sm"`, `"responsive-md"`, `"responsive-lg"`, `"responsive-xl"`, `"responsive-xxl"`.
For example, the following Markdown table will be rendered with row stripes and the rows will also be highlighted on hover:

::: {layout-ncol="2"}

:::: {}


``` markdown
| fruit  | price  |
|--------|--------|
| apple  | 2.05   |
| pear   | 1.37   |
| orange | 3.09   |

: Fruit prices {.striped .hover}
```

::::

:::: {}

| fruit  | price  |
|--------|--------|
| apple  | 2.05   |
| pear   | 1.37   |
| orange | 3.09   |

: Fruit prices {.striped .hover}

::::

:::

### Authoring

For simple tables with only a few cells it's straightforward to create them directly in markdown. As tables get larger, it makes sense to use an authoring tool. Some table authoring tools to consider include:

+------------------------------------------------------------------------+---------------------------------------------------------------+
| [TablesGenerator](https://www.tablesgenerator.com/markdown_tables)     | Online tool for generating markdown tables                    |
+------------------------------------------------------------------------+---------------------------------------------------------------+
| [Emacs TableMode](https://www.emacswiki.org/emacs/TableMode)           | Text based table creation and editing capabilities for Emacs. |
+------------------------------------------------------------------------+---------------------------------------------------------------+
| [Quarto Visual Editor](/docs/visual-editor/content.qmd#editing-tables) | Visual editor for `.qmd` files with table editing support.    |
+------------------------------------------------------------------------+---------------------------------------------------------------+

: {tbl-colwidths="\[35,65\]"}

## Column Widths

Above we describe a means of specifying column widths using the relative number of dashes in each column header (_e.g._, `---|-` to get a 75% / 25% split for a two-column table).

You can also explicitly specify columns widths using the `tbl-colwidths` attribute or document-level option. For an individual markdown table, add the attribute after the caption. For example:

::: {layout-ncol="2"}

:::: {}

``` markdown
| fruit  | price  |
|--------|--------|
| apple  | 2.05   |
| pear   | 1.37   |
| orange | 3.09   |

: Fruit prices {tbl-colwidths="[75,25]"}
```

::::

:::: {}

| fruit  | price  |
|--------|--------|
| apple  | 2.05   |
| pear   | 1.37   |
| orange | 3.09   |

: Fruit prices {tbl-colwidths="[75,25]"}

::::

:::

If your table doesn't have a caption, then you can still specify only `tbl-colwidths`:

::: {layout-ncol="2"}

:::: {}

``` markdown
| fruit  | price  |
|--------|--------|
| apple  | 2.05   |
| pear   | 1.37   |
| orange | 3.09   |

: {tbl-colwidths="[75,25]"}
```

::::

:::: {}

| fruit  | price  |
|--------|--------|
| apple  | 2.05   |
| pear   | 1.37   |
| orange | 3.09   |

: {tbl-colwidths="[75,25]"}

::::

:::

Column widths can also be specified at the document level (_e.g._, to have uniform widths across a set of tables):

``` yaml
---
title: "My Document"
format: html
tbl-colwidths: [75,25]
---
```

## Cross References

For tables produced by executable code cells, include a label with a `tbl-` prefix to make them cross-referenceable.
For example:

```{python}
#| label: tbl-planets
#| tbl-cap: "Astronomical object"
#| echo: fenced

from IPython.display import Markdown
from tabulate import tabulate
table = [["Sun","696,000",1.989e30],
         ["Earth","6,371",5.972e24],
         ["Moon","1,737",7.34e22],
         ["Mars","3,390",6.39e23]]
Markdown(tabulate(
  table, 
  headers=["Astronomical object","R (km)", "mass (kg)"]
))
```

::: callout-important
## Label Prefix

In order for a table to be cross-referenceable, its label must start with the `tbl-` prefix.
:::

{{< include _table-crossrefs.md >}}

See the article on [Cross References](cross-references.qmd) for additional details.

### Subtables

{{< include _table-crossrefs-subtables.md >}}

## Caption Location

By default, table captions are positioned above tables. You can modify this behavior using the `tbl-cap-location` option. For example:

``` yaml
---
tbl-cap-location: top
---
```

Note that this option is specified at the top level so that it can be shared by both PDF and HTML formats. If you are only targeting a single format you can place it alongside other `format` specific options.

Valid values for the caption location include:

| Value    | Description                           |
|----------|---------------------------------------|
| `top`    | Position the caption above the table. |
| `bottom` | Position the caption below the table. |
| `margin` | Position the caption in the margin.   |

See the article on [Article Layout](article-layout.qmd#margin-captions) for additional details on placing captions in the margin.

## Computations

All of the options described above work for tables produced by executable code cells. For example, here we use the Python [tabulate](https://pypi.org/project/tabulate/) package along with the `Markdown()` function from the IPython [display](https://ipython.readthedocs.io/en/stable/api/generated/IPython.display.html#) module to print a markdown table:

```{python}
#| label: tbl-planet-measures
#| tbl-cap: "Astronomical object"
#| echo: fenced

from IPython.display import Markdown
from tabulate import tabulate
table = [["Sun","696,000",1.989e30],
         ["Earth","6,371",5.972e24],
         ["Moon","1,737",7.34e22],
         ["Mars","3,390",6.39e23]]
Markdown(tabulate(
  table, 
  headers=["Astronomical object","R (km)", "mass (kg)"]
))
```

Here we apply the `tbl-cap` and `tbl-colwidths` options to a code cell that uses the knitr `kable()` function to write a markdown table:

```{{r}}
#| label: tbl-cars
#| tbl-cap: "Cars"
#| tbl-colwidths: [60,40]

kable(head(cars))
```

If your code cell produces multiple tables, you can also specify subcaptions and layout using cell options:

::: {.panel-tabset group="language"}

## Python

````python
```{{python}}
#| label: tbl-example
#| tbl-cap: "Example"
#| tbl-subcap: 
#|   - "MPG"
#|   - "Taxis"
#| layout-ncol: 2

import seaborn as sns
from IPython.display import Markdown, display
mpg = sns.load_dataset("mpg").head(10)
taxis = sns.load_dataset("taxis").head(10)

display(Markdown(mpg.to_markdown(index = False)))
display(Markdown(taxis.to_markdown(index = False)))
```
````

Note that we use the [`display()`](https://ipython.readthedocs.io/en/stable/api/generated/IPython.display.html#IPython.display.display) function imported from `IPython` so that we can render multiple outputs from a single cell (by default cells only output their last expression).

## R

````python
```{{r}}
#| label: tbl-example
#| tbl-cap: "Example"
#| tbl-subcap: 
#|   - "Cars"
#|   - "Pressure"
#| layout-ncol: 2

library(knitr)
kable(head(cars))
kable(head(pressure))
```
````


:::

### Computational Table Styling

Quarto adds additional styling to tables generated by computations. By default, such tables are styled to be smaller and have striped rows.
If you want to disable this treatment, add `plain` to the classes of the code cell:

````python
```{{r}}
#| classes: plain

tibble::tribble(
  ~fruit,   ~price,
  "apple",  2.05,
  "pear",   1.37,
  "orange", 3.09
) |> 
  gt::gt()
```
````

## Grid Tables

Grid tables are a more advanced type of markdown tables that allow arbitrary block elements (multiple paragraphs, code blocks, lists, etc.). For example:


``` markdown
+-----------+-----------+--------------------+
| Fruit     | Price     | Advantages         |
+===========+===========+====================+
| Bananas   | $1.34     | - built-in wrapper |
|           |           | - bright color     |
+-----------+-----------+--------------------+
| Oranges   | $2.10     | - cures scurvy     |
|           |           | - tasty            |
+-----------+-----------+--------------------+

: Sample grid table.
```

Which looks like this when rendered to HTML:

+-----------+-----------+--------------------+
| Fruit     | Price     | Advantages         |
+===========+===========+====================+
| Bananas   | $1.34     | - built-in wrapper |
|           |           | - bright color     |
+-----------+-----------+--------------------+
| Oranges   | $2.10     | - cures scurvy     |
|           |           | - tasty            |
+-----------+-----------+--------------------+

: Sample grid table.


The row of `=`s separates the header from the table body, and can be omitted for a headerless table. The cells of grid tables may contain arbitrary block elements (multiple paragraphs, code blocks, lists, etc.)

Alignments can be specified as with pipe tables, by putting colons at the boundaries of the separator line after the header:


``` markdown
+---------+--------+------------------+
| Right   | Left   | Centered         |
+========:+:=======+:================:+
| Bananas | $1.34  | built-in wrapper |
+---------+--------+------------------+
```
Which looks like this when rendered to HTML:

+---------+--------+------------------+
| Right   | Left   | Centered         |
+========:+:=======+:================:+
| Bananas | $1.34  | built-in wrapper |
+---------+--------+------------------+


For headerless tables, the colons go on the top line instead:

``` markdown
+----------:+:----------+:--------:+
| Right     | Left      | Centered |
+-----------+-----------+----------+
```

Which looks like this when rendered to HTML:

+----------:+:----------+:--------:+
| Right     | Left      | Centered |
+-----------+-----------+----------+


Note that grid tables are quite awkward to write with a plain text editor (because unlike pipe tables, the column indicators must align). Here are some tools that can assist with creating grid tables:

-   Emacs' [table-mode](https://www.gnu.org/software/emacs/manual/html_node/emacs/Text-Based-Tables.html) (`M-x table-insert`)
-   Quarto [Visual Editor](/docs/visual-editor/content.qmd#editing-tables)
-   Tables Generator's [Plain Text mode](https://www.tablesgenerator.com/text_tables) with `Use reStructuredText syntax` enabled

## HTML Tables

Quarto can process HTML tables in `html` `RawBlock` nodes (_i.e._, `{=html}`) and convert them to Markdown tables, regardless of the output format (intentionally including non-HTML formats).
As a result, you can use HTML table syntax in your documents and it will be converted to Markdown syntax for all formats.
Additionally, libraries that emit computational tables in HTML format can work in other output formats.

For example, consider the following raw HTML block:

````markdown
```{=html}
<table>
  <caption>As described in the section above, Quarto tables are great.</caption>
  <thead>
    <tr>
      <th>Header 1</th>
      <th>Header 2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
    <td><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/37/African_Bush_Elephant.jpg/220px-African_Bush_Elephant.jpg" alt="African Bush Elephant" /></td>
      <td>Regular output</td>
    </tr>
  </tbody>
</table>
```
````

When rendered, this results in the following output for HTML and PDF formats:

::: {layout-ncol=2}

:::: {}
### HTML Output

```{=html}
<table>
  <caption>As described in the section above, Quarto tables are great.</caption>
  <thead>
    <tr>
      <th>Header 1</th>
      <th>Header 2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
    <td><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/37/African_Bush_Elephant.jpg/220px-African_Bush_Elephant.jpg" alt="African Bush Elephant" /></td>
      <td>Regular output</td>
    </tr>
  </tbody>
</table>
```
::::

:::: {}
### PDF Output

![](images/raw-table-pdf.png){.border fig-alt="Screenshot of PDF output showing a table with a caption and two columns. The column headers are Header 1 and Header 2, and the cell contents are an image of an elephant and text that reads Regular Output."}
::::

:::

In addition, Quarto supports the specification of embedded  Markdown content in tables.
This is done by providing a data attribute `qmd` or `qmd-base64` in an embedded `span` or `div` node.
These nodes can appear anywhere that such content is allowed: table headers, footers, cells, captions, _etc._ 

For example, the following table includes a cross reference, markdown formatting and a shortcode:

:::: {layout-nrow="2"}

::: {}

```` markdown
## HTML Tables Example {#sec-html-tables}

```{=html}
<table>
  <caption><span data-qmd="As described in [Section -@sec-html-tables], Quarto are great."></span></caption>
  <thead>
    <tr>
      <th><span data-qmd="_Header 1_"></span></th>
      <th><span data-qmd="_Header 2_"></span></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><span data-qmd="{{{< video https://www.youtube.com/embed/wo9vZccmqwc >}}}"></span></td>
      <td>Regular output</td>
    </tr>
  </tbody>
</table>
```
````

:::

::: {}

Which renders as follows:

## HTML Tables Example {#sec-html-tables}

```{=html}
<table>
  <caption><span data-qmd="As described in [Section -@sec-html-tables], Quarto are great."></span></caption>
  <thead>
    <tr>
      <th><span data-qmd="_Header 1_"></span></th>
      <th><span data-qmd="_Header 2_"></span></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><span data-qmd="{{< video https://www.youtube.com/embed/wo9vZccmqwc >}}"></span></td>
      <td>Regular output</td>
    </tr>
  </tbody>
</table>
```

:::

::::

### Colspans and Rowspans

Tables containing cells spanning multiple rows or columns are supported across output formats[except in PDF margins]{.aside}.

However, using markdown, it is tricky to draw grid tables with spans, and there is no way to express spans in pipe tables. 

If you are comfortable with HTML, or use a package that generates HTML, the table cell HTML attributes `colspan` and `rowspan` are a better option.

```{=html}
{{< include col-and-row-span.html >}}
```

````html
```{=html}
{{< include col-and-row-span.html >}}
```
````


### Individual cell alignment

Markdown supports specification of alignment by column, but does not allow setting the alignment of individual cells. The CSS properties `text-align` and `vertical-align` are only available through Raw HTML. (These are not currently supported by PDF/Latex or Pptx output formats, and Docx only supports `text-align`.)


```{=html}
{{< include cell-alignment.html >}}
```

````html
```{=html}
{{< include cell-alignment.html >}}
```
````

## Disabling Quarto Table Processing

It's possible that Quarto's processing of HTML tables may interfere with the HTML produced computationally with table packages in R and Python (or other supported languages).


When you disable Quarto's HTML table processing, tables are not translated to Markdown, will not be rendered to other output formats, and can not use Quarto Markdown features, like cross-references, shortcodes, etc.
The tables also won't be visible to Lua filters that act on `Table` nodes.

You can disable Quarto's HTML table processing at a document level or project level with the option `html-table-processing`:

```{.yaml}
---
format:
  html:
    html-table-processing: none
---
```

This option is also available as a code cell option for Knitr and Jupyter, e.g. 

````{markdown}
```{{r}}
#| html-table-processing: none

# R Code that generates an HTML table
```
````

To disable Quarto's HTML table processing for parts of a document use a div with the attribute `html-table-processing="none"`:

````{.markdown}
::: {html-table-processing="none"}

Content with HTML tables you don't want processed.

:::
````

### Library authors

If you are the author of a library that emits HTML tables you might like to disable Quarto's processing of HTML tables by adding the attribute `data-quarto-disable-processing="true"` to the `<table>` element. For example:

```html
<table data-quarto-disable-processing="true">
  ...
</table>
```

Additionally, you can add the comment `<!--| quarto-html-table-processing: none -->` to the HTML raw block, and Quarto will not attempt to process it.
```````

## File: docs/authoring/title-blocks.qmd
```````
---
title: Title Blocks
---

## Overview

HTML pages rendered with Quarto include a formatted title block at the start of the article. The title block contains the title, subtitle, authors, date, doi, and abstract.

A simple example title block looks like:

![](images/document-title-block.png){.border fig-alt="Document with header reading: Summarizing Output for Reproducible Documents. Below is Author (Nora Jones), Affiliation (Spacely Sprockets), Published (5/4/2018). Below that is a description which reads: A summary of best practices for summarizing output of reproducible scientific documents."}

The title block will automatically layout elements from the front matter of the document. If you'd like, you can control the behavior using `title-block-style`.

There are three options available:

`default`

:   The default title-block treatment create a smaller font face and gathers the various title elements into stylized groups in the title block of the document.

`plain`

:   The plain treatment will do all the title element processing (gathering and organizing the elements), but will not apply the default title block styling.

`none`

:   `none` disables title block processing altogether. Content will not be processed or organized and the title block will be emitted verbatim from Pandoc.

## Title Banners

In addition, if you'd like a more prominent title block, you can use `title-block-banner` to create a banner style title block. A banner style title block will position the title, subtitle, description, and categories in a banner above the article. For example:

``` yaml
---
title-block-banner: true
---
```

will render a title block like:

![](images/document-title-block-banner.png){.border fig-alt="Title block with title and description against a blue background up top, and below a section with author, affilitation, and date published."}

### Custom Backgrounds

In this case, the color of the banner is automatically determined based upon the theme. However, you can control the banner background by providing either a CSS color (e.g. `"#FFDDFF"`, or `red`) or the path to an image which will be used the background. For example, to use a banner image, you might write:

``` yaml
---
title-block-banner: images/banner.jpeg
---
```

which would render a banner title block like:

![](images/document-title-block-banner-custom.png){.border fig-alt="Title block with title and description against an image background up top, and below a section with author, affilitation, and date published."}

When you provide an explicit background color or image, Quarto assumes that the color of the background will contrast with the body background color and automatically uses the body background color as the text color over the banner.

### Foreground Color

You can specify the color the for the text of the banner as well, using `title-block-banner-color` and providing a CSS color (e.g. `"#FFDDFF"`, or `red`) .

## Date

Quarto includes the document's `date` in the title block. In addition to writing a standard date, you may also use a few special keywords which will generate a date for you. `today` will provide the current date with the current time set to 0, `now` will provide the current date and time, and `last-modified` will provide the file modification date and time of the document itself.

### Formatting

When your title block is output using the `default` or `plain` styles, Quarto will automatically format the date based upon the document locale (`lang`). You can control formatting by specifying a `date-format` in the document front matter. For example:

``` yaml
---
title: Summarizing Output for Reproducible Documents
date: 2018-05-04
date-format: short
---
```

For more about date formats, see the Quarto [date format reference](/docs/reference/dates.qmd).

## Metadata Labels

The labels for the metadata included in the title block have default values that are properly localized, but you may want to provide your own labels for metadata. You can use the following to customize the labels:

| Option              | Label          | Styles                     |
|---------------------|----------------|----------------------------|
| `author-title`      | Authors        | `plain`, `default`         |
| `affiliation-title` | Affiliations   | `plain`, `default`         |
| `abstract-title`    | Abstract       | `plain`, `default`, `none` |
| `description-title` | Description    | `plain`, `default`         |
| `published-title`   | Date Published | `plain`, `default`         |
| `doi-title`         | DOI            | `plain`, `default`         |

## Custom Title Pages

To learn more about providing a complete custom title block, see the [documentation on template partials](/docs/journals/templates.qmd#template-partials).
```````

## File: docs/authoring/variables.qmd
```````
---
title: "Variables"
---

## Overview

There are a number of ways to include dynamic variables within documents rendered by Quarto. This is useful for externalizing content that varies depending on context, or as an alternative to repeating a value in multiple places (e.g. a version number).

For example, the following prints the `title` from document metadata:

``` {.markdown shortcodes="false"}
{{< meta title >}}
```

The `{{{< meta >}}}` syntax used here is an example of a [shortcode](/docs/extensions/shortcodes.qmd). Quarto supports the following shortcodes for dynamic variables:

| Shortcode     | Description                          |
|---------------|--------------------------------------|
| [var](#var)   | Value from `_variables.yml` file     |
| [meta](#meta) | Value from document metadata         |
| [env](#env)   | Value of System environment variable |

## var {#var}

If you are using a Quarto project, the `var` shortcode enables you to insert content from a project-level `_variables.yml` file. Create this file alongside your `_quarto.yml` project file, and then include references to those variables within any document in your project.

Variables can be either simple values or markdown content. To define variables, create a `_variables.yml` file in the root directory of your project. For example:

``` yaml
version: 1.2

email:
  info: info@example.com
  support: support@example.com

engine:
  jupyter: "[Jupyter](https://jupyter.org)"
  knitr: "[Knitr](<https://yihui.name/knitr>)"
```

Note that the `engine` variable values include markdown for hyperlinks. 
Any markdown provided needs to be well-formed, and cannot change the structure of the content around it (e.g. by closing a div opened before the variable inclusion).

To include the value of a variable, use the `{{</* var */>}}` shortcode, for example:

``` {.markdown shortcodes="false"}
Version {{< var version >}} is a minor upgrade.

Please contact us at {{< var email.info >}}.

Quarto includes {{< var engine.jupyter >}} and 
{{< var engine.knitr >}} computation engines.
```

## meta {#meta}

The `meta` shortcode allows you to insert content from Pandoc metadata (e.g. YAML at the top of the document and/or in `_quarto.yml`).

For example, the following shortcode inserts the value of the `title` field from YAML metadata:

``` {.markdown shortcodes="false"}
{{< meta title >}}
```

You can dereference sub-keys using the dot (`.`) delimiter. For example:

``` {.markdown shortcodes="false"}
{{< meta labels.description >}}
```

You can also index into an array with the dot (`.`) delimiter. For example, to
extract the first in the array of authors:

``` {.markdown shortcodes="false"}
{{< meta author.1 >}}
```

To reference a field that contains a dot (`.`), escape the dot with a double backslash (`\\`). For example, to get `field.with.dots`:


``` {.markdown shortcodes="false"}
{{< meta field\\.with\\.dots >}}
```

## env {#env}

The `env` shortcode enables you to read values from environment variables. For example:

``` {.markdown shortcodes="false"}
Version {{< env PRODUCT_VERSION >}} is a minor upgrade.
```

You can provide a fallback value if the environment variable isn't set by providing a second argument:

``` {.markdown shortcodes="false"}
Version {{< env PRODUCT_VERSION "*.*" >}} is a minor upgrade.
```

You can read more about setting environment variables in Quarto projects in  [Environment Variables](/docs/projects/environment.qmd).

{{< include ../extensions/_shortcode-escaping.qmd >}}
```````

## File: docs/authoring/version.qmd
```````
---
title: Displaying Quarto CLI Version
---

## Overview

The `version` shortcode prints the version of the Quarto CLI that is being used to build the document as part of the document content.

## Example

Here's an example of the `{{{< version >}}}` shortcode in action:

> Quarto CLI {{< version >}} is being used to build this document.

## Usage

::: {layout-ncol=2}
```markdown
Quarto CLI {{{< version >}}} is amazing.
```
:::: {.border}
Quarto CLI {{< version >}} is amazing.
::::
:::
```````

## File: docs/authoring/videos.qmd
```````
---
title: "Videos"
---

## Overview

You can embed videos in documents using the `{{{< video >}}}` shortcode. For example, here we embed a YouTube video:

``` {.markdown shortcodes="false"}
{{< video https://www.youtube.com/embed/wo9vZccmqwc >}}
```

Videos can refer to video files (e.g. `.mp4`) or can be links to videos published on YouTube, Vimeo, or Brightcove.

Here are some additional examples that demonstrate using various video sources and options:

``` {.default shortcodes="false"}
{{< video local-video.mp4 >}}

{{< video https://www.youtube.com/embed/wo9vZccmqwc >}}

{{< video https://vimeo.com/548291297 >}}

{{< video https://youtu.be/wo9vZccmqwc width="400" height="300" >}}

{{< video https://www.youtube.com/embed/wo9vZccmqwc
    title="What is the CERN?"
    start="116"
    aspect-ratio="21x9" 
>}}
```

In HTML formats the video will be embedded within the document. For other formats, a simple link to the video will be rendered.

Next, we'll cover the various options available for video embedding. For additional details on using videos within Revealjs presentations (including how to create slides with full-screen video backgrounds), see the [Revealjs](#revealjs) section below.

## Video URL

The video URL can specify either a path to a video file (e.g. a `.mp4`) alongside the document, a remote URL to a video file, or a URL to a video service (YouTube, Vimeo, or Brightcove).

These are valid URLs for video files:

``` {.default shortcodes="false"}
{{< video local-video.mp4 >}}
{{< video https://videos.example.com/video.mp4 >}}
```

For video services, a variety of URL forms are supported. For example, the following video service URLs are all valid:

``` {.default .code-overflow-scroll shortcodes="false"}
{{< video https://youtu.be/wo9vZccmqwc >}}
{{< video https://www.youtube.com/watch?v=wo9vZccmqwc >}}
{{< video https://www.youtube.com/embed/wo9vZccmqwc >}}
{{< video https://vimeo.com/548291297 >}}
{{< video https://players.brightcove.net/1460825906/default_default/index.html?videoId=5988531335001 >}}
```

Note that YouTube videos support both the URL that is available in the address bar when watching a video as well as the standard URLs used for linking and embedding. Brightcove videos are embedded using the standard [iframe embed code](https://studio.support.brightcove.com/publish/choosing-correct-embed-code.html).

## Options

### Aspect Ratio

Videos are automatically rendered responsively using the full width of the document's main text column. The `aspect-ratio` specifies how the height should vary with changes in width. For example:

``` {.default shortcodes="false"}
{{< video https://youtu.be/wo9vZccmqwc aspect-ratio="4x3" >}}
```

Available [aspect ratios](https://getbootstrap.com/docs/5.0/helpers/ratio/#aspect-ratios) include `1x1`, `4x3`, `16x9` (the default), and `21x9`.

#### Width and Height

You can disable responsive sizing by providing explicit `width` and `height` attributes. For example:

``` {.default shortcodes="false"}
{{< video https://youtu.be/wo9vZccmqwc width="250" height="175" >}}
```

This will produce a video that renders at the specified dimensions and is not responsive. Note that when no `height` or `width` are specified, videos will size responsively given the space available to them.

### Start Time

For YouTube videos, you can specify a `start` option to indicate how many seconds into the video you want to start playing:

``` {.default shortcodes="false"}
{{< video https://youtu.be/wo9vZccmqwc start="10" >}}
```

### Frame Title

The `title` option adds a `title` attribute to the video `<iframe>`:

``` {.default shortcodes="false"}
{{< video https://www.youtube.com/embed/wo9vZccmqwc 
    title='What is the CERN?' 
>}}
```

## Revealjs {#revealjs}

You can include videos within [Revealjs](/docs/presentations/revealjs/index.qmd) presentations in one of two ways:

-   A video that appears within the contents of a slide.

-   A video that occupies the entire background of a slide.

### Slide Content

Here's a video on a slide without a title:

``` {.default shortcodes="false"}
---

{{< video https://youtu.be/wo9vZccmqwc width="100%" height="100%" >}}
```

Note that we set the `width` and `height` explicitly to 100% so that the video fills the slide.

Here's a video on a slide with a title.

``` {.default shortcodes="false"}
## Video Slide 

{{< video https://youtu.be/wo9vZccmqwc width="100%" height="85%" >}}
```

Note that we set the `height` to 85% to leave room for the title.

### Backgrounds

For videos on slides without titles, you might prefer to have the video fill the entire background of the slide. You can do this using the `background-video` attribute. For example:

``` markdown
## {background-video="intro-cern.mp4"}

## {background-video="https://videos.example.com/intro-cern.mp4"}

## {background-video="https://youtu.be/wo9vZccmqwc?autoplay=1"}

## {background-video="https://vimeo.com/548291297"}
```

Note that when using `background-video` for video files (as distinct from services like YouTube) you can specify a number of other attributes, including:

{{< include ../presentations/revealjs/_background-video.md >}}

## Cross-References

{{< include _cross-reference-divs-video.qmd >}}
```````

## File: docs/blog/posts/2022-02-13-feature-callouts/index.qmd
```````
---
title: Using Callouts
subtitle: Use callouts to draw attention to important complementary content without interupting the document flow
description: |
  Callouts are an excellent way to draw extra attention to certain concepts, or to more clearly indicate that certain content is supplemental or applicable to only some scenarios.
categories:
  - Features
  - Authoring
author: Charles Teague
date: 2/13/2022
image: callouts.png
image-alt: "Three calout boxes: A note (has a blue banner with info icon preceding the header), a tip (has a green banner with lightbulb icon preceding the header), and an important (has a red banner with info exclamation-point icon preceding the header)."
---

Callouts are an excellent way to draw extra attention to certain concepts, or to more clearly indicate that certain content is supplemental or applicable to only some scenarios.

![](callouts.png){.preview-image fig-align="center" fig-alt="Three calout boxes: A note (has a blue banner with info icon preceding the header), a tip (has a green banner with lightbulb icon preceding the header), and an important (has a red banner with info exclamation-point icon preceding the header)."}

## Callout Basics

There are five different types of callouts available.

-   note
-   tip
-   important
-   caution
-   warning

The color and icon will be different depending upon the type that you select.

## Syntax

Create callouts in markdown using the following syntax (note that the first markdown heading used within the callout is used as the callout heading):

``` markdown
:::{.callout-note}
Note that there are five types of callouts, including:
`note`, `tip`, `warning`, `caution`, and `important`.
:::

:::{.callout-tip}
## Tip With Caption

This is an example of a callout with a caption.
:::
```

See our documentation on [Callouts](/docs/authoring/callouts.qmd), to learn more, including more about how to customize the appearance and behavior of callouts.
```````

## File: docs/blog/posts/2022-02-15-feature-tables/index.qmd
```````
---
title: Customizing Table Output
subtitle: Author and customize markdown tables using Quarto
description: |
  This post provides an overview of these capabilities in Quarto. For more detail about all the features Quarto for authoring tables, see [Tables](/docs/authoring/tables.qmd).
categories:
  - Features
  - Authoring
  - Tables
author: JJ Allaire
date: "2/15/2022"
image: table.png
image-alt: "Table 1: Example. Has two subtables: Subtable a, Cars, with columns for speed and dist; and subtable b, Pressure, with columns for temperature and pressure."
---

Quarto includes a number of features aimed at making it easy to author and customize markdown table output, including:

-   Specifying column alignment and widths.
-   Providing captions, subcaptions, and cross-references.
-   Generating tables dynamically from executable code cells.

This post provides an overview of these capabilities in Quarto. For more detail about all the features Quarto for authoring tables, see [Tables](/docs/authoring/tables.qmd).

## Markdown Tables

The most commonly used markdown table is known as a pipe table. Pipe tables support specifying per column alignment as well as captions. For example:

``` markdown
| Default | Left | Right | Center |
|---------|:-----|------:|:------:|
| 12      | 12   |    12 |   12   |
| 123     | 123  |   123 |  123   |
| 1       | 1    |     1 |   1    |

: Demonstration of pipe table sytnax
```

Here is the table rendered to HTML:

| Default | Left | Right | Center |
|---------|:-----|------:|:------:|
| 12      | 12   |    12 |   12   |
| 123     | 123  |   123 |  123   |
| 1       | 1    |     1 |   1    |

: Demonstration of pipe table syntax

#### Caption Location

By default, table captions are positioned above tables. You can modify this behavior using the `tbl-cap-location` option. For example:

``` yaml
---
tbl-cap-location: top
---
```

## Explicit Column Widths

Beyond standard pipe table syntax for expressing column width, you can also explicitly specify columns widths using the `tbl-colwidths` attribute or document-level option. For an individual markdown table, add the attribute after the caption. For example:

``` markdown
| fruit  | price  |
|--------|--------:
| apple  | 2.05   |
| pear   | 1.37   |
| orange | 3.09   |

: Fruit prices {tbl-colwidths="[75,25]"}
```

Note that this option is specified at the top level so that it can be shared by both PDF and HTML formats. If you are only targeting a single format you can place it alongside other `format` specific options.

Valid values for the caption location include:

| Value    | Description                           |
|----------|---------------------------------------|
| `top`    | Position the caption above the table. |
| `bottom` | Position the caption below the table. |
| `margin` | Position the caption in the margin.   |

## Computations

All of the options described above work for tables produced by executable code cells. For example, here we apply the `tbl-cap`, `tbl-colwidths` and `tbl-caption-location` options to a code cell:

```{{r}}
#| tbl-cap: "Cars"
#| tbl-colwidths: [60,40]
#| tbl-cap-location: margin

library(knitr)
kable(head(cars))
```

In addition to the above, which focused on some of the features of Quarto when writing pipe tables in markdown, you can also author tables using grid syntax. You review the [documentation](/docs/authoring/tables.qmd). for more detail.
```````

## File: docs/blog/posts/2022-02-17-advanced-layout/index.qmd
```````
---
title: Positioning Content in the Margin
subtitle: Create 'Tufte' style documents with sidenotes, margin tables and figures, and other margin content
description: |
  This post demonstrates a few of the capabilities for positioning content in the margin of the page. You can read more about the complete capabilities in the [Article Layout Guide](/docs/authoring/article-layout.qmd).
author: Charles Teague
date: "2/17/2022"
categories:
  - Features
  - Layout
image: margin-content.png
image-alt: "Screenshot of two sections of post: Margin Figures, which has a plot in the margin; and Arbitrary Margin Content, which has text with a LaTeX equation in the margin."
reference-location: margin
citation-location: margin
---

Quarto supports a variety of page layout options that enable you to author content that

-   Fills the main content region
-   Overflows the content region
-   Spans the entire page
-   Occupies the document margin

This post will demonstrate a few of the capabilities for positioning content in the margin of the page. You can read more about the complete capabilities in the [Article Layout Guide](/docs/authoring/article-layout.qmd).\

## Margin Figures

Figures that you create using code cells can be placed in the margin by using the `column: margin` code cell option. If the code produces more than one figure, each of the figures will be placed in the margin.

```{r}
#| label: fig-mtcars
#| fig-cap: "MPG vs horsepower, colored by transmission."
#| column: margin
#| echo: fenced

library(ggplot2)
mtcars2 <- mtcars
mtcars2$am <- factor(
  mtcars$am, labels = c('automatic', 'manual')
)
ggplot(mtcars2, aes(hp, mpg, color = am)) +
  geom_point() +
  geom_smooth(formula = y ~ x, method = "loess") +
  theme(legend.position = 'bottom')
```

## Margin Tables

You an also place tables in the margin of your document by specifying `column: margin`.

```{r}
#| column: margin
#| echo: fenced

knitr::kable(
  mtcars[1:3, 1:3]
)
```

## Other Content

You can also place content in the margin by targeting the margin column using a div with the .`column-margin` class. For example:

``` md
::: {.column-margin}
We know from *the first fundamental theorem of calculus* that for $x$ in $[a, b]$:

$$\frac{d}{dx}\left( \int_{a}^{x} f(u)\,du\right)=f(x).$$
:::
```

::: column-margin
We know from *the first fundamental theorem of calculus* that for $x$ in $[a, b]$:

$$\frac{d}{dx}\left( \int_{a}^{x} f(u)\,du\right)=f(x).$$
:::

## Margin References

Footnotes and the bibliography typically appear at the end of the document, but you can choose to have them placed in the margin by setting the following option\[\^1\] in the document front matter:

``` yaml
---
reference-location: margin
citation-location: margin
---
```

With these options set, footnotes and citations will (respectively) be automatically be placed in the margin of the document rather than the bottom of the page. As an example, when I cite @xie2018, the citation bibliography entry itself will now appear in the margin.

### Asides

Asides allow you to place content aside from the content it is placed in. Asides look like footnotes, but do not include the footnote mark (the superscript number). [This is a span that has the class `aside` which places it in the margin without a footnote number.]{.aside}

``` markdown
[This is a span that has the class aside which places it in the margin without a footnote number.]{.aside}
```

## Margin Captions

For figures and tables, you may leave the content in the body of the document while placing the caption in the margin of the document. Using `cap-location: margin` in a code cell or document front matter to control this. For example:

```{r}
#| label: fig-cap-margin
#| fig-cap: "MPG vs horsepower, colored by transmission."
#| cap-location: margin
#| echo: fenced

library(ggplot2)
mtcars2 <- mtcars
mtcars2$am <- factor(
  mtcars$am, labels = c('automatic', 'manual')
)
ggplot(mtcars2, aes(hp, mpg, color = am)) +
  geom_point() +
  geom_smooth(formula = y ~ x, method = "loess") +
  theme(legend.position = 'bottom')
```
```````

## File: docs/blog/posts/2022-06-21-rstudio-conf-2022-quarto/index.qmd
```````
---
title: Quarto at rstudio::conf(2022)
subtitle: Quarto-related workshops and talks at rstudio::conf(2022)
description: | 
    [rstudio::conf(2022)](https://rstd.io/conf) will feature a variety of workshops and talks on Quarto. Join us in Washington DC this July 25-28 to learn more about Quarto and hear from folks using Quarto to create, share, and collaborate.
categories:
  - Conf
  - Workshop
  - Talk
author: Mine Çetinkaya-Rundel
date: "6/21/2022"
image: conf2022.png
image-alt: "rstudio:conf(2022) logo: orange background with the outline of the Washington DC skyline."
---

[rstudio::conf(2022)](https://rstd.io/conf) will feature a variety of workshops and talks on Quarto. Join us in Washington DC this July 25-28 to learn more about Quarto and hear from folks using Quarto to create, share, and collaborate.

![](conf2022.png){.preview-image fig-alt="rstudio::conf(2022) logo: orange background with the outline of the Washington DC skyline." fig-align="center"}

Here is a list of Quarto-related talks and workshops (and scroll down for details on each):

-   Keynote: [Reimagine + Collaborate + Share with Quarto](https://sched.co/11iZo)
-   Workshops:
    -   [Getting Started with Quarto](https://www.rstudio.com/conference/2022/workshops/get-started-quarto/)
    -   [From R Markdown to Quarto](https://www.rstudio.com/conference/2022/workshops/rmd-to-quarto/)
-   Talks:
    -   [Quarto for R Markdown users](https://sched.co/11iZa)
    -   [These are a few of my favorite things (about Quarto presentations)](https://sched.co/11ibN)
    -   [Literate Programming With Jupyter Notebooks and Quarto](https://sched.co/11ibe)
    -   [Websites & Books & Blogs, oh my! Creating Rich Content with Quarto](https://sched.co/11ibV)

## Keynote

[**Reimagine + Collaborate + Share with Quarto**](https://sched.co/11iZo) **(Keynote)**: [(Talk recording)](https://www.rstudio.com/conference/2022/keynotes/collaborate-with-quarto/)

-   Presented by [Julia Stewart Lowndes](https://jules32.github.io/) (Director, Openscapes) and [Mine Çetinkaya-Rundel](http://mine-cr.com/) (Developer Educator at RStudio and Professor at Duke University).
-   Thursday July 28, 9:00am - 10:00am EDT.
-   What is Quarto? In this talk, in four acts, we will discuss how Quarto unifies and extends the R Markdown ecosystem. Through our work with NASA Openscapes, Duke University, and RStudio, we will share our experiences authoring, teaching, and collaborating with Quarto. Full of demos with Quarto in RStudio and Jupyter and weaving together narrative, R, and Python code, we will showcase features of Quarto that have enabled us to reimagine our reproducible workflows. This talk will help you get the most out of Quarto regardless of your background with R Markdown, the computing language(s) you use, and your tool of choice for authoring.

## Workshops

We will have two Quarto workshops at the conference, held on July 25-26, one for those who have no or little prior experience with R Markdown and the other for those who want to take their R Markdown skills and expertise and apply them in Quarto.

-   [**Getting Started with Quarto**](https://www.rstudio.com/conference/2022/workshops/get-started-quarto/)**:** This workshop is designed for those who have no or little prior experience with R Markdown. In this 2 day workshop you will learn about the Quarto format for technical communication and computation. The workshop will teach you how to get started creating and fully customizing Quarto outputs (HTML, PDF, Presentations) and the use of RStudio's Visual Editor which provides a user interface for editing all of Pandoc markdown. The workshop will also provide an overview of Quarto's developer tooling support in alternative tools such as Jupyter, VS Code, and any text editors. The workshop will briefly cover how to add interactivity to Quarto with Shiny, Observable JS, htmlwidgets or Jupyter Widgets. Lastly, the workshop will cover Quarto Projects for aggregating many files such as complex web sites or entire books. Presented by [Tom Mock](https://themockup.blog/about.html), Customer Enablement Lead at RStudio, this workshop will be appropriate for attendees who answer yes to these questions:

    -   Have you programmed in R and want to better encapsulate your code, documentation, and outputs in a cohesive "data product"?
    -   Do you want to learn about the next generation of RMarkdown for data science?
    -   Do you want to have a better interactive experience when writing technical or scientific documents with literate programming?

    Find out more about this workshop and register at [https://www.rstudio.com/conference/2022/workshops/get-started-quarto/](https://www.rstudio.com/conference/2022/workshops/get-started-quarto).

-   [**From R Markdown to Quarto**](https://www.rstudio.com/conference/2022/workshops/rmd-to-quarto)**:** This workshop is designed for those who want to take their R Markdown skills and expertise and apply them in Quarto. In this workshop you will learn how to apply your reproducible authoring skills to the Quarto format and learn about new tools and workflows for authoring with Quarto in RStudio. You will learn to create static documents, to add interactivity to them with Shiny and htmlwidgets, and to create presentations in various formats such as reveal.js, beamer, and pptx. The workshop will also introduce you to Quarto projects which you can use to build websites and write blogs and books. Finally, you will learn various ways to deploy and publish your Quarto projects on the web. Independent modules will also highlight authoring in Quarto with Jupyter and VS Code as well as other text editors. Presented by [Andrew Bray](https://bids.berkeley.edu/people/andrew-bray), Associate Teaching Professor in the Department of Statistics at UC Berkeley, this workshop will be appropriate for you if you answer yes to any of these questions:

    -   Have you authored R Markdown documents and are you interested in migrating your workflow to its successor format, Quarto?
    -   Are you interested in exploring the wide spectrum of documents that can be produced with Quarto, including static documents, websites, and slides?

    Find out more about this workshop and register at <https://www.rstudio.com/conference/2022/workshops/rmd-to-quarto>.

## Talks

-   [**Quarto for R Markdown users**](https://sched.co/11iZa): [(Talk recording)](https://www.rstudio.com/conference/2022/talks/quarto-for-rmarkdown-users/)
    -   Presented by [Tom Mock](https://themockup.blog/about.html), Customer Enablement Lead at RStudio.
    -   Wednesday July 27, 3:20pm - 3:40pm EDT.
    -   Are you curious about Quarto? Maybe you saw it on Twitter or the RStudio::conf agenda. Perhaps this raised questions like: What exactly is Quarto? What about RMarkdown? (don't worry it's not going away!) What features does Quarto add? What should I do with my existing Rmd/ipynb files? This talk will answer all of those questions and more! I'll present Quarto as a next-gen version of RMarkdown, compare the similarities, and then discuss the new features in Quarto for publishing documents, presentations, blog posts, lab notebooks and more! Lastly, I'll cover what this means for our customers using RStudio Team, and the exciting new world for Python users.
-   [**These are a few of my favorite things (about Quarto presentations)**](https://sched.co/11ibN): [(Talk recording)](https://www.rstudio.com/conference/2022/talks/my-favorite-things-quarto-presentations/)
    -   Presented by [Tracy Teal](https://twitter.com/tracykteal), Open Source Program Director at RStudio.
    -   Thursday July 28, 2022 3:20pm - 3:40pm EDT.
    -   Quarto is the next generation of RMarkdown, and comes with a new presentation format, revealjs. In this talk, I'll show a few of my favorite things about making interactive HTML presentations with Quarto. Along the way you'll learn about the visual editor, multiple columns, delivering an effective talk with speaker notes and mode, making your presentations pop with transitions, effective ways to incorporate code into your presentation, beautiful themes (and how to match your corporate style guide), and sharing it as pdf and HTML. I'll finish off with a brief look at generating a PowerPoint presentation from a template.
-   [**Literate Programming With Jupyter Notebooks and Quarto**](https://sched.co/11ibe): [(Talk recording)](https://www.rstudio.com/conference/2022/talks/literate-programming-quarto/)
    -   Presented by [Hamel Husain](https://hamel.dev/), head of Data Science at [Outerbounds](https://outerbounds.com/) (the developers of [Metaflow](https://metaflow.org/)) and core developer at [fast.ai](https://www.fast.ai/).
    -   Thursday July 28, 3:40pm - 4:00pm EDT.
    -   Jupyter Notebooks play a critical role in in the workflow of many users. Notebooks are used to document existing code, to quickly prototype and iterate on ideas, and as a medium of technical communication. However, package developers typically use an entirely separate set of more traditional development tools, and the context switching between these tools and notebooks can be frustrating. Not only do you lose the ability to iterate fast, but you lose the ability to document and test your code in-situ, requiring you to create documentation and tests separately from source code. Nbdev is a literate programming framework that allows you to develop Python libraries within Jupyter Notebooks. This talk will describe the integration between Nbdev and Quarto, which enables library developers to author their documentation right alongside their code, and automatically produce a Quarto website for their package. The result is a seamless workflow for developing, documenting, and testing software packages all within Jupyter Notebooks, with no context-switching required.
-   [**Websites & Books & Blogs, oh my! Creating Rich Content with Quarto**](https://sched.co/11ibV): [(Talk recording)](https://www.rstudio.com/conference/2022/talks/sessions/quarto-deep-dive/websites-books-blogs-quarto/)
    -   Presented by [Devin Pastoor](https://github.com/dpastoor), Solutions Engineer at RStudio.
    -   Thursday July 28, 4:00pm - 4:20pm EDT.
    -   A number of packages have emerged in the R ecosystem to help create websites (hugodown), books (bookdown), and blogs (blogdown). In this talk, I'll show you how Quarto handles creating these types of content and more. Whether you're a grad student considering your first blog post about R, or a python expert about to write a technical book, I'll show you how Quarto enables you to focus on content while it takes care of the rest. In addition, I'll show the RStudio team is making it as easy as possible to publish and share content within your organization and to the whole community.

To find out more about the conference and register, visit [rstd.io/conf](https://rstd.io/conf). Looking forward to seeing you in DC!

Can't make it to the conference in person, but don't want to miss this content? You can follow along with the talks remotely via the live stream and we will share materials from the workshops in a post-conf roundup post.
```````

## File: docs/blog/posts/2022-07-25-feature-extensions/index.qmd
```````
---
title: Quarto Extensions
subtitle: Extend Quarto with new capabilities
description: | 
    Quarto Extensions are a powerful way to modify or extend the behavior of Quarto, and can be created and distributed by anyone. Extension types include filters, shortcodes, and custom formats.
categories:
  - Extensions
  - Features
author: J.J. Allaire
date: "7/25/2022"
image: extensions.png
image-alt: "The main page for the quarto-ext GitHub organization which lists extensions published by the Quarto core team."
---

Quarto Extensions are a powerful way to modify or extend the behavior of Quarto, and can be created and distributed by anyone. There are three types of extensions available:

-   [Shortcodes](/docs/extensions/shortcodes.qmd) are special markdown directives that generate various types of content. For example, you could create shortcodes to embed tweets or videos in a document.

-   [Filters](/docs/extensions/filters.qmd) are a flexible and powerful tool for introducing new global behaviors and/or new markdown rendering behaviors. For example, you could create filters to implement output folding, an image carousel, or just about anything you can imagine!

-   [Formats](/docs/extensions/formats.qmd) enable you to create new output formats by bundling together document options, templates, stylesheets, and other content.

Here are some examples of extensions developed and maintained by the core Quarto team:

| **Extension**                                                        | **Description**                                                                                 |
|------------------------------|------------------------------------------|
| [lightbox](https://github.com/quarto-ext/lightbox/)                  | Create lightbox treatments for images in your HTML documents.                                   |
| [fancy-text](https://github.com/quarto-ext/fancy-text)               | Output nicely formatted versions of fancy strings such as LaTeX and BibTeX in multiple formats. |
| [fontawesome](https://github.com/quarto-ext/fontawesome)             | Use Font Awesome icons in HTML and PDF documents.                                               |
| [latex-environment](https://github.com/quarto-ext/latex-environment) | Quarto extension to output custom LaTeX environments.                                           |

: {tbl-colwidths="\[30,70\]"}

To learn more about using extensions, see the [Extensions](/docs/extensions/index.qmd) documentation on the Quarto website. If you want to dive in to creating your own extensions check out the articles on [Creating Shortcodes](/docs/extensions/shortcodes.qmd), [Creating Filters](/docs/extensions/filters.qmd), and [Creating Formats](/docs/extensions/formats.qmd).
```````

## File: docs/blog/posts/2022-10-25-shinylive-extension/index.qmd
```````
---
title: Shinylive Extension
subtitle: Embed Shinylive applications in Quarto documents
description: |
  With Shinylive, you can embed Shiny for Python applications into Quarto documents and run the entire application (including the Python runtime) inside the user's web browser.
categories:
  - Extensions
  - Features
author: Winston Chang
date: "10/25/2022"
image: shinylive-embedded-app.png
image-alt: "Screenshot of a Quarto document with an embedded Shinylive application."
---

The new [Shinylive Quarto extension](https://github.com/quarto-ext/shinylive) makes it easy to embed Shiny for Python applications in your Quarto documents. This makes it possible to add interactivity to your documents with just Python code. For example, you can include an interactive Shiny application like this, directly inside your Quarto document.

[![](shinylive-embedded-app.png){.preview-image fig-align="center" fig-alt="Shinylive application embedded in a Quarto document."}](https://quarto-ext.github.io/shinylive/sine.html)

In case you're not already familiar with Shiny, here's some background: [Shiny](https://shiny.rstudio.com/) is a framework for creating web applications. Shiny was originally just for R, but we've recently released an alpha version of [Shiny for Python](https://shiny.rstudio.com/py/).

One of the exciting new features of Shiny for Python is a deployment method called Shinylive: the application can be run entirely within the browser, without needing a remote server running Python. Instead, Python runs _in the web browser_, thanks to the magic of [WebAssembly](https://webassembly.org/). In essence, but the server and client sides of the Shiny application run in the browser.

The Shiny for Python [website](https://shiny.rstudio.com/py/) contains many interactive, editable Shiny applications, and is built using this extension.

Bear in mind that not all Shiny applications can be deployed with Shinylive, in part because not all Python packages can run in WebAssembly -- but for those that can, this extension makes it possible to deploy the Quarto document with the embedded application on any web hosting service. To learn more about Shinylive, see [this page](https://shiny.rstudio.com/py/docs/shinylive.html).

The new Shinylive Quarto extension makes it easy to embed Shiny for Python applications in Quarto documents. This is a great way of adding interactive components to your Quarto document. And, once again, you don't need a server running Python to share these Quarto documents -- just deploy the generated files as you would for any other Quarto website.
```````

## File: docs/blog/posts/2023-03-13-code-annotation/index.qmd
```````
---
title: Code Annotation
subtitle: Add line based annotations to your code chunks
description: |
  In Quarto 1.3, you can add line based annotations to code chunks to highlight or explain parts of your code.
categories:
  - Features
  - Authoring
  - Quarto 1.3
author: Charlotte Wickham
date: "03/13/2023"
image: annotation.png
image-alt: "Screenshot a code chunk with annotations. Annotations appear in the code chunk as numbers within circles, and repeat below the code chunk along with the text content of the annotations."
code-annotations: below
---

{{< include ../_quarto-1.3-feature.qmd >}}

Code blocks and executable code cells in Quarto may now include line-based annotations. Line-based annotations provide a way to attach explanation to lines of code much like footnotes.

For example, this code uses annotation to describe the steps in an R dplyr pipeline in plain language:

``` r
library(tidyverse)
library(palmerpenguins)
penguins |>                                            # <1>
  mutate(                                              # <2>
    bill_ratio = bill_depth_mm / bill_length_mm,       # <2>
    bill_area  = bill_depth_mm * bill_length_mm        # <2>
  )                                                    # <2>
```

1.  Take `penguins`, and then,
2.  add new columns for the bill ratio and bill area.

The default HTML annotation style displays annotations in a list below the code block. Clicking on the annotation number in the list highlights the relevant lines in the code. Other HTML styles hide the annotations, revealing them in a tooltip when a user hovers or selects a marker.

The PDF format also allows for annotations, numbering, and displaying the annotation text below the code. In other formats, like Word and GitHub Markdown, annotations are instead labeled with the line of code (or lines of code) to which the annotation text applies.

::: panel-tabset
#### PDF

![](annote-pdf.png){fig-alt="Screenshot of output in PDF format showing code annotation."}

#### GitHub Flavored Markdown

```` markdown
``` r
library(tidyverse)
library(palmerpenguins)
penguins |>
  mutate(
    bill_ratio = bill_depth_mm / bill_length_mm,
    bill_area  = bill_depth_mm * bill_length_mm
  )
```

Line 3  
Take `penguins`, and then,

Lines 4-7  
add new columns for the bill ratio and bill area.
````
:::

To add code annotation to a code block, you need to add two things: specially formatted code comments in your code cell, and an ordered list below the code cell with the annotation text:

1.  **Code Comments**: Each annotated line in the code cell should be terminated with a comment (using the code cell's language comment character) followed by a space and then an annotation number enclosed in angle brackets (e.g. `# <2>`). You may repeat an annotation number if the annotation spans multiple lines.

2.  **Ordered List**: An ordered list should appear immediately after the code cell, and include the contents of each annotation. Each numbered item in the ordered list will correspond to the line(s) of code with the same annotation number.

For example, the annotations above were produced by including the following in the Quarto document:

```` markdown
```r
library(tidyverse)
library(palmerpenguins)
penguins |>                                      # <1>
  mutate(                                        # <2>
    bill_ratio = bill_depth_mm / bill_length_mm, # <2>
    bill_area  = bill_depth_mm * bill_length_mm  # <2>
  )                                              # <2>
```
1. Take `penguins`, and then,
2. add new columns for the bill ratio and bill area.
````

You can read more about how to control the annotation style, and whether annotations appear at all on the [Code Annotation page](/docs/authoring/code-annotation.qmd) of the pre-release highlights.
```````

## File: docs/blog/posts/2023-03-15-multi-format/index.qmd
```````
---
title: Multi-format Publishing
subtitle: Automatically link to other formats in HTML documents
description: |
  In Quarto 1.3, additional formats listed in HTML documents will automatically be linked in an "Other Formats" section near the top of the page.
categories:
  - Features
  - Authoring
  - Quarto 1.3
author: Charlotte Wickham
date: "03/15/2023"
image: multi-format.png
image-alt: "Screenshot of a Quarto webpage showing a section entitled 'Other Formats' with items Jupyter and MS Word"
format:
  html: default
  ipynb: default
  docx: default
---

{{< include ../_quarto-1.3-feature.qmd >}}

Starting in Quarto 1.3, HTML pages (either standalone or in a website) can automatically include links to other formats specified in the document front matter. For example, the following document front matter:

``` yaml
title: Sample Page
author: Norah Jones
date: last-modified
toc: true
format: 
  html: default
  ipynb: default
```

Results in an HTML page that includes a link to the additional notebook format in the right margin below the table of contents:

![](other-format.png){.border fig-alt="Screenshot of a HTML page that includes a link to the Jupyter format below the table of contents under the heading Other Formats."}

If a table of contents is enabled for the page, the additional formats will be automatically placed within the table of contents as a new section. If no table of contents is displayed, the additional formats will be displayed in the right margin at the top of the document.

Links to additional formats are displayed by default, but you can control whether they are shown or even which specific formats are included with the `format-links` YAML option.

Read more about this feature on the [Multi-format page](/docs/output-formats/html-multi-format.qmd) of the pre-release highlights.
```````

## File: docs/blog/posts/2023-03-17-jupyter-cell-embedding/index.qmd
```````
---
title: Jupyter Notebook Cell Embedding
subtitle: Embed output from an external Jupyter Notebook in a Quarto document
description: |
  Quarto 1.3 adds support for embedding cells from a Jupyter Notebook into a Quarto document via an `embed` shortcode. In HTML documents, links are automatically added that point to a rendered version of the external notebook.
categories:
  - Features
  - Authoring
  - Quarto 1.3
author: Charlotte Wickham
date: "03/17/2023"
image: embed.png
image-alt: "A screenshot of a Quarto page that includes a plot, below the plot is the phrase Source: penguins.ipynb."
---

{{< include ../_quarto-1.3-feature.qmd >}}

Starting in Quarto 1.3, you can include the output of an external Jupyter notebook in a Quarto document with the `embed` shortcode. To embed a notebook cell, provide the path to a Jupyter Notebook and a cell identifier. For example, this notebook called `penguins.ipynb` has a cell labelled `fig-bill-scatter`:

![](notebook-simple.png){fig-alt="A screenshot of a Jupyter Notebook with the name 'penguins.ipynb', with a cell highlighted that has the code chunk option label set to fig-bill-scatter. Below the cell is a plot that has been output."}

You can use the following shortcode to embed the output of this cell:

``` {.markdown shortcodes="false"}
{{< embed penguins.ipynb#fig-bill-scatter >}}
```

This will embed the plot as follows:

{{< embed penguins.ipynb#fig-bill-scatter >}}

A link to the source notebook is automatically provided beneath the plot. Following the link takes users to a rendered version of the notebook, allowing them to explore the notebook without having to download and run it locally. For example, clicking on the link to `penguins.ipynb` gets you to a page that looks like the following:

![](notebook-view.png){.border fig-alt="A screenshot of webpage with the title 'penguins.ipynb', a large blue button labelled 'Download Notebook', followed by the notebook contents."}

Beyond this basic usage, head to the [Jupyter Cell Embedding highlight docs](/docs/authoring/notebook-embed.qmd) to learn how to:

-   Specify cells in multiple ways, see [Specifying Cells](/docs/authoring/notebook-embed.qmd#specifying-cells).

-   Control the output using code cell options in the source Notebook, including things like figure captions, figure layout, and code display, see [Code Cell Options](/docs/authoring/notebook-embed.qmd#code-cell-options).

-   Include the cell code along with the output by adding an `echo` option to the shortcode, see [Embedding Code](/docs/authoring/notebook-embed.qmd#embedding-code).

-   Customize or exclude the link to the source notebook, see [Links to Source Notebooks](/docs/authoring/notebook-embed.qmd#linked-source-notebooks).
```````

## File: docs/blog/posts/2023-03-20-confluence/index.qmd
```````
---
title: Confluence Publishing
subtitle: Publish from Quarto to Confluence
description: |
  Quarto 1.3 adds support for publishing individual documents, and projects containing many documents to Atlassian Confluence.
categories:
  - Features
  - Authoring
  - Quarto 1.3
author: Charlotte Wickham
date: "03/20/2023"
image: confluence-logo-gradient-blue-attribution_rgb@2x.png
image-alt: "Atlassian Confluence Logo"
---

{{< include ../_quarto-1.3-feature.qmd >}}

[Atlassian Confluence](https://www.atlassian.com/software/confluence) is a publishing platform for supporting team collaboration. Confluence has a variety of hosting options which include both free and paid subscription plans.

Quarto 1.3 adds support for publishing individual documents, as well as projects composed of multiple documents into [Confluence Spaces](https://support.atlassian.com/confluence-cloud/docs/use-spaces-to-organize-your-work/).

::: {layout-ncol="2"}
![A Quarto Document](images/confluence-qmd.png){fig-alt="A screenshot of a Quarto document with the title Using R - Doc in the RStudio Editor."}

![Published to Confluence](images/confluence-page.png){fig-alt="A screenshot of a document with the title Using R - Doc in a Confluence Space."}
:::

::: {layout="[800,969]"}
![A Quarto Project](images/confluence-project.png){fig-alt="A screenshot of a Quarto project in VS Code. On the left in the Explorer, the project folder is called 'Guide-site', and contains folders 'authoring', and 'computation', along with some other files. A document from the folder 'python' inside the folder 'computations' with the title 'Using Python - site' is open in the Source Pane. "}

![Published to Confluence](images/confluence-site.png){fig-alt="A screenshot of Space in Confluence. On the left in the Sdiebar under Pages is a page called 'Guide-site'. Nested under this page are pages called 'authoring', and 'computation', along with some other pages. The 'computation' page item is expanded and shows a page called 'Using Python - site', nested under a page called 'python'. A page is displayed on the right with the title 'Using Python - site'"}
:::

Managing Confluence content with Quarto allows you to author content in Markdown, manage that content with your usual version control tools like Git and GitHub, and leverage Quarto's tools for including computational output.

<!-- Quick overview of key features: new format and project type, local preview, `quarto publish confluence`. -->

If you're curious about using Confluence Publishing for your own project, head to the [Confluence Publishing page](/docs/publishing/confluence.qmd) of the pre-release highlights to learn more.
```````

## File: docs/blog/posts/2023-04-26-1.3-release/index.qmd
```````
---
title: Quarto 1.3 
subtitle: Quarto 1.3 is officially released
description: |
  Quarto 1.3 brings new features, improvements, and fixes.
categories:
  - Quarto 1.3
  - Releases
author: Charlotte Wickham
date: "04/26/2023"
image: "arthur-chauvineau-Dn7P1U26ZkE-unsplash.jpeg"
image-alt: "Fireworks with a silhouette of an audience"
---

We are happy to announce that Quarto 1.3 has been released. You can grab the current release from the [download page](/docs/download/index.qmd).

If you are ever wondering which version of Quarto you are using, a quick way to check on the command line is:

``` {.bash filename="Terminal"}
quarto --version
```

We've previously blogged about some of the features of this release that we were most excited about, but let's highlight them again.

## Code Annotation

You can now add line-based annotations to your code blocks using special code comments along with an ordered list. Code annotations work across many formats, and are interactive in HTML-based formats.

![Code Annotation in an HTML document](../2023-03-13-code-annotation/annotation.png){fig-alt="Screenshot a code chunk with annotations. Annotations appear in the code chunk as numbers within circles, and repeat below the code chunk along with the text content of the annotations."}

To learn more, check out the [Code Annotation](/docs/authoring/code-annotation.qmd) documentation.

## Multi-format Publishing

HTML pages (either standalone or in a website) now automatically include links to other formats specified in the document front matter. For example, the following document front matter:

``` yaml
title: Sample Page
author: Norah Jones
date: last-modified
toc: true
format: 
  html: default
  ipynb: default
```

Results in an HTML page that includes a link to the additional notebook format in the right margin below the table of contents:

![An HTML document with a link to another format](/docs/output-formats/images/other-format.png){.border fig-alt="Screenshot of an HTML page that includes a link to the Jupyter format below the table of contents under the heading Other Formats."}

Find out more in the documentation on [Including Other Formats](/docs/output-formats/html-multi-format.qmd).

## Jupyter Cell Embedding

Easily include the output of an external Jupyter notebook in a Quarto document with the `embed` shortcode. Provide the path to a Jupyter Notebook and a cell identifier and the output will be included in your document along with a link back to the source Notebook.

![A plot embedded in a document from a Jupyter Notebook](../2023-03-17-jupyter-cell-embedding/embed.png){fig-alt="A screenshot of a Quarto page that includes a plot, below the plot is the phrase Source: penguins.ipynb."}

Learn more about the embed shortcode in [Embedding Jupyter Notebook Cells](/docs/authoring/notebook-embed.qmd) in the docs.

## Confluence Publishing

[Atlassian Confluence](https://www.atlassian.com/software/confluence) is a publishing platform for supporting team collaboration. Quarto now provides support for publishing individual documents, as well as projects composed of multiple documents, into [Confluence Spaces](https://support.atlassian.com/confluence-cloud/docs/use-spaces-to-organize-your-work/).

::: {layout="[800,969]"}
![A Quarto Project](/docs/publishing/images/confluence-project.png){fig-alt="A screenshot of a Quarto project in VS Code. On the left in the Explorer, the project folder is called 'Guide-site', and contains folders 'authoring', and 'computation', along with some other files. A document from the folder 'python' inside the folder 'computations' with the title 'Using Python - site' is open in the Source Pane. "}

![Published to Confluence](/docs/publishing/images/confluence-site.png){fig-alt="A screenshot of Space in Confluence. On the left in the Sdiebar under Pages is a page called 'Guide-site'. Nested under this page are pages called 'authoring', and 'computation', along with some other pages. The 'computation' page item is expanded and shows a page called 'Using Python - site', nested under a page called 'python'. A page is displayed on the right with the title 'Using Python - site'"}
:::

To learn more, head to the documentation on [Confluence Publishing](/docs/publishing/confluence.qmd).

## Other Highlights

Some other notable highlights include:

-   [Article Grid Customization](/docs/output-formats/page-layout.qmd#grid-customization)---Customize the widths of layout components in HTML documents

-   [Quarto Book AsciiDoc Support](/docs/books/book-basics.qmd)---Output Quarto books to AsciiDoc files

-   [Website Navigation Improvements](/docs/prerelease/1.3/website-nav.qmd)---Include tools in your navbar, and provide better navigation for Quarto websites on mobile devices

-   [Mermaid Diagram Theming](/docs/authoring/diagrams.qmd#mermaid-theming)---Use your document theme, or built-in Mermaid themes, for your Mermaid diagrams 

-   [PDF: SVG and Remote Images](/docs/prerelease/1.3/pdf.qmd)---Include SVG images and remote images in PDF documents

-   [`kbd` Shortcode](/docs/authoring/markdown-basics.qmd#keyboard-shortcuts)---Show well-formatted keyboard shortcuts in Quarto documents.

You can find all the other changes in 1.3, in the [Release Notes](/docs/download/index.qmd#download-section-news).

## Acknowledgements

We'd like to say a huge thank you to everyone who contributed to this release by opening issues and pull requests:

[ABohynDOE](https://github.com/ABohynDOE), [aborruso](https://github.com/aborruso), [agerlach](https://github.com/agerlach), [aimundo](https://github.com/aimundo), [alperyilmaz](https://github.com/alperyilmaz), [ameliaritger](https://github.com/ameliaritger), [anaveenan](https://github.com/anaveenan), [andrewheiss](https://github.com/andrewheiss), [apreshill](https://github.com/apreshill), [apsteinmetz](https://github.com/apsteinmetz), [arnaudgallou](https://github.com/arnaudgallou), [aronatkins](https://github.com/aronatkins), [arronlacey](https://github.com/arronlacey), [ArturKlauser](https://github.com/ArturKlauser), [astrowonk](https://github.com/astrowonk), [ats](https://github.com/ats), [awehrfritz](https://github.com/awehrfritz), [b-rodrigues](https://github.com/b-rodrigues), [baptiste](https://github.com/baptiste), [batpigandme](https://github.com/batpigandme), [bayeslearner](https://github.com/bayeslearner), [benabel](https://github.com/benabel), [BertTijhuis](https://github.com/BertTijhuis), [boshek](https://github.com/boshek), [brunomioto](https://github.com/brunomioto), [busemorose](https://github.com/busemorose), [bvancil](https://github.com/bvancil), [bwelman](https://github.com/bwelman), [cboettig](https://github.com/cboettig), [cgoo4](https://github.com/cgoo4), [ChoCho66](https://github.com/ChoCho66), [cicarrascog](https://github.com/cicarrascog), [coatless](https://github.com/coatless), [code86](https://github.com/code86), [condwanaland](https://github.com/condwanaland), [daniel-smit-haw](https://github.com/daniel-smit-haw), [daranzolin](https://github.com/daranzolin), [davidbudzynski](https://github.com/davidbudzynski), [DavidD003](https://github.com/DavidD003), [ddobrinskiy](https://github.com/ddobrinskiy), [dgkf](https://github.com/dgkf), [DhruvaSambrani](https://github.com/DhruvaSambrani), [directknowledge](https://github.com/directknowledge), [dkubek](https://github.com/dkubek), [dmalan](https://github.com/dmalan), [dmenne](https://github.com/dmenne), [drcaprosser](https://github.com/drcaprosser), [drscotthawley](https://github.com/drscotthawley), [edoson](https://github.com/edoson), [eeholmes](https://github.com/eeholmes), [eitsupi](https://github.com/eitsupi), [elgabbas](https://github.com/elgabbas), [EllaKaye](https://github.com/EllaKaye), [emmansh](https://github.com/emmansh), [ericvmai](https://github.com/ericvmai), [espinielli](https://github.com/espinielli), [etiennebacher](https://github.com/etiennebacher), [EvoArt](https://github.com/EvoArt), [fire](https://github.com/fire), [fortunewalla](https://github.com/fortunewalla), [freestatman](https://github.com/freestatman), [fuhrmanator](https://github.com/fuhrmanator), [fulem](https://github.com/fulem), [g-simmons](https://github.com/g-simmons), [gadenbuie](https://github.com/gadenbuie), [GegznaV](https://github.com/GegznaV), [ghost](https://github.com/ghost), [giabaio](https://github.com/giabaio), [githubpsyche](https://github.com/githubpsyche), [GraceEMc](https://github.com/GraceEMc), [gregswinehart](https://github.com/gregswinehart), [GShotwell](https://github.com/GShotwell), [guoruizhong](https://github.com/guoruizhong), [harrelfe](https://github.com/harrelfe), [hemonika](https://github.com/hemonika), [henningsway](https://github.com/henningsway), [iandol](https://github.com/iandol), [ijlyttle](https://github.com/ijlyttle), [iusgit](https://github.com/iusgit), [ivanek](https://github.com/ivanek), [jake-wittman](https://github.com/jake-wittman), [jakobarendt](https://github.com/jakobarendt), [jakub-jedrusiak](https://github.com/jakub-jedrusiak), [javajon](https://github.com/javajon), [jcmkk3](https://github.com/jcmkk3), [jcolomb](https://github.com/jcolomb), [jdutant](https://github.com/jdutant), [JeffreyRacine](https://github.com/JeffreyRacine), [jensschroer](https://github.com/jensschroer), [jeremiahpslewis](https://github.com/jeremiahpslewis), [jfbarthelemy](https://github.com/jfbarthelemy), [jhelvy](https://github.com/jhelvy), [Jiayou-Chao](https://github.com/Jiayou-Chao), [jimjam-slam](https://github.com/jimjam-slam), [jkylearmstrong](https://github.com/jkylearmstrong), [jmbarbone](https://github.com/jmbarbone), [jmbuhr](https://github.com/jmbuhr), [jmcastagnetto](https://github.com/jmcastagnetto), [joelvonrotz](https://github.com/joelvonrotz), [JoFrhwld](https://github.com/JoFrhwld), [johannes4998](https://github.com/johannes4998), [jrcuesta](https://github.com/jrcuesta), [jthomasmock](https://github.com/jthomasmock), [juba](https://github.com/juba), [justanothergithubber](https://github.com/justanothergithubber), [KaiWaldrant](https://github.com/KaiWaldrant), [kalenkovich](https://github.com/kalenkovich), [kdheepak](https://github.com/kdheepak), [kelly-sovacool](https://github.com/kelly-sovacool), [KittJonathan](https://github.com/KittJonathan), [kmasiello](https://github.com/kmasiello), [knuesel](https://github.com/knuesel), [koehlerson](https://github.com/koehlerson), [koushikkhan](https://github.com/koushikkhan), [lcnbr](https://github.com/lcnbr), [leovan](https://github.com/leovan), [linogaliana](https://github.com/linogaliana), [m-legrand](https://github.com/m-legrand), [m4jing](https://github.com/m4jing), [machow](https://github.com/machow), [maelle](https://github.com/maelle), [malcolmbarrett](https://github.com/malcolmbarrett), [marierivers](https://github.com/marierivers), [MattF-NSIDC](https://github.com/MattF-NSIDC), [mattsams89](https://github.com/mattsams89), [mattwarkentin](https://github.com/mattwarkentin), [maxdrohde](https://github.com/maxdrohde), [mccarthy-m-g](https://github.com/mccarthy-m-g), [MHellmund](https://github.com/MHellmund), [mikheyev](https://github.com/mikheyev), [mine-cetinkaya-rundel](https://github.com/mine-cetinkaya-rundel), [mksinicus](https://github.com/mksinicus), [mrajeev08](https://github.com/mrajeev08), [nanxstats](https://github.com/nanxstats), [NeubertJonas](https://github.com/NeubertJonas), [nikcleju](https://github.com/nikcleju), [njbart](https://github.com/njbart), [patrickvdb](https://github.com/patrickvdb), [petrbouchal](https://github.com/petrbouchal), [philip-khor](https://github.com/philip-khor), [philwunderlich](https://github.com/philwunderlich), [Pierre9344](https://github.com/Pierre9344), [pitmonticone](https://github.com/pitmonticone), [pmagwene](https://github.com/pmagwene), [poldrack](https://github.com/poldrack), [pommevilla](https://github.com/pommevilla), [psychelzh](https://github.com/psychelzh), [ratnanil](https://github.com/ratnanil), [ravimakhija](https://github.com/ravimakhija), [RaymondBalise](https://github.com/RaymondBalise), [reuning](https://github.com/reuning), [rexdouglass](https://github.com/rexdouglass), [rgaiacs](https://github.com/rgaiacs), [richardsprague](https://github.com/richardsprague), [rjake](https://github.com/rjake), [rleyvasal](https://github.com/rleyvasal), [rmcd1024](https://github.com/rmcd1024), [RobTour](https://github.com/RobTour), [rsenft1](https://github.com/rsenft1), [runlevel0](https://github.com/runlevel0), [sagikazarmark](https://github.com/sagikazarmark), [salim-b](https://github.com/salim-b), [SamEdwardes](https://github.com/SamEdwardes), [samperman](https://github.com/samperman), [schochastics](https://github.com/schochastics), [ScientiaFelis](https://github.com/ScientiaFelis), [scottamain](https://github.com/scottamain), [scottfranz](https://github.com/scottfranz), [sebastian-c](https://github.com/sebastian-c), [seeM](https://github.com/seeM), [shafayetShafee](https://github.com/shafayetShafee), [singuyenmai](https://github.com/singuyenmai), [sje30](https://github.com/sje30), [snhansen](https://github.com/snhansen), [streepvaren](https://github.com/streepvaren), [thedabs91](https://github.com/thedabs91), [thomashallam](https://github.com/thomashallam), [timothee-bacri](https://github.com/timothee-bacri), [tomshafer](https://github.com/tomshafer), [tomsutch](https://github.com/tomsutch), [tomvaneyck](https://github.com/tomvaneyck), [topepo](https://github.com/topepo), [tverbeiren](https://github.com/tverbeiren), [TylerHillery](https://github.com/TylerHillery), [ucpresearch](https://github.com/ucpresearch), [verbalins](https://github.com/verbalins), [vfacta](https://github.com/vfacta), [vlyubchich](https://github.com/vlyubchich), [VMTdeJong](https://github.com/VMTdeJong), [vpratz](https://github.com/vpratz), [white-c](https://github.com/white-c), [wklimowicz](https://github.com/wklimowicz), [XiangyunHuang](https://github.com/XiangyunHuang), [Xitian9](https://github.com/Xitian9), [xl0](https://github.com/xl0), [xtimbeau](https://github.com/xtimbeau), [y9c](https://github.com/y9c), [yevgenryeznik](https://github.com/yevgenryeznik), [zachcp](https://github.com/zachcp), [zkwabm](https://github.com/zkwabm)
```````

## File: docs/blog/posts/2023-05-15-get-started/index.qmd
```````
---
title: Get Started with Quarto
subtitle: A video to jumpstart your Quarto journey
description: |
  A new video for getting started with Quarto using R and RStudio.
categories:
  - Learn
author: Mine Çetinkaya-Rundel
date: "05/15/2023"
image: "get-started-video-cover.png"
image-alt: "Quarto logo on a blue background and the title of the video - Get started with Quarto"
---

Have you been hearing about Quarto but didn't give it a try yet? Perused the [Get Started](/docs/get-started/index.qmd) pages but would like another intro? Or have about 20 minutes to spare and want to pick up a few Quarto tips? You've come to the right place!

{{< video "https://www.youtube.com/embed/_f3latmOhew" >}}

In this video, I walk you through creating documents, presentations, and websites and publishing with Quarto. The video features authoring Quarto documents with executable R code chunks using the [RStudio Visual Editor](/docs/visual-editor/index.qmd).

Select highlights include:

-   Inserting [cross references](/docs/authoring/cross-references.qmd) to tables and figures
-   Adding a [citation](/docs/visual-editor/technical.qmd#citations) from a DOI
-   Seamlessly switching between output formats as well as creating [multi-format documents](/docs/output-formats/html-multi-format.qmd)
-   Customizing the [output location](/docs/presentations/revealjs/#output-location) of code in presentations
-   Creating a [website](/docs/websites/website-basics.qmd) from scratch
-   Publishing the website to [QuartoPub](/docs/publishing/quarto-pub.qmd)

If you would like to follow along as you watch the video, you can find the source code for everything created in the video in [this GitHub repository](https://github.com/mine-cetinkaya-rundel/get-started-quarto) and the published [website on QuartoPub](https://mine.quarto.pub/welcome-to-quarto/).
```````

## File: docs/blog/posts/2023-05-22-quarto-for-academics/index.qmd
```````
---
title: Quarto for Academics
subtitle: A potpourri of Quarto features useful for academics
description: |
  A video highlighting some of Quarto's features that are especially useful for academics, as educators and as researchers.
categories:
  - Learn
author: Mine Çetinkaya-Rundel
date: "05/22/2023"
image: "quarto-for-academics-video-cover.png"
image-alt: "Quarto logo on a blue background and the title of the video - Quarto for Academics"
---

Quarto offers a myriad of features that are especially useful for academics, as educators and as researchers. These range from chunk options that enable automatic linking of code to documentation, to article templates for manuscript submission to multiple journals. The following video walks you through some of these features.

{{< video "https://www.youtube.com/embed/EbAAmrB0luA" >}}

Select highlights include:

-   Linking to documentation from code with [`code-link`](/docs/output-formats/html-code.qmd#code-linking).
-   Informative YAML errors and YAML completion.
-   Creating Quarto slides with [revealjs](/docs/presentations/revealjs/index.qmd).
-   [PDF export](/docs/presentations/revealjs/presenting.qmd#print-to-pdf) of HTML slides.
-   Annotating slides with [`chalkboard`](/docs/presentations/revealjs/presenting.qmd#chalkboard).
-   Advancing slides for your audience with [`multiplex`](/docs/presentations/revealjs/presenting.qmd#multiplex).
-   Highlighting code with [`code-line-numbers`](/docs/presentations/revealjs/#line-highlighting).
-   Customizing output location with [`output-location`](/docs/presentations/revealjs/index.qmd#output-location).
-   Showing code chunk fences with [`echo: fenced`](/docs/computations/execution-options.qmd#fenced-echo).
-   [Code annotation](/docs/authoring/code-annotation.qmd).
-   Authoring manuscripts with Quarto [journal templates](/docs/journals/index.qmd).
-   [Inserting citations](/docs/visual-editor/technical.qmd#citations) from Zotero or from a DOI with the [RStudio Visual Editor](/docs/visual-editor/index.qmd).

If you would like to follow along as you watch, you can find the source code for everything created in the video in [this GitHub repository](https://github.com/mine-cetinkaya-rundel/quarto-for-academics).
```````

## File: docs/blog/posts/2023-12-05-asa-traveling-courses/index.qmd
```````
---
title: ASA Traveling Courses on Quarto
subtitle: From R Markdown to Quarto
description: |
  Series of workshops for learning Quarto with R and RStudio, aimed primarily at R Markdown users.
categories:
  - Learn
author: Mine Çetinkaya-Rundel
date: "12/5/2023"
image: "asa-traveling-courses.png"
image-alt: "Screenshots of homepages of six courses titled From R Markdown to Quarto"
---

In 2023, [Dr. Andrew Bray](https://andrewpbray.github.io/) and I gave a series of six workshops on Quarto as part of the [Traveling Courses](https://community.amstat.org/coc/chapterresources/travelingcourse) program sponsored by the [American Statistical Association](https://www.amstat.org/).

The workshop was designed for those who want to take their R Markdown skills and expertise and apply them in Quarto, the next generation of R Markdown. Participants learned how to apply their reproducible authoring skills to the Quarto format and about new tools and workflows for authoring with Quarto in RStudio. The workshop covered creating static documents and presentations, building websites, and writing blogs and books. Finally, participants learned various ways to deploy and publish their Quarto projects on the web.

Home pages and links to source code for each of the six workshops are listed below:

+--------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| Nebraska Chapter\                                                                                      | [![](asa-nebraska.png){fig-alt="Homepage of Nebraska Chapter workshop" width="400"}](https://mine.quarto.pub/quarto-asa-nebraska/)            |
| Omaha, Nebraska\                                                                                       |                                                                                                                                               |
| April 28, 2023\                                                                                        |                                                                                                                                               |
| [mine.quarto.pub/quarto-asa-nebraska](https://mine.quarto.pub/quarto-asa-nebraska/)\                   |                                                                                                                                               |
| [Source](https://github.com/asa-quarto/website-nebraska/tree/nebraska-workshop)\                       |                                                                                                                                               |
+--------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| Oregon Chapter\                                                                                        | [![](asa-oregon.png){fig-alt="Homepage of Oregon Chapter workshop" width="400"}](https://andrew.quarto.pub/oregon-asa/)                       |
| Portland, Oregon\                                                                                      |                                                                                                                                               |
| June 10, 2023\                                                                                         |                                                                                                                                               |
| [andrew.quarto.pub/oregon-asa](https://andrew.quarto.pub/oregon-asa/)\                                 |                                                                                                                                               |
| [Source](https://github.com/andrewpbray/quarto-asa/tree/oregon-chapter)\                               |                                                                                                                                               |
+--------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| Alaska Chapter\                                                                                        | [![](asa-alaska.png){fig-alt="Homepage of Alaska Chapter workshop" width="400"}](https://andrew.quarto.pub/alaska-asa/)                       |
| Anchorage, Alaska\                                                                                     |                                                                                                                                               |
| June 20, 2023\                                                                                         |                                                                                                                                               |
| [andrew.quarto.pub/alaska-asa/](https://andrew.quarto.pub/alaska-asa/)\                                |                                                                                                                                               |
| [Source](https://github.com/asa-quarto/website/tree/alaska-workshop)\                                  |                                                                                                                                               |
+--------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| Ohio Chapter\                                                                                          | [![](asa-ohio.png){fig-alt="Homepage of Ohio Chapter workshop" width="400"}](https://andrew.quarto.pub/ohio-asa/)                             |
| Virtual Workshop on Zoom\                                                                              |                                                                                                                                               |
| August 18, 2023\                                                                                       |                                                                                                                                               |
| [andrew.quarto.pub/ohio-as](https://andrew.quarto.pub/ohio-asa/)\                                      |                                                                                                                                               |
| [Source](https://github.com/asa-quarto/website/tree/ohio-workshop)\                                    |                                                                                                                                               |
+--------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| Boston Chapter\                                                                                        | [![](asa-boston.png){fig-alt="Homepage of Boston Chapter workshop" width="400"}](https://andrew.quarto.pub/boston-asa/)                       |
| Virtual Workshop on Zoom\                                                                              |                                                                                                                                               |
| September 20, 2023\                                                                                    |                                                                                                                                               |
| [andrew.quarto.pub/boston-asa](https://andrew.quarto.pub/boston-asa/)\                                 |                                                                                                                                               |
| [Source](https://github.com/asa-quarto/website/tree/boston-workshop)\                                  |                                                                                                                                               |
+--------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| Mid-Tennessee Chapter\                                                                                 | [![](asa-mid-tennessee.png){fig-alt="Homepage of Mid-Tennessee Chapter workshop" width="400"}](https://mine.quarto.pub/quarto-asa-nashville/) |
| Nashville, Tennessee\                                                                                  |                                                                                                                                               |
| October 20, 2023\                                                                                      |                                                                                                                                               |
| [mine.quarto.pub/quarto-asa-nashville](https://github.com/asa-quarto/website/tree/nashville-workshop)\ |                                                                                                                                               |
| [Source](https://github.com/asa-quarto/website/releases/tag/nashville-workshop)\                       |                                                                                                                                               |
+--------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------+

: {tbl-colwidths="\[50,50\]"}

One of the Quarto features we leveraged in organizing these materials is that you can publish to different QuartoPub URLs from the same repository with `quarto publish`. After each workshop, we created a release on GitHub to take a snapshot of the materials for that workshop, and for the subsequent workshop, we made edits to the materials on the `main` branch and published them to a new URL.

The source code for everything can be found at [github.com/asa-quarto/website](https://github.com/asa-quarto/website). Also in the GitHub organization is a repo containing the "your turn" exercises for the workshops: [github.com/asa-quarto/exercises](https://github.com/asa-quarto/exercises).

All materials are released with Creative Commons Attribution-ShareAlike 4.0 International license. If you are teaching a Quarto workshop, feel free to reuse any and all of these materials. And if you're learning Quarto, you might find it helpful to follow along with any of the workshops listed above.

Happy learning and happy teaching!
```````

## File: docs/blog/posts/2023-12-07-quarto-dashboards-demo/index.qmd
```````
---
title: Quarto Dashboards Demonstration
subtitle: A brief tour of how to build a dashboard in Quarto v1.4.
categories:
  - Demo
  - Quarto 1.4
author: Andrew Holz
date: "12/7/2023"
image: "quarto-dashboards-video-cover.png"
image-alt: "Quarto logo on a blue background with the title Quarto Dashboards, Charles Teague and an abstract dashboard sketch"
---

Quarto has a host of exciting new features in release v1.4 with one of the most anticipated being Quarto Dashboards. In a recent internal presentation, Charles Teague demonstrated the new capabilities and we wanted to share it with community.

Please note that you can use this feature today, but to access it you need to be running on a recent [Quarto prerelease build](/docs/download/prerelease.qmd). We also encourage users to review our [pre-release documentation](/docs/dashboards/index.qmd) which offers additional information and examples of the dashboard functionality.

{{< video “https://www.youtube.com/watch?v=_VGJIPRGTy4&ab_channel=PositPBC” >}}
```````

## File: docs/blog/posts/2024-01-24-1.4-release/index.qmd
```````
---
title: Quarto 1.4 
subtitle: Quarto 1.4 is released
description: |
  Quarto 1.4 brings new formats for dashboards and Typst, a new manuscript project type, a cross-reference overhaul, Shiny for Python support, and a ton of other updates.
categories:
  - Quarto 1.4
  - Releases
author: Charlotte Wickham
date: "01/24/2024"
image: "images/thumbnail.png"
image-alt: "Quarto 1.4 with a party popper"
---

Quarto 1.4 has been officially released! You can get the current release from the [download page](/docs/download/index.qmd)

This release has tons of new features. Some of the big ones we want to spotlight are: Dashboards, Typst, Inline Code Syntax, Cross-References and Manuscripts.

## Dashboards

Quarto Dashboards streamline the creation of interactive dashboards, giving you an effortless way to lay out interactive components, visualizations, tabular data, and annotations. Here are some examples (click on the image to visit the live version):

::: {layout-ncol="3"}
[![](/docs/dashboards/examples/thumbnails/stock-explorer-dashboard.png){.border fig-alt="Screenshot of a Stock Trader dashboard: a row of three values boxes, then a row with a stock ticker graph and a table of closing values. Navy blue and green theme."}](https://jjallaire.github.io/stock-explorer-dashboard/)

[![](/docs/dashboards/examples/thumbnails/customer-churn-dashboard.png){.border fig-alt="Screenshot of a Customer Churn dashboard: a row of three values boxes, then a row with two plots, then a row with a table. Light blue and yellow theme."}](https://jjallaire.github.io/customer-churn-dashboard/)

[![](/docs/dashboards/examples/thumbnails/penguins-dashboard.png){.border fig-alt="Screenshot of a Palmer Penguins dashboard: a sidebar with checkboxes and a dropdown, and two plots in main panel. Blue theme."}](https://jjallaire.shinyapps.io/penguins-dashboard/)
:::

For the source code of these dashboards and additional examples see the [examples gallery](/docs/gallery/index.qmd#dashboards). When you are ready to build your own Quarto dashboard head to our guide on [Dashboards](/docs/dashboards/index.qmd).

## Typst

[Typst](https://github.com/typst/typst){.external} is a new open-source markup-based typesetting system that is designed to be as powerful as LaTeX while being much easier to learn and use. Typst creates beautiful PDF output with blazing fast render times.

Quarto 1.4 includes the Typst CLI, so all you need to get started creating PDFs via Typst is to use `format: typst`: 

````{.markdown filename="hello-typst.qmd"}
---
title: "Hello Typst!"
format: typst
---

My first Typst document
````

We are particularly excited about how easy it is to make templates for journal articles, conference posters, newsletters and more with Typst. Here are some examples you can use in Quarto as [custom formats](/docs/output-formats/typst-custom.qmd):

::: {layout-ncol=4}

![IEEE](images/typst-format-ieee.png){.lightbox group="custom-formats" fig-alt="Screenshot of a page showing a article styled according IEEE standards. The title is centered with authors below in two columns."}

![Poster](images/typst-format-poster.png){.lightbox group="custom-formats" fig-alt="Screenshot of a poster in landscape orientiation. The poster includes a logo in the top right, a title in the top left, and content arranged in three columns."}

![Letter](images/typst-format-letter.png){.lightbox group="custom-formats" fig-alt="Screenshot of a page showing a letter. A sender address is across the top of the page, followed by a recipient address left justified. The body of the letter includes a subject line in bold."}

![Dept News](images/typst-format-dept-news.png){.lightbox group="custom-formats" fig-alt="Screenshot of a page showing a department newsletter. The page is split vertically with a white column on the left and a red one on the right. An image spans across the column with the text \"Award Winning Science\" oriented to run vertically down its right side."}

:::

Start your Typst journey with Quarto in our guide on [Typst Basics](/docs/output-formats/typst.qmd).

## Inline Code Syntax

Quarto 1.4 introduces a unified syntax for including computed values inline. The syntax for inline code is similar to code blocks, except you use a single tick (`` ` ``) rather than triple ticks (```` ``` ````), and you can use it in the middle of markdown:

::: {layout-ncol="3"}

::: {}
### Jupyter

```` markdown
```{{python}}
radius = 5
```

The radius of the circle is `{python} radius`
````

This syntax works for any Jupyter kernel---so for Julia you would write an inline expression as `` `{julia} radius` ``).

:::

::: {}

### Knitr

```` markdown
```{{r}}
radius <- 5
```

The radius of the circle is `{r} radius`
````

:::

::: {}
### OJS

```` markdown
```{{ojs}}
radius = 5
```

The radius of the circle is `{ojs} radius`
````
:::

:::

And don't worry if you are used to using `` `r ` `` that syntax remains fully supported. Read more at [Inline Code](/docs/computations/inline-code.qmd).

## Cross-References

Cross-references have been overhauled in Quarto 1.4, enabling you to do things like:

*   Flexibly define the content of float cross-references (e.g. figures, tables and code listings) with the new [Cross-Reference Div Syntax](/docs/authoring/cross-references-divs.qmd). For example, @tbl-table is an image treated like a table:
    
    ::: {layout-ncol="2"}

    ````markdown
    ::: {#tbl-table}

    ![](table.png)

    An image treated like a table

    :::
    ````
    
    ::: {#tbl-table}

    ![](images/crossref-div-table.png)

    An image treated like a table

    :::

    :::
    
    And notice if you hover over the reference as it appears in the text, e.g. hover over this link to @tbl-table, you'll get a floating preview of the content---that's new too.

*   Define [custom types of float cross-reference](/docs/authoring/cross-references-custom.qmd), which you could use to create cross-references to Videos, Diagrams or [Supplemental Figures](/docs/authoring/cross-references-custom.qmd#example-supplemental-figures).
    
*   Cross-reference [executable code cells](/docs/authoring/cross-references.qmd#code-listings), [callouts](/docs/authoring/cross-references.qmd#callouts) and [remarks and solutions](/docs/authoring/cross-references.qmd#theorems-and-proofs).

## Manuscripts

Quarto manuscript projects provide a framework for writing and publishing scholarly articles. You can use notebooks (`.qmd` or `.ipynb`) as the source of content and computations, and then publish these computations alongside the manuscript, allowing readers to dive into your code.

The output of a manuscript project is a website containing the article in multiple formats (e.g. LaTeX, MS Word) along with rendered versions of the notebooks in the project:

::: {layout="[[3,1]]"}

![Article Content](images/article-content.png){fig-alt="A screenshot of the content area on the manuscript webpage. Content shows a title block including the article title, authors, and abstract, body text, and an image with a caption." .border}

![Navigation](images/webpage-menu.png){fig-alt="A screenshot of the menu on the right hand side of the manuscript webpage. The menu has headings: Table of contents, Other Formats, Notebooks and Other Links." .border}

:::

Read more about manuscripts and how to get started in our guide to [Manuscripts](/docs/manuscripts/index.qmd).

## Other Highlights

Some other highlights include:

-   [Shiny for Python](/docs/dashboards/interactivity/shiny-python/index.qmd)---Support for using Shiny for Python within Quarto documents. 

-   [Script Rendering](/docs/computations/render-scripts.qmd)---Render specially formatted `.py`, `.jl` and `.r` script files.
    
-   [Easy Binder Configuration for Quarto Projects](/docs/projects/binder.qmd)---Support for generating files required to deploy a Quarto project to [Binder](https://mybinder.org/){.external}.

-   [Connect Email Generation](https://docs.posit.co/connect/user/quarto/#email-customization){.external}---Extends the `html` output format so that HTML/text emails can be created and selectively delivered through Posit Connect.

-   [Publish to Posit Cloud](/docs/publishing/posit-cloud.qmd)---Adds `posit-cloud` as a venue for `quarto publish`.

-   [Lightbox Treatment for Images and Figures](/docs/output-formats/html-lightbox-figures.qmd)---Support for zooming into images and figures as well as grouping multiple images into a gallery.

If you build Quarto extensions, you should also be aware of some developer-facing changes:

-   [Lua changes](/docs/prerelease/1.4/lua_changes.qmd)---New Support for crossreferenceable elements in filters, extensible renderers of quarto AST nodes such as `FloatRefTarget` and `Callout`, the use of relative paths in `require()` calls, and more precise specification of where a filter will be inserted.

-   [AST processing changes](/docs/prerelease/1.4/ast.qmd)---Improvements to the HTML table processing added in v1.3 and a way for LaTeX raw blocks to include Quarto-compatible markdown for processing.

You can find all the other changes in 1.4 in the [Release Notes](/docs/download/#download-section-news).

## Acknowledgements

We'd like to say a huge thank you to everyone who contributed to this release by opening issues and pull requests:

{{< include _contribs.md >}}

The party popper emoji in the [listing and social card image](images/thumbnail.png) for this post comes from [OpenMoji](https://openmoji.org/){.external}– the open-source emoji and icon project. License: [CC BY-SA 4.0](https://creativecommons.org/licenses/by-sa/4.0/#){.external}
```````

## File: docs/blog/posts/2024-03-26-hugging-face/index.qmd
```````
---
title: Quarto on Hugging Face
description: |
  You can now host Quarto sites on Hugging Face using the new Quarto Space template.
author: Gordon Shotwell
date: "03/26/2024"
image: "images/hugging-face-thumb.png"
image-alt: "Hugging Face Logo"
---

We're happy to announce that you can now host Quarto Websites on [Hugging Face](https://huggingface.co/) using the new [Quarto Template](https://quarto.org/docs/publishing/hugging-face.html). This template allows you to deploy Quarto sites to Hugging Face with a click of a button, making it easy to integrate them with other Hugging Face models and datasets.

![Hugging Face Space selection screen](images/hf-space-screen.png){fig-alt="Screenshot of Hugging Face Space selection screen showing Docker selected as the SDK, and Quarto selected as the Docker template."}

## About Hugging Face

Hugging Face is the most used open platform for AI, where the machine learning community has shared more than 500,000 models, 115,000 datasets, and 160,000 ML apps, including Stable Diffusion, Llama, GPT-J, and open-source ChatGPT alternatives.

These apps enable the community to explore models, replicate results, and lower the barrier of entry for ML. At Posit, we’ve been extremely impressed with the Hugging Face community and their commitment to supporting open-source machine learning models.

## What does Quarto add?

We think that Quarto is one of the best frameworks for scientific writing, making it a perfect tool for the Hugging Face community. With Quarto, you can interleave code and text to produce accurate, reproducible, and beautiful documents. You use simple markdown or Jupyter notebook files to generate [presentations](https://quarto.org/docs/presentations/), [manuscripts](https://quarto.org/docs/manuscripts/), [dashboards](https://quarto.org/docs/dashboards/), and [more](https://quarto.org/docs/output-formats/all-formats.html).

## Conclusion

Our mission at Posit is to support open-source scientific software, and so we’re very proud to support Hugging Face's effort to build advanced AI models under open-source licenses. We can't wait to see what people build with this integration.
```````

## File: docs/blog/posts/2024-04-01-manuscripts-rmedicine/index.qmd
```````
---
title: Quarto for Reproducible Medical Manuscripts 
description: |
  R/Medicine webinar on Quarto manuscripts
author: Mine Çetinkaya-Rundel
date: "04/01/2024"
image: "images/manuscripts-thumbnail.png"
image-alt: "From multiple Quarto documents and scripts in R and python to PDF or Word output."
categories:
  - Learn
---

Recently I gave a webinar for R/Medicine titled "Quarto for Reproducible Medical Manuscripts". You can watch the video below or on the R Consortium website at <https://www.r-consortium.org/r-medicine-quarto-for-reproducible-medical-manuscripts>.[^1]

{{< video https://www.youtube.com/embed/NK1onTLcgY4 >}}

Some highlights from the webinar include:

-   Step-by-step instructions for getting started with a new manuscript project

-   Obtaining multiple formats from one source

-   An overview of the rich front matter

-   Embedding computations from supplementary notebooks

    -   Note that I demoed embedding computations in R from .qmd files however it's also possible to embed computations from Jupyter notebooks and computations done in Python.

-   A live-coding demo of authoring Quarto manuscripts with RStudio and all the bells-and-whistles of the visual editor, including:

    -   cross referencing
    -   citations
    -   inline code

-   Ability to actually interact with code from a manuscript with Binder

-   And a rich Q&A, thanks to the audience!

The slides (also written in Quarto!) and their source code can be found at the links below:

-   Slides: <https://mine.quarto.pub/quarto-manuscripts-rmed>

-   Source code for slides: <https://github.com/mine-cetinkaya-rundel/quarto-manuscripts-rmed>

In addition, the webinar featured a reproduction of a medical manuscript with Quarto.[^2] Materials from this reproduction can be found at the links below:

-   Manuscript homepage: <https://mine-cetinkaya-rundel.github.io/indo-rct>

    -   This is an HTML page but you can also access PDF and MS Word versions of the manuscript by clicking on their respective links.
    -   You can also find a link to the Binder instance for this manuscript.[^3]

-   Source code for manuscript: <https://github.com/mine-cetinkaya-rundel/indo-rct>

Ready to get started writing a manuscript with Quarto? Go to <https://quarto.org/docs/manuscripts> for more info and a step-by-step tutorial. Happy authoring!

[^1]: Huge thanks to the R Consortium for hosting the webinar and making the recording available so quickly!

[^2]: Huge thanks to [Peter Higgins](https://github.com/higgi13425) who pointed me to this article as well as the R package that contains code from the article ([**medicaldata**](https://higgi13425.github.io/medicaldata/)) and shared some starter code with me.

[^3]: The Binder instance takes a few minutes to launch, you can leave that running in a tab while you browse the rest of the manuscript in another tab.
```````

## File: docs/blog/posts/2024-05-28-conf-workshops/index.qmd
```````
---
title: Quarto workshops at posit::conf(2024)
description: |
  On August 12, we're hosting a day of workshops featuring three dedicated to Quarto at posit::conf(2024) in Seattle
author: Isabella Velásquez and Mine Çetinkaya-Rundel
date: "05/28/2024"
image: "images/conf-workshops-thumbnail.png"
image-alt: "posit::conf(2024) iconography including Seattle skyline on the left and the words 'Quarto workshops' on the right."
categories:
  - Learn
  - Workshop
---

Join us for posit::conf(2024) in Seattle! On August 12, we're hosting a day of workshops featuring three dedicated to Quarto. Check out the options below and find the workshop that's just right for you. Already found your ideal Quarto workshop? [Register today](https://posit.co/conference/)!

[**Introduction to Quarto**]

-   Led by [Andrew Bray](https://bids.berkeley.edu/people/andrew-bray), Berkeley University

-   Ideal for beginners looking to create rich documents

[**Build-a-Dashboard Workshop (with Quarto, R, and/or Python)**]

-   Led by [Mine Çetinkaya-Rundel](https://mine-cr.com/), Posit, PBC, Duke University

-   Perfect for those familiar with computational notebooks in R and/or Python who want to create eye-catching dashboards

[**Quarto Websites**]

-   Led by [Charlotte Wickham](https://www.cwick.co.nz/) and [Emil Hvitfeldt](https://emilhvitfeldt.com/), Posit, PBC

-   Great choice for those wanting to build a website from scratch with Quarto

## **Introduction to Quarto**

This workshop will prepare you to author a rich array of documents in Quarto, the next generation of R Markdown. Quarto is an open-source scientific and technical publishing system that offers multilingual programming language support to create dynamic and static documents, books, presentations, blogs, and other online resources.

This workshop focuses on single documents. You will learn to create static documents, add interactivity to them with Shiny and HTML widgets, or steer them toward sophisticated scientific documents.

In the afternoon, you'll use the same authoring approaches to create slide presentations in various formats, such as reveal.js, Beamer, and PPTX.

**This workshop is for you if you:**

-   Have a basic knowledge of how to use the RStudio IDE,

-   Have some familiarity with Markdown, or

-   Are excited to author flexible single documents like technical reports and slide presentations.

## **Build-a-Dashboard Workshop (with Quarto, R, and/or Python)**

You already analyze and summarize your data in computational notebooks with R and/or Python. What's next? 

You can share your insights or allow others to make their own conclusions in eye-catching dashboards and straight-forward to author, design, and deploy Quarto Dashboards, regardless of the language of your data processing, visualization, analysis, etc. With Quarto Dashboards, you can create elegant and production-ready dashboards using a variety of components, including static graphics (ggplot2, Matplotlib, Seaborn, etc.), interactive widgets (Plotly, Leaflet, Jupyter Widgets, htmlwidgets, etc.), tabular data, value boxes, text annotations, and more. Additionally, with intelligent resizing of components, your Quarto Dashboards look great on devices of all sizes.

And importantly, you can author Quarto Dashboards without leaving the comfort of your “home” – in plain text markdown with any text editor (VS Code, RStudio, Neovim, etc.) or any notebook editor (JupyterLab, etc.). This workshop will walk you through building an increasingly complex dashboard using various layout options and deploying them as static web pages (with no special server required), as well as with a Shiny Server on the backend for enhanced interactivity.

**This workshop is for you if you:**

-   Do data analysis in computational notebooks,

-   Share your results with your audience in static or interactive dashboards and

-   Want to improve the design, user interface, and experience of your dashboards.

## **Quarto Websites**

Do you need a professional website to showcase your work? Or have you got an idea for a website at work, but it needs to reflect your organization's brand? If you've used Quarto to produce a document, you've already got the technical skills to create a Quarto website. In this workshop, you'll learn everything else you need to build a website and customize its appearance.

You'll get a running start by using a template we've designed to be functional and attractive but also act as a guide for your learning. Then you'll:

-   Add pages and navigation, and learn best practices for structuring your content.

-   Master the basics of SCSS and CSS and how they apply to Quarto websites to customize your site's visual appearance.

-   Use listings, a special kind of page, to showcase related content like blog posts, projects, or talks.

By the end of the workshop, you'll have built and published (if you want) a personal website, but the same tools and techniques will apply to any kind of website you might like to build.

We'll assume you've used Quarto to produce documents, but we won't assume you have any HTML, CSS/SCSS, or Git/GitHub experience, nor will we assume any particular programming language (R, Python, etc.) or level of programming experience.

**This workshop is for you if you:**

-   Have used Quarto to generate documents (e.g., HTML, PDF, MS Word, etc.)

-   Are comfortable editing plain text documents (e.g., \`.qmd\`) in your IDE (e.g., RStudio, Visual Studio Code, etc.) and

-   Want to walk away with your own personal website.

## **Learn more about posit::conf(2024)**

Want to explore the complete catalog of posit::conf(2024) workshops and talks?

-   Workshops on August 12: Head over to our [workshop listing](https://reg.conf.posit.co/flow/posit/positconf24/publiccatalog/page/publiccatalog?search=&search.sessiontype=1675316728702001wr6r) to discover detailed information about the courses and instructors.

-   Talks on August 13 and August 14: Peruse the [conference agenda](https://reg.conf.posit.co/flow/posit/positconf24/publiccatalog/page/publiccatalog?search=&tab.day=20240813).

    -   Tip: For a quick view of all Quarto talks, filter for "Quarto" under topics.

Ready to secure your spot? Visit the [conference website](https://posit.co/conference/) for comprehensive details on pricing and the agenda, and [register today](https://reg.conf.posit.co/flow/posit/positconf24/reg/login)!
```````

## File: docs/blog/posts/2024-07-02-beautiful-tables-in-typst/examples/great-tables-oceania.qmd
```````
---
title: "Great Tables - Oceania"
format: 
  typst: default
  html:
    format-links: false
bibliography: []
references:
  - type: website
    id: great-tables
    url: https://posit-dev.github.io/great-tables/examples/
---

```{=typst}
#set page(numbering: none)
```

```{python}
#| classes: plain
from great_tables import GT
from great_tables.data import countrypops
import polars as pl
import polars.selectors as cs

# Get vectors of 2-letter country codes for each region of Oceania
oceania = {
    "Australasia": ["AU", "NZ"],
    "Melanesia": ["NC", "PG", "SB", "VU"],
    "Micronesia": ["FM", "GU", "KI", "MH", "MP", "NR", "PW"],
    "Polynesia": ["PF", "WS", "TO", "TV"],
}

# Create a dictionary mapping country to region (e.g. AU -> Australasia)
country_to_region = {
    country: region for region, countries in oceania.items() for country in countries
}

wide_pops = (
    pl.from_pandas(countrypops)
    .filter(
        pl.col("country_code_2").is_in(list(country_to_region))
        & pl.col("year").is_in([2000, 2010, 2020])
    )
    .with_columns(pl.col("country_code_2").replace(country_to_region).alias("region"))
    .pivot(index=["country_name", "region"], columns="year", values="population")
    .sort("2020", descending=True)
)

(
    GT(wide_pops, rowname_col="country_name", groupname_col="region")
    .tab_header(title="Populations of Oceania's Countries in 2000, 2010, and 2020")
    .tab_spanner(label="Total Population", columns=cs.all())
    .fmt_integer()
)
```
```````

## File: docs/blog/posts/2024-07-02-beautiful-tables-in-typst/examples/great-tables-solar-zenith.qmd
```````
---
title: "Great Tables - Solar Zenith"
format: 
  typst: default
  html:
    format-links: false
bibliography: []
references:
  - type: website
    id: great-tables
    url: https://posit-dev.github.io/great-tables/examples/
---

```{=typst}
#set page(numbering: none)
```

```{python}
#| classes: plain
from great_tables import GT, html
from great_tables.data import sza
import polars as pl
import polars.selectors as cs

sza_pivot = (
    pl.from_pandas(sza)
    .filter((pl.col("latitude") == "20") & (pl.col("tst") <= "1200"))
    .select(pl.col("*").exclude("latitude"))
    .drop_nulls()
    .pivot(values="sza", index="month", columns="tst", sort_columns=True)
)

(
    GT(sza_pivot, rowname_col="month")
    .data_color(
        domain=[90, 0],
        palette=["rebeccapurple", "white", "orange"],
        na_color="white",
    )
    .tab_header(
        title="Solar Zenith Angles from 05:30 to 12:00",
        subtitle=html("Average monthly values at latitude of 20&deg;N."),
    )
    .sub_missing(missing_text="")
)
```
```````

## File: docs/blog/posts/2024-07-02-beautiful-tables-in-typst/examples/gt-cars.qmd
```````
---
title: "gt - gtcars"
format: 
  typst: default
  html:
    format-links: false
bibliography: []
references:
  - type: website
    id: gt-cookbook
    url: https://themockup.blog/static/resources/gt-cookbook.html#multiple-colors
---

```{=typst}
#set page(numbering: none)
```

```{r}
#| classes: plain
library(dplyr)
library(gt)

gtcars %>%
  dplyr::filter(mfr == "Ferrari", hp < 900) %>%
  dplyr::select(model, hp, mpg_c, mpg_h, msrp) %>%
  gt() %>%
  data_color(
    columns = hp,
    palette = c("white", "orange", "red"),
    domain = c(500, 750)
  ) %>%
  data_color(
    columns = c(mpg_c, mpg_h),
    palette = c("white", "green"),
    domain = c(10, 25)
  ) %>%
  data_color(
    columns = msrp,
    palette = c("white", "pink", "red"),
    domain = NULL
  )
```
```````

## File: docs/blog/posts/2024-07-02-beautiful-tables-in-typst/examples/gt-islands.qmd
```````
---
title: "gt - Islands"
format: 
  typst: default
  html:
    format-links: false
bibliography: []
---

```{=typst}
#set page(numbering: none)
```


```{r}
#| classes: plain
library(gt)
library(dplyr)

islands_tbl <-
  tibble(
    name = names(islands),
    size = islands
  ) |>
  arrange(desc(size)) |>
  slice(1:10)

gt_tbl <- gt(islands_tbl)

gt_tbl <-
  gt_tbl |>
  tab_header(
    title = "Large Landmasses of the World",
    subtitle = "The top ten largest are presented"
  )

gt_tbl <-
  gt_tbl |>
  tab_source_note(
    source_note = "Source: The World Almanac and Book of Facts, 1975, page 406."
  ) |>
  tab_source_note(
    source_note = md("Reference: McNeil, D. R. (1977) *Interactive Data Analysis*. Wiley.")
  )

# Show the gt table
gt_tbl

```
```````

## File: docs/blog/posts/2024-07-02-beautiful-tables-in-typst/examples/pandas-acting-on-data.qmd
```````
---
title: "Pandas - Acting on Data"
format: 
  typst: default
  html:
    format-links: false
    theme: default
bibliography: []
references:
  - type: website
    id: pandas-user-guide
    url: https://pandas.pydata.org/pandas-docs/version/2.2.2/user_guide/style.html#Acting-on-the-Index-and-Column-Headers
---

```{=typst}
#set page(numbering: none)
```

```{python}
#| classes: plain
import pandas as pd
import numpy as np

np.random.seed(0)
df2 = pd.DataFrame(np.random.randn(10,4), columns=['A','B','C','D'])

def style_negative(v, props=''):
    return props if v < 0 else None
s2 = df2.style.map(style_negative, props='color:red;')\
              .map(lambda v: 'opacity: 20%;' if (v < 0.3) and (v > -0.3) else None)

def highlight_max(s, props=''):
    return np.where(s == np.nanmax(s.values), props, '')

# darkblue, pink
s2.apply(highlight_max, props='color:white;background-color:#00008b', axis=0)\
.apply(highlight_max, props='color:white;background-color: #ffc0cb;', axis=1)\
.apply(highlight_max, props='color:white;background-color:purple', axis=None)

```
```````

## File: docs/blog/posts/2024-07-02-beautiful-tables-in-typst/examples/pandas-confusion-matrix.qmd
```````
---
title: "Pandas - Confusion Matrix"
format: 
  typst: default
  html:
    format-links: false
bibliography: []
references:
  - type: website
    id: pandas-user-guide
    url: https://pandas.pydata.org/pandas-docs/version/2.2.2/user_guide/style.html#Tooltips-and-Captions
---

```{=typst}
#set page(numbering: none)
```

```{python}
#| classes: plain
import pandas as pd
import numpy as np

df = pd.DataFrame([[38.0, 2.0, 18.0, 22.0, 21, np.nan],[19, 439, 6, 452, 226,232]],
                  index=pd.Index(['Tumour (Positive)', 'Non-Tumour (Negative)'], name='Actual Label:'),
                  columns=pd.MultiIndex.from_product([['Decision Tree', 'Regression', 'Random'],['Tumour', 'Non-Tumour']], names=['Model:', 'Predicted:']))

s = df.style.format('{:.0f}').hide([('Random', 'Tumour'), ('Random', 'Non-Tumour')], axis="columns")

cell_hover = {  # for row hover use <tr> instead of <td>
    'selector': 'td:hover',
    'props': [('background-color', '#ffffb3')]
}
index_names = {
    'selector': '.index_name',
    # darkgr[ae]y
    'props': 'font-style: italic; color: #a9a9a9; font-weight:normal;'
}
headers = {
    'selector': 'th:not(.index_name)',
    'props': 'background-color: #000066; color: white;'
}
s.set_table_styles([cell_hover, index_names, headers])

s.set_table_styles([  # create internal CSS classes
    {'selector': '.true', 'props': 'background-color: #e6ffe6;'},
    {'selector': '.false', 'props': 'background-color: #ffe6e6;'},
], overwrite=False)
cell_color = pd.DataFrame([['true ', 'false ', 'true ', 'false '],
                           ['false ', 'true ', 'false ', 'true ']],
                          index=df.index,
                          columns=df.columns[:4])
s.set_td_classes(cell_color)
s.set_table_styles([  # create internal CSS classes
    {'selector': '.border-red', 'props': 'border: 2px dashed red;'},
    {'selector': '.border-green', 'props': 'border: 2px dashed green;'},
], overwrite=False)
cell_border = pd.DataFrame([['border-green ', ' ', ' ', 'border-red '],
                           [' ', ' ', ' ', ' ']],
                          index=df.index,
                          columns=df.columns[:4])
s.set_td_classes(cell_color + cell_border)
```
```````

## File: docs/blog/posts/2024-07-02-beautiful-tables-in-typst/index.qmd
```````
---
title: Beautiful Tables in Typst
description: |
  You can use HTML Tables with CSS styling in Typst via Quarto.
author: Gordon Woodhull
date: "07/02/2024"
image: beautiful-tables-typst.png
image-alt: "typst snapshot tk"
bibliography: []
format:
  html:
    css: layout.css
    number-sections: true
categories:
  - Quarto 1.5
  - Tables
---

Quarto now allows HTML Tables with CSS styling to be output in Typst.

It does this by translating CSS properties into Typst properties. You can read about the feature [in the Guide](/docs/output-formats/typst.qmd#typst-css).[technical details [in the Advanced Docs](/docs/advanced/typst/typst-css.qmd)]{.aside}

Let's look at 6 HTML tables using a variety of CSS properties also supported by Typst in Quarto.

You can click on the links below the examples to see the full documents, with source code.

## Confusion Matrix (Pandas / Python)

This example uses a dashed border to draw attention to two cells.

:::::: {.column-page .room}
::::: columns
::: {.column width="50%" style="padding-top:1.5em"}
![](images/pandas-confusion-matrix.png){width="700"} [Typst](examples/pandas-confusion-matrix.pdf){target="_blank"}
:::

::: {.column width="50%"}
```{=html}
<iframe class="html-demo" src="demo/pandas-confusion-matrix.html" width=700 height=250 scrolling="no"></iframe>
```

[HTML](examples/pandas-confusion-matrix.HTML){target="_blank"}
:::
:::::
::::::

## Cars heatmap (gt / R)

This example uses cell background colors to encode ranges of values.

:::::: {.column-page .room}
::::: columns
::: {.column width="50%" style="padding-top:2.2em"}
![](images/gt-cars.png){width="430"}

[Typst](examples/gt-cars.pdf){target="_blank"}
:::

::: {.column width="50%"}
```{=html}
<iframe class="html-demo" src="demo/gt-cars.html" width=430 height=375 scrolling="no"></iframe>
```

[HTML](examples/gt-cars.HTML){target="_blank"}
:::
:::::
::::::

## Oceania (Great Tables / Python)

Borders can show the structure of grouped rows.

:::::: {.column-page .room}
::::: columns
::: {.column width="50%" style="padding-top:2.1em"}
![](images/great-tables-oceania.png){width="600"}

[Typst](examples/great-tables-oceania.pdf){target="_blank"}
:::

::: {.column width="50%"}
```{=html}
<iframe class="html-demo" src="demo/great-tables-oceania.html" width=600 height=907 scrolling="no"></iframe>
```

[HTML](examples/great-tables-oceania.HTML){target="_blank"}
:::
:::::
::::::

## Islands (gt / R)

Font sizes and minimal borders make this table stand out.

:::::: {.column-page .room}
::::: columns
::: {.column width="50%" style="padding-top:2.2em"}
![](images/gt-islands.png){width="500"}

[Typst](examples/gt-islands.pdf){target="_blank"}
:::

::: {.column width="50%"}
```{=html}
<iframe class="html-demo" src="demo/gt-islands.html" width=400 height=580 scrolling="no"></iframe>
```

[HTML](examples/gt-islands.HTML){target="_blank"}
:::
:::::
::::::

## Solar Zenith (Great Tables / Python)

Another cool heatmap.

:::::: {.column-page .room}
::::: columns
::: {.column width="50%" style="padding-top:1.7em"}
![](images/great-tables-solar-zenith.png){width="750"}

[Typst](examples/great-tables-solar-zenith.pdf){target="_blank"}
:::

::: {.column width="50%"}
```{=html}
<iframe class="html-demo" src="demo/great-tables-solar-zenith.html" width=850 height=565 scrolling="no"></iframe>
```

[HTML](examples/great-tables-solar-zenith.HTML){target="_blank"}
:::
:::::
::::::

## Acting on Data (Pandas / Python)

Applying colors and transparency based on data.

:::::: {.column-page .room}
::::: columns
::: {.column width="50%" style="padding-top:2.2em"}
![](images/pandas-acting-on-data.png){width="540"}

[Typst](examples/pandas-acting-on-data.pdf){target="_blank"}
:::

::: {.column width="50%"}
```{=html}
<iframe class="html-demo" src="demo/pandas-acting-on-data.html" width=600 height=505 scrolling="no"></iframe>
```

[HTML](examples/pandas-acting-on-data.HTML){target="_blank"}
:::
:::::
::::::

We can't wait to see what you do with this new feature!
```````

## File: docs/blog/posts/2024-07-11-1.5-release/index.qmd
```````
---
title: Quarto 1.5 
description: |
  Quarto 1.5 improves Typst support, has some website enhancements like draft handling and announcement bars, adds a native Julia engine, and adds a couple of shortcodes for generating placeholder content. 
categories:
  - Quarto 1.5
  - Releases
author: Charlotte Wickham
date: "07/11/2024"
image: "images/thumbnail.png"
image-alt: "Quarto 1.5 with a balloon"
---

Quarto 1.5 is out! You can find the current release on the [download page](/docs/download/index.qmd).

Below, we'll highlight the improved Typst support, website enhancements like draft handling and announcement bars, the native Julia engine, and a couple of shortcodes for generating placeholder content. You can see all the changes in the [Release Notes](/docs/download/changelog/1.5/).

## Typst CSS

We've already blogged about one feature that is now available in 1.5: [Beautiful Tables in Typst](/docs/blog/posts/2024-07-02-beautiful-tables-in-typst/). The CSS properties from HTML tables produced in your code are translated to Typst properties, so the tables you lovingly craft for HTML should look just as good in PDFs produced using `format: typst`.

Beyond tables, CSS properties on divs and spans are also translated to Typst properties. So, for example, you could get text with a green background like this:

``` markdown
Here is a [span with a green background]{style="background-color:green"}.
```

You can read more about using CSS in Typst at [Typst Basics: Typst CSS](/docs/output-formats/typst.qmd#typst-css).

## Improved Website Draft Support

![A `draft` post with the new draft banner](images/website-drafts-banner.png){.border fig-alt="Screenshot of a post titled 'Post With Code', displaying a banner at the top of the page titled 'Draft'."}

Quarto 1.5 brings improved support for workflows involving draft posts and pages:

-   Adds the `drafts` option to the `website` key offering new ways to specify drafts: directly in `_quarto.yml`, and via metadata includes and profiles.

-   Introduces the `draft-mode` option to the `website` key to control how drafts are rendered. Drafts can be `gone`, `unlinked` or `visible`.

-   Adds a draft banner to draft pages that are rendered.

-   Improves the linking behavior of draft documents. Now, in addition to being excluded from search results, listings, and the sitemap, drafts will not appear in navigation, or be linked from in-text hyperlinks when `draft-mode` is `gone` or `unlinked`.

-   Changes the behavior of `quarto preview` for drafts. Drafts will be `visible` in previews regardless of the `draft-mode` setting. In particular, this allows an easier way to preview the appearance of draft content in navigation and listings.

Read more at [Website Drafts](/docs/websites/website-drafts.qmd).

## Website Announcements

You can now use an `announcement` option to add a customizable banner at the top of your website. You can set an icon, make it dismissable, and include markdown formatted content like bold text:

![An example announcement bar](images/website-announcement.png){fig-alt="Screenshot of the quarto documentation showing a blue bar below the navbar, starting with the text 'Alert:...'."}

Read about your options at [Website Tools: Announcement Bar](/docs/websites/website-tools.qmd#announcement-bar).

## Native Julia Engine

Prior to 1.5, Julia code cells were executed through the Jupyter engine. Now you can opt-in to a native Julia engine:

``` yaml
---
title: Julia without Jupyter
engine: julia
---
```

Read about the details in [Using the `julia` engine](https://quarto.org/docs/computations/julia.html#using-the-julia-engine).

Part of the reason we are excited about this feature is that it was an external contribution. Thank you [\@jkrumbiegel](https://github.com/jkrumbiegel)!

## Placeholder Shortcodes

We've also added a couple of shortcodes that add placeholder content: `lipsum` for text, and `placeholder` for images:

``` {.markdown shortcodes="false"}
{{< placeholder 400 200 format=svg >}}
{{< lipsum 1 >}}
```

This example produces a 400px x 200px SVG image, and one paragraph of [Lorem Ipsum](https://en.wikipedia.org/wiki/Lorem_ipsum) text:

::: {.border .p-3}
{{< placeholder 400 200 format=svg >}}

{{< lipsum 1 >}}
:::

Read more about their options at [Placeholder Images](/docs/authoring/placeholder.qmd) and [Placeholder Text](/docs/authoring/lipsum.qmd).

## Acknowledgements

Finally, we'd like to give a huge high five to everyone who contributed to this release by opening issues and pull requests:

{{< include _contribs.md >}}

The balloon emoji in the [listing and social card image](images/thumbnail.png) for this post comes from [OpenMoji](https://openmoji.org/){.external}– the open-source emoji and icon project. License: [CC BY-SA 4.0](https://creativecommons.org/licenses/by-sa/4.0/#){.external}
```````

## File: docs/blog/posts/2024-10-15-conf-workshops-materials/index.qmd
```````
---
title: posit::conf(2024) Quarto workshop materials
description: |
  Back in August, we hosted three Quarto workshops at posit::conf(2024); the materials from those workshops are available to learn and teach from!
categories:
  - Learn
  - Workshop
author: Mine Çetinkaya-Rundel and Charlotte Wickham
date: "10/15/2024"
image: "images/thumbnail.png"
image-alt: "posit::conf(2024) logo "
---

This year at posit::conf(2024) we had three day-long Quarto workshops. The materials from those workshops are available for all to learn from. Additionally, you're welcomed to use them in full or part when talking or teaching about Quarto; they are all released with a [CC BY-SA 4.0](https://creativecommons.org/licenses/by-sa/4.0/) license.

::: {layout="[70,30]"}

::: {}
[**Introduction to Quarto**](https://posit-conf-2024.github.io/quarto-intro/){data-heading="Introduction to Quarto"}

<https://posit-conf-2024.github.io/quarto-intro>

\

-   Led by [Andrew Bray](https://bids.berkeley.edu/people/andrew-bray), UC Berkeley

-   Ideal for beginners looking to create rich documents
:::

:::{}

[![](images/intro.png){fig-alt="Illustration of a seaplane."}](https://posit-conf-2024.github.io/quarto-intro/)
:::

:::

:::: {layout="[70,30]"}

::: {}
[**Build-a-Dashboard Workshop (with Quarto, R, and/or Python)**](https://posit-conf-2024.github.io/quarto-dashboards/)

[https://posit-conf-2024.github.io/quarto-dashboards](https://posit-conf-2024.github.io/quarto-dashboards/)

\

-   Led by [Mine Çetinkaya-Rundel](https://mine-cr.com/), Posit, PBC, Duke University

-   Perfect for those familiar with computational notebooks in R and/or Python who want to create eye-catching dashboards
:::

::: {}
[![](images/dashboards.png){fig-alt="An illustration of a dashboard made with Quarto"}](https://posit-conf-2024.github.io/quarto-dashboards/)
:::

::::

:::: {layout="[70,30]"}

::: {}
[**Quarto Websites**](https://posit-conf-2024.github.io/quarto-websites/){data-heading="Quarto Websites"}

[https://posit-conf-2024.github.io/quarto-websites](https://posit-conf-2024.github.io/quarto-websites/)

\

-   Led by [Charlotte Wickham](https://www.cwick.co.nz/) and [Emil Hvitfeldt](https://emilhvitfeldt.com/), Posit, PBC

-   Great choice for those wanting to build a website from scratch with Quarto

:::

:::{}
[![](images/websites.png){fig-alt="A diagram showing switching between navbar and sidebar navigation for a Quarto website."}](https://posit-conf-2024.github.io/quarto-websites/)
:::

::::
```````

## File: docs/blog/posts/2024-11-06-conf-talks/index.qmd
```````
---
title: posit::conf(2024) Quarto talks
description: |
  Videos of talks from posit::conf(2024) are posted, we've compiled a playlist of Quarto talks for you!
categories:
  - Learn
  - Conference
author: Mine Çetinkaya-Rundel and Charlotte Wickham
date: "11/06/2024"
image: "images/thumbnail.jpg"
image-alt: "Collage of speakers with Quarto talks at posit::conf(2024)"
---

Videos of posit::conf(2024) talks are now posted [on YouTube](https://www.youtube.com/watch?v=s_Vh9HIeLVg&list=PL9HYL-VRX0oSFkdF4fJeY63eGDvgofcbn). We have also made playlist of talks that are about using, building with, and building on Quarto.

<iframe width="560" height="315" src="https://www.youtube.com/embed/videoseries?si=Xwt6NHL_f4k9agzh&amp;list=PLNUVZZ6hfXX1Y4Is-SbbMF_HutRDJBwiO" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

Talks included in this playlist are as follows:

-   [Updates from Posit, with Hadley Wickham, Charlotte Wickham, George Stagg, and James Blair](https://youtu.be/s_Vh9HIeLVg?si=jsIWeETKQG154dFi)
-   [Andrew Bray - Closeread: bringing Scrollytelling to Quarto](https://youtu.be/KqLxy66B3lQ?si=fe1zVCBozVmWKufO)
-   [Meghan Hall - Designing and Deploying Internal Quarto Templates](https://youtu.be/VJEBg1Ke0lE?si=LUMa5-IF3gWORr3I)
-   [David Keyes - Report Design in R: Small Tweaks that Make a Big Difference](https://youtu.be/bp1SMhLoz_M?si=tyvyO-FP0AEBV6W2)
-   [Mine Çetinkaya-Rundel - Reproducible, dynamic, and elegant books with Quarto](https://youtu.be/fsfoqpQYN2k?si=sDUOZTEBXvXLNVHq)
-   [Cynthia Huang - Quarto for Knowledge Management](https://youtu.be/4zy9R26B8kk?si=rO_5BIjTC3ENVC2c)
-   [Regina Lionheart - Making Waves with R, Python, and Quarto](https://youtu.be/UOMcGBMvVdo?si=yo3dFtWScKn06iXy)
-   [Joshua Cook - Quarto: A Multifaceted Publishing Powerhouse for Medical Researchers](https://youtu.be/PITfti4JRiU?si=TMi-CJOi04zViU_p)
-   [Tyler Morgan-Wall - Quarto, AI, and the Art of Getting Your Life Back](https://youtu.be/U8_Dc_ru8fg?si=-fEK5Ou57f-QhSba)
-   [Sean Nguyen - Beyond Dashboards: Dynamic Data Storytelling with Python, R, and Quarto Emails](https://youtu.be/fzykFa6c3LI?si=wV83nh1WvctfRAiu)
-   [Richie Moluno - JSquarto: Bridging JavaScript Documentation with Quarto's Power](https://youtu.be/CySpBKJD5vY?si=zQ2TowaD_Wk0Du8X)
-   [Mika Braginsky - DataPages for interactive data sharing using Quarto](https://youtu.be/1gUl-vWqScc?si=nLEJ8JsLzBv8UqqT)
-   [Brennan Antone - Democratizing Organizational Surveys with Quarto and Shiny](https://youtu.be/ceW3nQssV88?si=caHnzvBHorxWFn00)
```````

## File: docs/blog/posts/2024-11-22-dashboards-workshop/index.qmd
```````
---
title: Quarto dashboards video series
description: |
  Learn how to build a Quarto dashboard with a three-part video series.
categories:
  - Learn
  - Workshop
author: 
  - Charlotte Wickham
  - Mine Çetinkaya-Rundel
date: "11/22/2024"
image: "quarto-dashboards.jpg"
image-alt: "Build a dashboard workshop with Quarto, R and/or Python."
---

If you've been looking to get your head around Quarto dashboards, 
check out the Quarto dashboards video series by [Mine Çetinkaya-Rundel](https://mine-cr.com/).

Materials: [YouTube playlist](https://youtube.com/playlist?list=PLitrm9UndxcsapDsLimKGn3dEjQZy5vYs&si=oLK2D1PuyF9MKVon) | [Slides](https://mine.quarto.pub/quarto-dashboards/) | [Starter code](https://github.com/mine-cetinkaya-rundel/olympicdash)

## 1. Hello, Quarto Dashboards

Start by getting to know Quarto dashboards and make your very first dashboard using either R or Python and share it online. [Slides](https://mine.quarto.pub/quarto-dashboards/1-hello-dashboards/#/title-slide)

{{< video https://www.youtube.com/watch?v=HW7QbqI4fH0 >}}

## 2. Quarto Dashboards Components

Then, build up your arsenal of dashboard components to add navigation, sidebars, tabsets, value boxes, and fine-tune layout. [Slides](https://mine.quarto.pub/quarto-dashboards/2-dashboard-components/#/title-slide)

{{< video https://www.youtube.com/watch?v=KdsQgwaY950 >}}

## 3. Quarto Dashboards Theming and Styling

Finally, make your dashboard pop by adding a theme and making styling tweaks. [Slides](https://mine.quarto.pub/quarto-dashboards/3-theming-styling/#/title-slide)

{{< video https://www.youtube.com/watch?v=NigWSB-jG4Y >}}
```````

## File: docs/blog/posts/2024-11-25-1.6-release/index.qmd
```````
---
title: Quarto 1.6
description: |
  Quarto 1.6 supports unified branding across formats, updates to RevealJS, a new shortcode to reorder content, a landscape page block, and more. There are also a couple of breaking changes that will affect a small number of users.
categories:
  - Quarto 1.6
  - Releases
author: Charlotte Wickham
date: "11/25/2024"
image: "thumbnail.png"
image-alt: "Quarto 1.6 with a palette."
---

Quarto 1.6 has been officially released! You can get the current release from the [download page](/docs/download/index.qmd).

We are particularly excited about:

-   Support for **brand.yml**---a single file that defines your organization's branding and style preferences across formats.

-   RevealJS updates, including the new navigation features: scroll mode and jump to slide.

-   The `contents` shortcode for reordering your content.

-   `landscape` blocks for placing content on a landscape page.

-   Improvements in how you can specify subpanels of cross-references from code blocks.

You can read about these new features and a couple of breaking changes in the sections below. You can find all the changes in this version in the [Release Notes](/docs/download/changelog/1.6/).

## Cross-format theming with **brand.yml**

[**brand.yml**](https://posit-dev.github.io/brand-yml/) is a Posit project outside Quarto that defines brand information using a simple YAML file. Quarto is a flagship adopter of **brand.yml** and supports brand-themed output for `html`, `dashboard`, `typst` and `revealjs` formats.

{{< include /docs/authoring/_brand-example.qmd >}}

Get started by reading the Quarto [Guide to Brand](/docs/authoring/brand.qmd).

## RevealJS update

Quarto v1.6 updates RevealJS to v5.1.0. With the update comes two notable features:

[**Jump to Slide**](/docs/presentations/revealjs/presenting.qmd#jump-to-slide): Quickly navigate to a slide. Press {{< kbd G >}} to activate, type a slide number or ID, and hit Enter/Return.

[**Scroll Mode**](/docs/presentations/revealjs/presenting.qmd#scroll-view): Scroll rather than click to advance slides. Press {{< kbd R >}}, add `?view=scroll` to your URL, or use the Navigation menu to activate. Automatically activated on small screens.

## Contents shortcode

The `contents` shortcode lets you compose content in one location in your document and then display it in another. For example, you might use a code cell to generate a plot:

```` markdown
```{{python}}
#| echo: false
#| label: a-cell
import matplotlib.pyplot as plt
plt.plot([1,2,3])
```
````

Then use the `contents` shortcode to display that plot in a callout by referencing its label, `a-cell`:

``` {.markdown shortcodes="false"}
::: callout-note
## Note the following plot

{{< contents a-cell >}}

:::
```

Find all the details on our guide page on the [contents shortcode](/docs/authoring/contents.qmd).

## Landscape mode

In `pdf`, `docx,` and `typst` formats, you can now put content on a landscape page by placing it inside a [`landscape` block](/docs/authoring/article-layout.html#landscape-mode):

``` markdown
::: {.landscape}

This will appear in landscape.

:::
```

## Cross-reference improvements

It should now be easier to get Quarto to recognize subfloats (subtables, subfigures, etc) when they're emitted by code cells. If the `subcap` attribute of a code cell has as many entries as the number of outputs from your code cell, Quarto knows to accept those as subfloats. See [#10328](https://github.com/quarto-dev/quarto-cli/issues/10328){.external} for details.

Minimal example:

```{{{r}}}
#| label: tbl-example
#| tbl-cap: I want these images to be interpreted as Tables.
#| tbl-subcap:
#|   - This is the subcaption for the first subtable
#|   - This is the subcaption for the second subtable
plot(1:10)
plot(11:20)
```

![The result of executing the above code cell in HTML format](./subcells-and-subfloats.png){.border fig-alt="Screenshot of a document showing two plots with an overall caption labelled 'Table 1', and each plot with a caption starting '(a)' and '(b)' respectively."}

## Breaking Changes

We try very hard to keep Quarto backward compatible. However, in this release, there are a couple of breaking changes due to upstream dependencies. You may be affected if:

-   **You have TypeScript files (`*.ts`) that you use either with pre- or post-render scripts, or with `quarto run`, that import Deno standard libraries.**

    The import syntax has changed. Please see [Deno Scripts](/docs/projects/scripts.html#deno-scripts) for the necessary changes.

-   **You override the LaTeX `graphics.tex` partial, or you have a completely custom LaTeX template that doesn't use the `graphics.tex` partial.**

    A Pandoc change means some images are now wrapped in `\pandocbounded`. Consequently, your `graphics.tex` partial, or your template, needs to define `\pandocbounded`. You can look at our [source code for `graphics.tex`](https://github.com/quarto-dev/quarto-cli/blob/main/src/resources/formats/pdf/pandoc/graphics.tex){.external} to see the necessary changes and read more about the upstream change in [Pandoc commit 26b25a4](https://github.com/jgm/pandoc/commit/26b25a4428815b04c255e33e95ee86ca7b6ee30e){.external}.

## Acknowledgments

We want to say a huge thank you to everyone who contributed to this release by opening issues and pull requests:

{{< include _contribs.md >}}

The palette emoji in the [listing and social card image](images/thumbnail.png) for this post comes from [OpenMoji](https://openmoji.org/){.external}– the open-source emoji and icon project. License: [CC BY-SA 4.0](https://creativecommons.org/licenses/by-sa/4.0/#){.external}
```````

## File: docs/blog/posts/2024-12-04-websites-workshop/index.qmd
```````
---
title: Quarto website video series
description: |
  Build a personal website with Quarto by following this four-part video series on YouTube.
categories:
  - Learn
  - Workshop
author: 
  - Charlotte Wickham
  - Mine Çetinkaya-Rundel
date: "12/04/2024"
image: "quarto-websites.jpg"
image-alt: "Quarto Websites Workshop"
---

Do you need a professional website to showcase your work? If you’ve used Quarto to produce a document, you’ve already got the technical skills to create a Quarto website. In this video series, taught by [Charlotte Wickham](https://www.cwick.co.nz/) and [Emil Hvitfeldt](https://emilhvitfeldt.com/), you’ll learn everything else you need to build a website and customize its appearance.

[YouTube Playlist](https://www.youtube.com/playlist?list=PLitrm9Undxcu7eExaTg9Y-JYLv9O6uxGu) 

## Quarto Websites 1: Build your homepage 

In this video, you’ll get a running start by using a template we've designed to be functional and attractive, and that will serve as a foundation for the rest of the video series. You’ll customize the content of your homepage, and how it looks, and along the way learn about the two key files in a Quarto website index.qmd and _quarto.yml. Finally, you’ll learn one way to publish your website so other people can see it.

{{< video https://youtu.be/l7r24gTEkEY >}}

Links: [About pages](/docs/websites/website-about.qmd) | [YAML appearance options](/docs/output-formats/html-themes.qmd#basic-options) 

Code: [Starter](https://github.com/EmilHvitfeldt/website-template ) | [Final](https://github.com/cwickham/quarto-website-video/tree/v0.1)

## Quarto Websites 2: Add pages and navigation

Now you’ve got a homepage, you’ll likely want to add some other pages. In this video, learn how to add pages to your website, and help people find them, by adding them to your website navigation.

{{< video https://youtu.be/k65E-8PXZmA >}}

Links: [Bootstrap icons](https://icons.getbootstrap.com/) | [Navigation bar options](/docs/websites/website-navigation.qmd#top-navigation) |  [Quarto website navigation](/docs/websites/website-navigation.qmd)

Code: [Starter](Starter source code: https://github.com/cwickham/quarto-website-video/tree/v0.1) |  [Final](https://github.com/cwickham/quarto-website-video/tree/v0.2)


## Quarto Websites 3: Customize appearance with CSS/SCSS

You now have a set of content you are happy with on your website, but how do you customize the look and feel of your site beyond options set in YAML? In this video, you’ll start by learning the basics of CSS and SCSS and how to make good design choices. Then, you’ll see how to apply these choices to your Quarto website.

{{< video https://youtu.be/pAN2Hiq0XGs >}}

Links: [Color contrast checker](https://colourcontrast.cc/) | [Google fonts](https://fonts.google.com/)

Code: [Starter](https://github.com/cwickham/quarto-website-video/tree/v0.2) | [Final](https://github.com/cwickham/quarto-website-video/tree/v0.3)

## Quarto Websites 4: Add lists of content with listings

Adding a listing page to your website is a great way to showcase your projects, talks, publications or blog posts. In this video you’ll learn how to create a listing page in Quarto and see two ways to populate it with content: Quarto documents, or a yaml file.

{{< video https://www.youtube.com/watch?v=bv_Cw-3HI1Y >}}

Links: [Listings](/docs/websites/website-listings.qmd) | [Andrew Heiss’ teaching listing](https://www.andrewheiss.com/teaching/ ) 

Code: [Starter](https://github.com/cwickham/quarto-website-video/tree/v0.3) | [Final](https://github.com/cwickham/quarto-website-video/tree/v0.4)
```````

## File: docs/blog/posts/2024-12-12-includes-meta/index.qmd
```````
---
title: "Use `meta` + `include` to customize reusable content"
description: |
  The "Includes" feature in Quarto lets you efficiently reuse content across multiple files. Combined with the "meta" shortcode, it enables you to set precise, file-specific values.
categories:
  - Learn
  - Authoring
author:
  - Ashley Henry
date: "12/12/2024"
image: "thumbnail.jpg"
image-alt: "Quarto logo with single source publishing icon."
---

::: {.callout-tip}

## Re-posted from posit.co

This post was originally published on the [Posit Blog](https://posit.co/blog/quarto-meta-shortcode-variables/). 

The worked example below is also available at: [Source](https://github.com/quarto-dev/quarto-examples/tree/main/websites/quarto-meta-includes) | [Live Website](https://examples.quarto.pub/quarto-meta-includes/)

::: 

There may be times when you would like to single-source content across multiple pages/files to reduce the risk of errors, produce consistent content that is easy to maintain, and ultimately save valuable time. [Quarto](/index.qmd) (an open-source technical publishing system), provides an [Includes](/docs/authoring/includes.html) feature (the equivalent of an R Markdown “child” document) that allows you to reuse content across multiple documents/files/pages. 

To achieve this, simply create chunks of content (text, tables, code, callouts, images, etc.) and then insert it using the Include shortcode: `{{{< include _content.qmd >}}}`.

Typically, you must keep your content general enough so it can be reused in several places. In other words, if you needed to add a name or an image that is specific to that file, you would assume that you wouldn’t be able to use an include, or you would have to use several smaller includes sewn into uniquely written content.

But what if you need your single-sourced content to be more specific? You can use Includes with `meta` shortcode (variables) to add precise values defined at the file level.

## Walkthrough example

Let us walk you through an example of how to achieve this.

Before you begin:

* Quarto version 1.5+ was used for this walkthrough example.
* This has been tested with both new and existing Website projects.
* A `var` shortcode enables you to insert content from the project or file level.
* The `meta` shortcode allows you to insert content from Pandoc metadata (e.g., YAML at the top of the document and/or in `_quarto.yml`).
* As you preview your site, pages will be rendered and updated. However, if you make changes to global options (e.g. `_quarto.yml` or included files) you need to fully re-render your site to have all of the changes reflected. Consequently, you should always fully `quarto render` your site before deploying it, even if you have already previewed changes to some pages with the preview server.

### Create the content:

Here is an example of a file with content we want to reuse across several pages.

```markdown
In this document, we cover facts that are unique to the state, like the state's population, its flower, and animal.
```

This content is general enough to use as each state’s introduction but lacks the facts that are unique to each state. So, we could insert the Include into each state’s file and then add specific content that is unique to the state:

```markdown
---
title: New York
---

{{{< include _snippets/state-intro.qmd >}}}

New York has a geographical size of 54,555, making it the 27th largest state with an estimated population size of 19.8 million.

The state's flower is the Rose, as shown below:

![](images/ny/flower.png)
```

### Why are we doing this?

Instead of copying and pasting this content into each file, and then updating it with each state’s fact (which introduces a higher risk of making an error), we can use meta variables to insert specific values.

### Let’s execute

First, I create a file within my `_snippets` directory named `facts.qmd`. Throughout the file, I am going to insert a unique `meta` variable for each occurrence that I want the content to be specific to the state: 

```markdown
{{{< meta state >}}} covers approximately {{{< meta square-miles >}}} making it the {{{< meta size-rank >}}} largest state in the United States. As of 2023, {{{< meta state >}}} has an approximate population of about {{{< meta population >}}}.
```

I can define each of the `meta` variables within the individual file that I plan on reusing this content. So, in my `ny.qmd` file, I define each variable in the YAML metadata. Then, insert the `facts.qmd` file with the undefined meta shortcodes using an include:

```markdown
---
title: New York
state-abbr: ny
state: New York
size-rank: 27th
square-miles: 54,555
population: 19.8 million
---


{{{< include _snippets/facts.qmd >}}}
```

As you can see, the rendered file has the meta shortcodes populated with the definitions that you assigned to each value in the file’s YAML.

![](images/img1.png){fig-align="center" style="box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.3); border-radius: 5px;"}


But, I would also like to add the state’s flower and animal with images of each. You can achieve this by editing the document to add this information and images:

```markdown
{{{< include _snippets/facts.qmd >}}}

New York's official flower is the Rose:

![](../images/ny/flower.png)

And the official animal is the Beaver:

![](../images/ny/animal.png)
```

Or, you can get creative and use `meta` shortcodes in your image paths so you can continue to manage all of the content in a single file:

```markdown
{{{< meta state >}}}'s official flower is the {{{< meta flower >}}}, pictured below:

![The official {{{< meta state >}}} state flower, the {{{< meta flower >}}}](../images/{{{< meta state-abbr >}}}/flower.png)

Lastly, {{{< meta state >}}}'s official animal is the {{{< meta animal >}}}, pictured below:

![The official {{{< meta state >}}} state animal, the {{{< meta animal >}}}](../images/{{{< meta state-abbr >}}}/animal.png)
```

As you can see, my image paths have `{{{< meta state-abbr >}}}` which is defined in the new-york file as “ny”.

When we render the project, the image path updates to /images/ny/flower.png pointing to the existing flower image in the `ny` directory:

![](images/img2.png){fig-align="center" style="box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.3); border-radius: 5px;"}


In theory, you could do this for each state as long as each directory follows the same naming conventions, i.e., `pa/flower.png` and `vt/flower.png`.

This does require an organized and scalable approach since the images will have to follow the same directory and file-naming conventions, but in doing so, you can create individualized pages and images using a single include.

### The rendered example

Here is New York’s page:

![](images/img3.png){fig-align="center" style="box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.3); border-radius: 5px;"}


Here is Pennsylvania’s page:

![](images/img4.png){fig-align="center" style="box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.3); border-radius: 5px;"}

Each page was built using a single (shared) file:

```markdown
{{{< include _snippets/facts.qmd >}}}
```

## Learn more about Quarto Includes

Quarto's Includes feature allows you to improve your content creation process by reducing redundancy and maintaining consistency across multiple documents. Whether you're managing technical documentation, educational materials, or any other content, this approach can help you save time, reduce errors, and deliver polished results.

Learn more with these resources:

* [Get Started - Quarto](/docs/get-started/)
* [Quarto - Includes](/docs/authoring/includes.html)
* [Quarto - meta Variables](/docs/authoring/variables.html#meta)
* An overview of [Single Source Authoring](https://technicalwriterhq.com/writing/technical-writing/single-source-authoring/){.external}
```````

## File: docs/blog/posts/2025-01-15-quarto-tip-brand-positron/index.qmd
```````
---
title: "Tip - use Positron to choose colors for your project brand"
description: |
  Use Positron's integrated color picker for an easy way to choose colors for
  your next project's `_brand.yml`.
categories:
  - Learn
  - Tip
  - brand
author: 
  - Carlos Scheidegger
date: "2025-01-15"
image: brand.png
---

In today's Quarto Tip, we show you how [Positron](https://positron.posit.co)
enables a very easy workflow for creating and changing colors in your `_brand.yml`
file. Quarto 1.6 includes [support for `_brand.yml`](https://posit-dev.github.io/brand-yml/), a
standard for creating a single style configuration file that is usable across formats and
systems.

{{< video https://youtu.be/Mly_DK-2BnI >}}

Additional links:

- [Quarto 1.6 release post](/docs/blog/posts/2024-11-25-1.6-release/index.qmd)
- [Download Positron](https://positron.posit.co/download.html)
- [Quarto's `_brand.yml` documentation](/docs/authoring/brand.qmd)
```````

## File: docs/blog/posts/2025-04-28-1.7-release/index.qmd
```````
---
title: Quarto 1.7 
description: |
  Quarto 1.7 brings big improvements to dark mode along with updates to Typst, Pandoc, a new `version` shortcode, and improvements to the `julia` engine.
categories:
  - Quarto 1.7
  - Releases
author: Charlotte Wickham
date: "2025-04-28"
draft: false
image: thumbnail-1.7.jpeg
image-alt: "Quarto 1.7: half the Quarto logo is light on dark, the other half dark on light"
---

Quarto 1.7 is out! You can get the current release from the [download page](/docs/download/index.qmd).

We are especially enthusiastic about the improvements 1.7 brings to dark mode: you can now specify light and dark themes via brand, map computational outputs to themes, and have your website theme follow your viewer's preference.
To celebrate these changes, this site, [quarto.org](/), now has a light and dark mode.
Toggle the switch in the navigation bar (`<i class="bi bi-toggle-off"></i>`{=html}) to see the difference.

You can read about these improvements and some other highlights below. You can find all the changes in this version in the [Release Notes](/docs/download/changelog/1.7/).

## Dark Mode Improvements

### Specify light and dark themes via **brand.yml**

You can now specify a light and dark brand.
For example, at a project-level you can provide two brand files:

```{.yaml filename="_quarto.yml"}
brand:
  light: light-brand.yml
  dark: dark-brand.yml
```

Standalone HTML pages, websites, and dashboards will gain a light switch toggle allowing viewers to switch between the light and dark themes. 

::: {layout-ncol=2}

![`light` brand](light.png){fig-alt="Screenshot of a webpage with a light blue body and charcoal text. A switch toggle in the navbar is 'off'."}

![`dark` brand](dark.png){fig-alt="Screenshot of a webpage with a dark charcoal body and light blue text. A switch toggle in the navbar is 'on'."}

:::


By default Typst documents will use the light brand, but you can set the `brand-mode` option to use the dark brand instead:

```{.yaml filename="document.qmd"}
---
format:
  typst:
    brand-mode: dark
---
```

Read about other ways to set a light and dark brand in [Guide > Brand](/docs/authoring/brand.qmd#dark-brand).


###  Map computational outputs to themes

A new code cell option, `renderings`, allows you to indicate which computational outputs should be displayed in light and dark mode. 
Create light and dark versions of your outputs in a single code cell, 
and add the option `renderings` to specify the order of the outputs.
For example, this cell creates a `light` version of a plot, 
then a `dark` version:

```{r}
#| echo: fenced
#| renderings: [light, dark]
plot(1:10) # Shown in `light` mode

par(bg = "#000000", fg = "#FFFFFF", col.axis = "#FFFFFF")
plot(1:10) # Shown in `dark` mode
```

Both outputs are produced, but you'll only see the one corresponding to the current state of the light switch.
Toggle the switch in the navigation bar to see the image change to reflect the theme.

### Respect user color scheme

Set the new `html` format option `respect-user-color-scheme` to `true` if you would like your site to honor the viewer’s operating system or browser preference for light or dark mode:

```{.yaml filename="_quarto.yml"}
format:
  html:
    respect-user-color-scheme: true
```

## Other Highlights

-  Typst updated to 0.13.0
-  Pandoc updated to 3.6.3
-  New [`version` shortcode](/docs/authoring/version.qmd) to insert the version of Quarto used to build your document:
   
   ::: {layout-ncol=2 layout-valign="center"}
   
   ```{.markdown shortcodes="false"}
   Rendered with Quarto {{< version >}}
   ```
   ::: {.border .p-1}
   Rendered with Quarto {{< version >}}
   :::

   :::

-  Updated LaTeX and Beamer template partials:

    - [LaTeX partials](/docs/journals/templates.html#latex-partials)
    - [Beamer partials](/docs/journals/templates.html#beamer-partials)

    These changes reflect the updates made in Pandoc 3.5 to separate the LaTeX and Beamer document templates and introduce some additional partials for both. 
    If you have custom formats that provide custom templates or partials, you may need to update them to work with the new partials.   

-  Improvements to the `julia` engine: 
   - [`juliaup` integration](/docs/computations/julia.qmd#juliaup-integration): Use specific versions of Julia in your notebooks.
   
   - [R and Python support](/docs/computations/julia.qmd#r-and-python-support): Include `{r}` and `{python}` executable code cells via the RCall and PythonCall packages.
   
   - [Caching](/docs/computations/julia.qmd#caching-julia): Save time rendering long-running notebooks by caching results.
   
   - [Revise.jl integration](/docs/computations/julia.qmd#revise.jl-integration): Automatically update function definitions in Julia sessions.



## Acknowledgements

We'd like to say a huge thank you to everyone who contributed to this release by opening issues and pull requests:

{{< include _contribs.md >}}
```````

## File: docs/blog/posts/2025-05-19-quarto-codespaces/index.qmd
```````
---
author:
  - name: "Mickaël CANOUIL, _Ph.D._"
    orcid: "0000-0002-3396-4549"
    url: "https://mickael.canouil.fr"
title: "How to use GitHub Codespaces to simplify your Quarto workshops"
description: |
  In this post, I'll teach you the basics of GitHub Codespaces and how to use them to make it easier to teach using Quarto.
date: "2025-05-19"
categories:
  - GitHub Codespaces
  - Teaching
  - Dev Container
image: featured.png
image-alt: |
  Quarto icon and text above GitHub Codespaces.
lang: en-GB
---

## What Is GitHub Codespaces?

[GitHub Codespaces](https://github.com/features/codespaces) is a cloud-powered, on-demand development environment that runs either in your browser or in Visual Studio Code via the [GitHub Codespaces extension](https://marketplace.visualstudio.com/items?itemName=GitHub.codespaces).
It eliminates the need for lengthy local setup by providing a fully configured development container, complete with all necessary dependencies and tools.
This means that whether you're an instructor or a developer, you can start coding immediately with a consistent environment tailored to your specific project, right on your web browser.

More importantly, the participants of your workshops can use GitHub Codespaces just as easily as you can.
With Codespaces, you and your participants all work on identical environments, minimising the "it doesn't work on my machine" problems we are all too aware of.

In this post, I am assuming the case of a workshop instructor and a room full of participants with different laptops and operating systems.
Codespaces are also useful for development, though, as you will notice reading on.

## The Power of Combining Quarto CLI with Codespaces

Imagine a world where your participants are instantly equipped with the same environment with all the tools, libraries, and sample projects ready to go in the cloud.
That's the magic of using Codespaces:

1. **Immediate Onboarding:** Workshop participants or students can bypass the hassle of local setup.
   They simply launch a Codespace (running on their web browser of choice, independently of operating system), and the pre-configured environment is available immediately.

1. **A Consistent Environment:** Ensuring that everyone has the same tools and dependencies can be challenging.
   Codespaces lets you pre-define your environment with container configurations, reducing the risk of discrepancies in software versions or settings.

2. **Reproducible Workflows:** Whether you're teaching a data science workshop or collaborating on a research paper, reproducibility is crucial.
   Because GitHub Codespaces uses the [Dev Container specification](https://containers.dev/), you can ensure that your code can be run in the same environment.
   When participants are ready to run their projects locally, they can use Codespace to build an equivalent Docker container.

GitHub provides ["deep link"](https://docs.github.com/en/codespaces/setting-up-your-project-for-codespaces/setting-up-your-repository/facilitating-quick-creation-and-resumption-of-codespaces) to Codespaces, allowing you to create a link you can share with your students or workshop participants.

For example, the [`quarto-codespaces` repository](https://github.com/mcanouil/quarto-codespaces) provides several Dev Container / Codespaces configurations.
The following link will create a new Codespace using the `.devcontainer/universal/devcontainer.json` configuration file instead of the default `.devcontainer/devcontainer.json` file.

:::: {style="text-align: center;"}
[![](https://github.com/codespaces/badge.svg)](https://codespaces.new/mcanouil/quarto-codespaces?quickstart=1&devcontainer_path=.devcontainer%2Funiversal%2Fdevcontainer.json)
:::

```markdown
[![Open in GitHub Codespaces](https://github.com/codespaces/badge.svg)](https://codespaces.new/mcanouil/quarto-codespaces?quickstart=1&devcontainer_path=.devcontainer%2Funiversal%2Fdevcontainer.json)
```

The link can include a specific branch, a particular file, or even a specific line in a file, allowing you to guide participants directly to the relevant content and setup.
By doing nothing more than clicking that one link, participants create or resume an existing execution environment.

:::: {.dark-content}
:::: {layout-ncol="2"}
![](quarto-codespaces-new-001-dark.png){.lightbox group="codespaces-dark" fig-alt="GitHub Codespaces interface showing the 'Create codespace' page. The page includes a section with the repository 'mcanouil/quarto-codespaces' and a message stating 'No codespace to resume'. There are two buttons: 'Change options' and 'Create new codespace'."}

![](quarto-codespaces-new-002-dark.png){.lightbox group="codespaces-dark" fig-alt="image_url" alt="Screenshot of Visual Studio Code interface showing a GitHub Codespace for a project named 'quarto-codespaces'. The left sidebar contains a file explorer with folders and files such as .devcontainer, .github, init-env.sh, LICENSE, and README.md. The terminal at the bottom displays logs related to configuring the codespace, including commands and their outcomes. The right sidebar has a section titled 'Edit with Copilot' explaining how to use Copilot in agent mode."}
:::
:::

:::: {.light-content}

:::: {layout-ncol="2"}
![](quarto-codespaces-new-001-light.png){.lightbox group="codespaces-light" fig-alt="GitHub Codespaces interface showing the 'Create codespace' page. The page includes a section with the repository 'mcanouil/quarto-codespaces' and a message stating 'No codespace to resume'. There are two buttons: 'Change options' and 'Create new codespace'."}

![](quarto-codespaces-new-002-light.png){.lightbox group="codespaces-light" fig-alt="image_url" alt="Screenshot of Visual Studio Code interface showing a GitHub Codespace for a project named 'quarto-codespaces'. The left sidebar contains a file explorer with folders and files such as .devcontainer, .github, init-env.sh, LICENSE, and README.md. The terminal at the bottom displays logs related to configuring the codespace, including commands and their outcomes. The right sidebar has a section titled 'Edit with Copilot' explaining how to use Copilot in agent mode."}
:::
:::

## Setting Up Your Own Quarto-Codespaces Environment

If you're considering using Codespaces with Quarto CLI for your next workshop or teaching module, here's how to get started:

Leverage the example provided by the [`quarto-codespaces` repository](https://github.com/mcanouil/quarto-codespaces) or [create your own Codespaces using the default](https://github.com/codespaces/new/).

### Use an Existing Docker Image {#use-existing-docker-image}

The easiest way to get started is to use an existing Docker image that has Quarto CLI and all the dependencies you need.
There are several pre-built images available with or without the Quarto CLI:

- Official Docker images:
  - [`ghcr.io/quarto-dev/quarto`](https://github.com/quarto-dev/quarto-cli/pkgs/container/quarto)
  - [`ghcr.io/quarto-dev/quarto-full`](https://github.com/quarto-dev/quarto-cli/pkgs/container/quarto-full)
- Community Docker images:
  - [`ghcr.io/mcanouil/quarto-codespaces`](https://github.com/mcanouil/quarto-codespaces/pkgs/container/quarto-codespaces)
- Default Codespaces image:
  - [`mcr.microsoft.com/devcontainers/universal`](https://github.com/devcontainers/images/tree/main/src/universal)

You can use any of these images as a base for your Codespace.
Inside the `.devcontainer/devcontainer.json` file, you can specify the image you want to use.
The `.devcontainer/devcontainer.json` file serves as the blueprint for your Codespace.

```json
{
  "name": "My Workshop Setup",
  "image": "ghcr.io/mcanouil/quarto-codespaces:latest", // <1>
  "remoteUser": "vscode",
  "customizations": {
    "vscode": {
      "extensions": [
        "quarto.quarto", // <2>
        "mcanouil.quarto-wizard" // <3>
      ]
    },
    "codespaces": {
      "openFiles": [ // <4>
        "exercises/intro-to-quarto.qmd",
        "exercises/computation.qmd"
      ]
    }
  }
}
```

1. The Docker image is specified in the `image` field.
   It's built using a Dev Container specification that you can find in [`.github/.devcontainer`](https://github.com/mcanouil/quarto-codespaces/tree/main/.github/.devcontainer).
2. The [`quarto` extension](https://github.com/quarto-dev/quarto) for Visual Studio Code / Positron to provide support for Quarto documents.
3. The [`quarto-wizard` extension](https://github.com/mcanouil/quarto-wizard) for Visual Studio Code / Positron to provide assistance in managing Quarto extensions
4. The `openFiles` field specifies the files to open when the Codespace is created.
   This is useful for guiding participants to the right files or folders.
   See the [Codespaces documentation](https://docs.github.com/en/codespaces/setting-up-your-project-for-codespaces/configuring-dev-containers/automatically-opening-files-in-the-codespaces-for-a-repository) for more information.

### Configure the Development Container

You can fork the [`quarto-codespaces` repository](https://github.com/mcanouil/quarto-codespaces) as a starting point for your own Codespaces.
This repository includes the Dev Container configuration file (*i.e.*, `.devcontainer/devcontainer.json`) that instruct Codespaces on how to set up an environment complete with Quarto CLI and other essential tools.

The `.devcontainer/devcontainer.json` configuration file ensures that every instance of your Codespace is identical, capturing everything from the Quarto CLI version to additional libraries or extensions you might need.

The [`quarto-codespaces` repository](https://github.com/mcanouil/quarto-codespaces) is a great starting point as it provides a prebuilt Docker image with the latest Quarto CLI, Python, R, and Julia installed (*i.e.*, [`ghcr.io/mcanouil/quarto-codespaces`](https://github.com/mcanouil/quarto-codespaces/pkgs/container/quarto-codespaces) using [`.github/.devcontainer/devcontainer.json`](https://github.com/mcanouil/quarto-codespaces/tree/main/.github/.devcontainer)).

```json
{
  "name": "Quarto",
  // "image": "buildpack-deps:jammy-curl", // <1>
  "build": {
    "dockerfile": "./Dockerfile",
    "context": ".",
    "args": {
      "VARIANT": "jammy"
    }
  },
  "remoteUser": "vscode",
  "features": { // <2>
    "./quarto-computing-dependencies": { // <3>
      "rDeps": "rmarkdown,languageserver,nx10/httpgd@v2.0.3,prompt,lintr",
      "pythonDeps": "jupyter,papermill",
      "juliaDeps": "IJulia"
    },
    "./uv": { // <4>
      "version": "latest"
    },
    "ghcr.io/rocker-org/devcontainer-features/quarto-cli:1": { // <5>
      "version": "release",
      "installTinyTex": "true",
      "installChromium": "false"
    }
  },
  "customizations": { // <6>
    "vscode": {
      "extensions": [
        "quarto.quarto",
        "mcanouil.quarto-wizard",
        "REditorSupport.r",
        "Posit.air-vscode"
      ],
      "settings": {
        "r.rterm.option": [
          "--no-save",
          "--no-restore-data",
          "--quiet"
        ],
        "[r]": {
          "editor.defaultFormatter": "Posit.air-vscode",
          "editor.formatOnSave": true
        }
      }
    }
  }
}
```

1. The `image` field specifies the base image for the container.
   You can customise this to suit your needs.
2. The `features` section allows you to add additional tools or libraries.
   See the [Dev Container Features available](https://containers.dev/features/) for a comprehensive list of available features.
3. The `quarto-computing-dependencies` feature is a "local" custom feature that installs the computing dependencies: R, Python, and Julia.
   This is a great way to ensure that your Codespace has everything it needs to run Quarto documents.
4. The `uv` feature installs the [`uv` tool](https://docs.astral.sh/uv/) to manage Python packages and project dependencies.
5. The `quarto-cli` feature installs the Quarto CLI.
   You can specify the version you want to install, and it will be automatically downloaded and installed in your Codespace.
   You can see the code for this feature in the source repository: <https://github.com/rocker-org/devcontainer-features/tree/main/src/quarto-cli>.
6. The `customizations` section allows you to specify settings and extensions for Visual Studio Code.

You can also add additional features to the `devcontainer.json` to suit your needs or start directly using the image as is as shown in [Use an Existing Docker Image](#use-existing-docker-image).

For example, you might want to add additional R packages or Python libraries.
You can do this by using the `quarto-computing-dependencies` custom feature and changing the `rDeps`, `pythonDeps`, and `juliaDeps` fields to include the packages you want to install globally, or by using the `postStartCommand` field to run a script that installs the packages you need.

```json
{
  "name": "My Workshop Setup",
  "image": "ghcr.io/mcanouil/quarto-codespaces:latest",
  "remoteUser": "vscode",
  "postStartCommand": "uv venv && source .venv/bin/activate && uv pip install -r requirements.txt"
}
```

You can also use the `postStartCommand` field to run a script that installs the packages you need.

```json
{
  "name": "My Workshop Setup",
  "image": "ghcr.io/mcanouil/quarto-codespaces:latest",
  "remoteUser": "vscode",
  "postStartCommand": "bash ./init-env.sh --what all --force" // <1>
}
```

1. The `postStartCommand` field specifies a command to run after the Codespace is started.
   In this case, it runs the [`init-env.sh` script](https://github.com/mcanouil/quarto-codespaces/blob/main/init-env.sh) from [`quarto-codespaces` repository](https://github.com/mcanouil/quarto-codespaces) with the `--what all` and `--force` options.

## Benefits for Workshops and Teaching

When it comes to educational sessions, consistency and ease-of-use are paramount.
Pairing Codespaces with Quarto CLI brings many direct benefits to a teaching environment:

- **Streamlined Onboarding:** Students and workshop attendees can get right to work without spending time installing and configuring local environments.
- **Live, Interactive Sessions:** Instructors can demonstrate live edits to Quarto documents.
  Changes can be rendered instantly and reflect in each participant's environment: perfect for a hands-on, interactive learning experience.
- **Collaboration and Version Control:** All changes can be recorded in Git, making it easy to track progress, handle peer reviews, and manage collaborative projects, all within a single hosted environment.
- **Elimination of "Dependency Hell":** With containerised development, all attendees work from the same baseline, ensuring that version conflicts or missing libraries don't derail a session.

## Final Thoughts and Future Directions

Whether you're running a workshop, teaching a class, or collaborating on research, using Codespaces can reduce setup hassles, foster reproducibility, and encourage interactive learning.

In addition to the benefits mentioned above, other features further enhance your experience with Codespaces and Quarto CLI:

- **Automated Pipelines:** Integrating CI/CD tools to automatically validate Quarto document renders and catch errors using the exact same environment.
  See [GitHub Actions: Running jobs in a container](https://docs.github.com/en/actions/writing-workflows/choosing-where-your-workflow-runs/running-jobs-in-a-container)
- **Real-Time Co-Editing Features:** Enhancing collaborative sessions with simultaneous multi-user editing directly in Codespaces.
  See [GitHub Codespaces: Real-time collaboration](https://docs.github.com/en/codespaces/developing-in-a-codespace/working-collaboratively-in-a-codespace)

This post covered the basics of using Codespaces and Quarto together, but there's much more to Codespaces.
Learn more by [consulting their documentation](https://docs.github.com/en/codespaces).

Happy teaching!

## Disclaimer {.appendix .unnumbered}

GitHub Codespaces is a product of GitHub, Inc. and comes with a quota of free usage, including CPU hours and storage.
Be sure to check the [GitHub Codespaces billing documentation](https://docs.github.com/en/billing/managing-billing-for-your-products/managing-billing-for-github-codespaces/about-billing-for-github-codespaces) and your current GitHub plan to avoid unexpected charges.
If you are a student or an educator, you can explore the [GitHub Education program](https://education.github.com/pack) and [GitHub Classroom](https://docs.github.com/en/education/manage-coursework-with-github-classroom/integrate-github-classroom-with-an-ide/using-github-codespaces-with-github-classroom).

## Acknowledgements {.appendix .unnumbered}

Thanks to [Carlos Scheidegger](https://github.com/cscheid), [Julia Silge](https://github.com/juliasilge), and [James J. Balamuta](https://github.com/coatless) for their feedback and suggestions on this post.
```````

## File: docs/blog/posts/2025-xx-xx-1.7-release/index.qmd
```````
---
title: Quarto 1.6 
description: |
  Quarto 1.7 ...
categories:
  - Quarto 1.7
  - Releases
author: Charlotte Wickham
date: "xx/xx/2025"
draft: true
# image: 
# image-alt: 
---

Quarto 1.7 has been officially released! You can get the current release from the [download page](/docs/download/index.qmd)

You can read about these new features and a couple of breaking changes in the sections below. You can find all the changes in this version in the [Release Notes](/docs/download/changelog/1.7/).


## Acknowledgements

We'd like to say a huge thank you to everyone who contributed to this release by opening issues and pull requests:

{{< include _contribs.md >}}
```````

## File: docs/blog/posts/_quarto-1.3-feature.qmd
```````
::: callout-note
## Quarto 1.3 Feature

This post is part of a series highlighting new features in the 1.3 release of Quarto. Get the latest release the [download page](/docs/download/index.qmd)
:::
```````

## File: docs/blog/index.qmd
```````
---
title: Quarto Blog
subtitle: News, tips, and commentary about all things Quarto
listing:
  sort: "date desc"
  contents: "posts/*/index.qmd"
  sort-ui: false
  filter-ui: false
  categories: true
  feed: true
page-layout: full
margin-header: signup.html
title-block-banner: true
search: false
image: quarto-blog-v2.png
---
```````

## File: docs/books/_book-vs-website-key.qmd
```````
One important thing to note about using website tools is that while these tools are added to websites within the `website` key, in a book you should include the same options in the `book` key. For example, in a website you would include a favicon and twitter card as follows:

```yaml
website:
  favicon: logo.png
  twitter-card: true
  site-url: https://example.com
```

In a book you'd use the `book` key instead:

```yaml
book:
  favicon: logo.png
  twitter-card: true
  site-url: https://example.com
```
```````

## File: docs/books/book-basics.qmd
```````
---
title: "Creating a Book"
format:
  html:
    output-file: index.html
---

## Overview

Quarto Books are combinations of multiple documents (chapters) into a single manuscript. Books can be created in a variety of formats:

-   HTML
-   PDF
-   MS Word
-   EPUB
-   AsciiDoc

HTML books are actually just a special type of [Quarto Website](/docs/websites/website-basics.qmd) and consequently support all of the same features as websites including full-text search. The most important difference is that HTML books use chapter numbers and therefore support [Cross References](/docs/authoring/cross-references.qmd) between different chapters.

Here are some examples of books created with Quarto:

| Book                                                                             | Source                                                        |
|----------------------------------------|-------------------------------|
| [R for Data Science](https://r4ds.hadley.nz)                                     | [Code](https://github.com/hadley/r4ds/)                       |
| [Python for Data Analysis](https://wesmckinney.com/book/)                        | [Code](https://github.com/wesm/pydata-book/tree/3rd-edition)  |
| [Visualization Curriculum](https://jjallaire.github.io/visualization-curriculum) | [Code](https://github.com/jjallaire/visualization-curriculum) |

Quarto books can be published to a wide variety of destinations including GitHub Pages, Netlify, RStudio Connect, or any other static hosting service or intranet web server. See the documentation on [Publishing Websites](/docs/publishing/index.qmd) for additional details.


## Quick Start

Follow the Quick Start for your tool of choice to get a simple book up and running. After covering the basics, read on to learn about more advanced book features.

::: {.panel-tabset group="tools-tabset"}

### VS Code

To create a new book project within VS Code, execute the **Quarto: Create Project** command from the command-palette:

![](/docs/websites/images/vscode-create-project-command.png)

Then, select **Book Project**:

![](/docs/websites/images/vscode-create-project-book.png){.border}

You'll be prompted to select a parent directory to create the project within. Then, you'll be asked to name the directory for your book project:

![](/docs/websites/images/vscode-create-project-directory.png){.border}

The new book project will be created and opened within VS Code. Click the **Preview** button (![](/docs/tools/images/vscode-preview-icon.svg){fig-alt="Preview icon"}) to preview the book:

![](/docs/websites/images/vscode-create-project-render-book.png)

The preview will show to the right of the source file. As you re-render `index.qmd` or render other files like `intro.qmd`, the preview is automatically updated.


### RStudio

To create a new book project within RStudio, use the **New Project** command and select **Quarto Book**:

:::{layout-ncol="2"}

![](/docs/websites/images/rstudio-project-new-directory.png){.border}

![](/docs/websites/images/rstudio-project-book.png){.border}
:::

Then, provide a directory name and other relevant options for the book:

![](/docs/websites/images/rstudio-project-book-options.png){.border}

Click the **Render** button to preview the book:

![](/docs/websites/images/rstudio-project-book-preview.png)

The preview will show to the right of the source file. As you re-render `index.qmd` or render other files like `intro.qmd`, the preview is automatically updated.


### Terminal

To create a new book project from the Terminal, use the `quarto create project` command, following the prompt to select the type and to provide a name for the project (will be used as the directory name):

```{.bash filename="Terminal"}
quarto create project book mybook
```

This will create the scaffolding for a simple book in the `mybook` sub-directory. Use the `quarto preview` command to render and preview the book:

```{.bash filename="Terminal"}
quarto preview mybook
```

The book preview will open in a new web browser. As you edit and save `index.qmd` (or other files like `intro.qmd`) the preview is automatically updated.

:::


## Workflow

Above we demonstrated how to create and edit a simple book with chapters contained in the files `index.qmd`, `intro.qmd`, `summary.qmd`. Here we'll cover additional aspects of book workflow in more depth.

### Config File

A Quarto project file (`_quarto.yml`) is contained within the book project directory. This file contains the initial configuration for your book. For example:

``` yaml
project:
  type: book

book:
  title: "mybook"
  author: "Jane Doe"
  date: "8/18/2021"
  chapters:
    - index.qmd
    - intro.qmd
    - summary.qmd
    - references.qmd

bibliography: references.bib

format:
  html:
    theme: cosmo
  pdf:
    documentclass: scrreprt
  epub:
    cover-image: cover.png
```



See the [Project Basics](/docs/projects/quarto-projects.qmd) article to learn more about working with projects, including how to add custom pre and post render scripts to your book.

### Book Preview

If you are using VS Code or RStudio, the **Preview** button (VS Code), or **Render** button (RStudio), automatically renders and runs `quarto preview` in an embedded window. You can also do the same thing from the Terminal if need be:

``` {.bash filename="Terminal"}
# preview the book in the current directory
quarto preview
```

Note that when you preview a book (either using VS Code / RStudio integrated tools or from the terminal)  changes to configuration files (e.g. `_quarto.yml`) as well as book resources (e.g. theme or CSS files) will cause an automatic refresh of the preview.

You can customize the behavior of the preview server (port, whether it opens a browser, etc.) using command line options or the `_quarto.yml` config file. See `quarto preview help` or the [project file reference](/docs/reference/projects/options.qmd#preview) for additional details.


::: callout-important
As you preview your book, chapters will be rendered and updated. However, if you make changes to global options (e.g. `_quarto.yml` or included files) you need to fully re-render your book to have all of the changes reflected. Consequently, you should always fully `quarto render` your site before deploying it, even if you have already previewed changes to some pages with the preview server.
:::

For AsciiDoc Books we recommend using the HTML format to preview your book, read more in [AsciiDoc Books](#asciidoc-books).

### Publishing

When you are ready to publish the book, use the `render` command to render all output formats:

``` {.bash filename="Terminal"}
quarto render
```

If you pass no arguments to `quarto render`, all formats will be rendered. You can also render individual formats via the `--to` argument:

``` {.bash filename="Terminal"}
quarto render           # render all formats
quarto render --to pdf  # render PDF format only
```

The output of your book will be written to the `_book` sub-directory of your book project:

``` {.bash filename="Terminal"}
mybook/
  _book/
    index.html # and other book files
    mybook.pdf
    mybook.epub
```

See the documentation on [Publishing Websites](/docs/publishing/index.qmd) for details on how to publish books to GitHub Pages, Netlify, and other services. Note that in that documentation the `output-dir` may be referred to as `_site`: for publishing books you should use `_book` rather than `_site`.

### AsciiDoc Books {#asciidoc-books}

For AsciiDoc books, we recommend that while you are working on your book, you preview your content using Quarto's built in HTML format, which allows an iterative workflow using the preview capabilities of Quarto. Once you're ready to produce AsciiDoc, you can use the AsciiDoctor tools to compile your book to PDF or HTML output to preview the content in its final rendered form.

#### Previewing PDF with Asciidoctor-pdf

Creating a PDF preview with the AsciiDoc toolchain is a useful way to verify that the AsciiDoc output of your book can be rendered properly. To do this, follow these instructions:

1.  First, install Asciidoctor PDF by following the instructions here: <https://docs.asciidoctor.org/pdf-converter/latest/install/>

2.  From the terminal in the root of your project, use the following command to compile your AsciiDoc book to a PDF:
      
    ``` bash
    $  asciidoctor-pdf _book/book-asciidoc/<title>.adoc
    ```

3.  The PDF will be placed at `_book/book-asciidoc/<title>.pdf`.

#### Previewing HTML with Asciidoctor

Creating an HTML preview with the AsciiDoc toolchain is a useful way to verify that the AsciiDoc output of your book can be rendered properly. To do this, follow these instructions:

1.  First, install Asciidoctor by following the instructions here: <https://docs.asciidoctor.org/asciidoctor/latest/install/>

2.  From the terminal in the root of your project, use the following command to compile your AsciiDoc book to HTML:
    
    ``` bash
    $  asciidoctor _book/book-asciidoc/<title>.adoc
    ```

3.  A single HTML file (with the entire contents of the book) will be placed at `_book/book-asciidoc/<title>.html`. The HTML file will contain references to files and images in the `_book/book-asciidoc/` folder, so the HTML will not display these properly if it is moved without also moving those folders.

## Learning More

Once you've got the basic book template up and running check out these articles for various ways to enhance your book:

- [Book Structure](book-structure.qmd) delves into different ways to structure a book (numbered and unnumbered chapters/sections, creating multiple parts, adding appendices, etc.)

- [Book Crossrefs](book-crossrefs.qmd) explains how to create cross references to sections, figures, tables, equations and more within books.

- [Book Output](book-output.qmd) covers customizing the style and appearance of your book in the various output formats as well as how to provide navigation and other tools for readers.

- [Book Options](/docs/reference/projects/books.qmd) provides a comprehensive reference to all of the available book options.

- [Code Execution](/docs/projects/code-execution.qmd) provides tips for optimizing the rendering of books with large numbers of documents or expensive computations.

- [Publishing Websites](/docs/publishing/index.qmd) enumerates the various options for publishing your book as a website including GitHub Pages, Netlify, and RStudio Connect.
```````

## File: docs/books/book-crossrefs.qmd
```````
---
title: "Book Crossrefs"
---

## Overview

One important difference between creating a website and a book is that in addition to their web output, books can also be rendered as a single continuous document (e.g a PDF or MS Word document). Books also may or may not be read digitally (which means that internal hyperlinks may or may not be available).

To create books that are consumable in all of these mediums, special care should be taken when creating links to other chapters or sections within chapters (note though that if your book targets *only* HTML output you can feel free to use conventional hyperlinks).

Quarto cross references provide automatic numbering and reference creation for figures, tables, equations, sections, listings, theorems, and proofs. In books, cross references work the same way except they can reach across chapters.

If you aren't already familiar with using crossrefs you may want to read the documentation on [cross references](/docs/authoring/cross-references.qmd) before reading on about how they work with books.

## Creating References

To reference a figure, table, or other cross-referenceable entity, use the `@` syntax (similar to citations) along with the ID / label of the entity you are referencing: For example:

``` markdown
See @fig-penginus-by-island for a breakdown by island.
```

References made this way will be automatically resolved across chapters (including the requisite chapter number in the reference).

To make a chapter or section reference-able, you add a `#sec` prefix to its main heading. For example:

``` markdown
# Introduction {#sec-introduction}
```

::: callout-important
## Label Prefix

In order for a chapter to be cross-referenceable, its label must start with the `sec-` prefix.
:::


To refer to a section, include a cross-reference to it using an `@` identifier as we did above in the figure example:

``` markdown
See @sec-introduction for additional discussion.
```

Which, for example, will render as:

> See [Chapter 1](#) for additional discussion.

The appropriate prefix, "Chapter" or "Section", will be added to the reference based on the level of the heading.
To suppress the prefix, use bracket syntax and prepend `-` before `@`. For example, `[-@sec-introduction]` will produce just "1" without the "Chapter" prefix.

To provide a custom prefix, e.g. "Chapter" for a section heading, spell out the prefix in the bracket syntax. For example:

``` markdown
See [Chapter @sec-visualization] for more details on visualizing model diagnostics.
```

Which might render as:

> See [Chapter 1.2](#) for more details on visualizing model diagnostics.

## Section Numbers

By default, all headings in your document create a numbered section. You customize numbering depth using the `number-depth` option. For example, to only number sections immediately below the chapter level, use this:

``` yaml
number-depth: 2
```

Note that `toc-depth` is independent of `number-depth` (i.e. you can have unnumbered entries in the TOC if they are masked out from numbering by `number-depth`).

## Chapter Numbering

In books, figures, tables and other cross-reference targets automatically include a chapter number. For example, the following markdown located in Chapter 3 of your book:

``` markdown
As illustrated in @fig-geo-comparison, the western states have a much higher incidence of forest fires.
```

Might be rendered as:

> As illustrated in [fig. 3.2](#), the western states have a much higher incidence of forest fires.

Note that while books do support unnumbered chapters, you naturally cannot create cross-references to content in chapters without numbers.

## Hyperlinks

If you are creating an HTML-only book (or a PDF / MS Word book that you don't expect will be printed) then you can feel free to use normal hyperlinks rather than section cross-references.

To create a hyperlink within a book, provide the source file as the link target. You can also add hash identifiers (`#`) to the source file if you want to link to a particular section in the document. For example:

``` markdown
[about](about.qmd)
[about](about.qmd#section)
```

Using the source file as the link target ensures that links will be resolved correctly both for HTML output and for formats that produce a single file (e.g. PDF or MS Word).

Note that if you are targeting printed output for your book you should use explicit cross references to other chapters and sections rather than simple links as shown above. This is because In printed output links aren't navigable so you need to provide readers with numbered references (e.g. "sec. 5.3") rather than hyperlinks.
```````

## File: docs/books/book-output.qmd
```````
---
title: "Customizing Book Output"
format: html
project-type: book
---

This article covers customizing the output of book projects, including how to tailor the styles and appearance of books in each supported output format.

## Format Options

If you want to specify rendering options (including format-specific options), you do it within the `_quarto.yml` project file rather than within the individual markdown documents. This is because when rendering a book all of the chapters are combined together into a single document (with a single set of format options).

Here's an example configuration:

``` yaml
highlight-style: pygments

format:
  html:
    theme: cosmo
    code-copy: true
  pdf: default
    
bibliography: references.bib
csl: citestyle.csl
```

Note that in the above configuration the `highlight-style` option applies to all formats whereas the `html` options apply to only HTML output. The bibliography related options naturally also apply to all formats.

## Reader Tools

### Website Tools

HTML books are at their core [Quarto Websites](/docs/websites/website-basics.qmd) with some special navigational behavior built in. This means that all of the features described for enhancing websites are also available for books, including:

-   [Navbars](/docs/websites/website-navigation.qmd#top-navigation)
-   [Social Metadata](/docs/websites/website-tools.qmd#social-metadata)
-   [Full Text Search](/docs/websites/website-search.qmd)
-   [Google Analytics](/docs/websites/website-tools.qmd#google-analytics)
-   [Headers and Footers](/docs/websites/website-tools.qmd#headers-footers)
-   [Dark Mode](/docs/websites/website-tools.qmd#dark-mode)

{{< include _book-vs-website-key.qmd >}}



### Sidebar Tools

Books automatically include a navigational sidebar that can optionally include tools for searching book contents, sharing links to the book, etc. Here is an example `_quarto.yml` file that enables these options:

``` yaml
book:
  title: "Hands-On Programming with R"
  author: "Garrett Grolemund"
  search: true
  repo-url: https://github.com/jjallaire/hopr/
  repo-actions: [edit]
  downloads: [pdf, epub]
  sharing: [twitter, facebook]
  
comments:
  hypothesis: true
```

Note the various tools that now appear:

![](images/book-tools.png){.border .preview-image fig-alt="A screen shot of a Quarto page rendered with the options indicated in the immediately preceding yaml. There are icons for accessing the page's Github repo, downloading the page as a PDF, and sharing the page on social media in the top section of the sidebar. Immediately below this in the sidebar is a search bar. There are icons for the Hypothesis collaborative annotation software in the upper right hand corner of the page. There is an 'Edit this Page' link underneath the page table of contents on the right; there is a Github icon to the left of the word 'Edit.'"}

-   The search box enables full text search of the entire book

-   The buttons immediately below the book title in the sidebar provide a link to the GitHub repo for the book, downloads for PDF and ePub versions of the book, and links for sharing the book on Twitter and Facebook.

-   Immediately below the table of contents on the right there is an "Edit this page" link that takes the reader to the edit interface on GitHub for the current chapter. Note that in this example we specify `repo-actions: [edit]`. You can optionally also add `issue` and `source` actions (e.g. `repo-actions: [edit, issue, source]`). There are additional options available (`repo-subdir` and `repo-branch`) for [customizing repository links](/docs/websites/website-navigation.qmd#github-links).

-   The [Hypothesis](https://web.hypothes.is/) commenting bar appears on the far right of the page. Note that [commenting](/docs/output-formats/html-basics.qmd#commenting) is a feature available for all Quarto HTML output so appears in its own YAML key.

#### Sidebar Options

Note that books utilize the standard sidebar component from [Quarto Websites](/docs/websites/website-basics.qmd). This means that you can use any of the available [sidebar options](/docs/websites/website-navigation.qmd#side-navigation) within your `book` configuration. For example, here we specify a docked sidebar with a light background:

``` yaml
book:
  title: "Hands-On Programming with R"
  author: "Garrett Grolemund"
  sidebar:
    style: docked
    background: light
```

## Cover Images

You can provide a cover image for EPUB and/or HTML formats using the `cover-image` option. For example:

``` yaml
book:
  cover-image: cover.png
```

You can also do this on a per-format basis (if for example you want to provide a higher resolution image for EPUB and a lower resolution image for HTML to reduce download time). For example:

``` yaml
format:
   html: 
     cover-image: cover.png
   epub:
     cover-image: cover-highres.png
```

You can specify HTML alt-text for book cover images using the `cover-image-alt` option:

``` yaml
book:
  cover-image: cover.png
  cover-image-alt: |
    Alternative text describing the book cover 
```

## Output Path

By default, book output is written to the `_book` directory of your project. You can change this via the `output-dir` project option. For example:

``` yaml
project:
  type: book
  output-dir: docs
```

Single file outputs like PDF, EPUB, etc. are also written to the `output-dir`. Their file name is derived from the book `title`. You can change this via the `output-file` option:

``` yaml
book:
  title: "My Book"
  output-file: "my-book"
```

Note that the `output-file` should *not* have a file extension (that will be provided automatically as appropriate for each format).

## LaTeX Output

In some cases you'll want to do customization of the LaTeX output before creating the final printed manuscript (e.g. to affect how text flows between pages or within and around figures). The best way to approach this is to develop your book all the way to completion, then render to the `latex` format

``` {.bash filename="Terminal"}
quarto render --to latex
```

The complete LaTeX source code of your book will be output into the `_book/book-latex` directory.  

At this point you should probably make a copy or git branch of the `_book` directory to perform your final LaTeX modifications within (since the modifications you make to LaTeX will not be preserved in your markdown source, and will therefore be overwritten the next time you render).

## HTML Styles

HTML output can be customized either by adding (or enhancing) a custom theme, or by providing an ordinary CSS file. Use the `theme` option to specify a theme:

``` yaml
format:
  html:
    theme: cosmo
```

To further customize a theme add a custom theme file:

``` yaml
format:
  html:
    theme: [cosmo, theme.scss]
```

You can learn more about creating theme files in the documentation on [HTML Themes](/docs/output-formats/html-themes.qmd).

You can also just use plain CSS. For example:

``` yaml
format:
  html:
    css: styles.css
```

## EPUB Styles

You can also use CSS to customize EPUB output:

``` yaml
format:
  epub:
    css: epub-styles.css
    epub-cover-image: epub-cover.png
```

Note that we also specify a cover image. To learn more about other EPUB options, see the Pandoc [documentation on EPUBs](https://pandoc.org/MANUAL.html#epubs).

## PDF Styles

You can include additional LaTeX directives in the preamble of your book using the `include-in-header` option. You can also add `documentclass` and other options (see the Pandoc documentation on [LaTeX options](https://pandoc.org/MANUAL.html#variables-for-latex) for additional details). For example:

``` yaml
format:
  pdf: 
    documentclass: scrbook
    include-in-header: preamble.tex
    fontfamily: libertinus
```

Quarto uses the [KOMA Script](https://ctan.org/pkg/koma-script) `scrreprt` document class by default for PDF books. KOMA-Script classes are drop-in replacements for the standard classes with an emphasis on typography and versatility.

You can switch to KOMA `scrbook` as demonstrated above, or to the standard LaTeX `book` and `report` classes. You can find a summary of the differences between `book` and `report` here: <https://tex.stackexchange.com/questions/36988>

## MS Word Styles

You can customize MS Word output by creating a new [reference doc](https://pandoc.org/MANUAL.html#option--reference-doc), and then applying it to your book as follows:

``` yaml
format:
  docx:
    reference-doc: custom-reference.docx
```

Learn more about creating and customizing a reference document in the documentation on [Word templates](/docs/output-formats/ms-word-templates.qmd).
```````

## File: docs/books/book-structure.qmd
```````
---
title: "Book Structure"
format: html
project-type: book
---

## Overview

The structure of a Quarto book can be as simple as a list of chapters, or can alternatively incorporate multiple parts and/or appendices. Quarto book chapters and sections are automatically numbered (for cross-referencing), however you can also specify that some parts of the book should remain unnumbered.

The simple book configuration generated by `quarto create project book` illustrates the basics. 
Book properties like the title, author and chapter structure are listed under `book`:

``` {.yaml filename="_quarto.yml"}
book:
  title: "mybook"
  author: "Jane Doe"
  date: "5/9/2021"
  chapters:
    - index.qmd
    - intro.qmd
    - summary.qmd
    - references.qmd
```

-   The `index.qmd` file is required (because Quarto books also produce a website in HTML format). This page should include the preface, acknowledgements, etc. The HTML version of the book will use the `index.qmd` as the home page and if provided, will place the `cover-image` on that page.
-   The remainder of `chapters` includes one or more book chapters.
-   The `references.qmd` file will include the generated bibliography (see [References] below for details).

Rendering options that should apply to all chapters and all formats are listed at the top-level of `_quarto.yml`(i.e. not nested under `book`):

``` {.yaml filename="_quarto.yml"}
bibliography: references.bib
```

Rendering options that should apply to all chapters for specific formats are listed under `format`:

``` {.yaml filename="_quarto.yml"}
format:
  html:
    theme: cosmo
  pdf:
    documentclass: scrreprt
```

## Titles

Since rendering options are provided in `_quarto.yml`, you'll typically see a simple level-one heading at the top of chapters. For example:

``` {.markdown filename="intro.qmd"}
# Introduction
```

Note that the following is also still perfectly valid:

```{.yaml filename="intro.qmd"}
---
title: "Introduction"
---
```

In the absence of a level-one heading or a title set in the YAML front matter, the first heading in the page will be used as the title.

## Chapter Numbers

All chapters are numbered by default. If you want a chapter to be unnumbered simply add the `.unnumbered` class to its main heading. For example, it is common to omit the chapter number for `index.qmd`:

```{.markdown filename="index.qmd"}
# Preface {.unnumbered}
```

You can mix together numbered and unnumbered chapters. Note however that while you can link to unnumbered chapters, you can't [cross reference](/docs/authoring/cross-references.qmd) figures, tables, etc. within them. Unnumbered chapters are therefore mostly useful for prefatory content or references at the end of your book.

## Section Numbers

You can set the numbering depth via the `number-depth` option. For example, to only number sections immediately below the chapter level, use this:

```{.yaml filename="_quarto.yml"}
number-depth: 1
```

Note that `number-depth` is a format option, not a `book` option so it is placed at the top-level of `_quarto.yml`, not nested under `book`. 
If you want `number-depth` to only apply to a certain format, nest it under `format`:

```{.yaml filename="_quarto.yml"}
format:
  pdf:
    number-depth: 1
```

The `toc-depth` option is independent of `number-depth` (i.e. you can have unnumbered entries in the TOC if they are masked out from numbering by `number-depth`).

## References

You should include a `div` with the id `#refs` at the location in your book where you'd like the bibliography to be generated. For example the `references.qmd` file generated by `quarto create project book` includes this:

```{.markdown filename="references.qmd"}
# References {.unnumbered}

::: {#refs}
:::
```

Note that you can change the chapter title to whatever you like, remove `.unnumbered` to have it be numbered like other chapters, and add other content before or after the bibliography as necessary.

## Creating an Index

For PDF output, you can create an index using the LaTeX [makeidx](https://ctan.org/pkg/makeidx?lang=en) package along with the `\index` command.

To add an index to the PDF output for a book, add these `include-in-header` and `include-after-body` entries to your `pdf` format configuration in `_quarto.yml`:

```{.yaml filename="_quarto.yml"}
format:
  html:
    theme: cosmo
  pdf:
    documentclass: scrreprt
    include-in-header: 
      text: |
        \usepackage{makeidx}
        \makeindex
    include-after-body: 
      text: |
        \printindex
```

Then, add `\index{entry}` commands wherever you want an index entry. For example:

```{.latex filename="chapter.qmd"}
Markdown\index{Markdown} allows you to write using
an easy-to-read, easy-to-write plain text format.
```

Alternatively, you can also use the [imakeidx](https://ctan.org/pkg/imakeidx) package.
This packages offers additional features for formatting the index. For example:

```{.yaml filename="_quarto.yml"}
format:
  html:
    theme: cosmo
  pdf:
    documentclass: scrreprt
    include-in-header: 
      text: |
        \usepackage{imakeidx}
        \makeindex[intoc=true, columns=3, columnseprule=true, options=-s latex/indexstyles.ist]
    include-after-body: 
      text: |
        \printindex
```

In the above example, `intoc=true` will include an entry for the index into the table of contents,
`columns=3` will format the index into three columns, and `columnseprule=true` will display a line between index columns.
Finally, `options=-s latex/indexstyles.ist` will use additional formatting options from an index-style file located at `latex/indexstyles.ist`.
Many other features are available in the [imakeidx](https://ctan.org/pkg/imakeidx) package. Please refer to its documentation for further details.

Note that `\index` commands are automatically ignored for non-PDF output.

## Parts & Appendices

:::{.callout-note}

## Please Note

Note that EPUB and Word (Docx) formats do not currently support organizing books into parts. When rendering a book with parts to these formats, the parts will be ignored.

:::

You can divide your book into parts using `part` within the book `chapters`. For example:

```{.yaml filename="_quarto.yml"}
book:
  chapters:
    - index.qmd
    - preface.qmd
    - part: dice.qmd
      chapters: 
        - basics.qmd
        - packages.qmd
    - part: cards.qmd
      chapters:
        - objects.qmd
        - notation.qmd
        - modifying.qmd
        - environments.qmd
```

Note that the markdown files `dice.qmd` and `cards.qmd` contain the part title (as a level one heading) as well as some introductory content for the part. If you just need a part title then you can alternatively use this syntax:

```{.yaml filename="_quarto.yml"}
book:
  chapters:
    - index.qmd
    - preface.qmd
    - part: "Dice"
      chapters: 
        - basics.qmd
        - packages.qmd
```

You can include appendices by adding an `appendices` key to your `book` config. For example:

```{.yaml filename="_quarto.yml"}
book:
  chapters:
    - index.qmd
    - intro.qmd
    - summary.qmd
    - references.qmd
  appendices:
    - tools.qmd
    - resources.qmd
  
```

Parts and appendices show up like this in HTML output:

![](images/book-parts-appendices.png){.border fig-alt="A screenshot of the welcome page of a book rendered with Quarto. In the sidebar, content is separated by three different bold section titles. From top to bottom, these are: 'PROJECT 1: WEIGHTED DICE', 'PROJECT 2: PLAYING CARDS', and 'APPENDICES.'"}

In LaTeX output, the `\part` command is used for parts. In EPUB and MS Word output parts are ignored entirely.

Appendices are numbered using uppercase alpha, and have a prefix inserted into their title to indicate they are an appendix (e.g. "Appendix A --- Additional Resources"). You can customize the prefix and delimiter using the following options:

```{.yaml filename="_quarto.yml"}
crossref:
  appendix-title: "App."
  appendix-delim: ":"
```

Which would result in the above example being output as: "App. A: Additional Resources". 
Note that `crossref` is a format option and is not nested under `book`.

{{< include ../websites/_page-navigation.md >}} 

{{< include ../websites/_footer.md >}}
```````

## File: docs/computations/caching.qmd
```````
---
title: "Caching"
---

## Overview

When rendering documents with embedded computations becomes time-consuming, you may want to consider adding an execution cache, which will store the results of cell executions so they aren't re-executed with every document render.

Quarto integrates with the [Jupyter Cache](https://jupyter-cache.readthedocs.io/en/latest/) and [Knitr Cache](https://bookdown.org/yihui/rmarkdown-cookbook/cache.html) to cache time consuming code chunks. These two caching facilities distinct capabilities, and we'll cover each in detail below.

## Jupyter Cache

[Jupyter Cache](https://jupyter-cache.readthedocs.io/en/latest/) enables you to cache all of the cell outputs for a notebook. If any of the cells in the notebook change then all of the cells will be re-executed.

To use Jupyter Cache you'll want to first install the `jupyter-cache` package:

+-----------+---------------------------------------+
| Platform  | Command                               |
+===========+=======================================+
| Mac/Linux | ``` {.bash filename="Terminal"}       |
|           | python3 -m pip install jupyter-cache  |
|           | ```                                   |
+-----------+---------------------------------------+
| Windows   | ``` {.powershell filename="Terminal"} |
|           | py -m pip install jupyter-cache       |
|           | ```                                   |
+-----------+---------------------------------------+
| Conda     | ``` {.bash filename="Terminal"}       |
|           | conda install jupyter-cache           |
|           | ```                                   |
+-----------+---------------------------------------+

::: callout-note
## Julia Installation

Note that if you are using Julia along with the integrated Python environment provided by `IJulia` then you should alternatively follow the directions on [Installing Jupyter Cache for Julia](julia.qmd#jupyter-cache).
:::

To enable the cache for a document, add the `cache` option. For example:

``` yaml
---
title: "My Document"
format: html
execute: 
  cache: true
jupyter: python3
---
```

You can also specify caching at the project level. For example, within a project file:

``` yaml
project:
  type: website
  
format:
  html:
    theme: united
    
execute:
  cache: true
```

Note that changes within a document that aren't within code cells (e.g. markdown narrative) do not invalidate the document cache. This makes caching a very convenient option when you are working exclusively on the prose part of a document.

Jupyter Cache include a `jcache` command line utility that you can use to analyze and manage the notebook cache. See the [Jupyter Cache](https://jupyter-cache.readthedocs.io/en/latest/) documentation for additional details.

## Knitr Cache

The Knitr Cache operates at the level of individual cells rather than the entire document. While this can be very convenient, it also introduced some special requirements around managing the dependencies between cells.

You can enable the Knitr cache at the document or project level using standard YAML options:

``` yaml
---
title: "My Document"
format: html
execute: 
  cache: true
---
```

You can also enable caching on a per-cell basis (in this you would *not* set the document level option):

```{{r}}
#| cache: true

summary(cars)
```

There are a variety of other cell-level options that affect Knitr caching behavior. You can learn about them in the Knitr [cell options](/docs/reference/cells/cells-knitr.qmd#cache) reference. Another excellent resource is Yihui Xie's article on [cache invalidation](https://yihui.org/en/2018/06/cache-invalidation/).

## Rendering

You can use \`quarto render\` command line options to control caching behavior without changing the document's code. Use options to force the use of caching on all chunks, disable the use of caching on all chunks (even if it's specified in options), or to force a refresh of the cache even if it has not been invalidated:

``` {.bash filename="Terminal"}
# use a cache (even if the document options don't enable it)
quarto render example.qmd --cache 

# don't use a cache (even if the documentation options enable it)
quarto render example.qmd --no-cache 

# use a cache and force a refresh (even if the cells haven't changed)
quarto render example.qmd --cache-refresh 
```

## Alternatives

If you are using caching to mitigate long render-times, there are some alternatives you should consider alongside caching.

### Disabling Execution

If you are working exclusively with prose / markdown, you may want to disable execution entirely. Do this by specifying the `enabled: false` execute option For example:

``` yaml
---
title: "My Document"
format: html
execute: 
  enabled: false
---
```

Note that if you are authoring using Jupyter `.ipynb` notebooks (as opposed to plain-text `.qmd` files) then this is already the default behavior: no execution occurs when you call `quarto render` (rather, execution occurs as you work within the notebook).

### Freezing Execution

If you are working within a project and your main concern is the cumulative impact of rendering many documents at once, consider using the `freeze` option.

{{< include ../projects/_freeze-basics.md >}} 


Learn more about using `freeze` with projects in the article on [managing project execution](/docs/projects/code-execution.qmd#freeze).
```````

## File: docs/computations/execution-options.qmd
```````
---
title: Execution Options
format: html
---

## Output Options

There are a wide variety of options available for customizing output from executed code. All of these options can be specified either globally (in the document front-matter) or per code-block. For example, here's a modification of the Python example to specify that we don't want to "echo" the code into the output document:

``` yaml
---
title: "My Document"
execute:
  echo: false
jupyter: python3
---
```

Note that we can override this option on a per code-block basis. For example:

```{{python}}
#| echo: true

import matplotlib.pyplot as plt
plt.plot([1,2,3,4])
plt.show()
```

Code block options are included in a special comment at the top of the block (lines at the top prefaced with `#|` are considered options).

Options available for customizing output include:

+--------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Option       | Description                                                                                                                                                                                       |
+==============+===================================================================================================================================================================================================+
| `eval`       | Evaluate the code chunk (if `false`, just echos the code into the output).                                                                                                                        |
+--------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `echo`       | Include the source code in output                                                                                                                                                                 |
+--------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `output`     | Include the results of executing the code in the output (`true`, `false`, or `asis` to indicate that the output is raw markdown and should not have any of Quarto's standard enclosing markdown). |
+--------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `warning`    | Include warnings in the output.                                                                                                                                                                   |
+--------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `error`      | Include errors in the output (note that this implies that errors executing code will not halt processing of the document).                                                                        |
+--------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `include`    | Catch all for preventing any output (code or results) from being included (e.g. `include: false` suppresses all output from the code block).                                                      |
+--------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `renderings` | Specify rendering names for the plot or table outputs of the cell, e.g. `[light, dark]`                                                                                                           |
+--------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Here's a Knitr example with some of these additional options included:

````         
---
title: "Knitr Document"
execute:
  echo: false
---

```{{r}}
#| warning: false

library(ggplot2)
ggplot(airquality, aes(Temp, Ozone)) + 
  geom_point() + 
  geom_smooth(method = "loess", se = FALSE)
```

```{{r}}
summary(airquality)
```
````

### Cell Renderings

Here is an example of using `renderings` to provide light and dark versions of a plot. Note that the number of cell outputs must match the number of renderings.

````
---
title: "Dark mode"
format: 
  html:
    theme:
      light: flatly
      dark: darkly
---

```{{r}}
#| renderings: [light, dark]
par(bg = "#FFFFFF", fg = "#000000")
plot(1:10) # Shown in `light` mode

par(bg = "#000000", fg = "#FFFFFF", col.axis = "#FFFFFF")
plot(1:10) # Shown in `dark` mode
```
````

::: {layout-ncol=2}

![light rendering](images/renderings-light-mode.png)

![dark rendering](images/renderings-dark-mode.png)

:::

The `renderings` cell option does not currently work correctly with cell cross-reference options (`label` starting with `fig-`, `tbl-`, etc.) or cell caption options (`fig-cap`, `tbl-cap`, etc.).


To combine `renderings` with crossrefs and/or captions, use the fenced div syntax:


````
---
title: "Dark mode"
format:
  html:
    theme:
      light: flatly
      dark: darkly
---

::: {#fig-caption-crossref}

```{{r}}
#| label: caption-crossref
#| renderings: [light, dark]
par(bg = "#FFFFFF", fg = "#000000")
plot(1:10) # Shown in `light` mode


par(bg = "#000000", fg = "#FFFFFF", col.axis = "#FFFFFF")
plot(1:10) # Shown in `dark` mode
```

Light and dark renderings with a caption and crossref

:::
````

Note the use of a `label` that is not a cross-reference, i.e. that does not start with one of the [cross reference types](../authoring/cross-references.qmd#overview). It is a good practice to have named cells with `label`, for debuggability and stable resource names. However, cross-reference labels that start with `fig-`, `tbl-`, etc., will not work with `renderings`.



::: callout-tip
When using the Knitr engine, you can also use any of the available native options (e.g. `collapse`, `tidy`, `comment`, etc.). See the [Knitr options documentation](https://yihui.org/knitr/options/) for additional details. You can include these native options in option comment blocks as shown above, or on the same line as the `{r}` as shown in the Knitr documentation.
:::

::: callout-tip
The Knitr engine can also *conditionally* evaluate a code chunk using objects or expressions. See [Using R: Knitr Options](r.qmd#chunk-options).
:::

## Figure Options

There are a number of ways to control the default width and height of figures generated from code. First, it's important to know that Quarto sets a default width and height for figures appropriate to the target output format. Here are the defaults (expressed in inches):

| Format                  | Default   |
|-------------------------|-----------|
| Default                 | 7 x 5     |
| HTML Slides             | 9.5 x 6.5 |
| HTML Slides (reveal.js) | 9 x 5     |
| PDF                     | 5.5 x 3.5 |
| PDF Slides (Beamer)     | 10 x 7    |
| PowerPoint              | 7.5 x 5.5 |
| MS Word, ODT, RTF       | 5 x 4     |
| EPUB                    | 5 x 4     |
| Hugo                    | 8 x 5     |

These defaults were chosen to provide attractive well proportioned figures, but feel free to experiment to see whether you prefer another default size. You can change the default sizes using the `fig-width` and `fig-height` options. For example:

``` yaml
---
title: "My Document"
format: 
  html:
    fig-width: 8
    fig-height: 6
  pdf:
    fig-width: 7
    fig-height: 5
---
```

How do these sizes make their way into the engine-level defaults for generating figures? This differs by engine:

-   For the Knitr engine, these values become the default values for the `fig.width` and `fig.height` chunk options. You can override these default values via chunk level options.

-   For Python, these values are used to set the [Matplotlib](https://matplotlib.org/stable/tutorials/introductory/customizing.html) `figure.figsize` rcParam (you can of course manually override these defaults for any given plot).

-   For Julia, these values are used to initialize the default figure size for the [Plots.jl](https://docs.juliaplots.org/stable/) GR backend.

    If you are using another graphics library with Jupyter and want to utilize these values, you can read them from `QUARTO_FIG_WIDTH` and `QUARTO_FIG_HEIGHT` environment variables.

::: callout-caution
When using the Jupyter engine, `fig-width` and `fig-height` are only supported if specified at the document- or project-level. 
However, when using the Knitr engine, these options are also supported as code cell options on a per-cell basis.
:::

### Caption and Alt Text

You can specify the caption and alt text for figures generated from code using the `fig-cap` and `fig-alt` options. For example, here we add these options to a Python code cell that creates a plot:

```{{python}}
#| fig-cap: "Polar axis plot"
#| fig-alt: "A line plot on a polar axis"

import numpy as np
import matplotlib.pyplot as plt

r = np.arange(0, 2, 0.01)
theta = 2 * np.pi * r
fig, ax = plt.subplots(subplot_kw={'projection': 'polar'})
ax.plot(theta, r)
ax.set_rticks([0.5, 1, 1.5, 2])
ax.grid(True)
plt.show()
```

## Inline Code

Jupyter, Knitr and OJS all support executing inline code within markdown (e.g. to allow narrative to automatically use the most up to date computations). See [Inline Code](inline-code.qmd) for details.

## Raw Output

The `output: asis` option enables you to generate raw markdown output. When `output: asis` is specified none of Quarto's standard enclosing divs will be included. For example, here we specify `output: asis` in order to generate a pair of headings:

::: panel-tabset
## Jupyter

```{{python}}
#| echo: false
#| output: asis

print("# Heading 1\n")
print("## Heading 2\n")
```

## Knitr

```{{r}}
#| echo: false
#| output: asis

cat("# Heading 1\n")
cat("## Heading 2\n")
```
:::

Which generates the following output:

``` default
# Heading 1

## Heading 2
```

Note that we also include the `echo: false` option to ensure that the code used to generate markdown isn't included in the final output.

If we had not specified `output: asis` the output, as seen in the intermediate markdown, would have included Quarto's `.cell-output` div:

```` default
::: {.cell-output-stdout}
```
# Heading 1

## Heading 2
  
```
:::
````

For the Jupyter engine, you can also create raw markdown output using the functions in `IPython.display`. For example:

```{{python}}
#| echo: false
radius = 10
from IPython.display import Markdown
Markdown(f"The _radius_ of the circle is **{radius}**.")
```

{{< include _knitr-options.md >}}

## Jupyter Options

### Expression Printing

When multiple expressions are present in a code cell, by default, only the last top-level expression is captured in the rendered output. For example, consider the code cell:

::: {layout-ncol="2"}
```` markdown
```{{python}}
"first"
"last"
```
````
:::

When rendered to HTML the output generated is:

``` markdown
'last'
```

This behavior corresponds to the `last_expr` setting for [Jupyter shell interactivity](https://ipython.readthedocs.io/en/stable/config/options/terminal.html#configtrait-InteractiveShell.ast_node_interactivity).

You can control this behavior with the `ipynb-shell-interactivity` option. For example, to capture all top-level expressions set it to `all`:

``` yaml
---
title: All expressions
format: html
ipynb-shell-interactivity: all
---
```

Now the above code cell results in the output:

``` markdown
'first'

'last'
```

::: callout-note
## All Expressions are Printed in Dashboards

For [dashboards](/docs/dashboards/index.qmd) the default setting of `ipynb-shell-interactivity` is `all.`
:::

## Intermediates

On the way from markdown input to final output, there are some intermediate files that are created and automatically deleted at the end of rendering. You can use the following options to keep these intermediate files:

+--------------+------------------------------------------------------------------------------------------------+
| Option       | Description                                                                                    |
+==============+================================================================================================+
| `keep-md`    | Keep the markdown file generated by executing code.                                            |
+--------------+------------------------------------------------------------------------------------------------+
| `keep-ipynb` | Keep the notebook file generated from executing code (applicable only to markdown input files) |
+--------------+------------------------------------------------------------------------------------------------+

For example, here we specify that we want to keep the jupyter intermediate file after rendering:

``` yaml
---
title: "My Document"
execute:
  keep-ipynb: true
jupyter: python3
---
```

## Fenced Echo

If you are writing a tutorial or documentation on using Quarto code blocks, you'll likely want to include the fenced code delimiter (e.g. ```` ```{python} ````) in your code output to emphasize that executable code requires that delimiter. You can do this using the `echo: fenced` option. For example, the following code block:

```{{python}}
#| echo: fenced
1 + 1
```

Will be rendered as:

```{python}
#| echo: fenced
1 + 1
```

This is especially useful when you want to demonstrate the use of cell options. For example, here we demonstrate the use of the `output` and `code-overflow` options:

```{{python}}
#| echo: fenced
#| output: false
#| code-overflow: wrap
1 + 1
```

This code block appears in the rendered document as:

```{python}
#| echo: fenced
#| output: false
#| code-overflow: wrap
1 + 1
```

Note that all YAML options will be included in the fenced code output *except for* `echo: fenced` (as that might be confusing to readers).

This behavior can also be specified at the document level if you want all of your executable code blocks to include the fenced delimiter and YAML options:

``` yaml
---
title: "My Document"
format: html
execute:
  echo: fenced
---
```

#### Unexecuted Blocks

{{< include _unexecuted-blocks.md >}}

## Engine Binding

Earlier we said that the engine used for computations was determined automatically. You may want to customize this---for example you may want to use the Jupyter [R kernel](https://github.com/IRkernel/IRkernel) rather than Knitr, or you may want to use Knitr with Python code (via [reticulate](https://rstudio.github.io/reticulate/)).

Here are the basic rules for automatic binding:

+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Extension | Engine Binding                                                                                                                                                                                                                         |
+===========+========================================================================================================================================================================================================================================+
| .qmd      | Use Knitr engine if an `{r}` code block is discovered within the file                                                                                                                                                                  |
|           |                                                                                                                                                                                                                                        |
|           | Use Jupyter engine if *any other* executable code block (e.g. `{python}`, `{julia}`, `{bash}`, etc.) is discovered within the file. The kernel used is determined based on the language of the first executable code block discovered. |
|           |                                                                                                                                                                                                                                        |
|           | Use no engine if no executable code blocks are discovered.                                                                                                                                                                             |
+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| .ipynb    | Jupyter engine                                                                                                                                                                                                                         |
+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| .Rmd      | Knitr engine                                                                                                                                                                                                                           |
+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| .md       | No engine (note that if an `md` document does contain executable code blocks then an error will occur)                                                                                                                                 |
+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

::: callout-note

## Using python and r together

If your quarto document includes both `{python}` and `{r}` code blocks, then quarto will automatically use Knitr engine and [reticulate](https://rstudio.github.io/reticulate/) R package to execute the python content.
:::

For `.qmd` files in particular, you can override the engine used via the `engine` option. For example:

``` markdown
engine: jupyter
```

``` markdown
engine: knitr
```

You can also specify that no execution engine should be used via `engine: markdown`.

The presence of the `knitr` or `jupyter` option will also override the default engine:

``` markdown
knitr: true
```

``` markdown
jupyter: python3
```

Variations with additional engine-specific options also work to override the default engine:

``` markdown
knitr:
  opts_knit:
    verbose: true
```

``` markdown
jupyter:
  kernelspec:
    display_name: Python 3
    language: python
    name: python3
```

## Shell Commands

Using shell commands (from Bash, Zsh, etc.) within Quarto computational documents differs by engine. If you are using the Jupyter engine you can use [Jupyter shell magics](https://jakevdp.github.io/PythonDataScienceHandbook/01.05-ipython-and-shell-commands.html). For example:

```` markdown
---
title: "Using Bash"
engine: jupyter
---

```{{python}}
!echo "foo"
```
````

Note that `!` preceding `echo` is what enables a Python cell to be able to execute a shell command.

If you are using the Knitr engine you can use ```` ```{bash} ```` cells, for example:

```` markdown
---
title: "Using Bash"
engine: knitr
---

```{{bash}}
echo "foo" 
```
````

Note that the Knitr engine also supports ```` ```{python} ```` cells, enabling the combination of R, Python, and Bash in the same document
```````

## File: docs/computations/inline-code.qmd
```````
---
title: "Inline Code"
format: html
aliases: 
  - /docs/prerelease/1.4/inline.html
---

## Overview

Inline code allows you to execute code within markdown, e.g. to automatically use the most up-to-date computations in narrative. Quarto provides an inline code syntax that works across all three engines (Jupyter, Knitr and OJS).

The syntax for inline code is similar to code blocks, except you use a single tick (`` ` ``) rather than triple ticks (```` ``` ````), and you can use it in the middle of markdown. For example, the following code stores the variable `radius` in a code block and then accesses it in a sentence using inline code:

::: {.panel-tabset group="engine"}
## Jupyter

```` markdown
```{{python}}
radius = 5
```

The radius of the circle is `{python} radius`
````

This syntax works for any Jupyter kernel---so for Julia you would write an inline expression as `` `{julia} radius` ``).

## Knitr

```` markdown
```{{r}}
radius <- 5
```

The radius of the circle is `{r} radius`
````

## OJS

```` markdown
```{{ojs}}
radius = 5
```

The radius of the circle is `{ojs} radius`
````
:::

The result of the code is this markdown output:

``` markdown
The radius of the circle is 5.
```

::: callout-caution

## Keep Inline Code Simple

Inline expressions should be confined to simple values that you have pre-computed within normal code cells (rather than function calls that do non-trivial work). This is because the protocol used for inline expressions is not compatible with some Python libraries (especially those that use multi-threading or multi-processing).
:::

Quarto also supports the native syntaxes of Knitr and OJS. Read more below in [Syntax Compatibility].

::: {.callout-important}

## Inline Code Cannot be Used in YAML

Inline expressions are not generally supported inside YAML strings, e.g. you cannot use inline code to generate  the `title` document option, or a `fig-cap` code cell option.

If you need to generate a dynamic caption, instead of using the `fig-cap` or `tbl-cap` code cell option, combine inline code with the [Cross-Reference Div Syntax](/docs/authoring/cross-references-divs.qmd#computed-captions).

:::

## Usage in Notebooks

Inline expressions are always evaluated when rendering and previewing `.qmd` files. However, for notebooks you need to execute the notebook with Quarto to evaluate inline expressions (i.e. they won't be evaluated within the JupyterLab, VS Code, or PyCharm notebook editor).

You can work in your favorite notebook front-end without Quarto execution, then once you are ready to publish execute the notebook during rendering as follows:

``` {.bash filename="Terminal"}
$ quarto render notebook.ipynb --execute
```

You can also turn on execution within the YAML options of a notebook. For example:

``` yaml
---
title: "My Notebooks"
execute:
  enabled: true
---
```

## Markdown Output

By default, the output of inline expressions is treated as ordinary text (i.e. markdown within it is not rendered). Any markdown-like syntax within the output of inline expressions will be automatically escaped. For example, the following inline expression:

``` markdown
 `{python} '**not bold**'` 
```

Will produce the following markdown:

``` markdown
\*\*not bold\*\*
```

To explicitly create markdown output, you'll need to use a function specific to your engine:

::: {.panel-tabset group="engine"}
### Jupyter

Use the `Markdown()` function from `IPython.display`:

```` markdown
```{{python}}
from IPython.display import Markdown
```

This is `{python} Markdown('**bold**')`
````

### Knitr

Use the `I()` function:

``` markdown
This is `{r} I("**bold**")`
```

### OJS

Use the `md` function:

```` markdown
```{{ojs}}
text = md`This is **bold**`
```

`{ojs} text`
````
:::

## Escaping

If you are writing documentation about inline expressions (as we are in this article!) then you may need to escape the syntax so that it doesn't execute. You can do that in one of two ways:

1)  Use a double-brace around the expression. For example: `` `{{{python}}} x` ``

2)  Enclose the expression in an extra backtick. For example: ``` ``{python} x`` ```

Each of the expressions above will render (unevaluated) as `` `{{python}} x` `` within the output document.

## Engine Binding

If you use inline expressions in a document that does not have any executable code blocks then you should explicitly set the `engine` document option to ensure that your expressions are evaluated (automatic engine binding works for blocks but not inlines). For example:

``` markdown
---
title: "My Document"
engine: jupyter
---

`{python} "hello"`
```

## Syntax Compatibility

To make it easier to learn and use expressions across engines, Quarto provides a single syntax that works for all engines. However, you can also use the native syntaxes of Knitr and Observable.

### Knitr

The native Knitr syntax also uses single backticks (`` ` ``) but doesn't enclose `r` in curly braces. For example:

``` markdown
The radius of the circle is `r radius`.
```

The native Knitr inline syntax has a different default behavior for handling [Markdown Output]. Specifically, it treats all inline output as *containing markdown*. This means the above example is equivalent to:

```markdown
The radius of the circle is `{r} I(radius)`.
```

### OJS

Natively, OJS uses the syntax `${expr}`. For example:

``` markdown
The radius of the circle is ${radius}
```
```````

## File: docs/computations/julia.qmd
```````
---
title: "Using Julia"
jupyter-language: "Julia"
jupyter-screenshot: "![](images/julia-jupyter.png){.border fig-alt='Side-by-side preview of notebook on the left and live preview in the browser on the right.'}"
vscode-extension: "[Julia Extension](https://www.julia-vscode.org/docs)"
vscode-screenshot: "![](images/julia-vscode){.border fig-alt='Screen shot of VS Code with quarto document containing Julia code on the left, the output of a plot from the Julia code on the right, and the Quarto Help pane at the bottom.'}"
---

# Overview

Quarto supports executable Julia code blocks within markdown. This allows you to create fully reproducible documents and reports---the Julia code required to produce your output is part of the document itself, and is automatically re-run whenever the document is rendered.

Quarto has two available engines for executing Julia code, the newer [`julia` engine](#using-the-julia-engine) is using the [QuartoNotebookRunner.jl](https://github.com/PumasAI/QuartoNotebookRunner.jl/) package to render notebooks, the older [`jupyter` engine](#using-the-jupyter-engine) is using the [IJulia](https://github.com/JuliaLang/IJulia.jl) Jupyter kernel.

This table lists some of the reasons why the `julia` engine was created:

|                                                                                                                                 | julia Engine | jupyter Engine |
|---------------------------------------------------------------------------------------------------------------------------------|--------------|----------------|
| Execute Julia code blocks                                                                                                       | ✅           | ✅              |
| Keep sessions alive for fast reruns                                                                                             | ✅           | ✅              |
| No Python installation required                                                                                                 | ✅           | ❌              |
| No global package installation needed                                                                                           | ✅           | ❌              |
| Automatic integration with juliaup (no kernel installation)                                                                     | ✅           | ❌              |
| Python & R Codeblocks (via PythonCall.jl and RCall.jl)                                                                          | ✅           | ❌              |
| "Expandable cells" or programmatic document generation (via [QuartoTools.jl](https://pumasai.github.io/QuartoTools.jl/stable/)) | ✅           | ❌              |

::: {.callout-note}
For most users, the `julia` engine should offer the best experience.
However, for backwards compatibility the `jupyter` engine remains the default engine for Julia code.
The `julia` engine has to be [specifically enabled either in the frontmatter or the project file](#enabling-the-julia-engine).
:::

Using either of the two engines will require manually installing Julia if
you have not done so already. Installation via `juliaup` is recommended, for further
information check the [official Julia website](https://julialang.org/install/).

Now, we will cover the basics of creating and rendering documents with Julia code blocks.

### Code Blocks

Code blocks that use braces around the language name (e.g. ```` ```{julia} ````) are executable, and will be run by Quarto during render. Here is a simple example:

```` markdown
---
title: "Plots Demo"
author: "Norah Jones"
date: "5/22/2021"
format:
  html:
    code-fold: true
engine: julia
---

### Parametric Plots

Plot function pair (x(u), y(u)). 
See @fig-parametric for an example.

```{{julia}}
#| label: fig-parametric
#| fig-cap: "Parametric Plots"

using Plots

plot(sin, 
     x->sin(2x), 
     0, 
     2π, 
     leg=false, 
     fill=(0,:lavender))
```
````

You'll note that there are some special comments at the top of the code block. These are cell level options that make the figure [cross-referenceable](/docs/authoring/cross-references.qmd).

This document would result in the following rendered output:

![](/images/hello-julia.png){.border fig-alt="Example Plots Demo output with title, author, date published and main section on Parametric plots which contains text, a toggleable code field, and the output of the plot, with the caption Figure 1 Parametric Plots."}

You can produce a wide variety of output types from executable code blocks, including plots, tabular output from data frames, and plain text output (e.g. printing the results of statistical summaries).

There are many options which control the behavior of code execution and output, you can read more about them in the article on [Execution Options](execution-options.qmd).

In addition to code blocks which interrupt the flow of Markdown, you can also include code inline. Read more about inline code in the [Inline Code](inline-code.qmd) article.

#### Multiple Outputs

By default Julia cells will automatically print the value of their last statement (as with the example above where the call to `plot()` resulted in plot output). If you want to display multiple plots (or other types of output) from a single cell you should call the `display()` function explicitly. For example, here we output two plots side-by-side with sub-captions:

```{{julia}}
#| label: fig-plots
#| fig-cap: "Multiple Plots"
#| fig-subcap:
#|   - "Plot 1"
#|   - "Plot 2"
#| layout-ncol: 2

using Plots
display(plot(sin, x -> sin(2x), 0, 2))
display(plot(x -> sin(4x), y -> sin(5y), 0, 2))
```

{{< include _jupyter-rendering.md >}}

{{< include _jupyter-authoring-tools.md >}}

# Using the `julia` engine

{{< include /docs/prerelease/1.5/_pre-release-feature.qmd >}}

## Installation {#installation-julia-engine}

The `julia` engine uses the [QuartoNotebookRunner.jl](https://github.com/PumasAI/QuartoNotebookRunner.jl/) package to render notebooks. When you first attempt to render a notebook with the `julia` engine, Quarto will automatically install this package into a private environment that is owned by Quarto. This means you don't have to install anything in your global Julia environment for Quarto to work and Quarto will not interfere with any other Julia environments on your system. Quarto will use the `julia` binary on your PATH by default, but you can override this using the `QUARTO_JULIA` environment variable.

:::{.callout-note}

## Using custom versions of `QuartoNotebookRunner`

In special circumstances, you may not want to use the specific `QuartoNotebookRunner` version that Quarto installs for you. For example, you might be developing `QuartoNotebookRunner` itself, or you need to use a fork or an unreleased version with a bugfix. In this case, set the [environment variable](/docs/projects/environment.qmd) `QUARTO_JULIA_PROJECT` to a directory of a julia environment that has `QuartoNotebookRunner` installed. 

As an example, you could install the main branch of `QuartoNotebookRunner` into the directory `/some/dir` by executing `]activate /some/dir` in a julia REPL followed by `]add QuartoNotebookRunner#main`. As long as there is no server currently running, running a command like `QUARTO_JULIA_PROJECT=/some/dir quarto render some_notebook.qmd` in your terminal will ensure the server process is started using the custom `QuartoNotebookRunner`. You can also set `quarto`'s `--execute-debug` flag and check the output to verify that the custom environment is being used.
:::

## Enabling the `julia` engine

To use the `julia` engine, you have to specifically enable it. For that, you have two options.

Either specify the engine in your frontmatter:

```` markdown
---
title: "A julia engine notebook"
engine: julia
---

```{{julia}}
1 + 2
```
````

Or, starting with Quarto 1.7, you can prioritize the julia engine project-wide by adding `julia` to the `engines` array in your project file, giving it priority over all unlisted engines (more under [Engine prioritization](#engine-prioritization)). Note that the project file approach is the only option in order to use the `julia` engine with percent-script files.

```{.yaml filename="_quarto.yml"}
engines: ['julia']
```

## Rendering notebooks

Requesting the first render of a notebook which contains Julia code blocks and has the `julia` engine enabled will start a persistent server process that loads QuartoNotebookRunner.jl.
This package is installed automatically in an environment private to Quarto.

The server spins up a separate Julia worker process for each notebook you want to render.
Every purple node in the following graph represents a separate Julia process which runs independently from each short-lived `quarto` process that communicates with the server.

```{mermaid}
flowchart LR
    A[<b>quarto render ...</b>] <-.-> B[<b>Server Process</b><br/>QuartoNotebookRunner.jl]
    B <--> C[<b>Worker Process 1</b><br/>notebook_A.qmd]
    B <--> D[<b>Worker Process 2</b><br/>notebook_B.qmd]
    B <--> E[<b>Worker Process 3</b><br/>notebook_C.qmd]

    style A color:#333
    style B fill:#cb9be0,color:#333
    style C fill:#e7d0f2,color:#333
    style D fill:#e7d0f2,color:#333
    style E fill:#e7d0f2,color:#333
```

You can check the status of the server, request it to shut down, and more using the [`call julia engine` commands](#quarto-call-engine-julia-commands).
The server will stay alive for five minutes after the last worker process has exited, unless it's closed manually.
Changes to environment variables that influence the server process will only be picked up once the next new server process is started.

### Notebook environments

By default, QuartoNotebookRunner will use the `--project=@.` flag when starting a worker. This makes Julia search for an environment (a `Project.toml` or `JuliaProject.toml` file) starting in the directory where the quarto notebook is stored and walking up the directory tree from there.

For example, for a file `/some/dir/notebook.qmd` it will look at `/some/dir/[Julia]Project.toml`, `/some/[Julia]Project.toml` and so on. You could use this behavior to let all notebooks in a quarto project share the same Julia environment, by placing it at the project's top-level directory.

If no environment has previously been set up in any of these directories, the worker process will start with an empty environment. This means that only Julia's standard library packages will be available for use in the notebook.

::: {.callout-note}
Creating a separate environment for each notebook or each set of closely related notebooks is considered best practice.
If too many different notebooks share the same environment (for example the main shared environment that Julia usually loads by default), you're likely to break some of them unintentionally whenever you make a change to the environment.
:::

You can create a Julia environment in multiple ways, for more information have a look at the [official documentation](https://pkgdocs.julialang.org/v1/environments/). One simple option for adding packages to the default environment of a new quarto notebook is to add some `Pkg` installation commands to the notebook and run it once. Afterwards, those commands can be deleted and a `Project.toml` and `Manifest.toml` file representing the environment should be present in the notebook's directory.

````markdown
---
engine: julia
---

```{{julia}}
using Pkg
Pkg.add("DataFrames")
```
````

Another option is to start `julia` in a terminal which loads the REPL, and to press `]` to switch to the `Pkg` REPL mode.
In this mode, you can first activate the desired environment by running `activate /some/dir` and then, for example, install the `DataFrames` package with the command `add DataFrames`.

If you do not want to use the notebook's directory as the environment, you may specify a different directory via the `--project` flag in the `exeflags` frontmatter setting:

````markdown
---
engine: julia
julia:
  exeflags: ["--project=/some/other/dir"]
---
````

### Worker process reuse

An idle worker process will be kept alive for 5 minutes by default, this can be changed by passing the desired number of seconds to the `daemon` key:

````markdown
---
title: "A julia notebook with ten minutes timeout"
engine: julia
execute:
  daemon: 600
---
````

Each re-render of a notebook will reuse the worker process with all dependencies already loaded, which reduces latency.
As far as technically possible, QuartoNotebookRunner.jl will release resources from previous runs to the garbage collector.
In each run, the code is evaluated into a fresh module so you cannot run into conflicts with variables defined in previous runs.
Note, however, that certain state changes like modifications to package runtime settings or the removal or addition of function methods will persist across runs.
If necessary, you can use the `--execute-daemon-restart` flag to force a restart of a notebook's worker process.

You can also disable the daemon which will use a new process for each render (with higher latency due to package reloads):

```yaml
execute:
  daemon: false
```

The server process itself will time out after five minutes if no more worker processes exist.

## Engine options

Engine options can be passed under the `julia` top-level key:

````markdown
---
title: "A julia engine notebook"
engine: julia
julia:
  key: value
---
````

The currently available options are:

- `exeflags`: An array of strings which are appended to the `julia` command that starts the worker process. For example, a notebook is run with `--project=@.` by default (the environment in the directory where the notebook is stored) but this could be overridden by setting `exeflags: ["--project=/some/directory/"]`.
- `env`: An array of strings where each string specifies one environment variable that is passed to the worker process. For example, `env: ["SOMEVAR=SOMEVALUE"]`.

## `quarto call engine julia` commands

Starting with Quarto 1.7, The julia engine offers CLI commands for configuration and monitoring via the `quarto call engine julia` entrypoint.

### `status`

The `status` command prints out information about the currently running server process as well as potential worker processes. For example:

```
$ quarto call engine julia status
QuartoNotebookRunner server status:
  started at: 9:44:31 (47 seconds ago)
  runner version: 0.15.0
  environment: /Users/username/Library/Caches/quarto/julia/
  pid: 42008
  port: 8000
  julia version: 1.11.4
  timeout: 5 minutes
  workers active: 1
    worker 1:
      path: /Users/username/notebook.qmd
      run started: 9:44:38 (40 seconds ago)
      run finished: -
      timeout: 5 minutes
      pid: 42026
      exe: `julia`
      exeflags: ["--color=yes"]
      env: ["JULIA_PROJECT=@."]
```

### `close`

The `close` command allows shutting down notebook worker processes.
By default, only closing of idle worker processes is allowed.
A worker process is idle when its `run finished` status is populated. In this case, we can call `close` on it:

```
$ quarto call engine julia status
QuartoNotebookRunner server status:
  started at: 9:44:31 (5 minutes 41 seconds ago)
  runner version: 0.15.0
  environment: /Users/username/Library/Caches/quarto/julia/
  pid: 42008
  port: 8000
  julia version: 1.11.4
  timeout: 5 minutes
  workers active: 1
    worker 1:
      path: /Users/username/notebook.qmd
      run started: 9:44:38 (5 minutes 34 seconds ago)
      run finished: 9:46:21 (took 1 minute 43 seconds)
      timeout: 5 minutes (1 minute 9 seconds left)
      pid: 42026
      exe: `julia`
      exeflags: ["--color=yes"]
      env: ["JULIA_PROJECT=@."]

$ quarto call engine julia close /Users/username/notebook.qmd
Worker closed successfully.
```

To force a busy worker to close, for example if it's stuck in an endless loop or because a computation is taking too long, the `--force` flag can be added.
Using this flag means losing all the work that the worker process has done so far.
At the next run, the worker process will have to be started from scratch and all packages loaded again:

```
$ quarto call engine julia status                                                     
QuartoNotebookRunner server status:
  started at: 11:2:40 (16 seconds ago)
  runner version: 0.15.0
  environment: /Users/username/Library/Caches/quarto/julia/
  pid: 50642
  port: 8000
  julia version: 1.11.4
  timeout: 5 minutes
  workers active: 1
    worker 1:
      path: /Users/username/notebook.qmd
      run started: 11:2:47 (9 seconds ago)
      run finished: -
      timeout: 5 minutes
      pid: 50650
      exe: `julia`
      exeflags: ["--color=yes"]
      env: ["JULIA_PROJECT=@."]

$ quarto call engine julia close /Users/username/notebook.qmd
ERROR: Julia server returned error after receiving "close" command:

Failed to close notebook: /Users/username/notebook.qmd

The underlying Julia error was:

Tried to close file "/Users/username/notebook.qmd" but the corresponding worker is busy.

Stack trace:
  [omitted for brevity]

$ quarto call engine julia close --force /Users/username/notebook.qmd
Worker force-closed successfully.

$ quarto call engine julia status                                                     
QuartoNotebookRunner server status:
  started at: 11:2:40 (46 seconds ago)
  runner version: 0.15.0
  environment: /Users/username/Library/Caches/quarto/julia/
  pid: 50642
  port: 8000
  julia version: 1.11.4
  timeout: 5 minutes (4 minutes 56 seconds left)
  workers active: 0
```

### `stop`

The `stop` command shuts down the server process gracefully. Note that you will get an error if any workers are currently busy:

```
$ quarto call engine julia status
QuartoNotebookRunner server status:
  started at: 11:2:40 (3 minutes 43 seconds ago)
  runner version: 0.15.0
  environment: /Users/username/Library/Caches/quarto/julia/
  pid: 50642
  port: 8000
  julia version: 1.11.4
  timeout: 5 minutes (1 minute 59 seconds left)
  workers active: 0

$ quarto call engine julia stop 
Server stopped.

$ quarto call engine julia status
Julia control server is not running.
```

### `kill`

The `kill` command shuts the server process down forcefully. This command is intended as a last resort when the server is in a bad state and unresponsive. Note that all worker processes will be killed as well, so you will lose all progress.

### `log`

The `log` command prints the output of the internal log file of the server process. If the server process fails to start or unexpectedly quits, this log file might contain useful information.

## `juliaup` integration

[`juliaup`](https://github.com/JuliaLang/juliaup) is the recommended way to
install and manage Julia versions. The `julia` engine supports using
`juliaup`'s `+` channel specifier to select the Julia version that a notebook
uses. This allow users to run several notebooks concurrently with different
Julia versions on the same machine without the need for customizing their
`PATH` in any way.

To use this feature, ensure that you have used `juliaup` to install the channels
that you wish to use in your notebooks. Then add the channel specifier to the notebook
frontmatter in the `julia.exeflags` option:

````markdown
---
title: "A Julia 1.11 notebook"
engine: julia
julia:
  exeflags: ["+1.11"]
---

```{{julia}}
VERSION
```
````

`QuartoNotebookRunner` currently supports running Julia versions from 1.6
onwards. Support for earlier versions is not planned.

## Revise.jl integration

[Revise](https://github.com/timholy/Revise.jl) allows for automatically
updating function definitions in Julia sessions. It is an essential tool in the
Julia ecosystem for any user that wishes to develop their own packages or large
projects. The `julia` engine supports using `Revise` within notebook processes
by simply importing the package into a cell at the start of a notebook. Once
imported `Revise` will automatically update functions imported from locally
developed packages in the same way as it behaves in a Julia REPL.

Ensure that `Revise` is installed in the project environment that the notebook
is using, since the global environment is not included in the load path
provided to Julia, unlike the behaviour of a Julia REPL session.

## Caching {#caching-julia}

The engine has built-in support for caching notebook results. This feature is disabled by
default but can be enabled by setting the `execute.cache` option to `true` in a notebook's
frontmatter:

````markdown
---
title: "A caching example"
engine: julia
execute:
  cache: true
---

```{{julia}}
rand()
```
````

Notebook caches are invalidated based on the following criteria:

- Using a different Julia version to run the notebook.
- Changes to the `Manifest.toml` of the environment the notebook is run in. Adding, removing, or changing package versions will invalidate the cache.
- Changing any contents in the notebook's frontmatter.
- Changing any contents of any executable Julia cells, including cell options.

Changes that do not invalidate a cache:

- Editing Markdown content outside of executable Julia cells.

Caches are saved to file in a `.cache` directory alongside the notebook file.
This directory is safe to remove if you want to invalidate all caches. The
contents of the individual cache files is an internal implementation detail and
should not be relied upon.

These caches are safe to save in CI via such tools as GitHub Actions
`action/cache` to help improve the render time of long-running notebooks that
do not often change.

## R and Python support

`{{r}}` and `{{python}}` executable code blocks are supported in the `julia`
engine via integrations with the
[RCall](https://github.com/JuliaInterop/RCall.jl) and
[PythonCall](https://github.com/JuliaPy/PythonCall.jl) packages respectively.
Using this feature requires the notebook author to explicitly `import` those
packages into their notebooks in a `{{julia}}` cell afterwhich they can use
`{{r}}` and `{{python}}` cells.

````markdown
---
title: "Multi-language notebooks"
engine: julia
---

```{{julia}}
import PythonCall
import RCall
```

Create some data in Julia:

```{{julia}}
data = sin.(0:0.1:4pi)
```

Then plot it in R by interpolating the `data` variable from Julia into `R` via
the `$` syntax:

```{{r}}
plot($data)
```

The same `$` syntax can be used to interpolate Julia variables into Python code as well:

```{{python}}
len($data)
```
````

## Engine "extensions"

The implementation of `QuartoNotebookRunner` allows for extending the behaviour
of notebooks via external Julia packages.

One example of this is the
[QuartoTools.jl](https://pumasai.github.io/QuartoTools.jl) package, which
enables fine-grained function call caching, support for serializing data
between notebook processes and normal `julia` processes, and "expandable" cell
outputs that allow for programatic creating of cell inputs and outputs within
notebooks. See the linked documentation for more thorough discussion of that
package's features.

The same approach used by that package can be applied to other third-party
packages that wish to extend the functionality of notebooks in other ways.
Please direct questions and requests regarding this functionality to the
[QuartoNotebookRunner](https://github.com/PumasAI/QuartoNotebookRunner.jl)
repository.

# Using the `jupyter` engine

### Installation {#installation}

In order to render documents with embedded Julia code you'll need to install the following components:

1)  IJulia
2)  Revise.jl
3)  Optionally, Jupyter Cache

We'll cover each of these in turn below.

#### IJulia {#ijulia}

[IJulia](https://julialang.github.io/IJulia.jl/stable) is a Julia-language execution kernel for Jupyter. You can install IJulia from within the Julia REPL as follows:

``` julia
using Pkg
Pkg.add("IJulia")
using IJulia
notebook()
```

The first time you run `notebook()`, it will prompt you for whether it should install Jupyter. Hit enter to have it use the [Conda.jl](https://github.com/Luthaf/Conda.jl) package to install a minimal Python+Jupyter distribution (via [Miniconda](https://docs.conda.io/projects/conda/en/stable/user-guide/install/index.html)) that is private to Julia (not in your `PATH`). On Linux, it defaults to looking for `jupyter` in your `PATH` first, and only asks to installs the Conda Jupyter if that fails.

If you choose not to use Conda.jl to install Python and Jupyter you will need to make sure that you have another installation of it on your system (see the section on [Installing Jupyter](#installing-jupyter) if you need help with this).

#### Revise.jl

In addition to IJulia, you'll want to install [Revise.jl](https://timholy.github.io/Revise.jl/stable) and configure it for use with IJulia. Revise.jl is a library that helps you keep your Julia sessions running longer, reducing the need to restart when you make changes to code.

Quarto maintains a persistent [kernel daemon](#kernel-daemon) for each document to mitigate Jupyter start up time during iterative work. Revise.jl will make this persistent process robust in the face of package updates, git branch checkouts, etc. Install Revise.jl with:

``` julia
using Pkg
Pkg.add("Revise")
```

To configure Revise to launch automatically within IJulia, create a `.julia/config/startup_ijulia.jl` file with the contents:

``` julia
try
  @eval using Revise
catch e
  @warn "Revise init" exception=(e, catch_backtrace())
end
```

You can learn more about Revise.jl at <https://timholy.github.io/Revise.jl/stable>.

#### Jupyter Cache

[Jupyter Cache](https://jupyter-cache.readthedocs.io/en/latest/) enables you to cache all of the cell outputs for a notebook. If any of the cells in the notebook change then all of the cells will be re-executed.

If you are using the integrated version of Jupyter installed by `IJulia.notebook()`, then you will need to add `jupyter-cache` to the Python environment managed by IJulia. You can do that as follows:

``` julia
using Conda
Conda.add("jupyter-cache")
```

Alternatively, if you are using Jupyter from within any other version of Python not managed by IJulia, see the instructions below on [Installing Jupyter](#installing-jupyter) for details on installing `jupyter cache`,

{{< include _jupyter-cache.md >}}

{{< include _caching-more.md >}}

### Kernel Selection

You'll note in our first example that we specified the use of the `julia-1.8` kernel explicitly in our document options (shortened for brevity):

``` markdown
---
title: "StatsPlots Demo"
jupyter: julia-1.8
---
```

If no `jupyter` kernel is explicitly specified, then Quarto will attempt to automatically discover a kernel on the system that supports Julia.

You can discover the available Jupyter kernels on your system using the `quarto check` command:

``` {.bash filename="Terminal"}
quarto check jupyter
```

{{< include _jupyter-daemon.md >}}


### Installing Jupyter {#installing-jupyter}

You can rely on the minimal version of Python and Jupyter that is installed automatically by **IJulia**, or you can choose to install Python and Jupyter separately. If you need to install another version of Jupyter this section describes how.

{{< include _jupyter-install.md >}}

#### Jupyter Cache

[Jupyter Cache](https://jupyter-cache.readthedocs.io/en/latest/) enables you to cache all of the cell outputs for a notebook. If any of the cells in the notebook change then all of the cells will be re-executed.

To use Jupyter Cache you'll want to first install the `jupyter-cache` package:

+-----------+--------------------------------------+
| Platform  | Command                              |
+===========+======================================+
| Mac/Linux | ```{.bash filename="Terminal"}       |
|           | python3 -m pip install jupyter-cache |
|           | ```                                  |
+-----------+--------------------------------------+
| Windows   | ```{.powershell filename="Terminal"} |
|           | py -m pip install jupyter-cache      |
|           | ```                                  |
+-----------+--------------------------------------+
| Conda     | ```{.bash filename="Terminal"}       |
|           | conda install jupyter-cache          |
|           | ```                                  |
+-----------+--------------------------------------+

To enable the cache for a document, add the `cache` option. For example:
```````

## File: docs/computations/ojs.qmd
```````
---
title: "Using Observable"
execute:
  echo: false
search: false
---

## Overview

Quarto includes native support for [Observable JS](https://observablehq.com/@observablehq/observables-not-javascript), a set of enhancements to vanilla JavaScript created by [Mike Bostock](https://en.wikipedia.org/wiki/Mike_Bostock) (also the author of [D3](https://d3js.org/)). Observable JS is distinguished by its [reactive runtime](https://github.com/observablehq/runtime), which is especially well suited for interactive data exploration and analysis.

The creators of Observable JS (Observable, Inc.) run a hosted service at <https://observablehq.com/> where you can create and publish notebooks. Additionally, you can use Observable JS ("OJS") in standalone documents and websites via its [core libraries](https://github.com/observablehq). Quarto uses these libraries along with a [compiler](https://github.com/asg017/unofficial-observablehq-compiler/tree/beta) that is run at render time to enable the use of OJS within Quarto documents.

OJS works in any Quarto document (plain markdown as well as Jupyter and Knitr documents). Just include your code in an `{ojs}` executable code block. The rest of this article explains the basics of using OJS with Quarto.

## Example

We'll start with a simple example based on Allison Horst's [Palmer Penguins](https://allisonhorst.github.io/palmerpenguins/) dataset. Here we look at how penguin body mass varies across both sex and species (use the provided inputs to filter the dataset by bill length and island):

```{ojs}
data = FileAttachment("palmer-penguins.csv").csv({ typed: true })
```

```{ojs}
filtered = data.filter(function(penguin) {
  return bill_length_min < penguin.bill_length_mm &&
         islands.includes(penguin.island);
})
```

```{ojs}
viewof bill_length_min = Inputs.range(
  [32, 50], 
  {value: 35, step: 1, label: "Bill length (min):"}
)
viewof islands = Inputs.checkbox(
  ["Torgersen", "Biscoe", "Dream"], 
  { value: ["Torgersen", "Biscoe"], 
    label: "Islands:"
  }
)
```

```{ojs}
Plot.rectY(filtered, 
  Plot.binX(
    {y: "count"}, 
    {x: "body_mass_g", fill: "species", thresholds: 20}
  ))
  .plot({
    facet: {
      data: filtered,
      x: "sex",
      y: "species",
      marginRight: 80
    },
    marks: [
      Plot.frame(),
    ]
  }
)
```

Let's take a look at the source code for this example. First we create an `{ojs}` cell that reads in some data from a CSV file (*e.g.*, [`palmer-penguins.csv`](palmer-penguins.csv){target="_blank" download="palmer-penguins.csv"}) using a [FileAttachment](https://observablehq.com/@observablehq/file-attachments):

```{{ojs}}
data = FileAttachment("palmer-penguins.csv").csv({ typed: true })
```

The example above doesn't plot all of the data but rather a filtered subset. To create our filter we'll need some inputs, and we'll want to be able to use the values of these inputs in our filtering function. To do this, we use the `viewof` keyword and with some standard [Inputs](https://observablehq.com/@observablehq/inputs):

```{{ojs}}
viewof bill_length_min = Inputs.range(
  [32, 50], 
  {value: 35, step: 1, label: "Bill length (min):"}
)
viewof islands = Inputs.checkbox(
  ["Torgersen", "Biscoe", "Dream"], 
  { value: ["Torgersen", "Biscoe"], 
    label: "Islands:"
  }
)
```

Now we write the filtering function that will transform the `data` read from the CSV using the values of `bill_length_min` and `island`.

```{{ojs}}
filtered = data.filter(function(penguin) {
  return bill_length_min < penguin.bill_length_mm &&
         islands.includes(penguin.island);
})
```

Here we see reactivity in action: we don't need any special syntax to refer to the dynamic input values, they "just work", and the filtering code is automatically re-run when the inputs change. This works in much the same way a spreadsheet works when you update a cell and other cells that refer to it are recalculated.

Finally, we'll plot the filtered data using [Observable Plot](https://observablehq.com/@observablehq/plot) (an open-source JavaScript library for quick visualization of tabular data):

```{{ojs}}
Plot.rectY(filtered, 
  Plot.binX(
    {y: "count"}, 
    {x: "body_mass_g", fill: "species", thresholds: 20}
  ))
  .plot({
    facet: {
      data: filtered,
      x: "sex",
      y: "species",
      marginRight: 80
    },
    marks: [
      Plot.frame(),
    ]
  }
)
```

Note that as with our inputs, we refer to the `filtered` variable with no special syntax---the plotting code will be automatically re-run whenever `filtered` changes (which in turn is updated whenever an input changes).

That covers a basic end-to-end use of OJS (see the [Penguins](/docs/interactive/ojs/examples/penguins.qmd) examples for the full source code).

::: {.callout-tip appearance="simple"}
If you take a look at the [Penguins](/docs/interactive/ojs/examples/penguins.qmd) code, you'll notice something curious: the inputs and plotting code are defined *before* the data processing code. This demonstrates a critical difference between OJS cell execution and traditional notebooks: cells do not need to be defined in any particular order.

Because execution is fully reactive, the runtime will automatically execute cells in the correct order based on how they reference each other. This is more akin to a spreadsheet than a traditional notebook with linear cell execution.
:::

## Libraries

Our example above made use of several standard libraries, including:

1.  [Observable stdlib](https://github.com/observablehq/stdlib) --- Core primitives for DOM manipulation, file handling, importing code, and much more.

2.  [Observable Inputs](https://github.com/observablehq/inputs) --- Standard inputs controls including sliders, drop-downs, tables, check-boxes, etc.

3.  [Observable Plot](https://github.com/observablehq/plot) --- High level plotting library for exploratory data visualization.

The libraries are somewhat special because they are automatically available within notebooks on <https://observablehq.com> as well as within `{ojs}` cells in Quarto documents.

Using other JavaScript libraries is also straightforward, they just need to be explicitly imported. For example, here we import a some libraries using the [require](https://github.com/observablehq/stdlib#require) function (which in turn loads NPM modules from [jsDelivr](https://www.jsdelivr.com/){.uri}):

```{{ojs}}
d3 = require("d3@7")
topojson = require("topojson")
```

See the article on [Libraries](/docs/interactive/ojs/libraries.qmd) to learn more about using standard and third-party libraries.

## Data Sources

In our initial example we used a [FileAttachment](https://github.com/observablehq/stdlib#file-attachments) as our data source. File attachments support many formats including CSV, TSV, JSON, Arrow (uncompressed), and SQLite so are a convenient way to read a dataset that has already been prepared for analysis.

Frequently, you'll need pre-process your data in Python or R before it's ready for visualization. Using Quarto, you can do this pre-processing during document render, and then make the results available to OJS.

Use the `ojs_define()` function from Python or R to define variables that you want to use within JavaScript. For example, to reproduce the simple CSV read in Python you might do this:

```{{python}}
import pandas as pd
penguins = pd.read_csv("palmer-penguins.csv")
ojs_define(data = penguins)
```

The call to `ojs_define(data = penguins)` says that we want to make a variable named `data` (with the value of the `penguins` data frame) available to OJS

Depending on the visualization library you use, one additional step may be required to consume the data from JavaScript. In this case, the `Plot` function expects data by row rather than by column, so we `transpose()` it before filtering:

```{{ojs}}
filtered = transpose(data).filter(function(penguin) {
  return bill_length_min < penguin.bill_length_mm &&
         islands.includes(penguin.island);
})
```

See the article on [Data Sources](/docs/interactive/ojs/data-sources.qmd) to learn more about the various ways to prepare and read data.

## OJS Cells

There are many options available to customize the behavior of `{ojs}` code cells, including showing, hiding, and collapsing code as well as controlling the visibility and layout of outputs.

The most important cell option to be aware of is the `echo` option, which controls whether source code is displayed. You'll have different preferences depending on whether you are embedding visualizations in an article or creating a notebook or full-on tutorial.

Code in `{ojs}` cells is displayed by default. To prevent display of code for an entire document, set the `echo: false` option in YAML metadata:

``` yaml
---
title: "My Document"
execute:
  echo: false
---
```

You can also specify this option on a per-cell basis. For example:

```{{ojs}}
//| echo: false
data = FileAttachment("palmer-penguins.csv").csv({ typed: true })
```

To learn about all of the options available, see the article on [OJS Cells](/docs/interactive/ojs/ojs-cells.qmd).

In addition to OJS cells which interupt the flow of markdown, you can also include code inline. Read more about inline code in the [Inline Code](inline-code.qmd) article.

## Learning More

These articles go into more depth on using OJS in Quarto documents:

-   [Libraries](/docs/interactive/ojs/libraries.qmd) covers using standard libraries and external JavaScript libraries.

-   [Data Sources](/docs/interactive/ojs/data-sources.qmd) outlines the various ways to read and pre-process data.

-   [OJS Cells](/docs/interactive/ojs/ojs-cells.qmd) goes into more depth on cell execution, output, and layout.

-   [Shiny Reactives](/docs/interactive/ojs/shiny.qmd) describes how to integrate Shiny with OJS.

-   [Code Reuse](/docs/interactive/ojs/code-reuse.qmd) delves into ways to re-use OJS code across multiple documents.

If you want to learn more about the underlying mechanics of reactivity, check out these notebooks from [Mike Bostock](https://observablehq.com/@mbostock):

-   [Five Minute Introduction](https://observablehq.com/@observablehq/five-minute-introduction)

-   [Observable's not JavaScript](https://observablehq.com/@observablehq/observables-not-javascript)

-   [Introduction to Views](https://observablehq.com/@observablehq/introduction-to-views)


-   [How Observable Runs](https://observablehq.com/@observablehq/how-observable-runs)
```````

## File: docs/computations/parameters.qmd
```````
---
title: "Parameters"
document: "document"
---

{{< include _parameters.md >}}
```````

## File: docs/computations/python.qmd
```````
---
title: "Using Python"
jupyter-language: "Python"
jupyter-screenshot: "![](/docs/get-started/hello/images/jupyter-basics.png){.border fig-alt='A Jupyter notebook titled Quarto Basics containing some text, a code cell, and the result of the code cell, which is a line plot on a polar axis.'}"
vscode-extension: "[Python Extension](https://marketplace.visualstudio.com/items?itemName=ms-python.python)"
vscode-screenshot: "![](images/python-vscode){.border fig-alt='Screen shot of VS Code editor with three vertical sections. The leftmost includes the file explorer, and quarto help. The second pane is the source code for a quarto file with python code. The third is interactive with Python running and output of the code cells shown.'}"
---

## Overview

Quarto supports executable Python code blocks within markdown. This allows you to create fully reproducible documents and reports---the Python code required to produce your output is part of the document itself, and is automatically re-run whenever the document is rendered.

If you have Python and the `jupyter` package installed then you have all you need to render documents that contain embedded Python code (if you don't, we'll cover this in the [installation](#installation) section below). Next, we'll cover the basics of creating and rendering documents with Python code blocks.

### Code Blocks

Code blocks that use braces around the language name (e.g. ```` ```{python} ````) are executable, and will be run by Quarto during render. Here is a simple example:

```` markdown
---
title: "matplotlib demo"
format:
  html:
    code-fold: true
jupyter: python3
---

For a demonstration of a line plot on a polar axis, see @fig-polar.

```{{python}}
#| label: fig-polar
#| fig-cap: "A line plot on a polar axis"

import numpy as np
import matplotlib.pyplot as plt

r = np.arange(0, 2, 0.01)
theta = 2 * np.pi * r
fig, ax = plt.subplots(
  subplot_kw = {'projection': 'polar'} 
)
ax.plot(theta, r)
ax.set_rticks([0.5, 1, 1.5, 2])
ax.grid(True)
plt.show()
```
````

You'll note that there are some special comments at the top of the code block. These are cell level options that make the figure [cross-referenceable](/docs/authoring/cross-references.qmd).

This document would result in the following rendered output:

![](/images/hello-jupyter.png){.border fig-alt="Example output where header reads: matplotlib demo, the body reads: For a demonstration of a line plot on a polar axis, see Figure 1. Below the body text is a toggleable field to reveal the code, and the Figure 1 image with a caption that reads: Figure 1: A line plot on a polar axis."}

You can produce a wide variety of output types from executable code blocks, including plots, tabular output from data frames, and plain text output (e.g. printing the results of statistical summaries).

There are many options which control the behavior of code execution and output, you can read more about them in the article on [Execution Options](execution-options.qmd).

In addition to code blocks which interrupt the flow of markdown, you can also include code inline. Read more about inline code in the [Inline Code](inline-code.qmd) article.

{{< include _jupyter-rendering.md >}}

## Installation {#installation}

If you already have Python 3 and Jupyter installed in your environment, then you should have everything required to render Jupyter notebooks with Python kernels.

{{< include _jupyter-install.md >}}

{{< include _jupyter-authoring-tools.md >}}

{{< include _jupyter-cache.md >}}

{{< include _caching-more.md >}}


## Kernel Selection

The Jupyter kernel used by Quarto is determined using the `jupyter` metadata option. For example, to use the [Xeus Python](https://github.com/jupyter-xeus/xeus-python) kernel, do this:

``` yaml
---
title: "My Document"
jupyter: xpython
---
```

Note that you can also provide a full `kernelspec`, for example:

``` yaml
---
title: "My Document"
jupyter: 
  kernelspec:
    name: "xpython"
    language: "python"
    display_name: "Python 3.7 (XPython)"
---
```

If no Jupyter kernel is specified, then the kernel is determined by finding an available kernel that supports the language of the first executable code block found within the file (e.g. ```` ```{python} ````).

::: callout-important
## Kernels from Conda

If you are using a kernel that is contained within an external conda environment you need to take an extra step to make sure it is recognized by Quarto. Please follow the instructions here to make conda managed kernels available:

<https://github.com/Anaconda-Platform/nb_conda_kernels#use-with-nbconvert-voila-papermill>

Note that this step is not required if you are merely using conda with Quarto. It applies to using kernels other than the default Python kernel that happen to be installed within a conda environment separate from the one you are using.
:::

{{< include _jupyter-daemon.md >}}
```````

## File: docs/computations/r.qmd
```````
---
title: "Using R"
---

## Overview

Quarto is a multi-language, next generation version of R Markdown from RStudio, with many new features and capabilities. Like R Markdown, Quarto uses [Knitr](https://yihui.org/knitr/) to execute R code, and is therefore able to render most existing Rmd files without modification.

We'll start by covering the basics of Quarto, then delve into the differences between Quarto and R Markdown in the sections on [Chunk Options](#chunk-options) and [Output Formats](#output-formats) below.

### Code Blocks

Code blocks that use braces around the language name (e.g. ```` ```{r} ````) are executable, and will be run by Quarto during render. Here is a simple example:

```` markdown
---
title: "ggplot2 demo"
author: "Norah Jones"
date: "5/22/2021"
format: 
  html:
    code-fold: true
---

## Air Quality

@fig-airquality further explores the impact of temperature on ozone level.

```{{r}}
#| label: fig-airquality
#| fig-cap: "Temperature and ozone level."
#| warning: false

library(ggplot2)

ggplot(airquality, aes(Temp, Ozone)) + 
  geom_point() + 
  geom_smooth(method = "loess")
```
````

You'll note that there are some special comments at the top of the code block. These are cell level options that make the figure [cross-referenceable](/docs/authoring/cross-references.qmd).

This document results in the following rendered output:

![](/images/hello-knitr.png){.border fig-alt="Example output with title (ggplot2 demo), author (Norah Jones), and date (5/22/2021). Below is a header reading Air Quality followed by body text (Figure 1 further explores the impact of temperature on ozone level.) with a toggleable code field, and figure with caption that reads Figure 1 Temperature and ozone level."}

You can produce a wide variety of output types from executable code blocks, including plots, tabular output from data frames, and plain text output (e.g. printing the results of statistical summaries).

There are many options which control the behavior of code execution and output, you can read more about them in the article on [Execution Options](execution-options.qmd). 

In addition to code blocks which interrupt the flow of markdown, you can also include code inline. Read more about inline code in the [Inline Code](inline-code.qmd) article.

### Rendering

When a Quarto document is rendered, R code blocks are automatically executed. You can render Quarto documents in a variety of ways:

1)  Using the **Render** button in RStudio:

    ![](/docs/tools/images/rstudio-render.png){.border-bottom width="612" fig-alt="The top section of a qmd file as displayed in RStudio. There is a toolbar right above the document containing various options, including 'Render.' There is a stylized, segmented blue arrow pointing at the word."}
    
    The **Render** button will render the first format listed in the document YAML. If no format is specified, then it will render to HTML.

2)  From the system shell using the `quarto render` command:

    ```{.bash filename="Terminal"}
    quarto render document.qmd # all formats
    quarto render document.qmd --to pdf
    quarto render document.qmd --to docx
    ```

    Note that the target file (in this case `document.qmd`) should always be the very first command line argument. 
    
    The `render` command will render all formats listed in the document YAML. If no formats are specified, then it will render to HTML. You can also provide the `--to` argument to target a specific format.

3)  From the R console using the **quarto** R package:

    ``` r
    library(quarto)
    quarto_render("document.qmd") # all formats
    quarto_render("document.qmd", output_format = "pdf")
    ```
    
    The function `quarto_render()` is a wrapper around `quarto render` and by default, will render all formats listed in the document YAML. 
     
    Note that the Quarto R package is a convenience for command line rendering from R, and is not required for using Quarto with R. 

## Installation

To use Quarto with R, you should install the **rmarkdown** R package:

``` r
install.packages("rmarkdown")
```

Installation of the **rmarkdown** package will also install the **knitr** package so you will have everything required to render documents containing R code.

Quarto will select a version of R by looking on the system `PATH`. In addition, on Windows when R is not found on the `PATH`, the registry will be scanned for the current R version. You can override the version of R used by Quarto by setting the `QUARTO_R` environment variable to the directory where the R binary `RScript` is. 

## RStudio

{{< include ../tools/_rstudio.md >}}


## VS Code

The [Quarto Extension](https://marketplace.visualstudio.com/items?itemName=quarto.quarto) for VS Code provides a variety of tools for working with `.qmd` files in VS Code. The extension integrates directly with the [R Extension](https://marketplace.visualstudio.com/items?itemName=REditorSupport.r) to provide the following R-specific capabilities:

1)  Code completion
2)  Cell execution
3)  Contextual help

![](images/r-vscode.png){.border fig-alt="Screen shot of qmd file open in VS code with source markdown shown in left pane and output plot shown in the right."}

You can install the VS Code extension by searching for 'quarto' in the extensions panel or from the [extension marketplace](https://marketplace.visualstudio.com/items?itemName=quarto.quarto).

The VS Code extension includes a **Quarto: Preview** command that can be accessed via the Command Palette, the keyboard shortcut {{< kbd mac=Command-Shift-K win=Control-Shift-K linux=Control-Shift-K >}}, or a **Preview** button (![](/docs/tools/images/vscode-preview-icon.svg){fig-alt="Preview icon"}) in the editor. 
After rendering, a preview is displayed in a pane within VS Code alongside your document.

You can read more about using VS Code in [Tools: VS Code](/docs/tools/vscode/index.qmd).

## Emacs

The [quarto-mode](https://melpa.org/#/quarto-mode) MELPA package is an Emacs mode for editing Quarto documents. Install `quarto-mode` as follows:

``` default
M-x package-refresh-contents
M-x package-install
  quarto-mode
```

If you have [ESS](https://ess.r-project.org/), `quarto-mode` will make use of it for executing R code.

Use `M-x quarto-preview` to start a `quarto preview` server that watches quarto content for changes and automatically refreshes it. If the current buffer has an associated file that exists in a quarto project, the command will preview the entire project. Otherwise, it will preview the specific file.

## Chunk Options {#chunk-options}

{{< include ../tools/_chunk-options.md >}}

## Chunk Labels

You can set a label for a code chunk with the `label`  option:

````markdown
```{{r}}
#| label: convert
airquality$TempC <- (5 / 9) * (airquality$Temp - 32)
```
````

Unless you want to specify a cross-reference avoid using the [reserved cross-reference prefixes](/docs/authoring/cross-references.qmd#reserved-prefixes) for chunk labels.

## Output Formats {#output-formats}

Another difference between R Markdown and Quarto is related to output formats. Quarto includes many more built in output formats (and many more options for customizing each format). Quarto also has native features for special project types like [Websites](/docs/websites/), [Books](/docs/books/), and [Blogs](/docs/websites/website-blog.qmd) (rather than relying on external packages).

To use a format in Quarto you use the `format` key rather than the `output` key as you did in R Markdown. Here's a comparison of equivalent format specifications:

::: {layout-ncol="2"}
#### R Markdown

``` yaml
title: "My Document"
output:
  html_document:
    toc: true
    number_sections: true
    css: styles.css
```

#### Quarto

``` yaml
title: "My Document"
format:
  html:
    toc: true
    number-sections: true
    css: styles.css
```
:::

One source of the difference in syntax is that Quarto is more closely aligned with [Pandoc](https://pandoc.org) format names and options (thus the use of `-` as a word separator rather than `_`).

See the listing of all [supported formats](/docs/output-formats/all-formats.qmd) along with their user guides and reference pages for more details.

See the articles on creating [Websites](/docs/websites/), [Books](/docs/books/), and [Blogs](/docs/websites/website-blog.qmd) for additional details on more advanced output formats.


## Data Frames

{{< include _knitr-df-print.md >}}

{{< include _knitr-options.md >}}


## Caching

The [Knitr Cache](https://bookdown.org/yihui/rmarkdown-cookbook/cache.html) operates at the level of individual cells rather than the entire document. While this can be very convenient, it also introduced some special requirements around managing the dependencies between cells.

You can enable the Knitr cache at the document or project level using standard YAML options:

``` yaml
---
title: "My Document"
format: html
execute: 
  cache: true
---
```

You can also enable caching on a per-cell basis (in this you would *not* set the document level option):

```{{r}}
#| cache: true

summary(cars)
```

There are a variety of other cell-level options that affect Knitr caching behavior. You can learn about them in the Knitr [cell options](/docs/reference/cells/cells-knitr.qmd#cache) reference. Another excellent resource is Yihui Xie's article on [cache invalidation](https://yihui.org/en/2018/06/cache-invalidation/).

{{< include _caching-more.md >}}
```````

## File: docs/computations/render-scripts.qmd
```````
---
title: "Rendering Script Files"
format: html
code-annotations: select
aliases: 
  - /docs/prerelease/1.4/script-r.html
  - /docs/prerelease/1.4/script.html
---

{{< include /docs/_require-1.4.qmd >}}

## Overview

Quarto supports rendering script files (e.g. `.py`, `.jl`, or `.r`) that are specially formatted as notebooks. The specific syntax for the format is different for the Jupyter and Knitr engines. The Jupyter engine can render Python, Julia, and R (using the [IRkernel](https://irkernel.github.io)) scripts, whereas the Knitr engine only renders R scripts.

On this page you can learn the [syntax](#syntax) for Jupyter and Knitr notebook scripts, how to [Render and Preview](#render-and-preview) notebook scripts as well as using notebook [Scripts in Projects](#scripts-in-projects).

## Syntax {#syntax}

The syntax for delineating YAML, code and Markdown depends on whether you are rendering with the Jupyter or Knitr engine. For Python and Julia scripts use the Jupyter engine. For R scripts, you can use either the Jupyter or Knitr engine.

### Jupyter

Script rendering for Jupyter makes use of the [percent format](https://jupytext.readthedocs.io/en/latest/formats-scripts.html) that is supported by several other tools including Spyder, VS Code, PyCharm, and Jupytext.

In the percent format:

-   Markdown cells are delimited by `# %% [markdown]`, and can include content as single line comments (`#`) or multi-line strings (`"""`).

-   Code cells are delimited by `# %%`.

There are also Quarto-specific additions:

-   The script must start with a markdown cell that includes a YAML header block (including the usual `---` YAML delimiters).

-   You can add code cell options in the usual way with `#|` comments.

For example, here is a Python script that includes both markdown and code cells (you can click on the numbers on the right for further details):

``` {.python filename="script.py"}
# %% [markdown]                           #<1>
# ---                                     #<1>
# title: Palmer Penguins                  #<1>
# author: Norah Jones                     #<1>
# date: 3/12/23                           #<1>
# ---                                     #<1>

# %%                                      #<2>
#| echo: false                            #<2>
import pandas as pd                       #<2>
df = pd.read_csv("palmer-penguins.csv")   #<2>

# %% [markdown]                           #<3>
"""                                       #<3>
## Exploring the data                     #<3>
                                          #<3>
See @fig-bill-sizes for an exploration of bill sizes by species. #<3>
"""                                       #<3>

# %% 
#| label: fig-bill-sizes                  #<4>
#| fig-cap: Bill Sizes by Species         #<4>
                                          
import matplotlib.pyplot as plt           
import seaborn as sns
                                          #<5>
g = sns.FacetGrid(df, hue="species", height=3, aspect=3.5/1.5)
g.map(plt.scatter, "bill_length_mm", "bill_depth_mm").add_legend()
```

1.  Scripts rendered with Quarto must begin with a markdown cell containing the YAML header.
2.  A code cell.
3.  A markdown cell containing a multiline string (`"""`).
4.  Code cell options specified with `#|` comments.
5.  You can include blank lines within cells---cells continue until another cell is encountered.

#### Generating Markdown

Jupyter scripts are especially convenient when most of your document consists of code that dynamically generates markdown. You can write markdown from Python using functions in the `IPython.display` module. For example:

``` python
# %%
#| echo: false
radius = 10
from IPython.display import Markdown
Markdown(f"The _radius_ of the circle is **{radius}**.")
```

Note that dynamically generated markdown will still be enclosed in the standard Quarto output divs. If you want to remove all of Quarto's default output enclosures use the `output: asis` option. For example:

``` python
# %%
#| echo: false
#| output: asis
radius = 10
from IPython.display import Markdown
Markdown(f"The _radius_ of the circle is **{radius}**.")
```

#### Raw Cells

You can include raw cells (e.g. HTML or LaTeX) within scripts using the `# %% [raw]` cell delimiter along with a `format` attribute, for example:

``` python
# %% [raw] format="html"
"""
<iframe width="560" height="315" src="https://www.youtube.com/embed/lJIrF4YjHfQ?si=aP7PxA1Pz8IIoQUX"></iframe>
"""
```

### Knitr

Script rendering for Knitr is based on the `knitr::spin()` feature and makes use of the same [syntax rules](https://bookdown.org/yihui/rmarkdown-cookbook/spin.html):

-   Markdown content is included on lines starting with a special `#'` comment.

-   Lines that don't start with `#` are code. Code blocks are split when Markdown content occurs , e.g. use `#'` to create another code block.

There are also Quarto-specific additions:

-   The R script must start with YAML header block using the special `#'` comment.

-   You can add code cell options in the usual way with `#|` comments.

For example, here is an R script that includes both markdown and code cells (you can click on the numbers on the right for further details):

``` {.r filename="script.R"}
#' ---                                #<1>
#' title: Palmer Penguins             #<1>
#' author: Norah Jones                #<1>
#' date: 3/12/23                      #<1>
#' format: html                       #<1>
#' ---                                #<1>

library(palmerpenguins)               #<2>

#' ## Exploring the data                                            #<3>
#' See @fig-bill-sizes for an exploration of bill sizes by species. #<3>

#| label: fig-bill-sizes                        #<4>
#| fig-cap: Bill Sizes by Species               #<4>
#| warning: false                               #<4>
library(ggplot2)
ggplot(data = penguins,
       aes(x = bill_length_mm,
           y = bill_depth_mm,
           group = species)) +
  geom_point(aes(color = species,
                 shape = species),
             size = 3,
             alpha = 0.8) +
  labs(title = "Penguin bill dimensions",
       subtitle = "Bill length and depth for Adelie, Chinstrap and Gentoo Penguins at Palmer Station LTER",
       x = "Bill length (mm)",
       y = "Bill depth (mm)",
       color = "Penguin species",
       shape = "Penguin species")
```

1.  Scripts rendered with Quarto must begin with a YAML header using `#'` comments.
2.  R code is the main content of the R script and is included without any delimitation.
3.  Preface Markdown content with the `#'` comment.
4.  Code cell options are specified with `#|` comments and apply to code below them.

## Render and Preview {#render-and-preview}

You can render and preview notebook scripts just as you would a `.qmd` or `.ipynb` file. For example, the following commands are all valid:

``` bash
$ quarto render script.py
$ quarto render script.jl
$ quarto render script.R

$ quarto preview script.py
$ quarto preview script.jl
$ quarto preview script.R
```

The script must begin with the appropriate [syntax](#syntax) for the YAML block to be rendered with Quarto. Based on the syntax detected Quarto will render with the Jupyter or Knitr engine.

The [Quarto VS Code Extension](https://marketplace.visualstudio.com/items?itemName=quarto.quarto) also implements support for rendering and previewing scripts.

## Scripts in Projects {#scripts-in-projects}

Notebook scripts can also be included within [projects](/docs/projects/quarto-projects.qmd) (e.g. websites, blogs, etc.). Scripts within projects are only rendered by Quarto when they start with the appropriate [syntax](#syntax).

If for some reason you need to ignore such a script, you can create an explict render list in `_quarto.yml` that excludes individual scripts as required, for example:

``` yaml
project:
  type: website
  render:
    - "*.{qmd,R,py}"
    - "!utils.py"
```

Note that this technique is documented for the sake of completeness---in practice you should almost never need to do this since scripts rarely begin with a YAML block unless you are authoring them specifically for report rendering.
```````

## File: docs/dashboards/_examples/inputs/card-toolbar.qmd
```````
---
title: "Penguin Bills"
format: dashboard
server: shiny
---

```{python}
import seaborn as sns
penguins = sns.load_dataset("penguins")
```

```{python}
#| content: card-sidebar
from shiny.express import ui, render
ui.input_select("x", "Variable:",
                choices=["bill_length_mm", "bill_depth_mm"])
ui.input_select("dist", "Distribution:", choices=["hist", "kde"])
ui.input_checkbox("rug", "Show rug marks", value = False)
```

```{python}
#| title: Penguin Bills
@render.plot
def displot():
  sns.displot(
    data=penguins, hue="species", multiple="stack",
    x=input.x(), rug=input.rug(), kind=input.dist())
```
```````

## File: docs/dashboards/_examples/inputs/column-layout.qmd
```````
---
title: "Palmer Penguins"
author: "Cobblepot Analytics"
format: dashboard
server: shiny
---

```{python}
#| context: setup
import seaborn as sns
penguins = sns.load_dataset("penguins")
species = list(penguins["species"].value_counts().index)
islands = list(penguins["island"].value_counts().index)
```

::: {.inputs header-for="next" layout-ncol="3"}

```{python}
from shiny import reactive
from shiny.express import render, ui
ui.input_checkbox_group(
    "species", "Species:",
    species, selected = species
)
```

```{python}
ui.input_checkbox_group(
    "islands", "Islands:",
    islands, selected = islands
)
```

```{python}
ui.input_select("dist", "Distribution:", choices=["kde", "hist"])
ui.input_checkbox("rug", "Show rug marks", value = False)
```

:::



```{python}
@reactive.calc
def filtered_penguins():
    data = penguins[penguins["species"].isin(input.species())]
    data = data[data["island"].isin(input.islands())]
    return data
```


```{python}
#| title: Bill Depth
@render.plot
def depth():
    return sns.displot(
        filtered_penguins(), x = "bill_depth_mm",
        hue = "species", kind = input.dist(),
        fill = True, rug=input.rug()
    )
```
```````

## File: docs/dashboards/_examples/inputs/inline-sidebar.qmd
```````
---
title: "Palmer Penguins"
author: "Cobblepot Analytics"
format: dashboard
server: shiny
---

```{python}
import seaborn as sns
penguins = sns.load_dataset("penguins")
```


## Row

### {.sidebar}

```{python}
from shiny.express import render, ui
ui.input_select("x", "Variable:",
                choices=["bill_length_mm", "bill_depth_mm"])
ui.input_select("dist", "Distribution:", choices=["hist", "kde"])
ui.input_checkbox("rug", "Show rug marks", value = False)
```

### Column

```{python}
@render.plot
def displot():
    sns.displot(
        data=penguins, hue="species", multiple="stack",
        x=input.x(), rug=input.rug(),kind=input.dist())
```

## Row

```{python}
@render.data_frame
def dataview():
    return render.DataGrid(penguins, height = "100%")
```
```````

## File: docs/dashboards/_examples/inputs/inline-toolbar.qmd
```````
---
title: "Palmer Penguins"
author: "Cobblepot Analytics"
format:
  dashboard:
    orientation: columns
server: shiny
---

```{python}
import seaborn as sns
penguins = sns.load_dataset("penguins")
```


## Column

### {.toolbar}

```{python}
from shiny.express import render, ui
ui.input_select("dist", "Distribution:", choices=["hist", "kde"])
ui.input_checkbox("rug", "Show rug marks", value = False)
```

### Row

```{python}
@render.plot
def displot():
    sns.displot(
        data=penguins, hue="species", multiple="stack",
        x="bill_length_mm", rug=input.rug(),kind=input.dist())
```

## Column

```{python}
@render.data_frame
def dataview():
    return render.DataGrid(penguins, height = "100%")
```
```````

## File: docs/dashboards/_examples/inputs/input-panel.qmd
```````
---
title: "Penguin Bills"
format: dashboard
server: shiny
---

```{python}
import seaborn as sns
penguins = sns.load_dataset("penguins")
```


## {.toolbar}




## Row

::: {.card-toolbar}

```{python}
#| content: card-toolbar
from shiny.express import render, ui
ui.input_select("x", "Variable:",
                choices=["bill_length_mm", "bill_depth_mm"])
ui.input_select("dist", "Distribution:", choices=["hist", "kde"])
ui.input_checkbox("rug", "Show rug marks", value = False)
```

:::

```{python}
@render.plot
def displot():
    sns.displot(
        data=penguins, hue="species", multiple="stack",
        x=input.x(), rug=input.rug(), kind=input.dist())
```
```````

## File: docs/dashboards/_examples/inputs/page-sidebar.qmd
```````
---
title: "Penguin Bills"
format: dashboard
server: shiny
---

```{python}
import seaborn as sns
penguins = sns.load_dataset("penguins")
```

## {.sidebar}

```{python}
from shiny.express import render, ui
ui.input_select("x", "Variable:",
                choices=["bill_length_mm", "bill_depth_mm"])
ui.input_select("dist", "Distribution:", choices=["hist", "kde"])
ui.input_checkbox("rug", "Show rug marks", value = False)
```

## Column

```{python}
@render.plot
def displot():
    sns.displot(
        data=penguins, hue="species", multiple="stack",
        x=input.x(), rug=input.rug(),kind=input.dist())
```
```````

## File: docs/dashboards/_examples/inputs/right-sidebar.qmd
```````
---
title: "Palmer Penguins"
author: "Cobblepot Analytics"
format: dashboard
server: shiny
---

```{python}
#| context: setup
from shiny import reactive
from shiny.express import render, ui
import seaborn as sns
penguins = sns.load_dataset("penguins")
species = list(penguins["species"].value_counts().index)
islands = list(penguins["island"].value_counts().index)
```

## Column

```{python}
#| title: Bill Depth
@render.plot
def depth():
    return sns.displot(
        filtered_penguins(), x = "bill_depth_mm",
        hue = "species", kind = input.dist(),
        fill = True, rug=input.rug()
    )
```

```{python}
#| title: Bill Length
@render.plot
def length():
    return sns.displot(
        filtered_penguins(), x = "bill_length_mm",
        hue = "species", kind = input.dist(),
        fill = True, rug=input.rug()
    )
```

## {.sidebar width="300px"}

![](penguins.png){width="80%"}

```{python}
ui.input_checkbox_group(
    "species", "Species:",
    species, selected = species
)

ui.input_checkbox_group(
    "islands", "Islands:",
    islands, selected = islands
)

@reactive.calc
def filtered_penguins():
    data = penguins[penguins["species"].isin(input.species())]
    data = data[data["island"].isin(input.islands())]
    return data
```

```{python}
ui.input_select("dist", "Distribution:", choices=["kde", "hist"])
ui.input_checkbox("rug", "Show rug marks", value = False)
```

[Learn more](https://pypi.org/project/palmerpenguins/) about the
Palmer Penguins dataset.
```````

## File: docs/dashboards/_examples/inputs/toolbar.qmd
```````
---
title: "Penguin Bills"
format: dashboard
server: shiny
---

```{python}
from shiny.express import ui, render
import seaborn as sns
penguins = sns.load_dataset("penguins")
```

## {.toolbar}

```{python}
ui.input_select("x", "Variable:",
                choices=["bill_length_mm", "bill_depth_mm"])
ui.input_select("dist", "Distribution:", choices=["hist", "kde"])
ui.input_checkbox("rug", "Show rug marks", value = False)
```

## Row

```{python}
@render.plot
def displot():
  sns.displot(
    data=penguins, hue="species", multiple="stack",
    x=input.x(), rug=input.rug(), kind=input.dist())
```
```````

## File: docs/dashboards/_examples/julia/julia-plotly.qmd
```````
---
title: "Julia Plotly"
format: dashboard
---


```{julia}
using Plots
plot(sin, 
     x->sin(3x), 
     0, 
     2π, 
     leg=false, 
     fill=(0,:lavender))
```
```````

## File: docs/dashboards/_examples/python/python-itables.qmd
```````
---
title: "Python Test"
format: dashboard
execute: 
  daemon: false
---

```{python}
import seaborn as sns
from itables import show
penguins = sns.load_dataset("penguins")

#options.classes = "display nowrap compact"
# options.dom = "ifrt"
# options.language = { "info": "Showing _TOTAL_ entries" }
# options.paging = False

```


## First

```{python}
show(penguins)
```


## Second

```{python}
show(penguins)
```



```{python}
#| classes: flow
#show(penguins, maxBytes = 1000)
```

```{python}
# sns.displot(penguins, x = "bill_depth_mm", 
#         hue = "species", fill = True, rug=True)
```
```````

## File: docs/dashboards/_examples/python/python-tabulate.qmd
```````
---
title: "Python Tabulate"
format: dashboard
---


```{python}
import pandas as pd
from IPython.display import Markdown
from tabulate import tabulate
penguins = pd.read_csv("penguins.csv")
```


```{python}
Markdown(penguins.to_markdown(index=False))
```

```{python}
Markdown(tabulate(
  penguins, 
  showindex=False,
  headers=penguins.columns
))
```
```````

## File: docs/dashboards/_examples/r/dt.qmd
```````
---
title: "DataTables"
format: dashboard
---

```{r}
knitr::kable(mtcars)
```


```{r}
options(DT.options = list(bPaginate = FALSE, dom = "ifrt", language = list(info = "Showing _TOTAL_ entries")))
```

```{r}
library(DT)
datatable(mtcars)
```
```````

## File: docs/dashboards/_examples/_TODO.qmd
```````
---
title: "TODO"
---

-   Fake Navigation Bar
-   `width` and `height` attributes
    -   In the presence of not all rows/columns specified, unspecified rows and columns should distribute
    -   Unitless numbers should be interpreted as pixels
    -   Percents should work as expected
    -   Cards need to be able have width and height (which means `width` and `height` cell options need to work
-   Tabsets
    -   Headings should be able to create tabsets
    -   Tabsets without titles (left align tabs)
-   Sidebars
-   Markdown cells in notebooks should be cards
-   Value Boxes (`compontent: valuebox`)
-   Real Navigation Bar
```````

## File: docs/dashboards/_examples/altair.qmd
```````
---
title: "Altair"
format: dashboard
---


```{python}
#| title: Iowa Electricity
import altair as alt
from vega_datasets import data

source = data.iowa_electricity()

alt.Chart(source).mark_area(opacity=0.3).encode(
    x="year:T",
    y=alt.Y("net_generation:Q").stack(None),
    color="source:N"
)
```
```````

## File: docs/dashboards/_examples/cell-layout.qmd
```````
---
title: "Cell Layout"
format: dashboard
---

```{python}
import plotly.express as px
df = px.data.tips()
```

```{python}
#| title: "Tipping Behavior"
#| layout-ncol: 2

px.box(df, x="sex", y="total_bill", color="smoker")

px.violin(df, x="sex", y="total_bill", color="smoker")
```
```````

## File: docs/dashboards/_examples/flow.qmd
```````
---
title: "Development Indicators by Continent"
author: "Gapminder Analytics Group"
format: dashboard
---

```{python}
import plotly.express as px
df = px.data.gapminder()
```

```{python}
px.area(df, x="year", y="pop", color="continent", line_group="country")
```

```{python}
px.line(df, x="year", y="lifeExp", color="continent", line_group="country")
```

## {.flow}

Mauris quis ex leo. Duis sagittis vel odio ac interdum. Sed molestie mauris neque, sed commodo est iaculis fringilla. Curabitur molestie suscipit sem, vitae condimentum dolor feugiat eget. Cras tincidunt sem vel dolor feugiat, et vehicula mauris fermentum. Nulla iaculis libero vitae porttitor consectetur. Vivamus ultricies lectus imperdiet elit lacinia congue. Etiam efficitur tortor est, nec pharetra mi congue quis. Curabitur accumsan, ante id condimentum elementum, felis odio suscipit felis, eget pellentesque justo tortor quis odio. Quisque nec ex et enim tempor dapibus quis ut libero. Quisque feugiat justo ipsum, eu tincidunt justo posuere id. Donec non ullamcorper eros. Curabitur maximus lacus vel lectus pulvinar vehicula.

Maecenas nunc leo, molestie quis augue ac, interdum fringilla ante. Sed ut nunc diam. Etiam aliquet elit eget volutpat dignissim. Cras cursus bibendum eros, a pellentesque mauris venenatis non. In iaculis porta justo, vitae luctus lectus consectetur ut. Integer pretium dolor aliquet massa eleifend faucibus. Ut sed metus lacinia, fringilla neque eget, ultrices nunc.
```````

## File: docs/dashboards/_examples/gapminder-content.qmd
```````
---
title: "Gapminder: Development Indicators by Continent"
format: 
  dashboard:
    orientation: columns
---

```{python}
import plotly.express as px
df = px.data.gapminder()
```

## Column

```{python}
#| title: Population
px.area(df, x="year", y="pop", color="continent", 
        line_group="country")
```


```{python}
#| title: Life Expectancy
px.line(df, x="year", y="lifeExp", color="continent", 
        line_group="country")
```

::: {.card .flow}

Gapminder combines data from multiple sources into
unique coherent time-series that can’t be found
elsewhere. Learn more about the Gapminder dataset at
 <https://www.gapminder.org/data/>.
 
:::
```````

## File: docs/dashboards/_examples/gapminder.qmd
```````
---
title: "Development Indicators by Continent"
author: "Gapminder Analytics Group"
format: 
  dashboard:
    expandable: false
---

```{python}
import plotly.express as px
df = px.data.gapminder()
```

## Row {height=60%}

```{python}
#| title: GDP and Life Expectancy 
#| expandable: true
px.scatter(
  df, x="gdpPercap", y="lifeExp", 
  animation_frame="year", animation_group="country",
  size="pop", color="continent", hover_name="country", 
  facet_col="continent", log_x=True, size_max=45, 
  range_x=[100,100000], range_y=[25,90]
)
```

## Row {height=40%}

```{python}
#| title: Population
px.area(df, x="year", y="pop", color="continent", line_group="country")
```


```{python}
#| title: Life Expectancy
px.line(df, x="year", y="lifeExp", color="continent", line_group="country")
```
```````

## File: docs/dashboards/_examples/leaflet.qmd
```````
---
title: "Leaflet"
format: dashboard
---


```{python}
from ipyleaflet import Map, basemaps, basemap_to_tiles
Map(basemap=basemap_to_tiles(basemaps.OpenStreetMap.Mapnik),
    center=(48.204793, 350.121558), zoom=2)
```
```````

## File: docs/dashboards/_examples/markdown.qmd
```````
---
title: "Markdown"
format: dashboard
---

```{python}
import plotly.express as px
gapminder = px.data.gapminder()
```




```{python}
from itables import show
show(gapminder)
```



```{python}
from IPython.display import Markdown
Markdown(f"""The model is old""")
```
```````

## File: docs/dashboards/_examples/navigation.qmd
```````
---
title: "Palmer Penguins"
author: "Cobblepot Analytics"
format: 
   dashboard:
      logo: penguins.png
      nav-buttons:
        - linkedin
        - twitter
        - github
---
 
# Bills 

```{python}
1
```

# Flippers {orientation="columns"}

## Column 

```{python}
1
```

## Column

```{python}
1
```

```{python}
1
```

# Data
```````

## File: docs/dashboards/_examples/penguins-obervable.qmd
```````
---
title: "Palmer Penguins"
author: "Cobblepot Analytics"
format: dashboard
---

```{ojs}
//| output: false

data = FileAttachment("penguins.csv").csv({ typed: true })

filtered = data.filter(function(penguin) {
  return bill_length_min < penguin.bill_length_mm &&
         islands.includes(penguin.island);
})
```

# {.sidebar}

![](images/penguins.png){width="80%"}

```{ojs}
viewof bill_length_min = Inputs.range(
  [32, 50], 
  {value: 35, step: 1, label: "Bill length (min):"}
)

viewof islands = Inputs.checkbox(
  ["Torgersen", "Biscoe", "Dream"], 
  { value: ["Torgersen", "Biscoe"], 
    label: "Islands:"
  }
)
```

A simple example based on Allison Horst's [Palmer Penguins](https://
allisonhorst.github.io/palmerpenguins/) dataset. Here we look at how penguin body mass varies across both sex and species.

# Plot

```{ojs}
Plot.rectY(filtered, 
  Plot.binX(
    {y: "count"}, 
    {x: "body_mass_g", fill: "species", thresholds: 20}
  ))
  .plot({
    facet: {
      data: filtered,
      x: "sex",
      y: "species",
      marginRight: 80
    },
    marks: [
      Plot.frame(),
    ]
  }
)
```

# Data

```{ojs}
Inputs.table(filtered)
```
```````

## File: docs/dashboards/_examples/python-wide.qmd
```````
---
title: "Wide"
format: dashboard
---

```{python}
import seaborn as sns
sns.set_theme(style="darkgrid")

# Load an example dataset with long-form data
fmri = sns.load_dataset("fmri")
```

```{python}
sns.lineplot(x="timepoint", y="signal",
             hue="region", style="event",
             data=fmri)
```


```{python}
import matplotlib.pyplot as plt
plt.rcParams['figure.figsize'] = (12, 4)
sns.lineplot(x="timepoint", y="signal",
             hue="region", style="event",
             data=fmri)
```


```{python}
# Plot the responses for different events and regions
sns.lineplot(x="timepoint", y="signal",
             hue="region", style="event",
             data=fmri)
```
```````

## File: docs/dashboards/_examples/shiny-diamonds.qmd
```````
---
title: "Diamonds Explorer"
author: "Barkamian Analytics"
format: dashboard
server: shiny
---

```{r}
#| context: setup
library(ggplot2)
dataset <- diamonds
```

## {.sidebar}

```{r}
sliderInput('sampleSize', 'Sample Size', 
            min=1, max=nrow(dataset),
            value=min(1000, nrow(dataset)), 
            step=500, round=0)
br()
checkboxInput('jitter', 'Jitter')
checkboxInput('smooth', 'Smooth')
```

```{r}
selectInput('x', 'X', names(dataset))
selectInput('y', 'Y', names(dataset), names(dataset)[[2]])
selectInput('color', 'Color', c('None', names(dataset)))
```

```{r}
selectInput('facet_row', 'Facet Row',
  c(None='.', names(diamonds[sapply(diamonds, is.factor)])))
selectInput('facet_col', 'Facet Column',
  c(None='.', names(diamonds[sapply(diamonds, is.factor)])))
```

## Column {.tabset}

```{r}
#| title: Plot
plotOutput('plot')
```

```{r}
#| title: Data
tableOutput('data')
```

```{r}
#| context: server

dataset <- reactive({
  diamonds[sample(nrow(diamonds), input$sampleSize),]
})
 
output$plot <- renderPlot({
  
  p <- ggplot(
    dataset(), 
    aes_string(x=input$x, y=input$y)) + geom_point()
  
  if (input$color != 'None')
    p <- p + aes_string(color=input$color)
  
  facets <- paste(input$facet_row, '~', input$facet_col)
  if (facets != '. ~ .')
    p <- p + facet_grid(facets)
  
  if (input$jitter)
    p <- p + geom_jitter()
  if (input$smooth)
    p <- p + geom_smooth()
  
  p
  
})

output$data <- renderTable({
  dataset()
})
```
```````

## File: docs/dashboards/_examples/shiny-global-sidebar.qmd
```````
---
title: "Palmer Penguins"
author: "Cobblepot Analytics"
format: dashboard
server: shiny
---

```{python}
#| context: setup
import seaborn as sns
penguins = sns.load_dataset("penguins")
species = list(penguins["species"].value_counts().index)
islands = list(penguins["island"].value_counts().index)
```

# {.sidebar}

![](images/penguins.png){width="80%"}

```{python}
from shiny import reactive
from shiny.express import render, ui

ui.input_checkbox_group(
    "species", "Species:",
    species, selected = species
)

ui.input_checkbox_group(
    "islands", "Islands:",
    islands, selected = islands
)

@reactive.calc
def filtered_penguins():
    data = penguins[penguins["species"].isin(input.species())]
    data = data[data["island"].isin(input.islands())]
    return data
```

```{python}
ui.input_select("dist", "Distribution:", choices=["kde", "hist"])
ui.input_checkbox("rug", "Show rug marks", value = False)
```

[Learn more](https://pypi.org/project/palmerpenguins/) about the
Palmer Penguins dataset.


# Plots

```{python}
#| title: Bill Depth
@render.plot
def depth():
    return sns.displot(
        filtered_penguins(), x = "bill_depth_mm",
        hue = "species", kind = input.dist(),
        fill = True, rug=input.rug()
    )
```

```{python}
#| title: Bill Length
@render.plot
def length():
    return sns.displot(
        filtered_penguins(), x = "bill_length_mm",
        hue = "species", kind = input.dist(),
        fill = True, rug=input.rug()
    )
```

# Data

```{python}
@render.data_frame
def dataview():
    return render.DataGrid(filtered_penguins(), height = "100%")
```
```````

## File: docs/dashboards/_examples/shiny-python-simple.qmd
```````
---
title: "Penguin Bills"
format: dashboard
server: shiny
---

```{python}
import seaborn as sns
penguins = sns.load_dataset("penguins")
```

## {.sidebar}

```{python}
from shiny.express import render, ui
ui.input_select("x", "Variable:",
                choices=["bill_length_mm", "bill_depth_mm"])
ui.input_select("dist", "Distribution:", choices=["hist", "kde"])
ui.input_checkbox("rug", "Show rug marks", value = False)
```

## Column

```{python}
@render.plot
def displot():
    sns.displot(
        data=penguins, hue="species", multiple="stack",
        x=input.x(), rug=input.rug(),kind=input.dist())
```
```````

## File: docs/dashboards/_examples/shiny-sidebar.qmd
```````
---
title: "Palmer Penguins"
author: "Cobblepot Analytics"
format: dashboard
server: shiny
---

```{python}
#| context: setup
import seaborn as sns
penguins = sns.load_dataset("penguins")
species = list(penguins["species"].value_counts().index)
islands = list(penguins["island"].value_counts().index)
```

## {.sidebar}

![](images/penguins.png){width="80%"}

```{python}
from shiny import reactive
from shiny.express import render, ui

ui.input_checkbox_group(
    "species", "Species:",
    species, selected = species
)

ui.input_checkbox_group(
    "islands", "Islands:",
    islands, selected = islands
)

@reactive.calc
def filtered_penguins():
    data = penguins[penguins["species"].isin(input.species())]
    data = data[data["island"].isin(input.islands())]
    return data
```

```{python}
ui.input_select("dist", "Distribution:", choices=["kde", "hist"])
ui.input_checkbox("rug", "Show rug marks", value = False)
```

[Learn more](https://pypi.org/project/palmerpenguins/) about the
Palmer Penguins dataset.


## Column

```{python}
#| title: Bill Depth
@render.plot
def depth():
    return sns.displot(
        filtered_penguins(), x = "bill_depth_mm",
        hue = "species", kind = input.dist(),
        fill = True, rug=input.rug()
    )
```

```{python}
#| title: Bill Length
@render.plot
def length():
    return sns.displot(
        filtered_penguins(), x = "bill_length_mm",
        hue = "species", kind = input.dist(),
        fill = True, rug=input.rug()
    )
```
```````

## File: docs/dashboards/_examples/valuebox.qmd
```````
---
title: "Value Boxes"
format: dashboard
engine: jupyter
---

```{python}
articles = 45
comments = 126
```

## Row 

```{python}
#| content: valuebox
#| title: "Articles per day"
#| icon: pencil
#| color: primary

articles
```

```{python}
#| content: valuebox
#| title: "Comments per day"

dict(
  icon = "pencil",
  color = "primary",
  value = comments
)
```

## Row

Here we go
```````

## File: docs/dashboards/interactivity/shiny-python/_shiny-requirements.qmd
```````
::: {.callout-note}
### Shiny Prerequisites

In order to use Shiny within Quarto documents you will need the latest version of the `shiny` (>=0.9.0) and `shinywidgets` (>=0.3.1) packages. You can install the latest version of these with:

```{.bash}
pip install --upgrade shiny shinywidgets
```
:::
```````

## File: docs/dashboards/interactivity/shiny-python/execution.qmd
```````
---
title: "Execution Contexts"
---

## Overview

Shiny interactive documents contain both code that executes at render time as well as code that executes on the server in response to user actions and changes in input values. A solid understanding of these execution contexts is important both to have the right mental model during development as well as to optimize the performance of your document.

## Default Execution

By default, all of the Python code in your document is executed at two different times:

1)  When you render the document using `quarto render` or `quarto preview`; and

2)  Whenever a new user connects to the Shiny application generated from the document.

If the render time of your document is short, this default execution pattern will likely serve you well and you don't need to think further about optimizing execution contexts.

## Setup Context

Many documents include setup code that loads required packages and data. If this setup code takes longer than a couple of seconds, it may make sense to explicitly designate it as setup code using the `context: setup` cell option. For example:

````python
```{{python}}
#| context: setup
import seaborn as sns
penguins = sns.load_dataset("penguins")
```
````

When you add `context: setup` to a cell, the code cell will be executed:

1)  When you render the document using `quarto render` or `quarto preview`; and

2)  At the startup of the Shiny application (this is in contrast to the default behavior which is to run the code whenever a new user connects to the application).

Explicitly designating setup code using `context: setup` is likely the only thing you'll need to do in terms of explicitly specifying execution contexts. Not only does `context: setup` address the most common performance issues, it also preserves simple and easy to reason about source code (all data and functions in the document are available at both render and serve time).

## UI Context

It's possible that you have cells in your document that _only_ contribute to the user interface and does not need to execute on the server. For example, this could be a static visualization that is never dynamically redrawn in response to changes in inputs.

To designate a call as only contributing to the user interface, specify the `context: ui` cell option. For example:

````python
```{{python}}
#| context: ui

# plot that isn't ever updated after initial rendering 
sns.lmplot(
    data=penguins,
    x="bill_length_mm", y="bill_depth_mm", hue="species",
    height=5
)
```
````

Cells with `context: ui` will only run during `quarto render`. Code and data created by this cell are not available when the application is served. 

## Learning More

To learn more about Shiny for Python interactive documents see the following articles:

-   [Getting Started](index.qmd) explains the basics of Shiny interactive documents.

-   [Component Browser](https://jcheng.shinyapps.io/shiny-component-browser/#outputs) enumerates the available Shiny inputs and outputs, along with code snippets you can copy and paste into your dashboard. 

-   [Input Layout](/docs/dashboards/inputs.qmd) describes various ways to layout inputs (sidebars, input panels, attaching inputs directly to cards, etc.).

-   [Running Dashboards](running.qmd) covers how to run interactive dashboards both within VS Code and at the command line, as well as how to deploy them to end users.

-   [Shiny for Python](https://shiny.posit.co/py/) provides in-depth documentation on all of the available UI and ouput widgets, as well as conceptual discussions on how things work.
```````

## File: docs/dashboards/interactivity/shiny-python/index.qmd
```````
---
title: "Dashboards with Shiny for Python"
code-annotations: select
lightbox: auto
aliases:
  - /docs/dashboards/interactivity/shiny-python.html
---

{{< include /docs/_require-1.4.qmd >}}



## Introduction

The [Shiny](https://shiny.posit.co/py/) package provides an easy way to build web applications with Python. Quarto dashboards can include embedded Shiny components (e.g. a plot with sliders that control its inputs).

This section assumes you have no experience with Shiny, and will teach you the basic concepts you need to get up and running with Shiny with Quarto. <!-- You can learn much more about Shiny at the official [Shiny website](https://shiny.posit.co/py/)--although note that the documentation there is written for non-Quarto uses of Shiny, which currently involve a slightly different syntax. -->

If you are using R rather than Python, see the documentation on using [Shiny for R](../shiny-r.qmd).

{{< include _shiny-requirements.qmd >}}

## Hello, Shiny

We'll start with a very simple dashboard that consists of a single plot and some inputs to drive its display:

{{< include _shiny-sidebar.md >}}

In this dashboard, you can choose different values from the select boxes on the left, and the plot will update to reflect your choices. You can also click the checkbox to show or hide rug marks. Let's go through the construction of this Shiny-enabled dashboard one step at a time.

### Metadata

The first thing to do is add `server: shiny` to the front matter. This tells Quarto that the document should be rendered as a Shiny dashboard (which requires a Python runtime whenever the dashboard is being viewed), rather than as a static HTML page. When you run `quarto preview <filename>.qmd` on a `server: shiny` document, Quarto will start and maintain a Shiny process for you and open the dashboard in your browser.

### Adding Input Controls

Next, we use functions matching the pattern `ui.input_xxx` to create input controls. For example, `ui.input_select()` creates a select box, `ui.input_slider()` creates a slider, and so on. The values returned by these functions are then rendered into HTML and JavaScript by Quarto.

This example only uses two types of inputs, but Shiny has many more. Use the [Shiny Component Browser](https://jcheng.shinyapps.io/shiny-component-browser/) to see them all, along with code snippets you can copy and paste into your dashboard.

The example above defined an input with the following code:


```` {.python .pymd}
```{{python}}
ui.input_select("x", label="Variable:",
                choices=["bill_length_mm", "bill_depth_mm"])
```
````

**Every input function takes an input ID as its first argument.** An input ID is string that uniquely identifies this input; it must be a simple, syntactically valid Python variable name. We will use this ID to access the input's value from other parts of the dashboard.

::: {.callout-warning}
Make sure each input ID in your Shiny dashboard is unique. If you use the same ID for two different inputs, Shiny will not be able to tell them apart, and your dashboard will not work correctly.
:::

The second argument for each input function is usually a human-readable string that will be displayed next to the input control. For example, the `ui.input_select()` function passes `"Variable:"`as the second argument, which is why the select box has the label "Variable:" next to it.

#### Sidebars and Toolbars

In many dashboards, it's desirable to visually gather all of your input controls into a sidebar. You can do this by adding the `.sidebar` class to a level 2 heading, as we did in the example:

````{.python .pymd}
## {.sidebar}

```{{python}}
ui.input_select("x", "Variable:",
                choices=["bill_length_mm", "bill_depth_mm"])
ui.input_select("dist", "Distribution:", choices=["hist", "kde"])
ui.input_checkbox("rug", "Show rug marks", value = False)
```
````

As an alternative to sidebars, you can also layout inputs horizontally, or even attach them directly to cards. See the article on [Inputs](/docs/dashboards/inputs.qmd) for further details.



### Displaying Dynamic Output

In Shiny, dashboards can contain outputs---plots, tables, text, etc.---that dynamically update in response to user input.

The example above defined a dynamic plot with the following code:

```` {.python .pymd}
```{{python}}
@render.plot
def displot():
    sns.displot(
        data=penguins, hue="species", multiple="stack",
        x=input.x(), rug=input.rug(), kind=input.dist())
```
````

The function here is given the name `displot`. The body of the function is using typical Seaborn code to create the plot. And a `@render.plot` decorator is added to the function, to indicate to Shiny that this function should be used to create a plot. (If you haven't seen decorators before, they're a Python feature that allows you to add additional behavior to a function.)

The `input.x()`, `input.rug()`. and `input.dist()` method calls are retrieving the values of the `x`, `rug`, and `dist` inputs created earlier in the dashboard.

Note that our code never calls the `displot()` function! Just the act of defining the function, and decorating it with `@render.plot`, is enough to tell Shiny and Quarto to:

* Insert a plot into the dashboard at this location.
* Use the function body to create the plot.
* Automatically re-run the function body whenever the values of `input.x()`, `input.rug()`, or `input.dist()` change due to user interaction, and use the result to update the existing plot.

This example only contains a single `@render.plot` output, but it's possible for Shiny apps to contain multiple outputs, and outputs of different types, as you'll see in the following example. Check out the [Shiny Component Browser](https://jcheng.shinyapps.io/shiny-component-browser/#outputs) to see what types of outputs are available.

### Reactive Programming

In the previous section, we said that the `displot` function would re-run _automatically_ whenever any of the inputs it referred to changed. Shiny is a **reactive programming** framework, meaning it takes care of tracking the relationships between inputs and outputs in your app. When an input changes, only outputs that are affected by that input are re-rendered. This is a powerful feature that makes it easy to create dashboards that respond to user input efficiently.

::: {.callout-note}
The `input` object is designed to be tracked by Shiny's reactive framework,

Shiny specifically tracks changes to _reactivity-aware_ objects like the `input` object, not to just any arbitrary Python variable. You can't just write `x = 100`, then use `x` from the `displot` function, and expect `displot` to automatically rerun whenever `x` changes.

Similarly, Shiny will only automatically re-run functions that are reactivity-aware, like ones decorated with `@render.plot`. It will not help re-execute code at the top level of the document or code in regular Python functions.
:::

## Additional Features

Next, we'll explore a more in-depth example that covers more features, including factoring out setup code, reactive calculations, and more advanced layout constructs like pages. Here is the interactive document we'll be building:

![](/docs/dashboards/images/penguins-shiny.png){.border fig-alt="Screenshot of a Palmer Penguins dashboard. Navigation bar shows two pages: Plots and Data. On the left is a sidebar with an image of penguins followed by four inputs: a set of checkboxes for Species; a set of checkboxes for Islands; and dropdown for Distribution; and a checkbox to show rug marks. On the right the page is divided into two rows each showing a density plot: the top row of bill_depth_mm; the bottom row of bill_length_mm"}

Here is the source code for this dashboard. You can click on the numbers on the far right for additional explanation of syntax and mechanics, and we'll also explain in more detail below.

{{< include _shiny-advanced.md >}}

### Setup Cell

In static Quarto documents, `{python}` code cells run only when the document is rendered, not when it is viewed. In `server: shiny` documents, `{python}` code cells are run both during render time _and_ each time the dashboard is loaded in a browser. This is important because each visitor to the dashboard needs their own independent copies of inputs/outputs in memory, so that simultaneous users don't interfere with each other.

However, sometimes we have code that would be excessive to run for every user, and we only want the code to run once, when the document's Shiny runtime process is starting up. For example, in the example above, we import packages and load data using `sns.load_dataset("penguins")`:

````{.python .pymd}
```{{python}}
#| context: setup
import seaborn as sns
from shiny import reactive
from shiny.express import render, ui
penguins = sns.load_dataset("penguins")
```
````

We do this in a setup cell because it would be wasteful in terms of both time and memory to load the data once for each user, instead of once for the process.

By simply adding `#| context: setup` to the code cell, we can tell Quarto to run the code only once, when the Shiny process starts up. Setup cells are a great way to factor out code that you want to run once, not on every page load. Variables you define in setup cells can be read by all other code cells in the document.

### Dashboard Pages

At the top of this dashboard, you can see "Plots" and "Data" headings. These are called **dashboard pages**. Dashboard pages are a way to organize your dashboard into multiple pages, each with its own set of outputs. You can insert dashboard pages by adding level 1 headings to your Markdown. In this case, `# Plots` and `# Data`:

```` {.python .pymd}
# Plots

# Data
````

### Data Frame Outputs

On the Data page, there's a dynamic data frame output. This is created by the following code:

```` {.python .pymd}
```{{python}}
@render.data_frame
def dataview():
    return render.DataGrid(filtered_penguins())
```
````

In a `@render.data_frame` function, you can simply return a Pandas data frame, and Shiny will automatically render it as an interactive data grid. (The `filtered_penguins()` function is a reactive calculation that returns a data frame--we'll explore that next.)

You also have the option of wrapping the data frame object in a [`render.DataGrid`](https://shiny.posit.co/py/api/render.DataGrid.html) or [`render.DataTable`](https://shiny.posit.co/py/api/render.DataTable.html#shiny.render.DataTable) constructor; in this case, we're using the former. This is not strictly necessary, but it allows you to set additional options on the data grid or table, such as filtering and selection.

The only difference between `render.DataGrid` and `render.DataTable` is the appearance of the rendered table: `render.DataGrid` uses a more compact, spreadsheet-like appearance, while `render.DataTable` uses a more traditional table appearance.

### Reactive Calculations

In this example, the user uses select boxes to filter a dataset, and the filtered dataset is displayed in three different dynamic outputs: two plots and a data frame. Remember that as inputs change, Shiny automatically re-executes functions decorated with `@render.plot` and `@render.data_frame` that are affected by those inputs. But where do we put the code that filters the dataset?

The most obvious place would be to duplicate the code in each of the three rendering functions. But this is a bad idea, both because duplicate code is annoying to maintain, and because it would be inefficient to re-run the same filtering code three times just to get the exact same results. We could extract the duplicated code into a function, which would remove the maintenance problem, but it would not be any more efficient.

Shiny has a solution: **reactive calculations**. A reactive calculation is a reactive-aware function that is re-executed whenever its inputs change, but whose return value is not rendered into the dashboard. Instead, the return value is cached, and can be accessed by rendering functions (or even by other reactive calculations). This allows us to place the filtering logic in a single reactive calculation, and then have the three rendering functions access the filtered dataset from the reactive calculation.

To create a reactive calculation, we use the `@reactive.calc` decorator. The following code creates a reactive calculation called `filtered_penguins`:

```` {.python .pymd}
```{{python}}
@reactive.calc
def filtered_penguins():
    data = penguins[penguins["species"].isin(input.species())]
    data = data[data["island"].isin(input.islands())]
    return data
```
````

To read the value of a reactive calc, call it like a function. For example, the `depth` plot looks like this:

```` {.python .pymd}
```{{python}}
@render.plot
def depth():
    return sns.displot(
        filtered_penguins(), x = "bill_depth_mm",
        hue = "species", kind = input.dist(),
        fill = True, rug=input.rug()
    )
```
````

Note the `filtered_penguins()` call. To reiterate, this call does not necessarily cause the `filtered_penguins` function to run. Instead, it usually returns the cached value of the function, which is automatically updated whenever the inputs it refers to change. And because the `depth` plot refers to the `filtered_penguins` calculation, it will be re-rendered whenever those inputs change.

## Learning More

To learn more about Shiny for Python interactive documents see the following articles:

[Component Browser](https://jcheng.shinyapps.io/shiny-component-browser/#outputs) enumerates the available Shiny inputs and outputs, along with code snippets you can copy and paste into your dashboard.

[Input Layout](/docs/dashboards/inputs.qmd) describes various ways to layout Shiny inputs (sidebars, input panels, attaching inputs directly to cards, etc.)

[Running Dashboards](running.qmd) covers in more depth how to run Shiny dashboards both within VS Code and at the command line, as well as how to deploy them to end users.

[Execution Contexts](execution.qmd) goes in depth on when different code cells run (e.g. rendering vs. serving).

[Shiny for Python](https://shiny.posit.co/py/) provides in-depth documentation on all of the available UI and ouput widgets, as well as conceptual discussions on how things work.
```````

## File: docs/dashboards/interactivity/shiny-python/running.qmd
```````
---
title: "Running Dashboards"
lightbox: auto
---

## Overview

There are a number of ways to run Shiny for Python interactive documents:

1.  Use the **Quarto: Preview** command within VS Code.
2.  Use the `quarto preview` command line interface with any editor.
3.  Deploy them to a server for use by a wider audience.

We'll cover all of these scenarios in depth here.

{{< include _shiny-requirements.qmd >}}

## VS Code

The [Quarto VS Code Extension](https://marketplace.visualstudio.com/items?itemName=quarto.quarto) provides integrated support for previewing Shiny interactive documents (just use the **Quarto: Preview** command as you normally would with a static document):

![](images/preview-dashboard.png){.border fig-alt="Screenshot of VS Code with the file shiny.qmd open in the left pane. On the right is a pane labelled Quarto Preview showing the live dashboard."}

Note that you need the very latest version of the VS Code extension (v1.105.0 or greater) to preview Shiny interactive documents.

## Command Line

If you are using another notebook or text editor, you can also preview Shiny interactive documents from the command line via `quarto preview`. This works the same for notebooks (`.ipynb`) and plain text markdown (`.qmd`). For example:

``` {.bash filename="Terminal"}
quarto preview example.ipynb
quarto preview example.qmd
```

There are a number of options to the `preview` command to control the port and host of the document server as well as whether a browser is automatically opened for the running document. You can learn more about these options with `quarto preview help`.

If you want to serve your document without the features of `quarto preview` (i.e. automatic re-rendering when the document changes) you can use the `quarto serve` command:

``` {.bash filename="Terminal"}
quarto serve example.qmd
```


## Deployment

{{< include _shiny-deployment.md >}}


## Debugging

You can run an interactive debugging session for Shiny  documents by debugging the generated `.py` application file (e.g. `hello-app.py`). Use the **Debug Shiny App** menu command at the top right of the editor to launch a debugging session:

![](images/debug.png){.border fig-alt="Screenshot of VS Code with the file hello-app.py open. In the top right, a menu is open from the Run dropdown with the Debug Shiny App item selected."}

::: {.callout-caution title="Important Note"}
The file you are debugging (e.g. `hello-app.py`) is _generated_ from your interactive document. You should therefore not edit this file directly (as it will be overwritten on the next render) but rather the source document from which it is generated (e.g. `hello.qmd`).
:::

## Learning More

To learn more about Shiny for Python interactive documents see the following articles:

-   [Getting Started](index.qmd) explains the basics of Shiny interactive documents.

-   [Component Browser](https://jcheng.shinyapps.io/shiny-component-browser/#outputs) enumerates the available Shiny inputs and outputs, along with code snippets you can copy and paste into your dashboard. 

-   [Input Layout](/docs/dashboards/inputs.qmd) describes various ways to layout Shiny inputs (sidebars, input panels, attaching inputs directly to cards, etc.)


-   [Execution Contexts](execution.qmd) goes in depth on when different code cells run (e.g. rendering vs. serving).

-   [Shiny for Python](https://shiny.posit.co/py/) provides in-depth documentation on all of the available UI and ouput widgets, as well as conceptual discussions on how things work.
```````

## File: docs/dashboards/interactivity/index.qmd
```````
---
title: "Interactive Dashboards"
---

## Overview

Adding interactivity to a dashboard helps uses explore the concepts and data you are presenting more deeply. There are several ways to add interactive components to Quarto dashboards:

- [Shiny for Python](shiny-python/index.qmd) for dashboards that use Jupyter for computations (requires a server component for deployment).

- [Shiny for R](shiny-r.qmd) for dashboards that use Knitr for computations (requires a server component for deployment).

- [Observable JS](observable.qmd) for client-side interactivity using the Observable dialect of JavaScript.

- [Jupyter Widgets](/docs/interactive/widgets/jupyter.qmd) or [htmlwidgets](/docs/interactive/widgets/htmlwidgets.qmd) for client-side interactivity based on standard Python and R JavaScript widget frameworks.

::: {.callout-note appearance="simple"}
Using Shiny-based interactivity is generally much more flexible and capable than client-only interactivity, however requires a server for deployment.
:::

## Input Layout

No matter which type of interactivity you choose, you'll want to present user inputs in a clear, accessible fashion. While you can locate inputs anywhere within a dashboard, there are some special containers that are tuned for this purpose:

- [Sidebars](/docs/dashboards/inputs.qmd#sidebars) provide a collapsible, full height panel for inputs.

- [Toolbars](/docs/dashboards/inputs.qmd#toolbars) provide a full page width horizontal panel for inputs.

- [Card Toolbars](/docs/dashboards/inputs.qmd#card-toolbars) are directly embedded in the header or footer of cards.

The article on [Inputs](/docs/dashboards/inputs.qmd) covers these methods in depth along with tips on doing more sophisticated layout of groups of inputs.
```````

## File: docs/dashboards/interactivity/observable.qmd
```````
---
title: "Dashboards with Observable JS"
code-annotations: select
lightbox: auto
---

## Introduction

Quarto includes native support for [Observable JS](https://observablehq.com/@observablehq/observables-not-javascript), a set of enhancements to vanilla JavaScript created by [Mike Bostock](https://en.wikipedia.org/wiki/Mike_Bostock) (also the author of [D3](https://d3js.org/)). Observable JS is distinguished by its [reactive runtime](https://github.com/observablehq/runtime), which is especially well suited for interactive data exploration and analysis.

The creators of Observable JS (Observable, Inc.) run a hosted service at <https://observablehq.com/> where you can create and publish notebooks. Additionally, you can use Observable JS ("OJS") in standalone documents and websites via its [core libraries](https://github.com/observablehq). Quarto uses these libraries along with a [compiler](https://github.com/asg017/unofficial-observablehq-compiler/tree/beta) that is run at render time to enable the use of OJS within Quarto documents.

## Walkthrough

Quarto Dashboards are a great way to present interactive OJS visualizations. Below we'll provide a complete example which will give you a high level view of the basics. If you want to learn more, please see the complete documentation on [Using OJS with Quarto](/docs/interactive/ojs/index.qmd).

This example covers many of the techniques you'll use when creating dashboards with OJS, including reactive calculations and more advanced layout constructs like sidebars and tabsets. Here is the interactive document we'll be building:

![](../images/penguins-ojs.png){.border fig-alt="A screenshot of a Palmer Penguins dashboard. The navigation bar shows two pages: Plot (active) and Data. On the left a sidebar with an image of penguins and two inputs: a range input for Bill length; and a set of checkboxes for Islands. On the right a plot with histgrams of body mass facetted by sex and species, with bars colored by species."}

The source code for this dashboard is below. Note that we add the <br/>
`//| output: false` option to the first cell: this is to designate the cell as having only intermediate computations (so it should not be turned into a card in the dashboard layout).

Click on the numbers on the far right for additional explanation of syntax and mechanics)

```` {.python .pymd}
---
title: "Palmer Penguins"
author: "Cobblepot Analytics"
format: dashboard
---

```{{ojs}}
//| output: false # <1>

data = FileAttachment("penguins.csv") # <2>
  .csv({ typed: true }) # <2>

filtered = data.filter(function(penguin) {  # <3>
  return bill_length_min < penguin.bill_length_mm && # <3>
         islands.includes(penguin.island); # <3>
}) # <3>
```

# {.sidebar} # <4>

![](images/penguins.png){width="80%"}

```{{ojs}} # <5>
viewof bill_length_min = Inputs.range(
  [32, 50], 
  {value: 35, step: 1, label: "Bill length (min):"}
)
viewof islands = Inputs.checkbox(
  ["Torgersen", "Biscoe", "Dream"], 
  { value: ["Torgersen", "Biscoe", "Dream"], 
    label: "Islands:"
  }
)
``` # <5>

# Plot # <6>

```{{ojs}} # <7>
Plot.rectY(filtered, 
  Plot.binX(
    {y: "count"}, 
    {x: "body_mass_g", fill: "species", thresholds: 20}
  ))
  .plot({
    facet: {
      data: filtered,
      x: "sex",
      y: "species",
      marginRight: 80
    },
    marks: [
      Plot.frame(),
    ]
  }
)
```  # <7>

# Data

```{{ojs}} # <8>
Inputs.table(filtered)
``` # <8>
````

1. We set `output: false` to indicate that this cell includes only intermediate calculations and should not have its contents printed.

2.  We read the raw penguins dataset from a CSV when the page loads.

3.  `filtered` is a value that is automatically recomputed when variables declared with `viewof` change (in this case `bill_length_min` and `islands`).

4.  Create global sidebars by adding the `.sidebar` class to a level 1 heading. Sidebars can include code cells as well as images, narrative, and links.

5.  Here we define our inputs using `viewof` so that the `filtered` dataset is automatically recomputed when they change.

6. Level 1 headings (here `# Plots` and `# Data`) create pages within the dashboard.

7.  The plot is automatically redrawn whenever the `filtered` dataset changes.

8.  The tabular data display is automatically refreshed whenever the `filtered` dataset changes.

## Learning More

To learn more about using OJS with Quarto, see the following articles:

[Input](/docs/dashboards/inputs.qmd) describes various ways to layout  inputs (sidebars, input panels, attaching inputs directly to cards, etc.).

[Using OJS](/docs/interactive/ojs/index.qmd) provides an introduction and overview of other topics.

[OJS Libraries](/docs/interactive/ojs/libraries.qmd) covers using standard libraries and external JavaScript libraries.

[OJS Data Sources](/docs/interactive/ojs/data-sources.qmd) outlines the various ways to read and pre-process data.

[OJS Cells](/docs/interactive/ojs/ojs-cells.qmd) goes into more depth on cell execution, output, and layout.

[OJS Code Reuse](/docs/interactive/ojs/code-reuse.qmd) delves into ways to re-use OJS code across multiple documents.
```````

## File: docs/dashboards/interactivity/shiny-r.qmd
```````
---
title: "Dashboards with Shiny for R"
code-annotations: select
lightbox: auto
---

{{< include /docs/_require-1.4.qmd >}}


## Introduction

The [Shiny](https://shiny.posit.co/r/getstarted/shiny-basics/lesson1/index.html) package provides an easy way to build web applications with R. Quarto dashboards can include embedded Shiny components (e.g. a plot with sliders that control its inputs).

This section covers integrating Shiny with Quarto and assumes that you already have basic familiarity with Shiny. To learn more about Shiny please visit <https://shiny.posit.co/r/getstarted/shiny-basics/lesson1/index.html>. If you are using Python rather than R, see the documentation on using [Shiny for Python](shiny-python/index.qmd).

## Walkthrough

Here we'll explore an in-depth example that covers many of the techniques you'll use when creating dashboards with Shiny, including factoring out setup code, reactive calculations, and more advanced layout constructs like sidebars and tabsets. Here is the interactive document we'll be building:

![](../images/shiny-diamonds.png){.border fig-alt="Screenshot of a Diamonds Explorer App. The navigation bar shows two pages: Plot (active), and Data. On the left a sidebar contains eight inputs: a sample size slider; two checkboxes for Jitter and Smooth (both checked); and a dropdown for each of X, Y, Color, Facet Row and Facet Col. On the right, a plot of cut versus carat using points colored by clarity."}

Here is the source code for this dashboard (click on the numbers on the far right for additional explanation of syntax and mechanics):

```` {.python .pymd}
---
title: "Diamonds Explorer"
author: "Barkamian Analytics"
format: dashboard
server: shiny # <1>
---

```{{r}} # <2>
#| context: setup
library(ggplot2)
dataset <- diamonds
``` # <3>

# {.sidebar} # <3>

```{{r}}
sliderInput('sampleSize', 'Sample Size', 
            min=1, max=nrow(dataset),
            value=min(1000, nrow(dataset)), 
            step=500, round=0)
br()
checkboxInput('jitter', 'Jitter')
checkboxInput('smooth', 'Smooth')
```

```{{r}} # <4>
selectInput('x', 'X', names(dataset)) 
selectInput('y', 'Y', names(dataset), names(dataset)[[2]])
selectInput('color', 'Color', c('None', names(dataset)))
```

```{{r}}
selectInput('facet_row', 'Facet Row',
  c(None='.', names(diamonds[sapply(diamonds, is.factor)])))
selectInput('facet_col', 'Facet Column',
  c(None='.', names(diamonds[sapply(diamonds, is.factor)])))
``` # <4>

# Plot # <5>

```{{r}}
plotOutput('plot')
```

# Data

```{{r}}
tableOutput('data')
``` # <5>

```{{r}}
#| context: server # <6>

dataset <- reactive({ # <7>
  diamonds[sample(nrow(diamonds), input$sampleSize),] # <7>
}) # <7>
 
output$plot <- renderPlot({  # <8>
  
  p <- ggplot(
    dataset(), 
    aes_string(x=input$x, y=input$y)) + geom_point()
  
  if (input$color != 'None')
    p <- p + aes_string(color=input$color)
  
  facets <- paste(input$facet_row, '~', input$facet_col)
  if (facets != '. ~ .')
    p <- p + facet_grid(facets)
  
  if (input$jitter)
    p <- p + geom_jitter()
  if (input$smooth)
    p <- p + geom_smooth()
  
  p
  
})

output$data <- renderTable({ # <9>
  dataset()
})
```
````


1.  The `server: shiny` option instructs Quarto to run a Shiny Server behind the document.

2.  The `context: setup` cell option indicates that this code cell should run when the application starts (as opposed to when each new client session starts). Expensive initialization code (e.g. loading data) should be placed in `context: setup`.

3.  Create global sidebars by adding the `.sidebar` class to level 1 headings. Sidebars can include code cells as well as images, narrative, and links.

4.  These select inputs have their contents dynamically driven from the available columns in the dataset.

5.   Level 1 headings (here `# Plots` and `# Data`) create pages within the dashboard.

6.  Include server code (reactives that compute values or render output) in a cell with `context: server`.

7.  The `dataset()` reactive will be called to re-sample the dataset every time the sample size changes.

8.  The `renderPlot()` function regenerates the plot whenever the `dataset()` reactive or another input option changes.

9. The `renderTable()` function regenerates the table whenever the `dataset()` reactive changes.

## Learning More

To learn more about Shiny for R interactive documents see the following articles:

[Input Layout](/docs/dashboards/inputs.qmd) describes various ways to layout Shiny inputs (sidebars, input panels, attaching inputs directly to cards, etc.)

[Running Documents](/docs/interactive/shiny/running.qmd) covers how to run interactive documents both within RStudio and at the command line, as well as how to deploy them to end users.

[Execution Contexts](/docs/interactive/shiny/execution.qmd) goes in depth on when different code blocks (e.g. rendering vs. serving) run as well as how to cache expensive computations for more responsive documents.

[External Resources](/docs/interactive/shiny/resources.qmd) describes how to make sure that Shiny can locate resources (e.g. CSS, JS, images, etc.) that you include in your document.
```````

## File: docs/dashboards/_inputs.qmd
```````
## Sidebars

Sidebars are a great place to group inputs for Shiny interactive dashboards. To include a sidebar, add the `.sidebar` class to a level 2 heading:

```` {.python .pymd style="overflow-x: hidden;"}
---
title: "Sidebar"
format: dashboard
---

## {.sidebar}

```{{python}}
```

## Column

```{{python}}
```

```{{python}}
```
````

Here's how a sidebar would appear (note there is a button in the top right that enables the user to optionally close the sidebar):

![](/docs/dashboards/images/sidebar.png){.border fig-alt="A screenshot of a Penguin Bills dashboard. A sidebar on the left contains two dropdown menus, one for Variable and one for Distribution and a checkbox to show rugmarks. On the right there are two plots: a histogram of bill_length_mm colored by species and a histogram of bill_depth_mm colored by species."}

### Global Sidebar

If you have a dashboard with [multiple pages](#pages), you may want the sidebar to be global (i.e. visible across all pages). To do this, add the `.sidebar` class to a level 1 heading:

```` {.python .pymd}
---
title: "Sidebar"
format: dashboard
---

# {.sidebar}

Sidebar content

# Plots

```{{python}}
```

# Data

```{{python}}
```
````



## Toolbars

Toolbars are similar to sidebars, but provide a horizontal layout for inputs. Create a toolbar by adding the `.toolbar` class to a level 2 row heading. For example, here we create a toolbar for an interactive dashboard that uses Shiny:

```` {.python .pymd}
---
title: "Toolbar"
format: dashboard
server: shiny
---

## {.toolbar}

```{{python}}
from shiny.express import ui, render
ui.input_select("x", "Variable:",
                choices=["bill_length_mm", "bill_depth_mm"])
ui.input_select("dist", "Distribution:", choices=["hist", "kde"])
ui.input_checkbox("rug", "Show rug marks", value = False)
```

## Row

```{{python}}
@render.plot
def displot():
  sns.displot(
    data=penguins, hue="species", multiple="stack",
    x=input.x(), rug=input.rug(), kind=input.dist())
```
````

### Global Toolbar

If you have a dashboard with [multiple pages](#pages), you may want the toolbar to be global (i.e. visible across all pages). To do this, add the `.toolbar` class to a level 1 heading:


```` {.python .pymd}
---
title: "Toolbar"
format: dashboard
server: shiny
---

# {.toolbar}

Toolbar content

# Page 1

```{{python}}
```

# Page 2

```{{python}}
```
````


## Card Toolbars

In some cases you may want to marry inputs more directly to a single output. To do this, define a card toolbar immediately above the cell that generates the output. You can do this by either adding the `content: card-toolbar` option to a cell or by creating a div with the `.card-toolbar` class. For example:

```` {.python .pymd}
```{{python}}
#| title: Penguin Bills
#| content: card-toolbar
from shiny.express import ui, render
ui.input_select("x", "Variable:",
                choices=["bill_length_mm", "bill_depth_mm"])
ui.input_select("dist", "Distribution:", choices=["hist", "kde"])
ui.input_checkbox("rug", "Show rug marks", value = False)
```

```{{python}}
@render.plot
def displot():
  sns.displot(
    data=penguins, hue="species", multiple="stack",
    x=input.x(), rug=input.rug(), kind=input.dist())
```
````

![](/docs/dashboards/images/card-toolbar.png){.border fig-alt="A screenshot of a Penguin Bills card. The card toolbar contains two dropdown menus, one for Variable and one for Distribution and a checkbox to show rugmarks. Below, a plot shows a histogram of bill_length_mm colored by species."}

Note that the `title` attribute is optional for card toolbars (if there is no title then inputs will left aligned in the place where the title is normallly displayed).
```````

## File: docs/dashboards/_layouts-old.qmd
```````
---
title: "Dashboard Layouts"
---

## Overview

This page includes a variety of sample layouts which you can use as a starting point for your own dashboards.

When creating a layout, it's important to decide up front whether you want your charts to fill the web page vertically (changing in height as the browser changes) or if you want the charts to maintain their original height (with the page scrolling as necessary to display all of the charts).

Filling the page is generally a good choice when you have only one or two charts vertically stacked. Alternatively you can use `scrolling: true` to specify a scrolling layout, which is generally a better choice for three or more charts vertically stacked.

## Chart Stack

This layout is a simple stack of two charts. This dashboard fills the page and allocates height evenly across the two charts.

::: {.chart-example .grid}
::: g-col-6
```` {.python .pymd}
---
title: "Stack"
format: dashboard  
---
    
```{{python}}

```

```{{python}}

```







````
:::

::: g-col-6
![](images/chart-stack-fill.png){fig-alt="Page is split into two equal height rows: Chart 1 is in top row, Chart 2 in bottom row. Dashboard Schematic."}
:::
:::

## Chart Stack (Height)

Here we use the `height` option to allocate more space to the top chart. Note that we don't specify a height on the bottom chart as it will be automatically computed to fill the remaining space.

::: {.chart-example .grid}
::: g-col-6
```` {.python .pymd}
---
title: "Stack w/ Height"
format: dashboard
---
    
```{{python}}
#| height: 70%

```

```{{python}}

```




````
:::

::: g-col-6
![](images/chart-stack-height.png){fig-alt="Page is split into two rows, the top row has a larger height than bottom row. Chart 1 is in top row, Chart 2 in bottom row. Dashboard Schematic."}
:::
:::

## Chart Stack (Scrolling)

This layout is a simple stack of three charts. To provide enough room to display all the charts a scrolling layout is used (`scrolling: true`). Note that because of its ability to scroll this layout could easily accommodate many more charts.

::: {.chart-example .grid}
::: g-col-6
```` {.python .pymd}
---
title: "Stack (Scrolling)"
format: 
  dashboard:
    scrolling: true 
---
    
```{{python}}
```

```{{python}}
```

```{{python}}
```

````
:::

::: g-col-6
![](images/chart-stack-scrolling.png){fig-alt="Page is split into three equal height rows. Chart 1 is in top row, Chart 2 in middle row, Chart 3 in bottom row. Dashboard Schematic."}
:::
:::

## Focal Chart (Top)

This layout fills the page completely and gives prominence to a single chart at the top (with two secondary charts included below). To achieve this layout it specifies `height` attributes on each row to establish their relative sizes.

::: {.chart-example .grid}
::: g-col-6
```` {.python .pymd}
---
title: "Focal (Top)"
format: dashboard
---
    
## Row {height=70%}

```{{python}}
```

## Row {height=30%}

```{{python}}
```

```{{python}}
```
````
:::

::: g-col-6
![](images/chart-focal-top.png){fig-alt="Page is split into two rows. The top row has a larger height than the second row. Chart 1 is in the top row and spans the full page width. The bottom row is split into two equal width columns. Chart 3 is in the left column; Chart 4 is in the right column. Dashboard Schematic."}
:::
:::

## Focal Chart (Left)

This layout fills the page completely and gives prominence to a single chart on the left (with two secondary charts included to the right). To achieve this layout we use `orientation: columns` (so that top level headings map to columns rather than rows). Additionally, we specify `width` attributes on each column to establish their relative sizes.

::: {.chart-example .grid}
::: g-col-6
```` {.python .pymd}
---
title: "Focal (Left)"
format: 
  dashboard:
    orientation: columns
---
    
## Column {width=60%}

```{{python}}
```

## Column {width=40%}

```{{python}}
```

```{{python}}
```
````
:::

::: g-col-6
![](images/chart-focal-left.png){fig-alt="Page is split into two columns. The left column is wider than the right, and contains Chart 1 spanning the full page height. The second column is split into two equal height rows: Chart 2 in the top row, and Chart 3 in the bottom row. Dashboard Schematic."}
:::
:::

## Chart Grid (2x2)

This layout is a 2x2 grid of charts. This layout uses the default filling behavior however depending on the ideal display size for the charts it might be preferable to allow the page to scroll (`scrolling: true`).

::: {.chart-example .grid}
::: g-col-6
```` {.python .pymd}
---
title: "Grid (2x2)"
format: dashboard
---
    
## Row 

```{{python}}
```

```{{python}}
```

## Row

```{{python}}
```

```{{python}}
```
````
:::

::: g-col-6
![](images/chart-grid.png){fig-alt="Page is split into a grid with two equal height rows and two equal width columns. Chart 1 top left; Chart 2 top right; Chart 3 bottom left; Chart 4 bottom right. Dashboard Schematic."}
:::
:::

## Multiple Pages

This layout defines multiple pages using level 1 markdown headers. Each page has its own top-level navigation tab. Further, the second page uses a distinct orientation via the `orientation` attribute. The use of multiple columns and rows with custom `width` and `height` attributes is also demonstrated.

````{.python .pymd}
---
title: "Multiple Pages"
format: dashboard
---

# Page 1
    
## Column {width="60%"}
    
```{{python}}
```
   
## Column {width="40%"}
   
```{{python}}
```  

# Page 2 {orientation="rows"}
   
## Row {height="60%"}
 
```{{python}}
```

## Row {height="40%"}
   
```{{python}}
```
    
````

## Tabset (Column)

This layout displays the right column as a set of two tabs. Tabs are especially useful when you have a large number of components to display and prefer not to require the user to scroll to access everything. Note that we specify a `title` option in each of the cells that produce a tab.

::: {.chart-example .grid}
::: g-col-6
```` {.python .pymd}
---
title: "Tabset (Column)"
format: 
  dashboard:
    orientation: columns
---
    
## Column

```{{python}}
```

## Column {.tabset}

```{{python}}
#| title: Chart 2
```

```{{python}}
#| title: Chart 3
```
````
:::

::: g-col-6
![](images/chart-tabset-column.png){fig-alt="Page is split into two equal width columns. The left column has Chart 1 spanning the full page height. The right column has a tabset spanning the full page height: Chart 2 is selected; Chart 3 is unselected. Dashboard Schematic."}
:::
:::

## Tabset (Row)

This layout displays the bottom row as a set of two tabs.

::: {.chart-example .grid}
::: g-col-6
```` {.python .pymd}
---
title: "Tabset (Row)"
format: dashboard
---
    
## Row

```{{python}}
```

## Row {.tabset}

```{{python}}
#| title: Chart 2
```

```{{python}}
#| title: Chart 3
```
````
:::

::: g-col-6
![](images/chart-tabset-row.png){fig-alt="Page is split into two equal height rows. The top row has Chart 1 spanning the full page width. The bottom row has a tabset spanning the full page width: Chart 2 is selected; Chart 3 is unselected. Dashboard Schematic."}
:::
:::

## Tabset (Nested)

You can include tabsets as arbitrarily deep levels. Here we include a tabset within a column of a top level row.

::: {.chart-example .grid}
::: g-col-6
```` {.python .pymd}
---
title: "Tabset (Card)"
format: dashboard
---
    
## Row {height=70%}

```{{python}}
```

## Row {height=30%}

### Column {.tabset}

```{{python}}
#| title: Chart 2
```

```{{python}}
#| title: Chart 3
```

### Column

```{{python}}
```
````
:::

::: g-col-6
![](images/chart-tabset-card.png){fig-alt="Page is split into two rows: the first higher than the second. Chart 1 is in the top row and spans the full page width. The bottom row is split into two equal width columns. The left column has a tabset: Chart 2 is selected; Chart 3 is unselected. The right column contains Chart 4. Dashboard Schematic."}
:::
:::

## Input Sidebar

This layout demonstrates how to add a sidebar to a dashboard page (Shiny or ObservableJS based dashboards will often present user input controls in a sidebar). To include a sidebar you add the `.sidebar` class to a level 2 heading

::: {.chart-example .grid}
::: g-col-6
```` {.python .pymd}
---
title: "Sidebar"
format: dashboard
---
    
## {.sidebar}

```{{python}}
```

## Column 

```{{python}}
```

```{{python}}
```
````
:::

::: g-col-6
![](images/chart-input-sidebar.png){fig-alt="Page is split into two columns. The column on the left is narrower than the right, and has a grey background representing the sidebar. The column on the right is split into two rows: Chart 1 in the top row; Chart 2 in the bottom row. Dashboard Schematic."}
:::
:::

## Global Sidebar

If you have a dashboard with [multiple pages](#multiple-pages), you may want the sidebar to be global (i.e. visible across all pages). To do this, add the `.sidebar` class to a level one heading:

```` {.python .pymd}
---
title: "Sidebar"
format: dashboard
---
    
# {.sidebar}

Sidebar content

# Page 1 

```{{python}}
```

# Page 2

```{{python}}
```
````


## Input Toolbar

Toolbars are similar to sidebars, but provide a horizontal layout for inputs. Create a toolbar by adding the `.toolbar` class to a row heading. For example:


```` {.python .pymd}
    
## {.toolbar}
    
```{{python}}
```

## Row

```{{python}}
```
````

## Card Toolbar

In some cases you may want to marry inputs more directly to a single output. To do this, define a card toolbar immediately above the cell that generates the output. For example:

```` {.python .pymd}     
```{{python}}
#| content: card-toolbar
```

```{{python}}
```
````


## Learning More


[Dashboard Components](components.qmd) shows you how to control the navigation bar, and how to arrange your content across pages, rows, columns, tabsets, sidebars, and cards.

[Data Display](data-display.qmd) shows you how to display data in your dashboard as plots, tables, value boxes, and text.

[Examples](/docs/gallery/index.qmd#dashboards) provides a gallery of example dashboards you can use as inspiration for your own.

[Theming](theming.qmd) describes the various way to customize the fonts, colors, layout and other aspects of dashboard appearance.

[Parameters](parameters.qmd) explains how to create dashboard variants by defining parameters and providing distinct values for them on the command line.

[Deployment](deployment.qmd) covers how to deploy both static dashboards (which require only a web host, but not a server) and Shiny dashboards (which require a Shiny Server).

[Interactivity](interactivity/index.qmd) explores the various ways to create interactive dashboards that enable more flexible data exploration.
```````

## File: docs/dashboards/data-display.qmd
```````
---
title: "Dashboard Data Display"
lightbox: auto
aliases: 
  - data-presentation.html
---

{{< include /docs/_require-1.4.qmd >}}

Dashboards are compositions of components used to provide navigation and present data. Below we'll cover presenting data using plots, tables, and value boxes, as well how to include narrative content within dashboards.

## Plots

Plots are by far the most common content type displayed in dashboards. Both interactive JavaScript-based plots (e.g. [Altair](https://altair-viz.github.io) and [Plotly](https://plotly.com/graphing-libraries/)) and standard raster based plots (e.g. [Matplotlib](https://matplotlib.org) or [ggplot2](https://ggplot2.tidyverse.org)) are supported.

Below we provide some language specific tips and techniques for including plots within dashboards.

::: {.panel-tabset group="language"}
## Python

### plotly

[Plotly](https://plotly.com/python/) is a popular Python package for JavaScript based plots, and works very well in dashboard layouts. Plotly is also noteworthy because it includes many interactive features while still not requiring a server. For example, this plot supports an animated display of values changing over time:

```` {.python .pymd}
```{{python}}
#| title: GDP and Life Expectancy
import plotly.express as px
df = px.data.gapminder()
px.scatter(
  df, x="gdpPercap", y="lifeExp", 
  animation_frame="year", animation_group="country",
  size="pop", color="continent", hover_name="country", 
  facet_col="continent", log_x=True, size_max=45, 
  range_x=[100,100000], range_y=[25,90]
)
```
````

![](images/plotly-interactive.png){fig-alt="Screenshot of a card titled GDP and Life Expectancy. The card contains a plot with a set of scatterplots. Below the plot is a slider of years with a play and stop button."}

### altair

[Altair](https://altair-viz.github.io) is a declarative statistical visualization library for Python based on Vega and Vega-Lite. Altair plots are JavaScript based so automatically resize themselves to fit their container within dashboards.

```` {.python .pymd}
```{{python}}
#| title: Iowa Electricity
import altair as alt
from vega_datasets import data
source = data.iowa_electricity()
alt.Chart(source).mark_area(opacity=0.3).encode(
  x="year:T",
  y=alt.Y("net_generation:Q").stack(None),
  color="source:N"
)
```
````

![](images/altair.png)

### matplotlib

{{< include _plots-raster.md >}}

If you are using [Matplotlib](https://matplotlib.org) (or libraries built on it like [Seaborn](https://seaborn.pydata.org)) then you can set plot sizes using the `figure.figsize` global option (or alternatively per-figure if that's more convenient):

```` python
```{{python}}
import matplotlib.pyplot as plt
plt.rcParams['figure.figsize'] = (12, 3)
```
````

In the case that your plots are laid out at a wider aspect ratio, setting this option can make a huge difference in terms of using available space. For example, the top plot in the stack below uses the default figure size of 8 x 5 and the bottom one uses the 12 x 3 ratio specified above:

![](images/matplotlib-size.png){fig-alt="Screenshot of a two cards one above the other. The top card contains a plot with large areas of white space on either side. The bottom card contains the same plot but resized to reduce the white space."}

Note that the need to explicitly size plots is confined to traditional plotting libraries---if you use Plotly or another JavaScript based plotting system plots will automatically resize to fill their container.

## R

### htmlwidgets

The [htmlwidgets](https://www.htmlwidgets.org/) framework provides high-level R bindings for JavaScript data visualization libraries. Some popular htmlwidgets include [Plotly](https://plot.ly/r/), [Leaflet](https://rstudio.github.io/leaflet/), and [dygraphs](https://rstudio.github.io/dygraphs).

You can use htmlwidgets just like you use normal R plots. For example, here is how we embed a Leaflet map:

```` python
```{{r}}
library(leaflet)
leaflet() %>%
  addTiles() %>% 
  addMarkers(lng=174.768, lat=-36.852, 
             popup="The birthplace of R")
```
````

There are dozens of packages on CRAN that provide htmlwidgets. You can find example uses of several of the more popular htmlwidgets in the htmlwidgets [showcase](https://www.htmlwidgets.org/showcase_leaflet.html) and browse all available widgets in the [gallery](https://gallery.htmlwidgets.org).

### R Graphics

You can use any chart created with standard R raster graphics (base, lattice, grid, etc.) within dashboards. When using standard R graphics with static dashboards, you'll need to pay a bit more attention to getting the size of plots right for the layout they'll be viewed in. Note that this is not a concern for plots in interactive Shiny dashboards since all plot types are resized dynamically by Shiny.

The key to good sizing behavior in static dashboards is to define knitr `fig-width` and `fig-height` options that enable the plots to fit into their layout container as closely as possible.

Here's an example of a layout that includes 3 charts from R base graphics:

```` {.python .pymd}
## Row {height="65%"}

```{{r}}
#| fig-width: 10
#| fig-height: 8
plot(cars)
```

## Row {height="35%"}
        
```{{r}}
#| fig-width: 5
#| fig-height: 4
plot(pressure)
```
    
```{{r}}
#| fig-width: 5
#| fig-height: 4
plot(airmiles)
```
````

We've specified an explicit `fig-height` and `fig-width` for each plot so that their rendered size fits their layout container as closely as possible. Note that the ideal values for these dimensions typically need to be determined by experimentation.
:::

::: callout-tip
{{< include _plots-interactive.md >}}
:::

## Tables

You can include data tables within dashboards in one of two ways:

-   As a simple tabular display.
-   As an interactive widget that includes sorting and filtering.

Below we provide some language specific tips and techniques for including tables within dashboards.

::: {.panel-tabset group="language"}
## Python

There are many Python packages available for producing tabular output. We'll cover two of the more popular libraries (itables and tabulate) below.


### itables

The Python [itables](https://mwouts.github.io/itables/quick_start.html) package supports creating interactive data tables from Pandas and Polars DataFrames that you can sort and filter.

Use the `show()` method from `itables` to display an interactive table:

```` python
```{{python}}
from itables import show
show(penguins)
```
````

![](images/itables-scrolling.png){fig-alt="Screenshot of a card showing a table of penguins data. Above the table a Search box appears. The data frame column names appear bold in a row at top and each columns has sorting buttons."}


#### Options

Note that a few `itables` options are set automatically within dashboards to ensure that they display well in cards of varying sizes. The option defaults are:

``` python
from itables import options
options.dom = 'fiBrtlp'
options.maxBytes = 1024 * 1024
options.language = dict(info = "Showing _TOTAL_ entries")
options.classes = "display nowrap compact"
options.paging = False
options.searching = True
options.ordering = True
options.info = True
options.lengthChange = False
options.autoWidth = False
options.responsive = True
options.keys = True
options.buttons = []
```

You can specify alternate options as you like to override these defaults. Options can be specified in the call to `show()` or globally as illustrated above. Here's an example of specifying an option with `show()`:

```python
show(penguins, searching = False, ordering = False)
```

You can find the reference for all of the DataTables options here: <https://datatables.net/reference/option/>. All base options are available, as well as the options for the following extensions (which are automatically included by Quarto):

- <https://datatables.net/extensions/buttons/>
- <https://datatables.net/extensions/keytable/>
- <https://datatables.net/extensions/responsive/>

For example, to enable the copy and export (excel/pdf) buttons in a call to `show()`:

```python
show(penguins, buttons = ['copy', 'excel', 'pdf'])
```

Or alternatively, to enable these buttons for all tables:

``` python
from itables import options
options.buttons = ['copy', 'excel', 'pdf']
```


#### Downsampling

When a table is displayed, the table data is embedded in the dashboard output. To prevent dashboards from being too heavy to load for larger datasets, itables will display only a subset of the table---one that fits into `maxBytes` (1024kb by default).

If you wish, you can increase the value of `maxBytes` or even deactivate the limit (with `maxBytes=0)`. For example, to set a limit of 200kb:

```` python
```{{python}}
show(penguins, maxBytes = 200 * 1024)
```
````


### tabulate

The Python [tabulate](https://github.com/astanin/python-tabulate) package supports creating markdown tables from Pandas data frames, NumPy arrays, and many other data types. You can generate a markdown table from any Pandas data frame via the `to_markdown()` method (being sure to wrap it as `Markdown` output using IPython):

```` python
```{{python}}
import pandas as pd
from IPython.display import Markdown
penguins = pd.read_csv("penguins.csv")
Markdown(penguins.to_markdown(index=False))
```
````

Note that the `index = False` parameter supresses the display of the row index. Here is a card containing output from `tabulate`:

![](images/tabulate.png){fig-alt="Screenshot of a card showing a table of penguins data. The data frame column names appear bold in a row at top. Data rows have a background that alternates between white and grey."}

You can also import `tabulate` directly and pass in the object to print directly:

```` python
```{{python}}
from tabulate import tabulate
Markdown( 
  tabulate(penguins, showindex=False, 
           headers=penguins.columns)
)
```
````

## R

There are many R packages available for producing tabular output. We'll cover two of the more popular approaches (kable and DT) below.

### kable

Simple markdown tables are ideal for smaller numbers of records (i.e. 20-250 rows). Use the `knitr::kable()` function to output markdown tables:

```` {.python .pymd}
```{{r}}
knitr::kable(mtcars)
```
````

![](images/kable.png){fig-alt="Screenshot of a card showing a table of penguins data. The data frame column names appear bold in a row at top. Data rows have a background that alternates between white and grey."}

Simple markdown tables in dashboards automatically fill their container (scrolling horizontally and vertically as required).

### DT

The [DT](https://rstudio.github.io/DT/) package (an interface to the DataTables JavaScript library) can display R matrices or data frames as interactive HTML tables that support filtering, pagination, and sorting.

To include a DataTable you use the `DT::datatable` function:

```` {.python .pymd}
```{{r}}
library(DT)
datatable(mtcars)
```
````

![](images/dt.png){fig-alt="Screenshot of a card showing a table of penguins data. Above the table a Search box appears. The data frame column names appear bold in a row at top and each columns has sorting buttons."}

#### Options

Note that a few `DT` options are set automatically within dashboards to ensure that they display well in cards of varying sizes. The option defaults are:

``` r
options(DT.options = list(
  bPaginate = FALSE, 
  dom = "ifrt", 
  language = list(info = "Showing _TOTAL_ entries")
))
```

You can specify alternate options as you like to override these defaults.
:::

## Value Boxes

Value boxes are a great way to prominently display simple values within a dashboard. For example, here is a dashboard row with three value boxes:

![](images/value-boxes.png){fig-alt="A row of three value boxes. The first has a grey background, a large pencil icon, small text that says Articles per day, and a large number 45. The second has a grey background, a large comment icon, small text that says Comments per day, and a large number 126. The third has a yellow background, a large trashcan icon, small text that says Spam per day, and a large number 50. "}

Here is the code you might use to create these value boxes. Note that we use a mix of Python and R cells in this example to illustrate the syntax for each language. Note also that we assume the variables `articles`, `comments`, and `spam` are computed previously within the document.

```` {.python .pymd}
## Row 

```{{python}}
#| content: valuebox
#| title: "Articles per day"
#| icon: pencil
#| color: primary
dict(
  value = articles
)
```

```{{python}}
#| content: valuebox
#| title: "Comments per day"
dict(
  icon = "chat",
  color = "primary",
  value = comments
)
```

```{{r}}
#| content: valuebox
#| title: "Spam per day"
list(
  icon = "trash",
  color = "danger",
  value = spam
)
```
````

You can choose between specifying value box options within YAML or within a `dict()` or `list()` (for Python and R, respectively) printed by the cell. The latter syntax is handy when you want the `icon` or `color` to be dynamic based on the value.

### Icon and Color

The `icon` used in value boxes can be any of the 2,000 available [bootstrap icons](https://icons.getbootstrap.com).

The `color` can be any CSS color value, however there are some color aliases that are tuned specifically for dashboards that you might consider using by default:

{{< include _valuebox-colors.md >}}

You can override these defaults by specifying [value box Sass variables](theming.qmd#value-boxes) in a custom theme.

While the aliases apply to all [themes](theming.qmd), the colors they correspond to vary.

### Shiny

In a Shiny interactive dashboard you can have value boxes that update dynamically based on the state of the application. The details on how to do this are language-specific:

::: {.panel-tabset group="language"}
#### Python

Use the `ui.value_box()` function within a function decorated with `@render.ui`. For example:

```` python
```{{python}}
from shiny.express import render, ui
@render.ui
def value():
    return ui.value_box("Value", input.value())
```
````

#### R

Use the `bslib::value_box()` function along with an optional icon drawn from the `bsicons` package. For example:

```` python
```{{r}}
library(bslib)
library(bsicons)
value_box(
  title = "Value",
  value = textOutput("valuetext"),
  showcase = bs_icon("music-note-beamed")
)
```
````
:::

### Markdown Syntax

You can also create value boxes using plain markdown, in which case you'll typically include the value via an inline expression. For example:

``` {.python .pymd}
## Row

::: {.valuebox icon="pencil" color="blue"}
Articles per day

`{python} articles`
:::
```

## Text Content

While you often fill dashboard cards with plots and tables, you can also include arbitrary markdown content anywhere within a dashboard.

### Content Cards

Here is a dashboard where the last card in a column is plain markdown:

![](images/text-content-column.png){.border fig-alt="Screenshot of a dashboard with three cards arranged vertically in a column. The first two cards contain plots, the last card contains text that begins 'Gapminder combines data ...'."}

To do this just include a `.card` div alongside the other cells:

```` {.python .pymd}
## Column

```{{python}}
#| title: Population
px.area(df, x="year", y="pop", color="continent", 
        line_group="country")
```

```{{python}}
#| title: Life Expectancy
px.line(df, x="year", y="lifeExp", color="continent", 
        line_group="country")
```

::: {.card}
Gapminder combines data from multiple sources into
unique coherent time-series that can’t be found
elsewhere. Learn more about the Gampminder dataset at
<https://www.gapminder.org/data/>.
:::
````

Note that if you are authoring using a Jupyter Notebook then markdown cells automatically become `.card` divs (i.e. they don't need the explicit `:::` div enclosure).

### Content within Cells

To include content alongside the ouptut of a cell, just enclose the both the cell and the content in a `.card` div. For example:

```` {.python .pymd}
::: {.card title="Life Expectancy"}

```{{python}}
px.line(df, x="year", y="lifeExp", color="continent", 
        line_group="country")
```

Gapminder combines data from multiple sources into
unique coherent time-series that can’t be found
elsewhere. Learn more about the Gampminder dataset at
<https://www.gapminder.org/data/>.
:::
````

![](images/text-content-fused.png){.border fig-alt="Screenshot of a single card. The card contains a plot then text below it that begins 'Gapminder combines data...'."}

### Leading Content

Content that is included at the very top of a dashboard (and not explicitly within a `.content` div) is considered leading content, and will be included as is with no card styling (e.g. with no border). For example:

```` {.python .pymd}
---
title: "My Dashboard"
format: dashboard
---

This content will appear above all of the other 
rows/columns, with no border.

## Row

```{{python}}
```
````

### Dynamic Content

You can use [inline expressions](/docs/computations/inline-code.qmd) to make text content dynamic. For example, here we have a row with text content that makes use of Python expressions:

``` {.python .pymd}
::: {.card}
The sample size was `{python} sample`. The mean reported 
rating was `{python} rating`.
:::
```

## Cell Output {#cell-output}

The output of each computational cell within your notebook or source document will be contained within a [Card](layout.qmd#cards). Below we describe some special rules observed when creating cards.

### Dynamic Titles

You can create a dynamic `title` by printing a `title=` expression as a cell's first output (in contrast to including the `title` as a YAML cell option). For example:

{{< include _dynamic-title.md >}}

### Excluded Cells

Cells that produce no output do not become cards (for example, cells used to import packages, load and filter data, etc). If a cell produces unexpected output that you want to exclude add the `output: false` option to the cell:

```` {.python .pymd}
```{{python}}
#| output: false
# (code that produces unexpected output)
```
````

### Expression Printing

By default, all output from top level expressions is displayed within dashboards. This means that multiple plots can easily be generated from a cell. For example:

```` {.python .pymd}
```{{python}}
#| title: "Tipping Behavior"
px.box(df, x="sex", y="total_bill", color="smoker")
px.violin(df, x="sex", y="total_bill", color="smoker")
```
````

This behavior corresponds to the `"all"` setting for [Jupyter shell interactivity](https://ipython.readthedocs.io/en/stable/config/options/terminal.html#configtrait-InteractiveShell.ast_node_interactivity). You can customize this behavior within Quarto using the `ipynb-shell-interactivity` option.

### Card Layout

If a cell produces multiple outputs you can use cell layout options to organize their display. For example, here we modify the example to display plots side-by-side using the `layout-ncol` option:

```` {.python .pymd}
```{{python}}
#| title: "Tipping Behavior"
#| layout-ncol: 2
px.box(df, x="sex", y="total_bill", color="smoker")
px.violin(df, x="sex", y="total_bill", color="smoker")
```
````

![](images/card-layout-ncol.png){fig-alt="A screenshot of a dashboard card with the title Tipping behavior showing two plots side by side."}

See the article on [Figures](/docs/authoring/figures.qmd#complex-layouts) for additional documentation on custom layouts.

## Learning More

[Layout](layout.qmd) shows you how to control the navigation bar, and how to arrange your content across pages, rows, columns, tabsets, and cards.

[Inputs](inputs.qmd) demonstrates various ways to layout inputs for interactive dashboards (sidebars, toolbars, attaching inputs directly to cards, etc.)

[Examples](/docs/gallery/index.qmd#dashboards) provides a gallery of example dashboards you can use as inspiration for your own.

[Theming](theming.qmd) describes the various way to customize the fonts, colors, layout and other aspects of dashboard appearance.

[Parameters](parameters.qmd) explains how to create dashboard variants by defining parameters and providing distinct values for them on the command line.

[Deployment](deployment.qmd) covers how to deploy both static dashboards (which require only a web host, but not a server) and Shiny dashboards (which require a Shiny Server).

[Interactivity](interactivity/index.qmd) explores the various ways to create interactive dashboards that enable more flexible data exploration.
```````

## File: docs/dashboards/deployment.qmd
```````
---
title: "Dashboard Deployment"
lightbox: auto
---

## Overview

There are a wide variety of ways to deploy dashboards created using Quarto. The mechanics of deployment are different depending on whether you are publishing a [Static Dashboard](#static-dashboards) (with no server dependencies) or a [Shiny Dashboard](#shiny-dashboards). Both scenarios are covered in detail below.

## Static Dashboards {#static-dashboards}

If you are deploying a static dashboard (i.e. not using Shiny for interactivity) then you can publish dashboards to any web server. Quarto includes a `quarto publish` command to make it easy to publish to a few popular services as well as automate publishing via Continuous Integration (CI).

To get started, review the documentation for using one of the following publishing services:

{{< include /docs/publishing/_providers.md >}}

```{=html}
<style type="text/css">
/* remove confluence */
#static-dashboards table tr:nth-child(5) {
  display: none;
}
</style>
```
## Shiny Dashboards {#shiny-dashboards}

Dashboards that use [Shiny for Python](/docs/dashboards/interactivity/shiny-python/index.qmd) or [Shiny for R](/docs/dashboards/interactivity/shiny-r.qmd) are web applications that require a server for deployment (so they can't just be deployed to a generic web host). Deployment options for Shiny applications include:

-   Public hosting services like [shinyapps.io](https://www.shinyapps.io) and [Hugging Face](https://huggingface.co/docs/hub/spaces-sdks-docker-shiny).

-   [Shiny Server](https://posit.co/products/open-source/shinyserver/) (an open-source server developed by the Shiny team).

-   [Posit Connect](https://posit.co/products/enterprise/connect/) (an on-premises commercial server product).

Below we'll cover some deployment basics for Python and R and provide links to additional documentation on using the various available methods.

### Shiny for Python

{{< include interactivity/shiny-python/_shiny-deployment.md >}}

### Shiny for R

Quarto Dashboards that use Shiny for R can be deployed using all of the tooling and services available for normal Shiny applications. Shiny for R dashboards are run using the `quarto serve` command:

``` {.bash filename="Terminal"}
quarto serve dashboard.qmd
```

The `quarto serve` command is supported natively by [shinyapps.io](https://www.shinyapps.io), [Shiny Server](https://posit.co/products/open-source/shinyserver/) , and [Posit Connect](https://posit.co/products/enterprise/connect/). See the in-depth documentation on [Shiny for R Deployment](/docs/interactive/shiny/running.qmd#deployment) for details.
```````

## File: docs/dashboards/index.qmd
```````
---
title: "Quarto Dashboards"
code-annotations: select
lightbox: auto
format:
  html:
    include-in-header: 
      - '../download/_download.html'
    include-after-body: 
      text: |
        <script type="text/javascript">
        window['quarto-download-release'] = true;
        window['quarto-download-prerelease'] = true;
        window['quarto-download-nonews'] = true;
        window["quarto-prerelease-mode"] = '{{< meta prerelease-mode >}}';
        </script>   
---

{{< include /docs/_require-1.4.qmd >}}

## Overview

Quarto Dashboards make it easy to create interactive dashboards using Python, R, Julia, and Observable:

-   Publish a group of related data visualizations as a dashboard. Use a wide variety of components including [Plotly](https://plotly.com/python/), [Leaflet](https://ipyleaflet.readthedocs.io/en/latest/), [Jupyter Widgets](/docs/interactive/widgets/jupyter.qmd), [htmlwidgets](https://www.htmlwidgets.org/); static graphics (Matplotlib, Seaborn, ggplot2, etc.); tabular data; value boxes; and text annotations.

-   Flexible and easy to specify row and column-based [Layouts](layout.qmd). Components are intelligently re-sized to fill the browser and adapted for display on mobile devices.

-   Author using any notebook editor ([JupyterLab](/docs/tools/jupyter-lab.qmd), etc.) or in plain text markdown with any text editor ([VS Code](/docs/tools/vscode/index.qmd), [RStudio](/docs/tools/rstudio.qmd), [Neovim](/docs/tools/neovim.qmd), etc.)

-   Dashboards can be deployed as static web pages (no special server required) or you can optionally integrate a backend [Shiny Server](/docs/dashboards/interactivity/shiny-python/index.qmd) for enhanced interactivity.

## Examples

You can create highly customized layouts and use a wide variety of dashboard themes as illustrated in these examples (click to see them in more detail):

::: {layout-ncol="3"}
![](/docs/dashboards/examples/thumbnails/stock-explorer-dashboard.png){.border fig-alt="Screenshot of a Stock Trader dashboard: a row of three values boxes, then a row with a stock ticker graph and a table of closing values. Navy blue and green theme."}

![](/docs/dashboards/examples/thumbnails/customer-churn-dashboard.png){.border fig-alt="Screenshot of a Customer Churn dashboard: a row of three values boxes, then a row with two plots, then a row with a table. Light blue and yellow theme."}

![](/docs/dashboards/examples/thumbnails/penguins-dashboard.png){.border fig-alt="Screenshot of a Palmer Penguins dashboard: a sidebar with checkboxes and a dropdown, and two plots in main panel. Blue theme."}
:::

For live versions of these dashboards, source code, and additional examples see the [dashboard section of the gallery](/docs/gallery/index.qmd#dashboards).

## Walkthrough

Here we'll walk through a simple example to illustrate the basics. Then, we'll provide detailed instructions on how to get started with building your own dashboards.

This simple single-page Python dashboard uses interactive Plotly visualizations to explore development indicators in the [Gapminder](http://www.gapminder.org/data/) dataset. The dashboard includes two rows, the second of which includes two columns:

![](images/gapminder.png){.border fig-alt="Screenshot of a Development Indicators dashboard: a row titled GDP and Life Expectancy with a single plot, then a row with two plots arranged side by side titled Population and Life Expectancy."}

Dashboards consist of several components:

1)  **Navigation Bar** --- Icon, title, and author along with links to sub-pages (if more than one page is defined).

2)  **Pages, Rows, Columns, and Tabsets** --- Pages, rows and columns are defined using markdown headings (with optional attributes to control height, width, etc.). Tabsets can be used to further divide content within a row or column.

3)  **Cards, Sidebars, and Toolbars** --- Cards are containers for plots, data display, and free form content. The content of cards typically maps to *cells* in your notebook or source document. Sidebars and toolbars are used to present inputs within interactive dashboards.

Dashboards can be created either using Jupyter notebooks (`.ipynb`) or using plain text markdown (`.qmd`). Here is the code for the notebook version of the above example (click the image for a zoomed view):

![](images/gapminder-jupyter.png){.border fig-alt="Screenshot of a gapminder-notebook.ipynb open in Jupyter Lab. After cells for Quarto settings and python setup, there is a markdown cell containing the heading Row, followed by a python code cell generating a plot. Then another markdown cell containing the heading Row, followed by two python code cells each generating a plot."}

Here is the plain text `.qmd` version of the dashboard (click on the numbers on the far right for additional explanation of syntax and mechanics):

```` python
--- 
title: "Development Indicators by Continent" # <1>
author: "Gapminder Analytics Group" # <1>
format: dashboard # <1>
--- 

```{{python}}
import plotly.express as px
df = px.data.gapminder()
```

## Row {height=60%} # <2>

```{{python}}  # <3>
#| title: GDP and Life Expectancy 
px.scatter(  
  df, x="gdpPercap", y="lifeExp", 
  animation_frame="year", animation_group="country", 
  size="pop", color="continent", hover_name="country",
  facet_col="continent", log_x=True, size_max=45, 
  range_x=[100,100000], range_y=[25,90] 
)  
``` # <3>

## Row {height=40%}

```{{python}} # <4>
#| title: Population
px.area(
  df, x="year", y="pop", 
  color="continent", line_group="country"
)
```

```{{python}}
#| title: Life Expectancy
px.line(
  df, x="year", y="lifeExp", 
  color="continent", line_group="country"
)
``` # <4>
````

1.  The document options define the `title` and `author` for the navigation bar as well as specifying the use of the `dashboard` format.
2.  Rows and columns are defined using headings. In this example we define two rows and specify their relative sizes using the `height` option.
3.  Computational cells become cards that live within rows or columns. Cards can have an optional title (which here we specify using the `title` option).
4.  The second row includes two computational cells, which are automatically split into two side by side cards.

## Getting Started

### Step 1: Install Quarto

Dashboards are a feature in the Quarto v1.4. Before you get started, make sure you install the **latest release** version of Quarto.

{{< include ../download/_download.md >}}

```{=html}
<style type="text/css">
#download-table {
  display: none;
}
</style>
```

You can find release notes and installers for all platforms in the [download page](/docs/download/prerelease.qmd).

### Step 2: Learn the Basics

Start by learning how to lay out your dashboard and populate it with content:

[Dashboard Layout](layout.qmd) shows you how to control the navigation bar, and how to arrange your content across pages, rows, columns, tabsets, and cards.

[Data Display](data-display.qmd) shows you how to display data in your dashboard as plots, tables, value boxes, and text.

### Step 3: Explore Further

Once you've mastered the basics, check out these additional articles to learn more.

[Examples](/docs/gallery/index.qmd#dashboards) provides a gallery of example dashboards you can use as inspiration for your own.

[Inputs](inputs.qmd) demonstrates various ways to layout inputs for interactive dashboards (sidebars, toolbars, attaching inputs directly to cards, etc.)

[Theming](theming.qmd) describes the various way to customize the fonts, colors, layout and other aspects of dashboard appearance.

[Parameters](parameters.qmd) explains how to create dashboard variants by defining parameters and providing distinct values for them on the command line.

[Deployment](deployment.qmd) covers how to deploy both static dashboards (which require only a web host, but not a server) and Shiny dashboards (which require a Shiny Server).

[Interactivity](interactivity/index.qmd) explores the various ways to create interactive dashboards that enable more flexible data exploration.
```````

## File: docs/dashboards/inputs.qmd
```````
---
title: "Dashboard Input Layout"
---

## Overview

There are several ways to layout inputs within interactive dashboards:

-   [Sidebars](#sidebars) provide a collapsible vertical panel for inputs.

-   [Toolbars](#toolbars) provide a horizontal panel for inputs.

-   [Card Inputs](#card-inputs) provide a panel for card-specific inputs.

These techniques all create regions for inputs with a special background color to distinguish them from ordinary content. You can also locate inputs anywhere else you wish within a dashboard (i.e. in a standard card).

## Sidebars {#sidebars}

Sidebars are a great place to group inputs for dashboards. To include a sidebar, add the `.sidebar` class to a level 2 heading. For example:

```` {.python .pymd style="overflow-x: hidden;"}
---
title: "Sidebar"
format: dashboard
server: shiny
---
    
## {.sidebar}

```{{python}}
```

## Column 

```{{python}}
```

```{{python}}
```
````

Here's how a sidebar would appear (note there is a button in the top right that enables the user to optionally close the sidebar):

![](/docs/dashboards/images/sidebar.png){.border fig-alt="A screenshot of a Penguin Bills dashboard. A sidebar on the left contains two dropdown menus, one for Variable and one for Distribution and a checkbox to show rugmarks. On the right there are two plots: a histogram of bill_length_mm colored by species and a histogram of bill_depth_mm colored by species."}

### Global Sidebar

If you have a dashboard with [multiple pages](/docs/dashboards/layout.qmd#pages), you may want the sidebar to be global (i.e. visible across all pages). To do this, add the `.sidebar` class to a level 1 heading:

```` {.python .pymd}
---
title: "Sidebar"
format: dashboard
---
    
# {.sidebar}

Sidebar content

# Plots

```{{python}}
```

# Data

```{{python}}
```
````

### Inline Sidebar

While sidebars are often laid out at the page level (i.e. spanning the dashboard from top to bottom) you can actually include them anywhere within a layout. For example, here we have a sidebar that is within a row (rather than spanning all rows):

```` {.python .pymd}
---
title: "Palmer Penguins"
format: dashboard
server: shiny
---

## Row

### {.sidebar}

```{{python}}
```

### Column

```{{python}}
```

## Row

```{{python}}
```
````

![](/docs/dashboards/images/inline-sidebar.png){.border fig-alt="A screenshot of a Penguin Bills dashboard. A sidebar on the left side of the top row contains two dropdown menus, one for Variable and one for Distribution and a checkbox to show rugmarks. On the right there is a histogram of bill_length_mm colored by species. In the second row there is a table displaying the raw penguins data."}

### Location and Size

Sidebars can be located on either the left or right side. Layout a sidebar on the right by including it *after* the column(s) it is adjacent to. You can also modify the size of sidebars using the `width` attribute. This example demonstrates both of these techniques:

```` {.python .pymd style="overflow-x: hidden;"}
---
title: "Sidebar"
format: dashboard
server: shiny
---
    
## Column 

```{{python}}
```

```{{python}}
```

## {.sidebar width="300px"}

```{{python}}
```
````

![](/docs/dashboards/images/sidebar-right.png){.border fig-alt="A screenshot of a Penguin Bills dashboard. A sidebar on the right contains two dropdown menus, one for Variable and one for Distribution and a checkbox to show rugmarks. On the left there are two plots: a histogram of bill_length_mm colored by species and a histogram of bill_depth_mm colored by species."}

## Toolbars {#toolbars}

Toolbars are similar to sidebars, but provide a horizontal layout. Create a toolbar by adding the `.toolbar` class to a level 2 row heading. For example:

```` {.python .pymd}
---
title: "Toolbar"
format: dashboard
server: shiny
---
    
## {.toolbar}
    
```{{python}}
```

## Row

```{{python}}
```
````

![](/docs/dashboards/images/toolbar.png){.border}

### Global Toolbar

If you have a dashboard with [multiple pages](/docs/dashboards/layout.qmd#pages), you may want the toolbar to be global (i.e. visible across all pages). To do this, add the `.toolbar` class to a level 1 heading:

```` {.python .pymd}
---
title: "Toolbar"
format: dashboard
server: shiny
---
    
# {.toolbar}

Toolbar content

# Page 1 

```{{python}}
```

# Page 2

```{{python}}
```
````

### Inline Toolbar

While toolbars are often laid out at the page level (i.e. spanning the dashboard from left to right) you can actually include them anywhere within a layout. For example, here we have a toolbar that is within a column (rather than spanning all columns):

```` {.python .pymd}
---
title: "Palmer Penguins"
format: 
  dashboard:
    orientation: columns
server: shiny
---

## Column 

### {.toolbar}

```{{python}}
```

### Row

```{{python}}
```

## Column

```{{python}}
```
````

![](/docs/dashboards/images/toolbar-inline.png){.border}

### Location

Toolbars can be located on either the top or bottom of content. Layout a toolbar on the bottom by including it *after* the rows(s) it is adjacent to. For example:

```` {.python .pymd}
---
title: "Penguin Bills"
format: dashboard
server: shiny
---

## Row

```{{python}}
```

## {.toolbar}

```{{python}}
```
````

![](/docs/dashboards/images/toolbar-bottom.png){.border}

## Card Inputs {#card-inputs}

In some cases you may want to connect inputs more directly to a single output. You can do this using either a card toolbar or card sidebar.

### Card Toolbars

To add a toolbar to a card, define it immediately above or below the cell that generates the output. You can do this by either adding the `content: card-toolbar` option to a cell or by creating a div with the `.card-toolbar` class. For example:

```` {.python .pymd}
```{{python}}
#| content: card-toolbar

```

```{{python}}
#| title: Penguin Bills

```
````

![](/docs/dashboards/images/card-toolbar.png){.border fig-alt="A screenshot of a Penguin Bills card. The card toolbar contains two dropdown menus, one for Variable and one for Distribution and a checkbox to show rugmarks. Below, a plot shows a histogram of bill_length_mm colored by species."}

Note that the `title` attribute is optional for cells with toolbars (if there is no `title` then the inputs will be left rather than right aligned).

### Card Sidebars

To add a sidebar to a card, define it immediately to the left or the right of the cell that generates the output. You can do this either by adding the `content: card-sidebar` option to a cell or by creating a div with the `.card-sidebars` class. For example:

```` {.python .pymd}
```{{python}}
#| content: card-sidebar

```

```{{python}}
#| title: Penguin Bills

```
````

![](/docs/dashboards/images/card-sidebar.png){.border fig-alt="A screenshot of a Penguin Bills card. The card sidebar on the left contains two dropdown menus, one for Variable and one for Distribution and a checkbox to show rugmarks. To the right, a plot shows a histogram of bill_length_mm colored by species."}
```````

## File: docs/dashboards/layout.qmd
```````
---
title: "Dashboard Layout"
lightbox: auto
aliases: 
  - components.html
  - layouts.html
---

{{< include /docs/_require-1.4.qmd >}}

Dashboards are compositions of components used to provide navigation and present data. Below we'll describe the components that are used to structure the navigation and layout of dashboards.

## Navigation

All dashboards include a top-level navigation bar that provide a title and (optionally) a logo and author. Dashboards with [multiple pages](#pages) also contain a link to each page on the navigation bar:

![](images/navigation-toolbar.png){fig-alt="Screenshot of a dashboard navigation bar. The bar begins with a logo of three penguins, then the title Palmer Penguins followed by the author Cobblepot Analytics. There are also three links to pages: Bills, Flippers and Data."}

The `title` and `author` are specified as they are with normal documents. You can also include a `logo` and one or more `nav-buttons`:

``` yaml
--- 
title: "Palmer Penguins"
author: "Cobblepot Analytics"
format: 
  dashboard:
    logo: images/penguins.png
    nav-buttons: [linkedin, twitter, github]
---
```

The following special aliases are recognized for navigation buttons: `linkedin`, `facebook`, `reddit`, `twitter`, and `github`. You can also create custom buttons as described in [Nav Items](/docs/reference/projects/websites.qmd#nav-items). For example:

```` yaml
format:
  dashboard:
    nav-buttons:
      - reddit
      - icon: gitlab
        href: https://gitlab.com/
````

## Layout

Within a page, dashboard components are laid out using alternating sets of rows and columns. Rows and columns are in turn defined by markdown headings and computational cells. For example, here's a simple layout with two rows, where the second row is split into two columns:

::: {.chart-example .grid}
::: g-col-5
```` {.python .pymd}
---
title: "Palmer Penguins"
author: "Cobblepot Analytics"
format: dashboard
---
    
## Row {height=70%}

```{{python}}
```

## Row {height=30%}

```{{python}}
```

```{{python}}
```
````
:::

::: g-col-7
![](images/chart-focal-top.png){fig-alt="A schematic of a page layout showing Chart 1 at the top using the full page width, then Chart 2 and Chart 3 side by side in a row below it."}
:::
:::

Here, level 2 markdown headings (e.g. `## Row {height=70%}`) define the contents of rows as well as their relative height. The ```` ```{python} ```` code cells in turn automatically create cards that are laid out in columns within the row. 


::: {.callout-note}

## Heading text isn't required

Although markdown headings are used to define the layout of rows and columns in Quarto dashboards, the heading text itself is discarded. We use the headings `Row` and `Column` in these docs to aid understanding of the layouts, but you can use more descriptive headings if they help you navigate your source code.

:::

### Orientation

By default, dashboard pages are laid out first by row, then by column. However, you can change this by specifying the `orientation: columns` document option:

::: {.chart-example .grid}
::: g-col-5
```` {.python .pymd}
---
title: "Diamonds Explorer"
format: 
  dashboard:
    orientation: columns
---
    
## Column {width=60%}

```{{python}}
```

## Column {width=40%}

```{{python}}
```

```{{python}}
```
````
:::

::: g-col-7
![](images/chart-focal-left.png){fig-alt="A schematic of a page layout showing Chart 1 on the left using the full page height, and on the right Chart 2 and Chart 3 are one above the other."}
:::
:::

### Fill vs. Flow

Each row in your dashboard that is not given an explicit height will determine its size by either filling available space or by flowing to its natural height. Filling layout is generally the default, however for certain types of content (e.g. markdown text) flow layout is the default.

If the default behavior isn't what you want, you can explicitly specify filling or flowing behavior using the `.fill` and `.flow` classes applied to a row. For example:

````{.python .pymd}
## Row {.fill}

## Row {.flow}
````



### Scrolling

By default, dashboard content fills all available space in the page. You can alternatively specify the `scrolling: true` option to layout content using its natural height and scroll to accommodate page overflow. For example:

::: {.chart-example .grid}
::: g-col-5
```` {.python .pymd}
---
title: "Scrolling"
format: 
  dashboard:
    scrolling: true 
---
    
```{{python}}
```

```{{python}}
```

```{{python}}
```
````
:::

::: g-col-7
![](images/chart-stack-scrolling.png){fig-alt="A schematic of a dashboard layout showing three charts stacked vertically."}
:::
:::

Because of its ability to scroll this layout could easily accommodate many more charts. While this is useful, you might also consider [Pages](#pages) and [Tabsets](#tabsets) (described in the next two sections) as alternate ways to present content within layouts that fill their page.

## Pages {#pages}

The layout examples above demonstrated only single-page dashboards. To introduce multiple pages, use level 1 headings above the level 2 headings used to define rows and columns. The text of the level 1 headings will be used to link to the pages in the navigation bar. For example, here is a dashboard that splits content across two pages:

```` {.python .pymd}
---
title: "Palmer Penguins"
format: dashboard
---
    
# Bills 

```{{python}}
```

# Flippers {orientation="columns" scrolling="true"}

## Column

```{{python}}
```

```{{python}}
```

## Column 

```{{python}}
```
````

Note that we can set a per-page orientation by adding an `orientation` attribute to the page heading (here `orientation="columns"` for the second page). In addition, you can control per-page scrolling behavior using a `scrolling` attribute on the page heading (shown using `scrolling="true"` for the second page above).

## Tabsets {#tabsets}

Use tabsets to include multiple views of data or to include content of secondary importance without having it crowd the main display. Tabsets are created by adding the `.tabset` class to a row or column. For example, this layout displays the bottom row as a set of two tabs.

::: {.chart-example .grid}
::: g-col-5
```` {.python .pymd}
---
title: "Palmer Penguins"
format: dashboard
---
    
## Row

```{{python}}
```

## Row {.tabset}

```{{python}}
#| title: Chart 2
```

```{{python}}
#| title: Chart 3
```
````
:::

::: g-col-7
![](images/chart-tabset-row.png){fig-alt="Schematic of a dashboard layout showing Chart 1 at the top using the full page width. Below Chart 1, a panel with two tabs is shown: the Chart 2 tab is selected and occupies the full page width; the Chart 3 tab is unselected."}
:::
:::

You can include tabsets at arbitrarily deep levels. Here we include a tabset within a column of a top level row:

::: {.chart-example .grid}
::: g-col-5
```` {.python .pymd}
---
title: "Palmer Penguins"
format: dashboard
---
    
## Row {height=70%}

```{{python}}
```

## Row {height=30%}

### Column {.tabset}

```{{python}}
#| title: Chart 2
```

```{{python}}
#| title: Chart 3
```

### Column

```{{python}}
```
````
:::

::: g-col-7
![](images/chart-tabset-card.png){fig-alt="Schematic of a dashboard layout showing Chart 1 at the top using the full page width. The row below Chart 1 is split into two columns. In the left column is a panel with two tabs: Chart 2 and Chart 3. In the right column is Chart 4."}
:::
:::

Each cell within the tabset column becomes a tab, and we provide navigational titles for our tabs by adding a `title` option to the cell used to produce each tab.

You can also have tabs that contain only markdown. To do this use a `::: {.card}` div and include a `title` attribute for the tab:

````python
::: {.card title="My Title"}
Card text 
:::
````

In the examples above, each tab included a single card. If you want tabs to contain multiple cards, introduce another level of headings below the tabset row or column. For example:

````{.python .pymd}
---
title: "Palmer Penguins"
format: dashboard
---
    
## Row {.tabset}

### Plots

```{{python}}
```

```{{python}}
```

### Data

```{{python}}
```
````


## Cards {#cards}

Cards are the fundamental unit of display within dashboards. Cards are created automatically for cells and markdown content that are within rows and columns. So for example, each of the Python cells here become cards:

```` {.python .pymd}
## Column {width=40%}

```{{python}}
```

```{{python}}
```
````

You can also create cards that contain arbitrary markdown via a `.card` div. For example:

```` {.python .pymd}
## Column {width=40%}

```{{python}}
```

::: {.card}
This text will be displayed within a card
:::

```{{python}}
```
````

To provide a title for a markdown card use the `title` attribute. For example:

````python
::: {.card title="My Title"}
This text will be displayed within a card
:::
````

Note that if you are authoring within a Jupyter Notebook then markdown cells automatically become `.card` divs.

For additional details on how cells and their content are mapped to cards (e.g. excluding cells, cells with multiple outputs, etc.), see [Cell Output](data-display.qmd#cell-output).

### Display Options

By default, cards are displayed with no title and a small bit of padding around the edges. Here is a card that displays a [Leaflet](https://ipyleaflet.readthedocs.io) map:

![](images/leaflet-card.png){fig-alt="Screenshot of a map inset from a light grey border around the card."}

You can add a title to a card by including the `title` cell option. You can also customize the padding using the `padding` option. For example, here we add a title and remove the padding entirely:

```` {.python .pymd}
```{{python}}
#| title: "World Map"
#| padding: 0px
from ipyleaflet import Map, basemaps, basemap_to_tiles
Map(basemap=basemap_to_tiles(basemaps.OpenStreetMap.Mapnik),
    center=(48.204793, 350.121558), zoom=2)
```
````

![](images/leaflet-card-title-padding.png){fig-alt="Screenshot of a card with the title World Map displayed in the light grey bar at the top. The card contains a map with no inset from the card border."}


You can create a dynamic `title` by printing a `title=` expression as a cell's first output. For example:

{{< include _dynamic-title.md >}}

#### Expanding Cards

By default, you can zoom in on the content of cards using the expand button in the bottom right:

![](images/leaflet-card-expandable.png){fig-alt="Screenshot of a card with the cursor hovering over an icon in the bottom right showing the pop up text Expand."}

If you don't want cards to be expandable you can specify `expandable: false` (either at the document level or for individual cards).

#### Card Fill Behavior

Quarto inspects card contents and generally choose a fill behavior that best matches the contents of the card (by default cards will fill their container, though in specific cases like simple markdown the card will choose a `flow` layout). You can explicit control the fill behavior of card using the `fill` attribute with the desired boolean value. For example `fill="false"` will cause the card's height to match the size of the content (not filling).

## Learning More

[Data Display](data-display.qmd) shows you how to display data in your dashboard as plots, tables, value boxes, and text.

[Inputs](inputs.qmd) demonstrates various ways to layout inputs for interactive dashboards (sidebars, toolbars, attaching inputs directly to cards, etc.)

[Examples](/docs/gallery/index.qmd#dashboards) provides a gallery of example dashboards you can use as inspiration for your own.

[Theming](theming.qmd) describes the various way to customize the fonts, colors, layout and other aspects of dashboard appearance.

[Parameters](parameters.qmd) explains how to create dashboard variants by defining parameters and providing distinct values for them on the command line.

[Deployment](deployment.qmd) covers how to deploy both static dashboards (which require only a web host, but not a server) and Shiny dashboards (which require a Shiny Server).

[Interactivity](interactivity/index.qmd) explores the various ways to create interactive dashboards that enable more flexible data exploration.
```````

## File: docs/dashboards/parameters.qmd
```````
---
title: Dashboard Parameters
document: "dashboard"
---

{{< include /docs/computations/_parameters.md >}}
```````

## File: docs/dashboards/theming.qmd
```````
---
title: "Dashboard Theming"
tbl-colwidths: [40,60]
is_dashboards: true
---

## Overview

Quarto Dashboards use same Bootstrap 5 based theming system as regular HTML documents (so themes you have built for HTML websites can also be used with dashboards). Use the `theme` option to choose a theme:

``` yaml
theme: cosmo
```

Quarto includes 25 themes from the [Bootswatch](https://bootswatch.com/) project (for example, the website uses the [cosmo](https://bootswatch.com/cosmo/) theme). Available themes include:

{{< include /docs/output-formats/_theme-list.md >}}

Use of any of these themes via the `theme` option. For example:

``` yaml
format:
  dashboard:
    theme: united
```

In the following sections we'll describe how you can customize these themes or create your own new themes.

{{< include /docs/output-formats/_theme-options.md >}}

{{< include /docs/output-formats/_theme-custom.md >}}

{{< include /docs/output-formats/_theme-variables.md >}}
```````

## File: docs/download/changelog/1.1/index.qmd
```````
---
title: "1.1 Release Notes"
format: html
---

{{< include _changelog.md >}}
```````

## File: docs/download/changelog/1.2/index.qmd
```````
---
title: "1.2 Release Notes"
format: html
---

{{< include _changelog.md >}}
```````

## File: docs/download/changelog/1.3/index.qmd
```````
---
title: "1.3 Release Notes"
format: html
---

{{< include _changelog.md >}}
```````

## File: docs/download/changelog/1.4/index.qmd
```````
---
title: "1.4 Release Notes"
format: html
---

{{< include _changelog.md >}}
```````

## File: docs/download/changelog/1.5/index.qmd
```````
---
title: 1.5 Release Notes
format: html
---

{{< include _changelog.md >}}
```````

## File: docs/download/changelog/1.6/index.qmd
```````
---
title: 1.6 Release Notes
format: html
---

{{< include _changelog.md >}}
```````

## File: docs/download/index.qmd
```````
---
title: "Download Quarto"
subtitle: "Install a release or pre-release build of Quarto."
format:
  html:
    include-in-header: 
      - '_download.html'
    include-after-body: 
      text: |
        <script type="text/javascript">
        window['quarto-download-prerelease'] = true;
        window['quarto-download-release'] = true;
        window['quarto-download-archives'] = true;
        window["quarto-prerelease-mode"] = '{{< meta prerelease-mode >}}';
        </script>
page-layout: full
toc: false
anchor-sections: false
editor: source
image: /images/hero_right.png
listing:
  id: download-older
  contents: /_download-older.yml
  sort: "date desc"
  fields: 
    - title
    - changelog
    - date
    - path
  field-display-names: 
    path: "URL"
    title: "Version"
    changelog: "Release Notes"
  field-links: 
    - path
    - title
  type: table
  filter-ui: false
  sort-ui: false
---


::: {.content-visible when-profile="rc"}

::: {.panel-tabset}

## **{{< meta prerelease-title >}}** --- v[]{.download-pre-version}

{{< include _download-pre.md >}}


## **Current Release** --- v[]{.download-version}

{{< include _download.md >}}

## **Older Releases**

Pages containing all installers for the most recent releases of older versions of Quarto are linked below.

:::{#download-older}

:::

:::

:::

::: {.content-hidden when-profile="rc"}

::: {.panel-tabset}

## **Current Release** --- v[]{.download-version}

{{< include _download.md >}}

## **{{< meta prerelease-title >}}** --- v[]{.download-pre-version}

{{< include _download-pre.md >}}

## **Older Releases**

Pages containing all installers for the most recent releases of older versions of Quarto are linked below.

:::{#download-older}

:::

:::

:::
```````

## File: docs/download/prerelease.qmd
```````
---
title: "{{< meta prerelease-title >}} Builds"
subtitle: "Install a {{< meta prerelease-lower >}} build of Quarto."
format:
  html:
    include-in-header: 
      - '_download.html'
    include-after-body: 
      text: |
        <script type="text/javascript">
        window['quarto-download-prerelease'] = true;
        window['quarto-download-archives'] = true;
        window["quarto-prerelease-mode"] = '{{< meta prerelease-mode >}}';
        </script>
page-layout: full
toc: false
anchor-sections: false
editor: source
image: /images/hero_right.png
aliases:
  - changelog/1.8/
---

::: {.content-visible when-profile="prerelease"}

:::{.callout-note}
Pre-release builds are intended for testing purposes, and are not recommended for general use. For stable builds, please visit [Release Builds](release.qmd).
:::

:::

{{< include _download-pre.md >}}
```````

## File: docs/download/release.qmd
```````
---
title: "Release Builds"
subtitle: "Install a release build of Quarto."
format:
  html:
    include-in-header: 
      - '_download.html'
    include-after-body: 
      text: |
        <script type="text/javascript">
        window['quarto-download-release'] = true;
        window['quarto-download-archives'] = true;
        </script>
page-layout: full
toc: false
anchor-sections: false
editor: source
image: /images/hero_right.png
aliases:
  - changelog/1.7/
---

{{< include _download.md >}}
```````

## File: docs/download/tarball.qmd
```````
---
title: Tarball Installation On Linux
format:
  html:
    include-in-header: 
      - '_download.html'
    include-after-body: tarball-after-body.html
search: false
---

::: {#download-button .download-button}
<div>

[\_](_ "Download Quarto"){#download-url .btn .btn-action .btn-action-primary}
[Find your operating system in the table below]{#download-text .hidden .download-text}

</div>
:::


You can install Quarto for a single user on Linux by using the Quarto tarball and following the below set of steps. 

**1. Download the tarball**

```{.bash filename="Terminal"}
wget https://github.com/quarto-dev/quarto-cli/releases/download/v^version^/quarto-^version^-linux-amd64.tar.gz
```

**2. Extract Files**

Extract the contents of the tarball to the location where you typically install software (e.g. `~/opt`). For example:

```{.bash filename="Terminal"}
mkdir ~/opt
tar -C ~/opt -xvzf quarto-^version^-linux-amd64.tar.gz
```

**3. Create a Symlink**

Create a symlink to `bin/quarto` in a folder that is in your path. If there is no such folder, you can create a folder such as `~/.local/bin` and place the symlink there. For example:

For example:

```{.bash filename="Terminal"}
mkdir ~/.local/bin
ln -s ~/opt/quarto-^version^/bin/quarto ~/.local/bin/quarto
```

**4. Ensure Folder in on Path**

If you can run `quarto -v` at this point, jump ahead to the next step.

Otherwise, ensure that the folder where you created a symlink is in the path. For example:

```{.bash filename="Terminal"}
( echo ""; echo 'export PATH=$PATH:~/.local/bin\n' ; echo "" ) >> ~/.profile
source ~/.profile
```

**5. Check The Installation**

Use `quarto check` to confirm that the installation is successful:

```{.bash filename="Terminal"}
quarto check
```
```````

## File: docs/extensions/_extension-trust.qmd
```````
::: {.callout-warning appearance="simple"}
### Extension Trust

Quarto extensions may execute code when documents are rendered. Therefore, if you do not trust the author of an extension, we recommend that you do not install or use the extension.
:::
```````

## File: docs/extensions/_formats-common.qmd
```````
## Distributing Formats

You can distribute format extensions in one of two ways:

1.  As a template that includes both the format in the `_extensions` directory and the `template.qmd` (which is automatically renamed to match the name of the enclosing directory).

2.  As a plain format with no template scaffolding (this is useful for adding the format to an existing document or project).

If you have a GitHub repository containing the files enumerated above in the `{{< meta example-format >}}` example, users could install your extension and associated template as follows (where `{{< meta example-org >}}` is the GitHub organization hosting the repo):

``` {.bash filename="Terminal"}
quarto use template {{< meta example-org >}}/{{< meta example-format >}}
```

This is often the preferred way to get started with a format as it provides the user with a working document right out of the box. It's also possible to install *only* the format if you are working with an existing project:

``` {.bash filename="Terminal"}
quarto add {{< meta example-org >}}/{{< meta example-format >}}
```

Note that it is possible to bundle and distribute extensions as simple gzip archives (as opposed to using a GitHub repository as described above). See the article on [Distributing Extensions](/docs/extensions/distributing.qmd) for additional details.

## Multiple Formats

A single format extension can support more than one output format. For example, an extension may target `html` and `pdf` output. To support multiple formats in your extension, you can add additional base formats to the `contributes / format` key like so:

``` yaml
contributes:
  format:
    html:
      # html-specific options
    pdf:
      # pdf-specific options
```

## Common Metadata

If you have metadata that is common to any output format when your format extension is targeted, you can place that metadata under the `common` key. For example:

``` yaml
contributes:
  format:
    common:
      filters:
        - filter.lua
      shortcodes:
        - quarto-ext/fancy-text
    html:
      # html-specifc
    pdf:
      # pdf-specifc
```

## Format Resources

You can usually include other files and resources within a format extension by placing those files within the extension directory and using relative paths to reference them in your `_extension.yml` metadata file. These relative paths will be properly handled as your extension's metadata is merged with the rendered document metadata.

If there are resources that you need to have copied to the input directory as a part of rendering the document (for example, a `bst` file for LaTeX bibliographies or a logo or other file referenced from a LaTeX template), you can provide `format-resources`, which is a list of file paths[^_formats-common-1]. Each of these files will be copied into the directory containing the input that is being rendered when the document is rendered. For example:

``` yaml
contributes:
  format:
    pdf:
      format-resources:
        - plos2015.bst
```

## Extension Embedding

In some cases format extensions will want to make use of other extensions. This is permitted, but adding extensions for use within a custom format must be done with a special command line flag to ensure they are embedded correctly.

``` {.bash filename="Terminal"}
quarto create extension format:pdf myformat
cd myformat
quarto add quarto-ext/fancy-text --embed myformat
```

For example, here we want to make the [fancy-text](https://github.com/quarto-ext/fancy-text) extension (which provides special formatting for the words {{< latex >}} and {{< bibtex >}}) available for users of the [jss](https://github.com/quarto-journals/jss) custom format:

``` {.bash filename="Terminal"}
quarto add quarto-ext/fancy-text --embed jss
```

This will produce the following output:

``` {.bash filename="Output"}
quarto-journals/jss
└── _extensions
    └── jss
        ├── _extensions
        │   └── quarto-ext
        │       └── fancy-text
        └── partials
```

This will add the `quarto-ext/fancy-text` extension into the `jss` extension in the `_extensions` folder. By embedding an extension you make it available without creating the potential for conflict with other versions of the extension that users might already have installed.

[^_formats-common-1]: This is most common in the the case of PDF based formats which have a secondary step of converting the LaTeX produced by Pandoc into a PDF. If there are files that are referenced indirectly by the LaTeX, they will need to be discoverable and should typically be copied into the same directory that contains the LaTeX input.
```````

## File: docs/extensions/_listing-chooser.qmd
```````
::: column-page-inset-right
```{=html}

<style type="text/css">
.nav-tabs {
  margin-top: 0.5rem;
  border-bottom: none;
}

.callout {
  margin-top: 0;
}

.nav-tabs .nav-link {
  text-align: center;
  margin-right: 15px;
  margin-top: 10px;
  width: 147px;
  font-size: 0.8em;
  font-weight: 600;
}


.nav-tabs .nav-link, 
.nav-tabs .nav-link.active, 
.nav-tabs .nav-item.show .nav-link {
  border: 1px solid  rgb(222, 226, 230);
  border-radius: 10px;
  color: rgb(80,146,221);
}
.nav-tabs .nav-link:hover {
   border-color: rgb(80,146,221);
   border-width: 1px;
} 

.nav-tabs .nav-link.active, 
.nav-tabs .nav-item.show .nav-link {
  border-color: rgb(80,146,221);
  border-width: 2px;
}


.nav-tabs .nav-link i {
  display: block;
  font-size: 3rem;
  color: rgb(80,146,221);
  margin-bottom: 5px;
}

.quarto-listing {
  margin-top: 2em;
}

.quarto-listing .listing-name,
.quarto-listing .listing-author {
  white-space: nowrap;
}

.quarto-listing .listing-actions-group h3 {
  margin-top: 0;
}

 
</style>

<ul id="index-chooser" class="nav nav-tabs" role="tablist">
  <li class="nav-item" role="presentation">
    <a class="nav-link" href="listing-filters.html">
      <i class="bi bi-gear"></i>Shortcode/Filter
    </a>
  </li>
  <li class="nav-item" role="presentation">
    <a class="nav-link" href="listing-journals.html">
      <i class="bi bi-journal-text"></i>Journal Articles
    </a>
  </li>
  <li class="nav-item" role="presentation">
    <a class="nav-link" href="listing-formats.html">
      <i class="bi bi-file-earmark-richtext"></i>Custom Formats
    </a>
  </li>
  <li class="nav-item" role="presentation">
    <a class="nav-link" href="listing-revealjs.html">
      <i class="bi bi-easel3"></i>Revealjs
    </a>
  </li>
</ul>

<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function() {
  // get file name
  const filename = window.location.pathname.split("/").slice(-1)[0];

  // latch active
  const toolLinks = window.document.querySelectorAll("#index-chooser a");
  for (const tool of toolLinks) {
    if (filename && filename !== "index.html") {
      if (tool.href.endsWith(filename)) {
        tool.classList.add("active");
      } 
    } else {
      if (tool.href.endsWith("listing-filters.html")) {
        tool.classList.add("active");
      }
    }
  }
  
  // move heading into table
  document.querySelector(".listing-actions-group").prepend(document.querySelector("h3.unlisted"));
});

</script>
```
:::
```````

## File: docs/extensions/_listing-footer.qmd
```````
::: {.column-body-outset-right}



:::
```````

## File: docs/extensions/_listing-preamble.qmd
```````
::: column-body-outset-right
{{< include _extension-version.qmd >}}

Extensions are a powerful way to modify and extend the behavior of Quarto. Below is a listing of available extensions (please [let us know](https://github.com/quarto-dev/quarto-web/tree/main/docs/extensions/listings) if you have an extension you'd like to see added to the list).

See the articles on [Creating Extensions](creating.qmd) to learn how to develop your own extensions.
:::

{{< include _listing-chooser.qmd >}}
```````

## File: docs/extensions/_shortcode-escaping.qmd
```````
## Escaping

If you are writing documentation about using variable shortcodes (for example, this article!) you might need to prevent them from being processed. You can do this in two ways:

1.  Escape the shortcode reference with extra braces like this:

    ``` {.default shortcodes="false"}
    {{{< var version >}}}
    ```

2.  Add a `shortcodes=false` attribute to any code block you want to prevent processing of shortcodes within:

    ```` default
    ```{{shortcodes=false}}
    {{{< var version >}}}
    ```
    ````
```````

## File: docs/extensions/creating.qmd
```````
---
title: Creating Extensions
---

{{< include _extension-version.qmd >}}

## Overview

Quarto Extensions are a powerful way to modify or extend the behavior of Quarto, and can be created and distributed by anyone. There are several types of extensions available:

| Extension                                   | Description                                                                                                                                                                                                                                                   |
|----------------------------------|-----------------------------------------------------------------------------------|
| [Shortcodes](shortcodes.qmd)                | Special markdown directives that generate various types of content. For example, you could create shortcodes to embed tweets or videos in a document.                                                                                                         |
| [Filters](filters.qmd)                      | A flexible and powerful tool for introducing new global behaviors and/or new markdown rendering behaviors. For example, you could create filters to implement output folding, an image carousel, or just about anything you can imagine!                      |
| [Journal Articles](/docs/journals/formats.qmd) | Enable authoring of professional Journal articles using markdown, and produce both LaTeX (PDF) and HTML versions of the articles.                                                                                                                             |
| [Custom Formats](formats.qmd)               | Create new output formats by bundling together document options, templates, style sheets, and other content.                                                                                                                                                  |
| [Revealjs Plugins](revealjs.qmd)            | Extend the capabilities of HTML presentations created with Revealjs.                                                                                                                                                                                          |
| [Project Types](project-types.qmd)          | Create new project project types that bundle together standard content and options, or make it easy to create a website for a custom HTML format.                                                                                                             |
| [Starter Templates](starter-templates.qmd)  | Help users get started with new projects by providing a template and example content. Starter templates aren't strictly extensions (i.e. they aren't installed in the `_extensions` directory) but they are often used with custom formats and project types. |
| [Metadata](metadata.qmd) | Provide YAML configuration that can be merged into existing Quarto projects. |

: {tbl-colwidths="\[30,70\]"}

## Development

Each type of extension has its own development requirements: in some cases an extension can be created with YAML metadata alone, however in many cases you'll end up doing some custom scripting using Lua.

These articles provide in-depth documentation on learning and using Lua for extension development:

-   [Lua Development](lua.qmd) helps you get started with Lua (the language used to create extensions)

-   [Lua API Documentation](lua-api.qmd) provides documentation on the Pandoc and Quarto Lua APIs used for creating extensions.

## Distribution

There are two distinct ways to distribute extensions to end users:

-   Publish your extension in a public GitHub repository.

-   Bundle your extension into a `.zip` or `.tar.gz` archive.

[Distributing Extensions](distributing.qmd) goes into more depth on how to package and distribute extensions, both on GitHub and using plain gzip archives.

## Examples

The documentation linked to above provides simple motivating examples for each type of extension. Once you understand these, check out the following for more sophisticated examples of each type of extension:

The [Quarto Extensions](https://github.com/quarto-ext/) GitHub organization provides a set of extensions developed by the core Quarto team. Many of these extensions implement frequently requested features, and all of them provide sound examples of how to implement extensions.

The [Quarto Journals](https://github.com/quarto-journals/) GitHub organization contains a set of Journal Article formats developed by the core Quarto team or contributed by third parties.

Finally, most [published extensions](index.qmd) are hosted on GitHub and therefore have source code available that you can learn from.
```````

## File: docs/extensions/distributing.qmd
```````
---
title: "Distributing Extensions"
---

{{< include _extension-version.qmd >}}

## Overview

Quarto extensions are directories that contain an `_extensions` sub-directory with one or more extensions. The files above the `_extensions` directory are not installed, so typically contain README and LICENSE files, examples, test cases, etc.

There are two distinct ways to distribute extensions to end users:

1.  Publish your extension in a public GitHub repository.

2.  Bundle your extension into a `.zip` or `.tar.gz` archive.

Each method has benefits and drawbacks that will be explored below. First we'll cover the basic file structure and contents of an extension.

## Extension Contents

Quarto Extensions are directories that contain an `_extensions` folder that contains one or more extension contributions. While the most common case is the distribution of a single extension, it is possible to create a single extension directory that includes multiple shortcodes, multiple filters, or a combination of both.

Here is the contents of an extension named `my-filter`:

``` default
README.md
LICENSE
example.qmd
_extensions/
  my-filter/
    _extension.yml
    my-filter.lua
```

Note that the only thing strictly required is the `_extensions` directory (anything above that is for your own purposes and is ignored during installation). Even so, it's good practice to include a `README.md` and `LICENSE` file, and the `example.qmd` will be useful for developing your extension.

### \_extension.yml

Each extension is defined by its `_extension.yml` file which contains the metadata about the extension as well as the what items it contributes when used. For example, here is the `_extension.yml` for a filter extension:

``` yaml
title: My Filter
author: Cooltools
version: 1.0.0
quarto-required: ">=1.2.0"
contributes:
  filters:
    - my-filter.lua
```

Here are all of the fields that can be specified in the `_extension.yml` file:

`title`

:   The extension's name

`author`

:   The author of the extension

`version`

:   A semantic version number this release. When installing, updating, or releasing an extension, this version number will be used to present a summary of actions to the user.

`quarto-required`

:  A semantic version number indicating the minimum quarto version required to run this extension.

`contributes`

:   The items that this extension will contribute to the render. These are allowed subkeys:

::: {style="margin-left: 1em;"}

`shortcodes`

:   A list of shortcode files that should be loaded when this extension is installed.

`filters`

:   A list of filters that should be loaded when this extension is included in the list of filters used to render a document or project. The order of the filters in this list will be preserved.

`formats`

:   A record containing the key value pairs of output formats and the metadata associated with that output format.
:::

:::{.callout-note}
The `version` field is checked for conformity to [semantic versioning](https://semver.org/). For example, valid `version` values would be:

- 1.0.0
- 2.3.4-alpha
- 1.2.3-beta+build567
- 3.0.0-alpha.2
- 4.2.1+build.987

Invalid `version` values would be: 

- 1.2 (missing patch version)
- 1.2.3.4 (extra version segment)
- 1.2.3-beta.5+build (missing build metadata identifier)
:::

## GitHub Distribution

Distributing extensions on GitHub has a number of benefits, including compact syntax (e.g. `quarto add org-name/extension`), the use of organizations as a "namespace" for managing name conflicts, and the ability to target specific releases or tags.

For example, the extensions in the [`quarto-ext`](https://github.com/quarto-ext/) GitHub organization can be added to a project with these commands:

``` {.bash filename="Terminal"}
quarto add quarto-ext/lightbox
quarto add quarto-ext/fontawesome
```

By default, extensions are added from the `HEAD` of the `main` branch of the repository. You can also target tags and/or branches in your repository by including an `@` after the repository name. For example:

``` {.bash filename="Terminal"}
quarto add quarto-ext/lightbox@v1.2
quarto add quarto-ext/lightbox@bugfix-22
```

Extensions added from GitHub have another special property: the GitHub organization can be used as a namespace qualifier to disambiguate extensions that have the same name. For example, if you have two different `lightbox` extensions in your project, you explicitly specify the `quarto-ext` one as follows:

``` yaml
---
filters:
  - quarto-ext/lightbox
---
```

You can also add an extension from a subdirectory of a GitHub repository. For example, here we install two different extensions from the `cooltools/icons` repository:

``` {.bash filename="Terminal"}
quarto add cooltools/icons/fontawesome
quarto add cooltools/icons/iconify
```

## Archive Distribution

Distributing extensions as a `.zip` or `.tar.gz` archive has the benefit of not requiring public distribution. These extensions can also be added directly from non-GitHub version control services using the archive URLs normally provided for repositories.

Note that unlike GitHub hosted extensions, extensions installed from archives do not have an organizational namespace (they all share a single namespace).

### Git Repositories

To add an extension to a project from a GitLab repository you could do this:

``` {.bash filename="Terminal"}
quarto add https://gitlab.com/cooltools/shorty/-/archive/main/shorty-main.zip
```

You'll note that the above URL references the `main` branch. You can similarly target any other branch, tag, or release. For example, to add an extension using the `v1.0` tag:

``` {.bash filename="Terminal"}
quarto add https://gitlab.com/cooltools/shorty/-/archive/v1.0/shorty-main.zip
```

If you are using BitBucket, Azure DevOps, or another Git hosting provider, consult the appropriate service documentation to learn how to form archive URLs for repositories.

### Archive Files

The above examples demonstrate adding an extension from a Git repository, you can also add an extension from an archive published to an ordinary web host. For example:

``` {.bash filename="Terminal"}
quarto add https://cooltools.org/quarto/shorty.zip
```

Or alternatively from a local archive file or even ordinary uncompressed directory:

``` {.bash filename="Terminal"}
quarto add ~/Downloads/shorty.zip
quarto add /share/quarto/extensions/shorty
```
```````

## File: docs/extensions/filters.qmd
```````
---
title: "Creating Filters"
aliases: 
  - /docs/authoring/shortcodes-and-filters.html
  - /docs/authoring/filters.html
---

{{< include _extension-version.qmd >}}

## Overview

If the base features of Pandoc and Quarto don't do exactly what you need, you can very likely create a [Pandoc Filter](https://pandoc.org/filters.html) that bridges the gap.

Pandoc consists of a set of readers and writers. When converting a document from one format to another, text is parsed by a reader into pandoc's intermediate representation of the document---an "abstract syntax tree" or AST---which is then converted by the writer into the target format. The pandoc AST format is defined in the module [`Text.Pandoc.Definition`](https://hackage.haskell.org/package/pandoc-types-1.22/docs/Text-Pandoc-Definition.html) in the pandoc-types package.

A "filter" is a program that modifies the AST, between the reader and the writer.

    INPUT --reader--> AST --filter--> AST --writer--> OUTPUT

Pandoc's built-in citation processing is implemented as a filter, as are many of Quarto's internal extensions (e.g. cross-references, figure layout, etc.).

You can write Pandoc filters using Lua (via Pandoc's built-in Lua interpreter) or using any other language using a JSON representation of the Pandoc AST piped to/from an external process. We strongly recommend using Lua Filters, which have the following advantages:

-   No external dependencies
-   High performance (no serialization or process execution overhead)
-   Access to the [Pandoc](https://pandoc.org/lua-filters.html#pandoc-module) and [Quarto](lua.qmd) libraries of Lua helper functions.

## Activating Filters

If you've developed a filter and want to use it within a document you need to add it to the list of `filters` for the document. For example, here we arrange for the [spellcheck](https://github.com/pandoc/lua-filters/tree/master/spellcheck) filter to run:

``` yaml
---
filters:
  - spellcheck.lua
---
```

By default, user filters are run before Quarto's built-in filters. For some filters you'll want to modify this behavior. For example, here we arrange to run `spellcheck` before Quarto's filters and `fontawesome` after:

``` yaml
filters:
  - spellcheck.lua
  - quarto
  - fontawesome
```

You'll notice that one of the extensions (`spellcheck.lua`) has a file extension and the other (`fontawesome`) does not. This difference stems from how the extensions are distributed: an extension distributed as a plain Lua file uses `.lua` whereas a filter distributed as a [Quarto Extension](index.qmd) does not. The next section explores how to create filters as extensions.


## Filter Extensions 

### Quick Start

Here we'll describe how to create a simple filter extension. We'll use the `quarto create` command to do this. If you are using VS Code or RStudio you should execute `quarto create` within their respective integrated Terminal panes. 

To get started, execute `quarto create extension filter` within the parent directory where you'd like the filter extension to be created:

```{.bash filename="Terminal"}
$ quarto create extension filter
 ? Extension Name › fancy-header
```

As shown above, you'll be prompted for an extension name. Type `fancy-header` and press Enter---the filter extension is then created:

```bash
Creating extension at /Users/jjallaire/quarto/dev/fancy-header:
  - Created README.md
  - Created _extensions/fancy-header/_extension.yml
  - Created _extensions/fancy-header/fancy-header.lua
  - Created .gitignore
  - Created example.qmd
```

If you are running within VS Code or RStudio a new window will open with the extension project. 

Here's what the contents of the files in `_extensions/fancy-header/` look like:

``` {.yaml filename="_extensions/fancy-header/_extension.yml"}
title: Fancy-header
author: J.J. Allaire
version: 1.0.0
quarto-required: ">=99.9.0"
contributes:
  filters:
    - fancy-header.lua
```

``` {.lua filename="_extensions/fancy-header/fancy-header.lua"}
-- Reformat all heading text 
function Header(el)
  el.content = pandoc.Emph(el.content)
  return el
end
```

Finally, the `example.qmd` file includes code that exercises the extension. For example:

``` {.markdown filename="example.qmd"}
---
title: "Fancy-header Example"
filters:
  - fancy-header
---

## Heading

This filter adds formatting to heading text.
```

Note that the value provided to `filters` in `example.qmd` should be the name of the extension (`fancy-header`), not the filename of the filter (`fancy-header.lua`). This allows you to bundle more than one filter in your extension:

``` {.yaml filename="_extensions/fancy-header/_extension.yml"}
contributes:
  filters:
    - fancy-header.lua
    - make-fancier.lua
```

All of filters in your extension will be applied when a user uses your extension in their document.

To develop your filter, render/preview `example.qmd`, and then make changes to `fancy-header.lua` (the preview will automatically refresh when you change `fancy-header.lua`).

### Development

To learn more about developing filter extensions:

1.  If necessary, brush up on [Lua Development](lua.qmd) (Lua is the language used to create filters).

2.  Review the Pandoc documentation on [Writing Lua Filters](https://pandoc.org/lua-filters.html).

3.  Read the [Lua API Reference](lua-api.qmd), which describes the Lua extension API for Quarto.

If you want to write a JSON filter, see the documentation on [Writing JSON filters](https://pandoc.org/filters.html).

To create a new filter extension, use the `quarto create extension filter` command as described above.

### Distribution

If your extension source code is located within a GitHub repository, then it can be added to a project by referencing the GitHub organization and repository name. For example:

``` {.bash filename="Terminal"}
# target the current HEAD of the extension
quarto add cooltools/output-folding

# target a branch or tagged release of the extension
quarto add cooltools/output-folding@v1.2
quarto add cooltools/output-folding@bugfix-22
```

Note that it is possible to bundle and distribute extensions as simple gzip archives (as opposed to using a GitHub repository as described above). See the article on [Distributing Extensions](distributing.qmd) for additional details.

### Examples

You might also find it instructive to examine the source code of these filter extensions authored by the Quarto team:

| **Extension name**                                                   | **Description**                                               |
|--------------------------------------|----------------------------------|
| [latex-environment](https://github.com/quarto-ext/latex-environment) | Quarto extension to output custom LaTeX environments.         |
| [lightbox](https://github.com/quarto-ext/lightbox)                   | Create lightbox treatments for images in your HTML documents. |

: {tbl-colwidths="\[35,65\]"}
```````

## File: docs/extensions/formats.qmd
```````
---
title: "Custom Formats"
example-org: lexcorp
example-format: lexconf
---

{{< include _extension-version.qmd >}}


## Overview

Quarto format extensions enable you to add new formats to the built-in formats (e.g. `html`, `pdf`, `docx`) already available. Custom formats can provide default document options, style-sheets, header, footer, or logo elements, and even bundle other extensions like [filters](filters.qmd) and [shortcodes](shortcodes.qmd). They are a great way to provide a common baseline for authoring documents or presentations within an organization, for a particular type of project or analysis, or for a specific publication.

You can specify a custom format beneath the `format` key just like a built-in format. For example:

``` yaml
---
title: "My Document"
format:
   acm-pdf: 
     toc: true
---
```

Custom formats all derive from one of the base formats, and include that base format as a suffix. Formats can also provide multiple variations that derive from distinct base formats. For example:

``` yaml
---
title: "My Document"
toc: true
format:
   acm-pdf: default
   acm-html: default
---
```

Note that we moved the `toc` option to the top level since it is shared between both of the formats.

Custom formats can also be used with the `--to` argument to `quarto render`. For example:

``` {.bash filename="Terminal"}
quarto render document.qmd --to acm-html
```

 Note that if you are specifically interested in using or creating custom formats for journals and manuscripts, you may want to proceed instead to the documentation on [Journal Articles](/docs/journals/index.qmd).

## Quick Start

Here we'll describe how to create a simple HTML-based format extension. We'll use the `quarto create` command to do this. If you are using VS Code or RStudio you should execute `quarto create` within their respective integrated Terminal panes. 

To get started, execute `quarto create extension format:html` within the parent directory where you'd like the format to be created:

```{.bash filename="Terminal"}
$ quarto create extension format:html
 ? Extension Name › lexdoc
```

As shown above, you'll be prompted for an extension name. Type `lexdoc` (a document format for a fictional company named LexCrop) and press Enter---the custom format extension is then created:

```bash
Creating extension at /Users/jjallaire/quarto/dev/lexdoc:
  - Created README.md
  - Created _extensions/lexdoc/custom.scss
  - Created _extensions/lexdoc/_extension.yml
  - Created template.qmd
```

If you are running within VS Code or RStudio a new window will open with the extension project. 

::: {.callout-note appearance="simple"}
Note that this example creates a format that is derivative of the Quarto base `html` format. You can similarly create formats that are derivative of `pdf`, `docx`, and `revealjs` as follows:

```{.bash filename="Terminal"}
quarto create extension format:pdf
quarto create extension format:docx
quarto create extension format:revealjs
```
:::

Here's what the contents of the files in `_extensions/lexdoc/` look like:

``` {.yaml filename="_extensions/lexdoc/_extension.yml"}
title: Lexdoc
author: J.J. Allaire
version: 1.0.0
quarto-required: ">=1.2.222"
contributes:
  formats:
    html:
      toc: true
      theme: [yeti, custom.scss]
```

The custom HTML format defined here is very simple. It takes the base `html` format, turns on the table of contents by default, and sets the theme as `yeti` along with a `custom.scss` file for additional customizations:

```{.css filename="_extensions/lexdoc/custom.scss"}
/*-- scss:defaults --*/

/* TODO: Customize appearance with SCSS variables */
/* See [HTML theme](https://quarto.org/docs/output-formats/html-themes.html#theme-options) */

/*-- scss:rules --*/

/* TODO: Provide custom CSS rules */
```

Finally, the `template.qmd` provides a base example article for users of the format:

``` {.markdown filename="template.qmd"}
---
title: "Lexdoc Example"
format:
  lexdoc-html: default
author: J.J. Allaire
date: last-modified
---

## Introduction

*TODO* Create an example file that demonstrates the formatting and features of your format.

## More Information

You can learn more about controlling the appearance of HTML output here: <https://quarto.org/docs/output-formats/html-basics.html>
```

To develop your format, render/preview `template.qmd`, and then make changes to the various files in the `_extensions` directory (the preview will automatically refresh when you change these files).


## Example: Revealjs

Next, we'll walk through the creation of a custom format that extends the `revealjs` presentation format. Here is what the source code repository of the format extension might look like:

``` default
README.md
LICENSE
template.qmd
_extensions/
  lexconf/
    _extension.yml
    theme.scss
    logo.png
    title.png
```

Note that the format suffix (`revealjs`) is excluded from the directory name (this is to account for the possibility of multiple formats e.g. `lexconf-revealjs`, `lexconf-pptx`, etc.)

As with other types of extensions, the only thing strictly required is the `_extensions` directory (anything above that is for your own purposes and is ignored during format installation). Even so, it's good practice to include a `README.md` and `LICENSE` file. The `template.qmd` file serves a couple of purposes:

1.  It can be rendered as you develop your format to ensure that things work as expected.
2.  It can serve as the basis for a format template (which helps users gets started with using your format).

Here is what the contents of `_extension.yml` might look like:

``` yaml
title: LexConf 2022 Presentation
author: LexCorp
version: 1.0.0
quarto-required: ">=1.2.0"
contributes:
  formats:
    revealjs:
       theme: [default, theme.scss]
       logo: logo.png
       footer: | 
         Copyright 2022 (c) LexCorp, Inc.
       title-slide-attributes:
          data-background-image: title.png
          data-background-size: contain
       preview-links: auto
       
```

This format mostly provides organization-level content and theming. As mentioned above, formats can also include filters which allow for adding custom markdown constructs and rendering behavior.

Here is what the contents of `template.qmd` might look like:

``` markdown
---
title: "Presentation"
subtitle: "LexConf 2022"
author: "Your Name"
date: today
format: lexconf-revealjs
---

# Overview
```

Extension repositories are structured in such a way that you can test your extension and the template by simply rendering the `template.qmd` file right in the root of your repository. The `template.qmd` will be able to load your extension just as it would when installed, so testing and iterating should be as simple as working within your extension directory until you're satisfied (without the need to repeatedly install or update the extension in order to test it).

## Format Templates

Above we described including a `template.qmd` alongside your extension and then installing the template and format together with:

``` {.bash filename="Terminal"}
quarto use template <gh-organization>/<extension>
```

The `template.qmd` should demonstrate the functionality of the format and serve as a sound starting point for the user. When the extension template is copied into the target directory, the `template.qmd` will automatically be renamed to match the name that the user provided for the directory.

You can also include other files alongside `template.qmd` and they will be copied as well. Note that by default, Quarto will exclude common Github repository files when copying an extension template. This includes any file name or directory starting with a `.` (e.g. `.gitignore`), `README.md`, `LICENSE`, etc.. If you'd like, you can place a `.quartoignore` file in the root of your repository with each line of the file being a glob describing file(s) to ignore (using syntax like a `.gitignore` file).

{{< include _formats-common.qmd >}}
```````

## File: docs/extensions/index.qmd
```````
---
title: "Quarto Extensions"
listing: 
  id: listing-filters
  contents: listings/shortcodes-and-filters.yml
metadata-files: 
  - listings/_metadata.yml
---

{{< include _listing-preamble.qmd >}}

### Shortcodes and Filters {.unlisted}

::: {#listing-filters .column-body-outset-right}
:::

{{< include _listing-footer.qmd >}}
```````

## File: docs/extensions/listing-filters.qmd
```````
---
title: "Quarto Extensions"
listing: 
  id: listing-filters
  contents: listings/shortcodes-and-filters.yml
metadata-files: 
  - listings/_metadata.yml
---

{{< include _listing-preamble.qmd >}}

### Shortcodes and Filters {.unlisted}

::: {#listing-filters .column-body-outset-right}
:::

{{< include _listing-footer.qmd >}}
```````

## File: docs/extensions/listing-formats.qmd
```````
---
title: "Quarto Extensions"
listing: 
  id: listing-formats
  contents: 
    - listings/custom-formats.yml
    - listings/revealjs-formats.yml
metadata-files: 
  - listings/_metadata.yml
---

{{< include _listing-preamble.qmd >}}

### Custom Formats {.unlisted}

::: {#listing-formats .column-body-outset-right}
:::

{{< include _listing-footer.qmd >}}
```````

## File: docs/extensions/listing-journals.qmd
```````
---
title: "Quarto Extensions"
listing: 
  id: listing-journals
  contents: listings/journal-articles.yml
metadata-files: 
  - listings/_metadata.yml
---

{{< include _listing-preamble.qmd >}}

### Journal Articles {.unlisted}

::: {#listing-journals .column-body-outset-right}
:::

{{< include _listing-footer.qmd >}}
```````

## File: docs/extensions/listing-revealjs.qmd
```````
---
title: "Quarto Extensions"
listing: 
  id: listing-revealjs
  contents: 
    - listings/revealjs.yml
    - listings/revealjs-formats.yml
metadata-files: 
  - listings/_metadata.yml
---

{{< include _listing-preamble.qmd >}}

### Revealjs Extensions {.unlisted}

::: {#listing-revealjs .column-body-outset-right}
:::

{{< include _listing-footer.qmd >}}
```````

## File: docs/extensions/lua-api.qmd
```````
---
title: "Lua API Reference"
---

{{< include _extension-version.qmd >}}

## Overview

This article provides documentation on the standard APIs available when implementing Lua filters and shortcodes. There are three major sets of APIs available:

-   **Lua Base API**---Base functions provided for string handling, pattern matching, table manipulation, and file input and output.

-   **Pandoc Lua API**---Core API provided by Pandoc for filter development, and includes both core AST types (e.g. `pandoc.Div`, `pandoc.CodeBlock`, etc.) as well as a wide variety of helper functions for common tasks.

-   **Quarto Lua API**---Additional functions used for debugging, format detection, encoding (e.g. JSON), and adding dependencies to documents (e.g. JavaScript libraries or LaTeX packages).

To get started with programming in Lua and learn about some recommended tools and workflow, see the article on [Lua Development](lua.qmd).

## Lua Base API

The Lua standard library provides core functions for low-level string, math, table, and file operations. Here we provide links to a few of the more useful standard libaries (complete documentation can be found in the [Lua Reference Manual](https://www.lua.org/manual/5.3/)).

| Library | Description |
|---------------------------------|---------------------------------------|
| [string](https://www.lua.org/manual/5.3/manual.html#6.4) | This library provides generic functions for string manipulation, such as finding and extracting substrings, and pattern matching. |
| [utf8](https://www.lua.org/manual/5.3/manual.html#6.5) | This library provides basic support for UTF-8 encoding. |
| [table](https://www.lua.org/manual/5.3/manual.html#6.6) | This library provides generic functions for table manipulation. |
| [math](https://www.lua.org/manual/5.3/manual.html#6.7) | This library provides basic mathematical functions. |
| [io](https://www.lua.org/manual/5.3/manual.html#6.8), [file](https://www.lua.org/manual/5.3/manual.html#6.8) | The I/O library provides two different styles for file manipulation: one uses implicit file handles and the other explicit handles. |
| [os](https://www.lua.org/manual/5.3/manual.html#6.9) | Date/time, locales, environment variables, etc. |

: {tbl-colwidths="\[30,70\]"}

## Pandoc Lua API

Complete documentation for the Pandoc Lua API can be found in the [Lua Filters](https://pandoc.org/lua-filters.html) article available on the Pandoc website. Here are the various components of the API along with links to their reference documentation:

| Lua Module | Description |
|--------------------------|----------------------------------------------|
| [pandoc](https://pandoc.org/lua-filters.html#module-pandoc) (ast) | Constructors for document tree elements (e.g. `pandoc.Div()`, `pandoc.Strong()`, etc.) as well as core components (e.g. `pandoc.Attr()`) |
| [pandoc](https://pandoc.org/lua-filters.html#helper-functions) (functions) | Functions to parse text in a given format, filter and modify a sub-tree, and run child processes. |
| [pandoc.text](https://pandoc.org/lua-filters.html#module-text) | UTF-8 aware text manipulation functions (e.g. `upper()`, `lower()`, etc.) |
| [pandoc.List](https://pandoc.org/lua-filters.html#module-pandoc.list) | This module defines pandoc's list type. It comes with useful methods and convenience function (e.g `find_if()`, `includes()`, `filter()`, `map()`, etc.) |
| [pandoc.utils](https://pandoc.org/lua-filters.html#module-pandoc.utils) | Internal pandoc functions and utility functions (e.g. `blocks_to_inlines()`, `stringify()`, `citeproc()`, etc.) |
| [pandoc.path](https://pandoc.org/lua-filters.html#module-pandoc.path) | Module for file path manipulations (e.g. `is_absolute()`, `is_relative()`, `join()`, etc. |
| [pandoc.system](https://pandoc.org/lua-filters.html#module-pandoc.system) | Access to system information and functionality (e.g. `get_working_directory()`, `list_directory()`, etc. |
| [pandoc.mediabag](https://pandoc.org/lua-filters.html#module-pandoc.mediabag) | Access to pandoc's media storage. The "media bag" is used when pandoc is called with the `--extract-media` or (for HTML only) `--embed-resources` option. |
| [pandoc.template](https://pandoc.org/lua-filters.html#module-pandoc.template) | Compile and access defualt pandoc templates (e.g. `compile()`) |
| [pandoc.types](https://pandoc.org/lua-filters.html#module-pandoc.types) | Constructors for types which are not part of the pandoc AST (e.g. `Version()`) |

: {tbl-colwidths="\[30,70\]"}

## Quarto Lua API

### Utility Functions

Various utility functions are provided:

| Function | Description |
|---------------------|---------------------------------------------------|
| `quarto.version` | Return the current Quarto version as a `pandoc.Version` object. |
| `quarto.log.output(obj)` | Dump a text representation of the passed object to stdout. |
| `quarto.utils.resolve_path(path)` | Compute the full path to a file that is installed alongside your extension's Lua script. This is useful for *internal* resources that your filter needs but should not be visible to the user. |

Quarto includes the [pandoc-lua-logging](https://github.com/wlupton/pandoc-lua-logging) library, which should be used in preference to the dump function. For example, you can examine an element passed to a filter function as follows:

``` lua
function Div(el)
  quarto.log.output(el)
end
```

### Format Detection

Extensions will often need to detect the current format to create custom content depending on the target output medium. The `quarto.doc.is_format()` function

| Function | Description |
|---------------------|---------------------------------------------------|
| `quarto.doc.is_format(name)` | Detect if the current format matches `name`. |
| `quarto.doc.has_bootstrap()` | Query whether [Bootstrap CSS](https://getbootstrap.com/) is available within the current document (it is by default for standard `html` documents but this may have been overridden by e.g. `theme: none`). |

The `name` parameter can match an exact Pandoc format name (e.g. `docx`, `latex`, etc. or can match based on an alias that groups commonly targeted formats together. The following values format aliases are handled specially by `quarto.doc.is_format()`:

{{< include ../authoring/_format-aliases.md >}}

For example, here we check for PDF and HTML output:

``` lua
if quarto.doc.is_format("pdf") then
  -- pdf specific output
elseif quarto.doc.is_format("html") then
  -- html specific output
else
  -- output for other formats
end
```

For LaTeX output, you may need to additionally detect which citation utility and pdf engine are being used for the current render. You can use these functions to do that detection:

| Function | Description |
|----------------------|--------------------------------------------------|
| `quarto.doc.cite_method()` | Returns a string (`citeproc`, `natbib`, or `biblatex)` indicating the cite method in use. |
| `quarto.doc.pdf_engine()` | Returns a string (`pdflatex`, `xelatex`, `lualatex`, or `tectonic`) indicating the PDF engine being used to render the document. |

### Includes

Sometimes extensions need to inject content into the target document. There are three locations that content can be included (pass one of these locations as the first argument of the include functions):

| Location | Description |
|----------------------|--------------------------------------------------|
| `in-header` | In the header of the document (HTML `<head>` tag or LaTeX preamble) |
| `before-body` | Before the document body |
| `after-body` | After the document body |

Note that the included content should use the *raw target format* (e.g. HTML or LaTeX) rather than markdown. You can use these functions to include text or the contents of a file:

| Function | Description |
|----------------------|--------------------------------------------------|
| `quarto.doc.include_text(location, text)` | Include text at the specified location (`in-header`, `before-body`, or `after-body`) |
| `quarto.doc.include_file(location, file)` | Include file at the specified location (`in-header`, `before-body`, or `after-body`). The path to the file should *relative* to the Lua script calling this function. |

For example the following code includes an HTML file after the body in the rendered document:

``` lua
quarto.doc.include_file("after-body", "comments.html")
```

### Dependencies

Extensions will sometimes want to add external dependencies (for example, a JavaScript library and related CSS, or the usage of a LaTeX package). This can be accomplished with the following functions:

| Function | Description |
|---------------------|---------------------------------------------------|
| `quarto.doc.add_html_dependency(dep)` | Add an HTML dependency (additional resources and content) to a document. See docs on the [HTML Dependencies](#html-dependencies) below for additional details. |
| `quarto.doc.attach_to_dependency(name, attach)` | Attach a file to an existing dependency. `attach` is a file path relative to the Lua filter or table with \`path\` and \`name\` for renaming the file as its copied. |
| `quarto.doc.use_latex_package(pkg, opt)` | Adds a `\usepackage` statement to the LaTeX output (along an options string specified in `opt`) |
| `quarto.doc.add_format_resource(path)` | Add a format resource to the document. Format resources will be copied into the directory next to the rendered output. This is useful, for example, if your format references a `bst` or `cls` file which must be copied into the LaTeX output directory. |

For example, here we add a LaTeX package dependency:

``` lua
quarto.doc.use_latex_package("gamebook")
```

#### HTML Dependencies {#html-dependencies}

HTML Dependencies can bundle together JavaScript, CSS, and even arbitrary content to inject into the `<head>` of the document. These dependencies have a name and a version, which is used to ensure that the same dependency isn't bundled into the document more than once.

The `dep` object passed to `quarto.doc.add_html_dependency()` has the following fields:

| Field | Description |
|---------------------|---------------------------------------------------|
| `name` | Unique name. Required. |
| `version` | Version number (as a string). Required. |
| `scripts` | List of scripts to include (paths can be absolute or relative to the Lua file calling the function). Scripts can be either a simple path or a [script object](#script-object). |
| `stylesheets` | List of CSS style-sheets to include (paths can be absolute or relative to the Lua file calling the function). Stylesheets can either be a simple path or a [stylesheet object](#stylesheet-object) |
| `links` | List of link tags to add to the document. Each tag should be a table with `rel` and `ref` (required) and optionally `type` |
| `resources` | Additional files to copy to the input directory (each resource is an object with `name` (target file name in input directory) and `path` (source file name relative to Lua script). |
| `serviceworkers` | JavaScript serviceworker files that should be copied to the root output directory (can be a simple string file name or table with \`path\` and \`name\` for renaming the file as its copied). |
| `meta` | Table of optional `key = value` meta tags to insert into the document `<head>` |
| `head` | Arbitrary string to include in document `<head>` |

For example, here we add a dependency to a JavaScript library:

``` lua
quarto.doc.add_html_dependency({
  name = "glightbox",
  version = "3.2.0",
  scripts = {"glightbox.min.js"},
  stylesheets = {"glightbox.min.css"}
})
```

#### Script Object {#script-object}

The easiest way to specify `scripts` is with simple paths. However, in some cases you may need to add attributes to the `<script>` tag or specify that the script should go after the body. In those cases pass a script object:

| Field | Description |
|----------------------|--------------------------------------------------|
| `path` | Path to the script (relative to the calling Lua script) |
| `attribs` | Table with `key = value` attributes to add to the `<script>` tag |
| `afterBody` | Specify that the `<script>` tag should be inserted after the body |

For example, here update the previous example to add an `integrity` attribute to the script:

``` lua
quarto.doc.add_html_dependency({
  name = "glightbox",
  version = "3.2.0",
  scripts = {
    { path = "glightbox.min.js ", attribs = {integrity = "R9GqQ8K/uxy9rx"} }
  },
  stylesheets = {"glightbox.min.css"}
})
```

#### Stylesheet Object {#stylesheet-object}

The easiest way to specify `stylesheets` is with simple paths. However, in some cases you may need to add attributes to the `<link>` tag generated for the stylesheet. In those cases pass a stylesheet object:

| Field     | Description                                                    |
|---------------------|---------------------------------------------------|
| `path`    | Path to the stylesheet (relative to the calling Lua script)    |
| `attribs` | Table with `key = value` attributes to add to the `<link>` tag |

For example, here we update the previous example to add an `integrity` attribute to the stylesheet:

``` lua
quarto.doc.add_html_dependency({
  name = "glightbox",
  version = "3.2.0",
  scripts = {
    { 
      path = "glightbox.min.js ", 
      attribs = {integrity = "R9GqQ8K/uxy9rx"} 
    }
  },
  stylesheets = {
    { 
      path = "glightbox.min.css ", 
      attribs = {integrity = "GYl1kPzQho1wx"} 
    }
  }
})
```

### JSON Encoding

Quarto includes a copy of [json.lua](https://github.com/rxi/json.lua). a lightweight JSON library for Lua. You can access the JSON functions as follows:

| Function                    | Description                            |
|-----------------------------|----------------------------------------|
| `quarto.json.encode(input)` | Encode a Lua table into a JSON string. |
| `quarto.json.decode(str)`   | Parse a JSON string into a Lua table.  |

For example, here we encode and then decode a table:

``` lua
local json = quarto.json.encode({foo = "bar"})
local obj = quarto.json.decode(json)
```

### Base64 Encoding

Quarto includes a copy of [lbase64](https://github.com/iskolbin/lbase64), a pure Lua implementation of Base64 encoding. You can access the Base 64 encoding functions as follows:

| Function                       | Description                   |
|--------------------------------|-------------------------------|
| `quarto.base64.encode(str)`    | Encode a string into Base 64. |
| `quarto.base64.decode(b64str)` | Decode a Base 64 string.      |

### Paths

Quarto exposes paths to utilities that are likely to be useful to Lua extension and filter authors. Currently, only the ones below are supported:

| Function | Description |
|------------------------------------|------------------------------------|
| `quarto.paths.rscript()` | Returns the path to `Rscript` that Quarto uses in the `knitr` engine and R files for `quarto run` scripts |
| `quarto.paths.tinytex_bin_dir()` | Returns the path to `TinyTeX` binaries directory (where `tlmgr`, `pdlatex` and others are). If Quarto did not install `TinyTeX` and does not found it, it will return `nil`. This means that PDF rendering by Quarto probably used tools found in PATH. |

### Shortcodes

Quarto offers the following helper functions for shortcode developers, to be typically used in shortcode handlers. See the [shortcode development](/docs/extensions/shortcodes.qmd) documentation for more:

| Function | Description |
|----------|-------------|
| `quarto.shortcode.read_arg(args, [n])` | Returns the `n`-th argument of the shortcode invocation |
| `quarto.shortcode.error_output(name, message_or_args, context)` | Creates output to be used by shortcodes to depict an execution error, consistently with how Quarto shows such outputs |
```````

## File: docs/extensions/lua.qmd
```````
---
title: Lua Development
resources: 
  - luarefv51.pdf
---

{{< include _extension-version.qmd >}}

## Overview

The programming language used to create [filters](filters.qmd) and [shortcodes](shortcodes.qmd) is Lua, a lightweight, high-level scripting language. [Lua](https://www.lua.org/) is the extension language for Pandoc (which includes an embedded Lua interpreter). This means that Quarto extensions have no additional runtime dependencies or requirements.

This article will start by providing an orientation to learning Lua for those new to the language. Then, we'll provide some tips for productive Lua development.

See the [Lua API Reference](lua-api.qmd) for additional details on the APIs available for developing extensions.

## Learning Lua

Lua is a scripting language similar to Python, R, Julia, and JavaScript. If you are familiar with one or more of those languages you won't have trouble picking up Lua.

Here is a recommended approach for learning Lua for use with Quarto:

1.  Read [Learn Lua in 15 Minutes](https://learnxinyminutes.com/docs/lua/) for a quick overview of the language and its syntax.

2.  Check out the first two sections of the [Pandoc Lua Filters](https://pandoc.org/lua-filters.html) documentation then skip ahead to the [Filter Examples](https://pandoc.org/lua-filters.html#macro-substitution) section to make things a bit more concrete.

3.  Once you have the basic idea of Lua and filters, get a more complete picture by skimming the full [Pandoc Lua Filters](https://pandoc.org/lua-filters.html) documentation. You won't understand everything, but it's a good orientation to all of the moving parts.

4.  Finally, check out the source code of the extensions published in the [Quarto Extensions](https://github.com/quarto-ext) GitHub organization (these are extensions maintained by the Quarto core team). Once you are able to read and understand that code you are ready to start developing your own extensions!

Some additional learning resources you might find useful include:

1.  [Lua Quick Reference](luarefv51.pdf), a PDF with a compact summary of the language and base library.

2.  [Programming in Lua](https://www.amazon.com/exec/obidos/ASIN/8590379868/lua-pilindex-20), a book by Roberto Ierusalimschy, the chief architect of the language.

3.  [Lua Reference Manual](https://www.lua.org/manual/5.3/), a complete definition of the language and base library.

## Development Tools

### Quarto Preview

Quarto preview, `quarto preview`, is aware of Lua source files within extensions, and will automatically reload the preview whenever a Lua source file changes.

This makes it very easy to incrementally develop and debug Lua code (especially when combined with the [native](#native-format) format a described below). Live reloading for Lua files will work no matter what source code editor you are using (VS Code, RStudio, Neovim, etc.).

### VS Code

While you can use any text editor along with `quarto preview` for developing Lua extensions, we strongly recommend that you consider using VS Code, as it provides a number of additional tools including:

1.  Code completion and type checking.

2.  Diagnostics for various common problems with code.

3.  The ability to add types to your own functions.

Code completion covers the Lua base library as well as the Pandoc and Quarto Lua APIs, and also provides documentation on hover:

![](images/vscode-lua-completions.png){.border fig-alt="Screenshot of Lua file open in VS Code with code completion popup showing for Lua function." width="95%"}

Diagnostics check for many common errors including failing to check for `nil`, undefined global values, shadowing of local variables, unused functions, etc.

![](images/vscode-lua-diagnostics.png){.border fig-alt="Screenshot of Lua file open in VS Code with diagnostic errors shown in Problems pane below the code editor." width="95%"}

#### Installation

To get started with using VS Code for Lua extension development, install the following software:

1.  Install the latest version (v1.2 or greater) of [Quarto](/docs/download/index.qmd)

2.  Install the latest version (v1.40.0 or greater) of the [Quarto VS Code Extension](https://marketplace.visualstudio.com/items?itemName=quarto.quarto).

3.  For Lua code intelligence, install the [Lua LSP VS Code Extension](https://marketplace.visualstudio.com/items?itemName=sumneko.lua).

Once you've installed these components you should see the features described above appear automatically in your Quarto workspaces that include Lua code.

There are many options available for configuring Lua completion and diagnostics. It's also possible to provide type information for your own functions. See the section on [Lua in VS Code](#lua-in-vs-code) below for details.

## Diagnostic Logging

Use the functions in the `quarto.log` module to add diagnostic logging to your extension. You can use both temporary logging calls to debug a particular problem as well as add logging calls that are always present but only activated when the `--trace` flag is passed to `quarto render` or `quarto preview`.

The `quarto.log` module is based on the [pandoc-lua-logging](https://github.com/wlupton/pandoc-lua-logging) project from [\@wlupton](https://github.com/wlupton). You'll recognize the functions described below from that module (e.g. `logging.output()`, `logging.warning()`, etc). For documentation on using all of the logging functions see the project [README](https://github.com/wlupton/pandoc-lua-logging) file.

### quarto.log.output

To log any object (including Pandoc AST elements), you the `quarto.log.output()` function. For example, here we log the `Div` passed to us in our filter callback function as well as some diagnostic text:

``` {.lua filename="filter.lua"}
function Header(el)
  quarto.log.output("=== Handling Header ===")
  quarto.log.output(el)
end
```

This is log output you'd see in the terminal when the filter is executed:

``` default
=== Handling Header ===
Header {
  attr: Attr {
    attributes: AttributeList {}
    classes: List {}
    identifier: "section-one"
  }
  content: Inlines {
    [1] Str "Section"
    [2] Space
    [3] Str "One"
  }
  level: 2
}
```

### quarto.log.warning

Use the `quarto.log.warning()` function to output warnings that can be suppressed with the `--quiet` flag:

``` {.lua filename="filter.lua"}
function RawBlock(el)
  if el.format == "html" then
    quarto.log.warning("Raw HTML not supported")
    return pandoc.Null()
  end
end
```

For example, the warning above will not appear for this call to `quarto render`:

``` bash
quarto render document.qmd --quiet
```

### quarto.log.debug

Use the `quarto.log.debug()` function to write output whenever the `--trace` flag is present:

``` {.lua filename="filter.lua"}
function Header(el)
  quarto.log.debug("Header: " .. el.identifier)
end
```

For example, the debug message will appear for this call to `quarto preview`:

``` bash
quarto preview document.qmd --trace
```

You can keep these calls in your filter since they won't produce output unless `--trace` is specified.

## Native Format {#native-format}

A great tool for understanding the behavior of a Lua filter or shortcode in more depth is to target the `native` format (as opposed to `html`, `pdf`, etc.). The `native` format will show you the raw contents of the Pandoc AST. For example, here's a simple markdown document alongside it's `native` output:

::: {layout-ncol="2"}
<div>

``` {.markdown filename="document.qmd"}
---
format: native
---

## Heading

Some text below




```

</div>

<div>

``` border
Pandoc
  Meta
    { unMeta = fromList [] }
  [ Header
      2
      ( "heading" , [] , [] )
      [ Str "Heading" ]
  , Para
      [ Str "Some"
      , Space
      , Str "text"
      , Space
      , Str "below"
      ]
  ]
```

</div>
:::

Here we add a simple filter to the document that wraps all headers in `pandoc.Emph` (italics). You can see that the `Emph` AST element now wraps the heading text in the `native` output:

::: {layout-ncol="2"}
<div>

``` {.markdown filename="document.qmd"}
---
format: native
filters: [filter.lua]
---

## Heading

Some text below
```

``` {.lua filename="filter.lua"}
function Header(el)
  el.content = { 
    pandoc.Emph(el.content)
  }
  return el
end
```

</div>

::: {.font-monospace .border}
::: {style="font-size: 0.875em; padding: 4px;"}
| Pandoc
|   Meta
|     { unMeta = fromList \[\] }
|   \[ Header
|       2
|       ( "heading" , \[\] , \[\] )
|       **\[ Emph \[ Str "Heading" \]**
|       \]
|   , Para
|       \[ Str "Some"
|       , Space
|       , Str "text"
|       , Space
|       , Str "below"
|       \]
|   \]
| 
| 
| 
:::
:::
:::

## Lua in VS Code {#lua-in-vs-code}

### Type Hints

While Quarto provides type information for the Pandoc and Quarto Lua APIs, this doesn't cover functions that you write within your own extensions. You can however add type information using [Annotations](https://luals.github.io/wiki/annotations). For example, here we indicate that a function takes a `string` and a `pandoc.List()` and returns either a `pandoc.List()` or `nil`:

``` lua
---@param text string
---@param blocks pandoc.List
---@return pandoc.List|nil
function check_for_text(text, blocks)
  -- implementation
end
```

With these type declarations, any attempt to call the function without the correct types will result in a diagnostic message. Further, if a caller fails to check for `nil` before using the return value a diagnostic will also occur.

You can learn more about all of the available type annotations in the [Annotations Reference](https://luals.github.io/wiki/annotations) for the Lua Language Server.

### Settings

The [Lua Language Server](https://marketplace.visualstudio.com/items?itemName=sumneko.lua) extension includes a wide variety of options to customize its behavior (e.g. what diagnostics to show, which completions to offer, etc.).

All of the available options are documented in the [Settings Reference](https://luals.github.io/wiki/settings/) for the Lua Language Server.

Quarto provides a default configuration file (`.luarc.json`) within the root of any workspace that includes Quarto Lua extensions. This file is necessary because it provides a reference to the Lua type definitions for Pandoc and Quarto within your currently installed version of Quarto. Without it, the Lua extension wouldn't know anything about Quarto and would report errors for "unknown" Pandoc modules.

If, for example, Quarto is installed at `/opt/quarto/`, the default contents of the configuration file will be:

``` {.json filename=".luarc.json"}
{
  "Generator": ["Quarto"],
  "Lua.runtime.version": "Lua 5.3",
  "Lua.workspace.checkThirdParty": false,
  "Lua.workspace.library": ["/opt/quarto/share/lua-types"],
  "Lua.runtime.plugin": "/opt/quarto/share/lua-plugin/plugin.lua",
  "Lua.completion.showWord": "Disable",
  "Lua.completion.keywordSnippet": "Both",
  "Lua.diagnostics.disable": ["lowercase-global", "trailing-space"]
}
```

The `.luarc.json` file will also be automatically added to `.gitignore` since it points to the absolute path of Quarto on the local system.

You can change any of the settings within this file save for the `Lua.workspace.library` and `Lua.runtime.plugin` (these are automatically maintained by the Quarto extension based on where Quarto is installed). See the [Settings Reference](https://luals.github.io/wiki/settings/) for all available settings.

If you prefer to manage this file manually, simply remove the `Generator` key and Quarto will no longer update the `Lua.workspace.library` and `Lua.runtime.plugin` settings automatically.

You can also globally disable the automatic creation of `.luarc.json` using the **Quarto \> Lua: Provide Types** VS Code setting.
```````

## File: docs/extensions/managing.qmd
```````
---
title: "Managing Extensions"
---

{{< include _extension-version.qmd >}}

## Installation

If you want to use an extension within a document or project you need to add it to a project or directory. Rather than installing into a global library, Quarto extensions are stored locally, directly alongside the document or project they are used within. For example, if you have a project in a directory named `myblog`, you could add some extensions for use with that the project as follows:

``` {.bash filename="Terminal"}
cd myblog
quarto add quarto-ext/fontawesome
quarto add quarto-ext/video
```

This will result in an `_extensions` folder being created at the root of your project, and the `fontawesome` and `video` extensions being placed within it.

Note that a project isn't strictly required for using extensions---if you add extensions in a directory that isn't a project then any document located directly alongside the `_extensions` folder can use the extensions.

{{< include _extension-trust.qmd >}}

### Version Control

If you are using version control you should check the `_extensions` directory in to your repo along with your other code. Extensions used by a document or project are treated as source code to ensure very long term reproducibility---your project doesn't need to rely on the availability of an external package manager (or the maintenance of older extension versions) to successfully render now and far into the future.

## Repositories

The extensions in the example above were prefixed with `quarto-ext` because they were distributed from the [quarto-ext](https://github.com/quarto-ext/) GitHub organization. Extensions can be similarly distributed from **any** GitHub organization. So for example the following might also be valid command to add extensions to a project:

``` {.bash filename="Terminal"}
quarto add cooltools/lightbox
quarto add bigstateu/fancytweet
```

While it's convenient to distribute extensions using GitHub, you can also bundle them into a `.zip` or `.tar.gz` archive and distribute them using a URL or a local file. See the article on [Distributing Extensions](distributing.qmd) for additional details.

## Updating

You can list and update configured extensions for a given project with the following commands:

``` {.bash filename="Terminal"}
quarto list extensions
quarto update quarto-ext/fontawesome
```

Note that when updating an extension you'll be prompted to confirm the update based on the version you have and the version you are attempting to update to.

## Removing

Use this command to remove an extension from a project:

``` {.bash filename="Terminal"}
quarto remove quarto-ext/fontawesome
```

If you run the `quarto remove extension` command with no `extension-id`, you will be presented with a list of extensions that are present and you may select which extensions to remove.
```````

## File: docs/extensions/metadata.qmd
```````
---
title: "Metadata Extensions"
---

Metadata extensions are Quarto extensions that provide metadata (YAML objects) that can be merged to existing Quarto configurations in a reusable manner.

::: callout-important

Currently, metadata extensions only merge project-level metadata. This limitation will be lifted in the future.

:::

### Quick Start

Here we'll describe how to create a simple metadata extension. We'll use the `quarto create` command to do this. If you are using VS Code or RStudio you should execute `quarto create` within their respective integrated Terminal panes. 

To get started, execute `quarto create extension metadata` within the parent directory where you'd like the filter extension to be created:

```{.bash filename="Terminal"}
$ quarto create extension metadata
 ? Extension Name › my-prerender-scripts
```

As shown above, you'll be prompted for an extension name. Type `my-prerender-scripts` and press Enter---the filter extension is then created:

```bash
? Extension Name › my-prerender-scripts
Creating extension at /Users/cscheid/Desktop/my-prerender-scripts:
  - Created README.md
  - Created _extensions/my-prerender-scripts/_extension.yml
  - Created .gitignore
? Open With
❯ vscode
  rstudio
  (don't open)
```

If you are running within VS Code or RStudio a new window will open with the extension project. 

## Contents of Metadata Extensions

Here's what the contents of the files in `_extensions/my-prerender-scripts/` look like:

``` {.yaml filename="_extensions/my-prerender-scripts/_extension.yml"}
title: My-prerender-scripts
author: Carlos Scheidegger
version: 1.0.0
quarto-required: ">=99.9.0"
contributes:
  metadata:
    project:
      # your per-project metadata goes here
```

## How Metadata Extensions Work

Under the `project` key, any YAML you add will be automatically merged to _any_ project using this extension.
This behaves differently from custom project extensions.
Quarto projects using metadata extensions do not need to change their project types for the metadata to be merged.

::: callout-note

As noted above, metadata extensions only merge project-level metadata in the `project` key. This limitation will be lifted in the future.

:::
```````

## File: docs/extensions/nbfilter.qmd
```````
---
title: "Notebook Filters"
---

## Overview

If you are rendering existing Jupyter notebooks that were not created with Quarto in mind, you may wish to do some pre-processing on the notebook prior to its conversion to markdown. This can be accomplished by specifying one or more `ipynb-filters`. These filters are passed the [JSON representation](https://nbformat.readthedocs.io/en/latest/format_description.html) of the notebook on `stdin` and should write a transformed JSON representation to `stdout`.

::: callout-note
The purpose of notebook filters is to adapt existing `.ipynb` files for use with Quarto. Consequently, notebook filters are only run when the original input is an `.ipynb` file (they are not run for `.qmd` files).
:::

## Example

For example, this notebook filter uses the [nbformat](https://nbformat.readthedocs.io/en/latest/index.html) package to read a notebook, prepend a comment to the source of each code cell, and then write it back to `stdout`:

``` python
import sys
import nbformat

# read notebook from stdin
nb = nbformat.reads(sys.stdin.read(), as_version = 4)

# prepend a comment to the source of each cell
for index, cell in enumerate(nb.cells):
  if cell.cell_type == 'code':
     cell.source = "# comment\n" + cell.source
  
# write notebook to stdout 
nbformat.write(nb, sys.stdout)
```

You can arrange for this filter to be run using the `ipynb-filters` option (specified at either the document or project level):

``` yaml
---
ipynb-filters:
  - filter.py
---
```

Note that the current working directory for the filter will be set to the location of the input notebook.
```````

## File: docs/extensions/project-types.qmd
```````
---
title: "Project Types"
---

{{< include _extension-version.qmd >}}

## Overview

Custom project types provide the ability to tailor projects for a particular purpose. This could be used to create a project type that implements an organization-level standard for creating documentation or conducting analyses.

For example, if you created a project type extension called `lexdocs`, it could be used with:

``` {.yaml filename="_quarto.yml"}
project:
  type: lexdocs
```

This single line of configuration could provide:

-   Navigational elements
-   Headers and footers
-   Document filters
-   Graphical elements
-   HTML options and styles

If you additionally include some basic scaffolding as a [Starter Template](starter-templates.qmd) for using the project type, and host it within a GitHub repository, then users could get a new project up and running as simply as:

``` {.bash filename="Terminal"}
quarto use template lexcorp/lexdocs
```

Note that it is possible to bundle and distribute project type extensions as simple gzip archives (as opposed to using a GitHub repository as described above). See the article on [Distributing Extensions](distributing.qmd) for additional details.

## Development Tools

If you are using custom project types within VS Code or RStudio, only the very latest versions of these tools handle custom project types correctly:

-   For the Quarto VS Code Extension, use [version 1.45](https://marketplace.visualstudio.com/items?itemName=quarto.quarto) or greater.

-   For RStudio, use [version 2022.12](https://posit.co/download/rstudio-desktop/) or higher.

Please be sure to update your version(s) of these tools before proceeding.

## Complete Example

In this section we'll describe exactly what a project type extension should include by providing a complete example of the `lexdocs` project type alluded to above. Here are the files contained in our `lexdocs` project type:

``` bash
_quarto.yml
index.qmd
team.qmd
_extensions
  lexdocs/
    _extension.yml
    lexcorp.png
    theme.scss
    filter.lua
```

Note that this repository provides both:

1.  The project type extension (contained in the `_extensions` directory).

2.  A starter template for using the project type (the `_quarto.yml`, `index.qmd`, and `team.qmd` files in the root of the repository).

### Project Type Extension

Let's explore the code for the extension first. Here is the main `_extension.yml` file:

``` {.yaml filename="_extensions/lexdocs/_extension.yml"}
title: Lexdocs Project
author: Lexcorp, Inc.
version: 1.0.0
quarto-required: ">=1.2.0"
contributes:
  project:
    project:
      type: website
    website:
      sidebar: 
        contents: auto
        search: true
        style: docked
        background: light
        logo: lexcorp.png
      page-footer: |
        "Copyright 2022, Lexcorp, Inc." 
    format: lexdocs-html
  formats:
    html:
      theme: [default, theme.scss]
      code-overflow: wrap
      code-line-numbers: true
      filters:
        - filter.lua
```

The `contributes` key includes a `project` entry, which in turn defines the default values for the `_quarto.yml` configuration file when this project type is used.

Note that custom project types always need to inherit from one of the base project types built into Quarto (`default`, `website`, or `book`). Here we specify `project: type: website`.

You'll also note that we additionally define a `lexdocs-html` [Custom Format](formats.qmd) within the extension (and then make that the default format for the project). This enables us to reference that format explicitly within documents (e.g. if you want to include a document that renders both `pdf` and `lexdocs-html` variations).

There are three additional files referenced in the custom `project` definition in `_extension.yml`. We won't show their source code, but here's a rundown on the role they play:

-   `lexcorp.png` is a logo added to the `sidebar`.
-   `theme.scss` provides a [custom theme](/docs/output-formats/html-themes.qmd) for HTML output.
-   `filter.lua` provides some additional transformations required by the format.

### Starter Template

This repository also provides a starter template by including these files at the root of the repository:

-   `_quarto.yml` is the project configuration file
-   `index.qmd` is an empty default home page
-   `team.qmd` is a page where users of the project type are encouraged to list the team members who contributed.

Here's what `_quarto.yml` might look like:

``` {.yaml filename="_quarto.yml"}
project:
  title: "Docs Site"
  type: lexdocs
  
format:
  lexdocs-html:
    toc: true
```

Users of the template will naturally change the default `title`, and can add whatever other project-, website-, or format-level options they require (these options will be merged with the defaults provided by the extension).

## Markdown Publishing

If you are using Quarto to produce markdown for another publishing system, you can use a project type extension to tailor the markdown output created by Quarto, as well as integrate with the native preview capabilities of the other system.

Quarto includes a couple of built-in project-types for integrating with the [Hugo](/docs/output-formats/hugo.qmd) and [Docusaurus](/docs/output-formats/docusaurus.qmd) publishing systems. You can see the source code for these project types here:

-   [`hugo`](https://github.com/quarto-dev/quarto-cli/blob/main/src/resources/extensions/quarto/hugo/_extension.yml) project type

-   [`docusaurus`](https://github.com/quarto-dev/quarto-cli/blob/main/src/resources/extensions/quarto/docusaurus/_extension.yml) project type

### Hugo Example

Here is the `_extension.yml` file for the Hugo project type (this demonstrates a few of the additional options you'd typically specify when creating a project type for markdown publishing, we'll describe these options below):

``` {.yaml filename="_extension.yml"}
title: Hugo
author: RStudio, PBC
organization: quarto
contributes:
  project:
    project:
      type: default
      detect:
        - ["config.toml", "content"]
        - ["config/_default/config.toml", "content"]
      render:
        - "**/*.qmd"
        - "**/*.ipynb"
      preview:
        serve:
          cmd: "hugo serve --port {port} --bind {host} --navigateToChanged"
          env: 
            HUGO_RELATIVEURLS: "true"
          ready: "Web Server is available at"
    format: hugo-md
  formats:
    md:
      variant: gfm+yaml_metadata_block+definition_lists
      prefer-html: true
      fig-format: retina
      fig-width: 8
      fig-height: 5
      wrap: preserve
```

Let's look specifically at some project options provided for Hugo that you may not have seen before:

``` yaml
project:
  type: default
  detect:
    - ["config.toml", "content"]
    - ["config/_default/config.toml", "content"]
  render:
    - "**/*.qmd"
    - "**/*.ipynb"
  preview:
    serve:
      cmd: "hugo serve --port {port} --bind {host} --navigateToChanged"
      env: 
        HUGO_RELATIVEURLS: "true"
      ready: "Web Server is available at"
```

The `detect` option enables Quarto to automatically detect when to activate this project type based on the presence of one or more files.

The `render` option indicates which files Quarto should render (note that by default Quarto will render `.md` files, but this would interfere with Hugo's native rendering of `.md` files so we exclude them here).

The `preview` option enables `quarto preview` to launch the native preview server for Hugo. The `cmd` indicates the shell command to use (with spots to interpolate the `{port}` and `{host`}); the `env` option specifies values for environment variables; and the `ready` option is a sequence of characters to look for to indicate that the preview server has started and is ready to handle requests.

### Markdown Formats

When creating a project type for a markdown publishing system you'll always need to define a custom format along with it which defines what flavor of markdown to produce. In the case of Hugo we define the markdown flavor using the `variant` option:

``` yaml
formats:
  md:
    variant: gfm+yaml_metadata_block+definition_lists+smart
```

This results in GitHub Flavored Markdown w/ YAML metadata blocks (which Hugo requires for tags/categories/etc) in addition to support for definition lists and smart typography.

Note that for some systems you'll need to do more than just declare a variant. For example, in the case of Docusaurus we declare the variant as well as a Lua filter that deals with Docusaurus-specific constructs like MDX, Callouts, and Tabsets:

``` yaml
formats:
  md:
    variant: +yaml_metadata_block+pipe_tables+tex_math_dollars+header_attributes-all_symbols_escapable
    filters:
      - docusaurus.lua
```

A project type for any given markdown publishing system will have its own variant, and will often also require filters to deal with non-standard constructs and other vagaries of the target system.
```````

## File: docs/extensions/revealjs.qmd
```````
---
title: "Revealjs Plugins"
---

{{< include _extension-version.qmd >}}

## Overview

Revealjs plugins enable you to extend the capabilities of HTML presentations created with [Revealjs](/docs/presentations/revealjs/). The Reveal Plugin API is very rich, and many of the built-in capabilities of Quarto Revealjs presentations are implemented as plugins, including [Menu](https://github.com/quarto-dev/quarto-cli/tree/main/src/resources/formats/revealjs/plugins/menu), [Chalkboard](https://github.com/quarto-dev/quarto-cli/tree/main/src/resources/formats/revealjs/plugins/chalkboard), and [PDF Export](https://github.com/quarto-dev/quarto-cli/tree/main/src/resources/formats/revealjs/plugins/pdfexport).

Here are some examples of Revealjs plugins packaged as Quarto extensions:

| Extension                                                | Description                                                                          |
|----------------------------------------------------------|--------------------------------------------------------------------------------------|
| [Pointer](https://github.com/quarto-ext/pointer)         | Adds support for switching the cursor to a 'pointer' style element while presenting. |
| [Attribution](https://github.com/quarto-ext/attribution) | Display attribution text along the right edge of slides.                             |

: {tbl-colwidths="\[30,70\]"}

## Quick Start

Here we'll describe how to create a simple Revealjs plugin extension. We'll use the `quarto create` command to do this. If you are using VS Code or RStudio you should execute `quarto create` within their respective integrated Terminal panes. 

To get started, execute `quarto create extension revealjs-plugin` within the parent directory where you'd like the plugin extension to be created:

```{.bash filename="Terminal"}
$ quarto create extension revealjs-plugin
 ? Extension Name › shuffler
```

As shown above, you'll be prompted for an extension name. Type `shuffler` and press Enter---the Revealjs plugin extension is then created:

```bash
Creating extension at /Users/jjallaire/quarto/dev/shuffler:
  - Created README.md
  - Created _extensions/shuffler/_extension.yml
  - Created _extensions/shuffler/shuffler.css
  - Created _extensions/shuffler/shuffler.js
  - Created .gitignore
  - Created example.qmd
```

If you are running within VS Code or RStudio a new window will open with the extension project. 

Here's what the contents of the files in `_extensions/shuffler/` look like:

``` {.yaml filename="_extensions/shuffler/_extension.yml"}
title: Shuffler
author: J.J. Allaire
version: 1.0.0
quarto-required: ">=1.2.222"
contributes:
  revealjs-plugins:
    - name: RevealShuffler
      script:
        - shuffler.js
      stylesheet:
        - shuffler.css
```

``` {.lua filename="_extensions/shuffler/shuffler.js"}
window.RevealShuffler = function () {
  return {
    id: "RevealShuffler",
    init: function (deck) {
      // TODO: Implement your plugin functionality
      // Learn more at https://revealjs.com/creating-plugins/
      
      // This example shuffles the deck when the 'T' key is pressed
      deck.addKeyBinding({ keyCode: 84, key: "T" }, () => {
        deck.shuffle();
      });
    },
  };
};
```

There is also a `shuffler.css` file for providing any styles required by your plugin.

Finally, the `example.qmd` file includes code that exercises the extension. For example:

``` {.markdown filename="example.qmd"}
---
title: "Shuffler Example"
format:
  revealjs: default
revealjs-plugins:
  - shuffler
---

## Breakfast

- Eat eggs
- Drink coffee

## Dinner

- Eat spaghetti
- Drink wine
```

To develop your plugin, render/preview `example.qmd`, and then make changes to `shuffler.js` and `shuffler.css` (the preview will automatically refresh when you change these files).

## Installation and Use

If your extension source code it located within a GitHub repository, then it can be added by referencing the GitHub organization and repository name. For example, you can install the `attribution` extension with the following:

``` {.bash filename="Terminal"}
quarto add quarto-ext/attribution
```

Note that it is possible to bundle and distribute extensions as simple gzip archives (as opposed to using a GitHub repository as described above). See the article on [Distributing Extensions](distributing.qmd) for additional details.

Once an extension has been added, you can use the Reveal plugin by adding it to the `reveal-plugins` key. For example:

``` yaml
---
title: "My Presentation"
format: revealjs
revealjs-plugins:
  - attribution
---
```

## Plugin Packaging

Note that the plugins listed above were not initially developed for use with Quarto. Rather, they were developed intially as native Revealjs plugins and then packaged as Quarto extensions.

For example, you can find the original implementation of the attribution plugin here: <https://github.com/rschmehl/reveal-plugins/tree/main/attribution>. The plugin is implemented with a JavaScript file and a CSS file. To make the plugin available as a Quarto extension, we package these files along with an `_extension.yml` config file that registers the plugin. Here are the files in the Quarto extension:

``` bash
LICENSE
README.md
example.qmd
_extensions/
   attribution/
     _extension.yml
     attribution.js
     attribution.css
```

Note that the `LICENSE` and `README.md` are standard documentation files and the `example.qmd` is used for development and documentation of the extension. None of those files are actually installed by end users (rather only the contents of the `_extensions` directory is installed).

You can see the full source code of the Quarto version here: <https://github.com/quarto-ext/attribution> (we'll also walk through the code in detail below).

## Plugin Development

You can develop either entirely new Revealjs plugins from scratch or you can package existing Revealjs extensions as described above.

Here is a list of existing 3rd party plugins for Revealjs that you might consider packaging as Quarto extensions: <https://github.com/hakimel/reveal.js/wiki/Plugins,-Tools-and-Hardware>.

If you want to develop new plugins, check out the Quarto Reveal extensions listed above as well as the code of other 3rd party Reveal Plugins. The following documentation on the Revealjs website provides additional important technical details:

-   [API Methods](https://revealjs.com/api/)

-   [Reveal Events](https://revealjs.com/events/)

## Plugin Configuration

Some Revealjs plugins make available various user options. If you are developing a plugin from scratch, you should use a distinct key for your plugin's configuration. Users can use this key alongside other `revealjs` options. For example the `pointer` extension can be configured as follows:

``` yaml
---
title: "Example Presentation"
format:
  revealjs: 
    pointer:
      pointerSize: 18
      color: '#32cd32'
revealjs-plugins:
  - pointer
---
```

The extension accesses options using the `deck.getConfig()` function:

``` javascript
return {
  id: "pointer",
  init: (deck) => {
    const config = deck.getConfig();
    const options = config.pointer || {};
    // etc
  }
}
```

Note that when packaging an existing Revealjs plugin, you can override its default configuration using the `config` key within your `_extension.yml` file. For example, these are the overrides provided by the `pointer` extension:

``` yaml
title: Pointer
author: Charles Teague
contributes:
  revealjs-plugins:
    - name: RevealPointer
      script:
        - pointer.js
      stylesheet:
        - pointer.css
      config:
        pointer:
          key: "q"
          color: "red"
          pointerSize: 16
          alwaysVisible: false
```

## Example: Attribution

Here we'll walk through the complete source code for the [attribution](https://github.com/quarto-ext/attribution/) extension. This extension enables you to display attribution text sideways along the right edge of Revealjs slides.

Here are source files used to develop the extension:

``` bash
LICENSE
README.md
example.qmd
_extensions/
   attribution/
     _extension.yml
     attribution.js
     attribution.css
```

The `example.qmd` and documentation files are used for development of the extension only (it is not installed by end users). The other files provide extension registration (`_extension.yml`) and the actual implementation of the Revealjs plugin (`attribution.js` and `attribution.css`).

The `example.qmd` is a simple one-slide presentation that includes an image along with a div with class `.attribution`:

``` {.markdown filename="example.qmd"}
---
title: "Attribution Extension"
format: revealjs
revealjs-plugins:
  - attribution
---

## Forest Image

![](ingtotheforest.jpg)

::: {.attribution)
Photo courtesy of [@ingtotheforest](https://unsplash.com/@ingtotheforest)
:::
```

Note that the `revealjs-plugins` key references the `attribution` extension, which will implemented in the `_extensions/attribution` directory.

The `_extension.yml` file indicates that the extension is making available a Revealjs plugin along with the plugin name, script, and style-sheets (note that the plugin name is not arbitrary, it will be whatever name is used within the script that implements the plugin, in this case `RevealAttribution`):

``` {.yaml filename="_extensions/attribution/_extension.yml"}
title: Attribution
author:  Roland Schmehl
version: 0.1.0
quarto-required: ">=1.2.0"
contributes:
  revealjs-plugins:
    - name: RevealAttribution
      script:
        - attribution.js
      stylesheet:
        - attribution.css
```

The `attribution.js` file contains the implementation of the Plugin using the Revealjs Plugin API:

``` {.javascript filename="_extensions/attribution/attribution.js"}
window.RevealAttribution = window.RevealAttribution || {
  id: 'RevealAttribution',
  init: function(deck) {
      initAttribution(deck);
  }
};

const initAttribution = function(Reveal){

var ready = false;
var resize = false;
var scale = 1;

window.addEventListener( 'ready', function( event ) {

  var content;

  // Remove configured margin of the presentation
  var attribution = document.getElementsByClassName("attribution");
  var width = window.innerWidth;
  var configuredWidth = Reveal.getConfig().width;
  var configuredHeight = Reveal.getConfig().height;

  scale = 1/(1-Reveal.getConfig().margin);

  for (var i = 0; i < attribution.length; i++) {
    content = attribution[i].innerHTML;
    attribution[i].style.width = configuredWidth + "px";
    attribution[i].style.height = configuredHeight + "px";
    attribution[i].innerHTML = "<span class='content'>" + content + "</span>";
    attribution[i].style.transform = 'translate( -50%, -50% ) scale( ' + scale*100 + '% ) rotate(-180deg)';
  }

  // Scale with cover class to mimic backgroundSize cover
  resizeCover();

});

window.addEventListener( 'resize', resizeCover );

function resizeCover() {

  // Scale to mimic backgroundSize cover
  var attribution = document.getElementsByClassName("attribution");
  var xScale = window.innerWidth / Reveal.getConfig().width;
  var yScale = window.innerHeight / Reveal.getConfig().height;
  var s = 1;

  if (xScale > yScale) {
      // The div fits perfectly in x axis, stretched in y
      s = xScale/yScale;
  }
  for (var i = 0; i < attribution.length; i++) {
    attribution[i].style.transform = 'translate( -50%, -50% ) scale( ' + s*scale*100 + '% ) rotate(-180deg)';
  }
}

};
```

Finally, `attribution.css` includes the CSS that repositions and rotates the element with class `.attribution` on the far right side of the slide:

``` {.css filename="_extensions/attribution/attribution.css"}
/* Attribution plugin: text along the right edge of the viewport */
.attribution{
  position: absolute;
  top: 50%;
  bottom: auto;
  left: 50%;
  right: auto;
  font-size: 0.4em;
  pointer-events: none;
  text-align: center;
  writing-mode: vertical-lr;
  transform: translate( -50%, -50% ) scale( 100% ) rotate(-180deg);
}

/* Attribution plugin: activate pointer events for attribution text only */
.attribution .content{
  pointer-events: auto;
}
```
```````

## File: docs/extensions/shortcodes.qmd
```````
---
title: "Creating Shortcodes"
---

{{< include _extension-version.qmd >}}

This article describes how to create your own shortcodes.

{{< include /docs/authoring/_shortcodes.qmd >}}

## Quick Start

Here we'll describe how to create a simple shortcode extension. We'll use the `quarto create` command to do this. If you are using VS Code or RStudio, you should execute `quarto create` within their respective integrated terminal panes. 

To get started, execute `quarto create extension shortcode` within the parent directory where you'd like the shortcode extension to be created:

```{.bash filename="Terminal"}
$ quarto create extension shortcode
 ? Extension Name › shorty
```

As shown above, you'll be prompted for an extension name. Type `shorty` and press Enter---the shortcode extension is then created:

```bash
Creating extension at /Users/jjallaire/extensions/shorty/shorty:
  - Created README.md
  - Created _extensions/shorty/shorty.lua
  - Created _extensions/shorty/_extension.yml
  - Created .gitignore
  - Created example.qmd
```

If you are running within VS Code or RStudio, a new window will open with the extension project. 

Here's what the contents of the files in `_extensions/shorty/` look like:

``` {.yaml filename="_extensions/shorty/_extension.yml"}
title: Shorty
author: J.J. Allaire
version: 1.0.0
quarto-required: ">=1.2.222"
contributes:
  shortcodes:
    - shorty.lua
```

``` {.lua filename="_extensions/shorty/shorty.lua"}
return {
  ['shorty'] = function(args, kwargs, meta) 
    return pandoc.Str("Hello from Shorty!")
  end
}
```

Finally, the `example.qmd` file includes code that exercises the extension. For example:

``` {.markdown filename="example.qmd"}
---
title: "Shorty Example"
---

{{< shorty >}}
```

To develop your shortcode, render/preview `example.qmd`, and then make changes to `shorty.lua` (the preview will automatically refresh when you change `shorty.lua`).

## Development 

Shortcodes are created using Lua. If you aren't familar with Lua (or with Pandoc filters), here are some resources to help you along:

- [Lua Development](lua.qmd) (Lua is the language used to create shortcodes).

- [Lua API Reference](lua-api.qmd), which describes the Lua extension API for Quarto. Specifically, consider consulting the `quarto.shortcode.*` entry points.

Shortcodes are implemented as Lua functions that take one or more arguments and return a Pandoc AST node (or list of nodes).

Here's the implementation of the `env` shortcode that is built in to Quarto:

``` {.lua filename="env.lua"}
function env(args)
  local var = pandoc.utils.stringify(args[1])
  local value = os.getenv(var)
  if value ~= nil then
    return pandoc.Str(value)
  else
    return pandoc.Null()
  end
end
```

Note that arguments to shortcodes are provided in `args` (a 1-dimensional array), and that each argument is a list of Pandoc inlines (i.e. markdown AST parsed from the text).

We use the `pandoc.utils.stringify()` function to convert the inlines to an ordinary string, and then the `os.getenv()` function to get its value.

You would use this shortcode as follows:

``` markdown
{{{< env HOME >}}}
```

## Distribution

If your extension source code is located within a GitHub repository, then it can be installed by referencing the GitHub organization and repository name. For example:

``` {.bash filename="Terminal"}
# install the current HEAD of the extension
quarto add cooltools/shorty

# install a branch or tagged release of the extension
quarto add cooltools/shorty@v1.2
quarto add cooltools/shorty@bugfix-22
```

Note that it is possible to bundle and distribute extensions as simple gzip archives (as opposed to using a GitHub repository as described above). See the article on [Distributing Extensions](distributing.qmd) for additional details.

## Examples

You might find it instructive to examine the source code of these shortcode extensions authored by the Quarto team:

| **Extension**                                                                                     | **Description**                                                                                 |
|---------------------------|---------------------------------------------|
| [fancy-text](https://github.com/quarto-ext/fancy-text)                                            | Output nicely formatted versions of fancy strings such as LaTeX and BibTeX in multiple formats. |
| [fontawesome](https://github.com/quarto-ext/fontawesome)                                          | Use Font Awesome icons in HTML and PDF documents.                                               |
| [video](https://github.com/quarto-dev/quarto-cli/tree/main/src/resources/extensions/quarto/video) | Embed videos in HTML documents and Revealjs presentations.                                      |

: {tbl-colwidths="\[30,70\]"}

Some additional annotated examples are provided below.

### Raw Output

Shortcodes can tailor their output to the format being rendered to. This is often useful when you want to conditionally generate rich HTML output but still have the same document render properly to PDF or MS Word.

The `pagebreak` shortcode generates "native" pagebreaks in a variety of formats. Here's the implementation of `pagebreak`:

``` {.lua filename="pagebreak.lua"}
function pagebreak()
 
  local raw = {
    epub = '<p style="page-break-after: always;"> </p>',
    html = '<div style="page-break-after: always;"></div>',
    latex = '\\newpage{}',
    ooxml = '<w:p><w:r><w:br w:type="page"/></w:r></w:p>',
    odt = '<text:p text:style-name="Pagebreak"/>',
    context = '\\page'
  }

  if quarto.doc.isFormat('docx') then
    return pandoc.RawBlock('openxml', raw.ooxml)
  elseif quarto.doc.isFormat('pdf')  then
    return pandoc.RawBlock('tex', raw.latex)
  elseif quarto.doc.isFormat('odt')  then
    return pandoc.RawBlock('opendocument', raw.odt)
  elseif quarto.doc.isFormat('epub') then
    return pandoc.RawBlock('html', raw.epub)
  elseif quarto.doc.isFormat('html') then
    return pandoc.RawBlock('html', raw.html)
  elseif quarto.doc.isFormat('context') then
    return pandoc.RawBlock('context', raw.context)
  else
    -- fall back to insert a form feed character
    return pandoc.Para{pandoc.Str '\f'}
  end

end
```

We use the `pandoc.RawBlock()` function to output the appropriate raw content for the target format. Note that raw blocks are passed straight through to the output file and are not processed as markdown.

You'd use this shortcode as follows:

``` markdown
{{{< pagebreak >}}}
```

### Named Arguments

The examples above use either a single argument (`env`) or no arguments at all (`pagebreak`). Here we demonstrate named argument handling by implementing a `git-rev` shortcode that prints the current git revision, providing a `short` option to determine whether a short or long SHA1 value is displayed:

``` {.lua filename="git.lua"}
-- run git and read its output
function git(command)
  local p = io.popen("git " .. command)
  local output = p:read('*all')
  p:close()
  return output
end

-- return a table containing shortcode definitions
-- defining shortcodes this way allows us to create helper 
-- functions that are not themselves considered shortcodes 
return {
  ["git-rev"] = function(args, kwargs)
    -- command line args
    local cmdArgs = ""
    local short = pandoc.utils.stringify(kwargs["short"])
    if short == "true" then
      cmdArgs = cmdArgs .. "--short "
    end
    
    -- run the command
    local cmd = "rev-parse " .. cmdArgs .. "HEAD"
    local rev = git(cmd)
    
    -- return as string
    return pandoc.Str(rev)
  end
}
```

There are some new things demonstrated here:

1.  Rather than defining our shortcode functions globally, we return a table with the shortcode definitions. This allows us to define helper functions that are not themselves registered as shortcodes. It also enables us to define a shortcode with a dash (`-`) in its name.

2.  There is a new argument to our shortcode handler: `kwargs`. This holds any named arguments to the shortcode. As with `args`, values in `kwargs` will always be a list of Pandoc inlines (allowing you to accept markdown as an argument). Since `short` is a simple boolean value we need to call `pandoc.utils.stringify()` to treat it as a string and then compare it to `"true"`.

We'd use this shortcode as follows:

``` {.markdown shortcodes="false"}
---
title: "My Document"
---

{{< git-rev >}}
{{< git-rev short=true >}}
```

### Metadata Options

In some cases you may want to provide options that affect how your shortcode behaves. There is a third argument to shortcode handlers (`meta`) that provides access to document and/or project level metadata.

Let's implement a different version of the `git-rev` shortcode that emits the revision as a link to GitHub rather than plain text. To do this, we make use of `github.owner` and `github.repo` metadata values:

``` {.lua filename="git.lua"}
function git(command)
  local p = io.popen("git " .. command)
  local output = p:read('*all')
  p:close()
  return output
end

return {
  
  ["git-rev"] = function(args, kwargs, meta)
    -- run the command
    local rev = git("rev-parse HEAD")
    
    -- target repo
    local owner = pandoc.utils.stringify(meta["github.owner"])
    local repo = pandoc.utils.stringify(meta["github.repo"])
    local url = "https://github.com/" 
                .. owner .. "/" .. repo .. "/" .. rev 
    
    -- return as link
    return pandoc.Link(pandoc.Str(rev), url)
  end
}
```

As with `args` and `kwargs`, `meta` values are always provided as a list of Pandoc inlines, so often need to be converted to string using `pandoc.utils.stringify()`.

To use this shortcode in a document, we provide the GitHub info as document options, then include the shortcode where we want the link to be:

``` {.markdown shortcodes="false"}
---
title: "My Document"
github:
  owner: quarto-dev
  repo: quarto-cli
---

{{< git-rev >}}
```

The shortcode registration and GitHub metadata could just as well been provided in a project-level `_quarto.yml` file or a directory-level `_metadata.yml` file.

## Raw Arguments

In Quarto >= 1.3, you can also access the raw stream of inlines passed to a shortcode by adding a `raw_args` parameter. For example:

```lua
function shorty(args, kwargs, meta, raw_args)
  -- ...
end
```

## Context Awareness

In Quarto >= 1.5, you can access the context in which the shortcode was invoked as the fifth parameter of the function call. `context` is a string that will be one of `block`, `inline`, or `text`:

- if `context` is `block`, then the shortcode exists in a block by itself
- if `context` is `inline`, then the shortcode exists as one of many inline nodes
- if `context` is `text`, then the shortcode exists inside a text field of a Pandoc node. These can be:
  - the content of `CodeBlock` or `Code` elements
  - the content of `RawBlock` or `RawInline` elements
  - the content of attributes of Pandoc elements like `Div`, `Span`, etc.
  - the URL of a `Link` element
  - the source of an `Image` element

```lua
function shorty(args, kwargs, meta, raw_args, context)
  -- ...
end
```

{{< include _shortcode-escaping.qmd >}}
```````

## File: docs/extensions/starter-templates.qmd
```````
---
title: "Starter Templates"

---

{{< include _extension-version.qmd >}}

## Overview

Starter templates provide a straightforward way for users to get started with new Quarto projects by providing example content and options. You might use starter templates to:

1.  Create a working initial document for [Journal Articles](/docs/journals/index.qmd) or [Custom Formats](formats.qmd).

2.  Provide the initial content for a custom [Project Type](project-types.qmd). 

3.  Scaffold a standard form of data analysis project used by your organization.

Starter templates are essentially just GitHub repositories that are copied to a new directory on the user's system. As we'll describe below in [Extensions & Templates], often times the repository for a custom format is also used as a starter template.

## Creating a Template

To create a starter template, just create a GitHub repository that includes the files you want copied into projects created with the template. All of the files in the repository are copied except for:

1.  Hidden files (any file or directory name that starts with `.` (e.g. `.gitignore`).

2.  Common GitHub repository files like `README.md` and `LICENSE`.

If you'd like, you can also include a `.quartoignore` file in the root of your repository listing other files or directories you'd like to exclude. Each line of the file should be a glob describing file(s) to ignore (using syntax like a `.gitignore` file).

### template.qmd

There is one special file you'll typically want to include in templates that target creation of documents (as opposed to projects): `template.qmd`. There are two reasons to include a `template.qmd`:

1. It provides an easy way to test that your template is working as expected.

2. When the template is copied into the target directory, the `template.qmd` will automatically be renamed to match the name that the user provided for the directory.

If you are creating a template that targets creation of a website or book, a `template.qmd` is generally not necessary (as the `index.qmd` file already serves this purpose).

## Using a Template

Once you've created the template repository and pushed it to GitHub, it can be instantiated with the following command:

``` {.bash filename="Terminal"}
quarto use template cooltools/cool-project
```

This command copies the contents of the GitHub repository at `https://github.com/cooltools/cool-project` to the local system (excluding selected files as discussed above).

If the command is run in an empty directory, the user will be prompted whether they'd like to use the existing directory or create a new directory. If the command is run in a directory which contains other files or directories, they'll be prompted for the name of a directory to create.

## Extensions & Templates

When creating [Journal Articles](/docs/journals/index.qmd), [Custom Formats](formats.qmd), or [Project Type](project-types.qmd) extensions, we recommend that you additionally provide a starter template to make it easy for users to get started.

This is generally as easy as adding a `template.qmd` file to your extension that demonstrates its use. With this configuration, users can either begin using your extension via the template or by a conventional `quarto install` of the extension. 

For example, consider the [ACM](https://github.com/quarto-journals/acm) Journal Article extension. The extension repository supports _either_ getting started with a template:

```{.bash filename="Terminal"}
quarto use template quarto-journals/acm
```

Alternatively, you can add the format (without the template) into an existing project or directory:

```{.bash filename="Terminal"}
quarto add quarto-journals/acm
```
```````

## File: docs/faq/index.qmd
```````
---
title: "Frequently Asked Questions"
editor: source
---

If you are an R Markdown user wondering about the relationship between Quarto and R Markdown, see also our [FAQ for R Markdown Users](rmarkdown.qmd).

## General

### What can I use Quarto for?

Quarto® is an open-source scientific and technical publishing system built on Pandoc. You can weave together narrative text and code to produce elegantly formatted output as documents, web pages, blog posts, books and more.

### How do I install Quarto?

Visit the [Quarto.org - Get Started page](/docs/get-started/index.qmd), which provides installation instructions for Windows, Mac OS, and Linux.

### What output formats can Quarto create?

There are many output formats available in Quarto. This includes all of the built in Pandoc formats (e.g. HTML, PDF, MS Word, Revealjs, ePub, etc.) as well as various ways to publish multiple documents (websites, blogs, and books). Learn more at [Quarto Formats](/docs/output-formats/all-formats.qmd).

### What editing tools can I use with Quarto?

You can use a wide variety of tools with Quarto. We have provided documentation for writing and editing Quarto documents in VSCode, JupyterLab, RStudio IDE, or any text editor. Visit the [Get Started with Quarto page](/docs/get-started/index.qmd) to install, and then choose your tool for a brief introductory guide.

### Can I use Jupyter notebooks with Quarto?

Yes! Quarto can [render Jupyter notebooks](/docs/tools/jupyter-lab.qmd) and you can use Jupyter, JupyterLab or any other .ipynb notebook editor with Quarto. You can render existing .ipynb notebooks as-is with Quarto, but adding Quarto-specific output options or a YAML header can enhance the output. Visit the[JupyterLab page](/docs/tools/jupyter-lab.qmd) for more information.

### What programming languages are supported in Quarto?

The principal languages supported by Quarto are Python, R, Julia, and Observable JavaScript. Integration with Jupyter also enables the use of many other languages. 

Each Quarto document can be optionally processed by a computational engine (the engine can be manually specified or automatically detected based on the code chunks within). Current engines include Knitr (which is also used by R Markdown and supports [a variety of languages](https://bookdown.org/yihui/rmarkdown-cookbook/other-languages.html) including R, Python, and Julia, etc.) and Jupyter (which supports many languages including Python, Julia, and R). See the documentation on [Engine Binding](/docs/computations/execution-options.qmd#engine-binding) for additional details.

### What human languages are supported in Quarto?

You can write your Quarto documentation in your human language of choice. The [lang](https://pandoc.org/MANUAL.html#language-variables) [document option](/docs/authoring/language.qmd#lang-option) is used to identify the main language of the document using IETF language tags (following the [BCP 47 standard](https://tools.ietf.org/html/bcp47)), such as en or en-GB. 

### Where can I report bugs or request features?

Thanks for finding something and sharing with us! You can file an issue in the Quarto repository <https://github.com/quarto-dev/quarto-cli/issues>.

### Where can I ask questions and discuss using Quarto with others?

The best place to ask questions and see what questions other people have is in Quarto discussions (<https://github.com/quarto-dev/quarto-cli/discussions>). 

## Development and Maintenance

### How can I upgrade dependencies?

Generally, you cannot.
Quarto produces output tailored to its downstream dependencies (Pandoc, `typst`, etc), and uses features that depend on specific upstream dependencies (Deno).
Our installers bundle all required dependencies to eliminate version mismatch risks, and we *strongly recommend* that third-party packagers
follow the same policy.

### How often are dependencies updated?

Ideally, we update dependencies exactly once every stable release (1.2, 1.3, etc).
We reserve the right to change the cadence as necessary for our development.

### What are Quarto's dependencies?

Quarto's dependencies include:

- [Pandoc](https://pandoc.org)
- [Typst](https://typst.app)
- [Deno](https://deno.com)
- [Mermaid](https://mermaid.js.org)
- [esbuild](https://esbuild.github.io/)
- [Dart Sass](https://sass-lang.com/dart-sass/)

## Licensing

### Is Quarto free to use?

Yes! Quarto is [open source](/license.md). Quarto version 1.3 (and earlier) is licensed under the [GNU GPL v2](https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html). Quarto version 1.4 is licensed under the [MIT License](https://opensource.org/license/mit/).

### Can I use Quarto to develop proprietary content?

Yes! The copyright on Quarto does not cover the original content that you generate using Quarto. Using Quarto to create original content does not place any restrictions, legally, on the license that you choose for the original content that you create, nor does it “reach through” to affect software that you might be writing documentation for with Quarto.

### But doesn't the GPL cover exported HTML documents when they include styles or functionalities from Quarto?

It covers the styles or functionalities themselves.  It does not cover your original content because your original content is not a derivative work of the Quarto styles or functionalities.

### How can I share documents and have people comment on them?

You can publish Quarto content to various locations. See the user guides for [publishing](/docs/publishing/index.qmd) for details on using Quarto Pub, GitHub Pages, Netlify, Posit Connect, and other services with Quarto. Once documents are published you can use  [hypothes.is](https://web.hypothes.is/), [Utterances](https://utteranc.es/), or [Giscus](https://giscus.app/) for commenting. Learn more in the documentation on [commenting](/docs/output-formats/html-basics.qmd#commenting).

### Can I do collaborative editing with Quarto?

There is not yet anything specific for collaborative editing in Quarto. You can collaborate on .qmd files in the same way you currently do for any text or code files. 

Posit Workbench allows for [Project Sharing](https://support.rstudio.com/hc/en-us/articles/211659737-Sharing-Projects-in-RStudio-Workbench-RStudio-Server-Pro) for interactive editing and collaboration on the same document.

### Where can I publish Quarto websites?

There are a wide variety of ways to publish Quarto websites. Website content is by default written to the `\_site` sub-directory (you can customize this using the output-dir option). Publishing is simply a matter of copying the output directory to a web server or web hosting service.

The [publishing documentation](/docs/publishing/other.qmd) describes several convenient options for Quarto website deployment including Posit Connect, Netlify, GitHub Pages, Firebase, Site44, and Amazon S3. We'll mostly defer to the documentation provided by those various services, but will note any Quarto website specific configuration required.

## Quarto + Posit

### Does Posit Connect support Quarto?

Yes! You can publish Quarto content to Posit Connect v2021.08.0 or later. Quarto has to be enabled as documented in the Posit Connect [admin guide](https://docs.rstudio.com/connect/admin/appendix/configuration/#Quarto). Connect's user [documentation](https://docs.rstudio.com/connect/user/quarto/) refers to [Quarto.org docs](/docs/publishing/index.qmd#rstudio-connect) on how to publish from the RStudio IDE. To publish Python-based Quarto content, you can use the [rsconnect-python CLI](https://docs.rstudio.com/rsconnect-python/) from various locations, including VSCode, JupyterLab or the terminal.

## Meta

### Who are the developers of Quarto?

Development of Quarto is sponsored by [Posit, PBC](https://www.posit.co/). The same core team works on both Quarto and R Markdown:

-   Carlos Scheidegger ([\@cscheid](https://github.com/cscheid))

-   Gordon Woodhull ([\@gordonwoodhull](https://github.com/gordonwoodhull))

-   Christophe Dervieux ([\@cderv](https://github.com/cderv))

-   Charles Teague ([\@dragonstyle](https://github.com/dragonstyle))

-   J.J. Allaire ([\@jjallaire](https://github.com/jjallaire/))

-   Yihui Xie ([\@yihui](https://github.com/yihui))

Here is the [full contributors list](https://github.com/quarto-dev/quarto-cli/graphs/contributors). Quarto is open source and we welcome contributions in our github repository as well! <https://github.com/quarto-dev/quarto-cli>.

### Why the name Quarto?

We wanted to use a name that had meaning in the history of publishing and landed on Quarto, which is the format of a book or pamphlet produced from full sheets printed with eight pages of text, four to a side, then folded twice to produce four leaves. The earliest known European printed book is a Quarto, the [Sibyllenbuch](https://en.wikipedia.org/wiki/Sibyllenbuch_fragment), believed to have been printed by [Johannes Gutenberg](https://en.wikipedia.org/wiki/Johannes_Gutenberg) in 1452--53.
```````

## File: docs/faq/rmarkdown.qmd
```````
---
title: "FAQ for R Markdown Users"
description: Answers to R Markdown users' most frequently asked questions about Quarto.
---

### What can I use Quarto for?

Quarto® is an open-source scientific and technical publishing system built on Pandoc. You can weave together narrative text and code to produce elegantly formatted output as documents, web pages, blog posts, books and more. 

### Quarto sounds similar to R Markdown. What is the difference and why create a new project?

At its core, Quarto works the same way as R Markdown: 

![](/docs/get-started/hello/images/rstudio-qmd-how-it-works.png){.preview-image fig-alt="How Quarto works: qmd to knitr to md to pandoc to multiple formats including pdf, HTML and Microsoft Word"}

The goal of Quarto is to make the process of creating and collaborating on scientific and technical documents dramatically better. Quarto combines the functionality of R Markdown, bookdown, distill, xaringian, etc into a single consistent system with "batteries included" that reflects everything we've learned from R Markdown over the past 10 years.

The number of languages and runtimes used for scientific discourse is very broad (and the Jupyter ecosystem in particular is extraordinarily popular). Quarto is at its core multi-language and multi-engine (supporting Knitr, Jupyter, and Observable today and potentially other engines tomorrow).

On the other hand, R Markdown is fundamentally tied to R which severely limits the number of practitioners it can benefit. Quarto is Posit's attempt to bring R Markdown to everyone! Unlike R Markdown, Quarto doesn't have a dependency or requirement for R. Quarto was developed to be multilingual, beginning with R, Python, Javascript, and Julia, with the idea that it will work even for languages that don't yet exist.

While it is a "new" system, it should also be noted that it is highly compatible with existing content: you can render most R Markdown documents and Jupyter notebooks unmodified with Quarto. The concept is to make a major, long term investment in reproducible research, while keeping it compatible with existing formats and adaptable to the various environments users work in.

### Is R Markdown going away? Will my R Markdown documents continue to work?

R Markdown is not going away! R Markdown is used extensively and continues to work well. It will continue to be actively supported. We're not leaving R Markdown, we're expanding our scope. Over the years there have been many feature requests, and rather than implementing them all in R Markdown, for certain features we may refer you to Quarto. Everything that is currently in R Markdown will continue to work and be supported. There are no plans for deprecation.

Read more about this in Yihui Xie's blog post [With Quarto Coming, is R Markdown Going Away? No.](https://yihui.org/en/2022/04/quarto-r-markdown/)

### Should I switch from R Markdown to Quarto?

If you like using R Markdown, there's no need to switch! R Markdown will continue to be supported and work as it always has been. You're welcome to try Quarto if you like, but there's no need to switch. Some new features may only exist in Quarto, so if you want to use those, then that's where you would give those a try.  

We should emphasize that switching is not imperative. While we don't plan on major feature initiatives in R Markdown and related packages, we are going to continue to maintain them (smaller improvements and bug fixes) for a long time to come. Furthermore, since Rmd files can in most cases be rendered without modification by Quarto, you can continue using R Markdown and the switching cost will still be minimal whenever you decide to do it. 

### I use X (bookdown, blogdown, etc.). What is the Quarto equivalent?

Here are the Quarto equivalents for various packages and features of the R Markdown ecosystem (in some cases Quarto equivalents are not yet available but will be later this year):

::: comparison
+-----------------------+----------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| Feature               | R Markdown                                                                                               | Quarto                                                            |
+=======================+==========================================================================================================+===================================================================+
| Basic Formats         | -   [html_document](https://pkgs.rstudio.com/rmarkdown/reference/html_document.html)                     | -   [html](/docs/output-formats/html-basics.qmd)                  |
|                       | -   [pdf_document](https://pkgs.rstudio.com/rmarkdown/reference/pdf_document.html)                       | -   [pdf](/docs/output-formats/pdf-basics.qmd)                    |
|                       | -   [word_document](https://pkgs.rstudio.com/rmarkdown/reference/word_document.html)                     | -   [docx](/docs/output-formats/ms-word.qmd)                      |
+-----------------------+----------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| Beamer                | -   [beamer_presentation](https://pkgs.rstudio.com/rmarkdown/reference/beamer_presentation.html)         | -   [beamer](/docs/presentations/beamer.qmd)                      |
+-----------------------+----------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| PowerPoint            | -   [powerpoint_presentation](https://pkgs.rstudio.com/rmarkdown/reference/powerpoint_presentation.html) | -   [pptx](/docs/presentations/powerpoint.qmd)                    |
+-----------------------+----------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| HTML Slides           | -   [xaringan](https://bookdown.org/yihui/rmarkdown/xaringan.html)                                       | -   [revealjs](/docs/presentations/revealjs/index.qmd)            |
|                       | -   [ioslides](https://bookdown.org/yihui/rmarkdown/ioslides-presentation.html)                          |                                                                   |
|                       | -   [revealjs](https://bookdown.org/yihui/rmarkdown/revealjs.html)                                       |                                                                   |
+-----------------------+----------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| Advanced Layout       | -   [tufte](https://bookdown.org/yihui/rmarkdown/tufte-handouts.html)                                    | -   [Quarto Article Layout](/docs/authoring/article-layout.qmd)   |
|                       | -   [distill](https://rstudio.github.io/distill/figures.html)                                            |                                                                   |
+-----------------------+----------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| Cross References      | -   [html_document2](https://bookdown.org/yihui/bookdown/a-single-document.html)                         | -   [Quarto Crossrefs](/docs/authoring/cross-references.qmd)      |
|                       | -   [pdf_document2](https://bookdown.org/yihui/bookdown/a-single-document.html)                          |                                                                   |
|                       | -   [word_document2](https://bookdown.org/yihui/bookdown/a-single-document.html)                         |                                                                   |
+-----------------------+----------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| Websites & Blogs      | -   [blogdown](https://pkgs.rstudio.com/blogdown/)                                                       | -   [Quarto Websites](/docs/websites/website-basics.qmd)          |
|                       | -   [distill](https://pkgs.rstudio.com/distill/)                                                         | -   [Quarto Blogs](/docs/websites/website-blog.qmd)               |
+-----------------------+----------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| Books                 | -   [bookdown](https://pkgs.rstudio.com/bookdown/)                                                       | -   [Quarto Books](/docs/books/book-basics.qmd)                   |
+-----------------------+----------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| Interactivity         | [Shiny Documents](https://bookdown.org/yihui/rmarkdown/shiny-documents.html)                             | [Quarto Interactive Documents](/docs/interactive/shiny/index.qmd) |
+-----------------------+----------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| Journal Articles      | [rticles](https://pkgs.rstudio.com/rticles/)                                                             | [Quarto Journal Articles](/docs/journals/index.qmd)               |
+-----------------------+----------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| Paged HTML            | [pagedown](https://github.com/rstudio/pagedown)                                                          | Planned                                                           |
+-----------------------+----------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| Dashboards            | [flexdashboard](https://pkgs.rstudio.com/flexdashboard/)                                                 | [Quarto Dashboards](https://quarto.org/docs/dashboards/)          |
+-----------------------+----------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
| Interactive Tutorials | [learnr](https://pkgs.rstudio.com/learnr/)                                                               | [Quarto Live](https://r-wasm.github.io/quarto-live/) Extension    |
+-----------------------+----------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------+
:::

### Can you create custom formats for Quarto like you can for R Markdown?

Quarto offers an [Extension](/docs/extensions/index.qmd) mechanism to add features to a format using [Shortcodes](/docs/extensions/#using-shortcodes) or [Filters](/docs/extensions/#using-filters) but also create [custom formats](/docs/extensions/formats.qmd). A major difference with custom output format in R Markdown is that Quarto Extension does not use R but Lua, for example if you need to add some logic behind custom metadata fields. See [Developing with Lua](/docs/extensions/lua.qmd) to get started if you need use it your extension.
Some of the features from R Markdown custom formats like customizing knitting behavior can also now be done in YAML with [execution options](/docs/computations/execution-options.qmd#knitr-options).

As example of custom formats for Quarto, [Journal Articles](/docs/journals/index.qmd) for Quarto are port of some custom output format inside the **rticles** R package. Extensions lives in [Quarto Journals](https://github.com/quarto-journals/) Github organization, and you can find information on how to [customize templates](/docs/journals/templates.qmd) and [manage Authors](/docs/journals/authors.qmd) for you format. 

If you are an advanced developer of R Markdown custom format, the Extension mechanism may still have limitation (like pre and post processor). The Extension feature in Quarto will be improved over time - do not hesitate to share with us your use case or wished in our [Discussion Board](https://github.com/quarto-dev/quarto-cli/discussions).

### When would be a good time to start new projects in Quarto rather than R Markdown?

Quarto v1.0 was [announced at rstudio::conf(2022)](https://www.rstudio.com/blog/announcing-quarto-a-new-scientific-and-technical-publishing-system/). This is the first stable release which is already an excellent foundation for starting new projects with Quarto or migrating existing R Markdown projects ([if you are so inclined](/docs/faq/rmarkdown.qmd#is-r-markdown-going-away-will-my-r-markdown-documents-continue-to-work)). If you start using Quarto, please do stay updated with [latest release and changes](/docs/download/index.qmd) as development is very active. 

### Does the RStudio IDE support Quarto?

Yes! You need to use RStudio {{< var rstudio.min_version >}} or a later version, which includes support for [editing and preview of Quarto documents](/docs/tools/rstudio.qmd).

You can download the latest release of RStudio from <https://posit.co/download/rstudio-desktop/>.

### Does Posit Connect support Quarto?

Yes! You can publish Quarto content to Posit Connect v2021.08.0 or later. Quarto has to be enabled as documented in the Posit Connect [admin guide](https://docs.rstudio.com/connect/admin/appendix/configuration/#Quarto). Connect's user [documentation](https://docs.rstudio.com/connect/user/quarto/) refers to [Quarto.org docs](/docs/publishing/rstudio-connect.qmd#rstudio-ide) on how to publish from the RStudio IDE. To publish Python-based Quarto content, you can use the [rsconnect-python CLI](https://docs.rstudio.com/rsconnect-python/) from various locations, including VSCode, JupyterLab or the terminal.
```````

## File: docs/gallery/index.qmd
```````
---
pagetitle: "Gallery"
format:
  html:
    toc: false
image: articles/advanced-layout-pdf.png
search: false
execute:
  echo: false
listing:
  - id: gallery
    template: gallery.ejs
    contents: gallery.yml
description: |
  A gallery of example documents, websites, books, and presentations created with Quarto.
aliases:
  - /docs/dashboards/examples/index.html
  - /docs/dashboards/examples/
---

::: {#hero-banner .column-screen}
::: {.grid .column-page}
::: {.headline .g-col-lg-6 .g-col-12 .g-col-md-12}
::: h1
Gallery
:::

Quarto can produce a wide variety of output formats. Here are some examples:

-   [Articles & Reports](#articles-reports)
-   [Presentations](#presentations)
-   [Dashboards](#dashboards)
-   [Websites](#websites)
-   [Books](#books)
-   [Interactive Docs](#interactive-docs)
:::

```{r}
#| classes: '.g-col-lg-6 .g-col-12 .g-col-md-12'
#| warning: false
source("carousel.R")
carousel("gallery-carousel", 5000, 
         yaml.load_file("carousel.yml"))
```
:::
:::

::: {#gallery .column-page}
:::

```{=html}
<style>

/* we need to hide this element */
/* <header id="title-block-header" class="quarto-title-block"></header> */

header#title-block-header {
  display: none;
}

body.quarto-light #hero-banner {
  background-color: rgb(240,245,249);
}

body.quarto-dark #hero-banner {
  background-color: #17212B;
}

div.carousel {
  margin-top: 2rem; 
}

body.quarto-dark .carousel-dark .carousel-indicators [data-bs-target] {
  background-color: rgb(255,255,255);
}

body.quarto-dark .carousel-dark .carousel-control-next-icon,
body.quarto-dark .carousel-dark .carousel-control-prev-icon {
  filter: inherit;
}

#quarto-content main { 
  margin-top: 0;
  padding-top: 0;
}

html {
  scroll-behavior: smooth;
}

.headline {
  font-size: 1.25em;
  font-weight: 300;
  padding-bottom: 1em;
}

.headline p {
  margin: 0;
  padding-bottom: 0.2rem;
}

.headline a {
  text-decoration: none;
}

.headline ul li {
  margin-bottom: 0.3em;
}

.carousel.card {
  padding-top: 2em;
}

.carousel img {
  width: 70%;
  margin-bottom: 110px;
}

.carousel-control-prev-icon, .carousel-control-next-icon {
  margin-bottom: 110px;
}

.carousel-caption {
  padding-top: 1em;
}

.touch {
  
}
</style>
```
```````

## File: docs/get-started/authoring/_authoring-complete.qmd
```````
---
title: "Housing Prices"
author: "Mine Çetinkaya-Rundel"
toc: true
number-sections: true
highlight-style: pygments
format:
  html: 
    code-fold: true
    html-math-method: katex
  pdf:
    geometry: 
      - top=30mm
      - left=30mm
  docx: default
bibliography: references.bib
---

## Introduction

In this analysis, we build a model predicting sale prices of houses based on data on houses that were sold in the Duke Forest neighborhood of Durham, NC around November 2020. Let's start by loading the packages we'll use for the analysis.

```{r}
#| label: load-pkgs
#| code-summary: "Packages"
#| message: false

library(openintro)  # for data
library(tidyverse)  # for data wrangling and visualization
library(knitr)      # for tables
library(broom)      # for model summary
```

We present the results of exploratory data analysis in @sec-eda and the regression model in @sec-model.

We're going to do this analysis using literate programming [@knuth1984].

## Exploratory data analysis {#sec-eda}

The data contains `{r} nrow(duke_forest)` houses. As part of the exploratory analysis let's visualize and summarize the relationship between areas and prices of these houses.

### Data visualization

@fig-histogram shows two histograms displaying the distributions of `price` and `area` individually.

```{r}
#| label: fig-histogram
#| fig-cap: "Histograms of individual variables"
#| fig-subcap:
#|   - "Histogram of `price`s"
#|   - "Histogram of `area`s" 
#| layout-ncol: 2
#| column: page-right

ggplot(duke_forest, aes(x = price)) +
  geom_histogram(binwidth = 50000) +
  labs(title = "Histogram of prices")

ggplot(duke_forest, aes(x = area)) +
  geom_histogram(binwidth = 250) +
  labs(title = "Histogram of areas")
```

@fig-scatterplot displays the relationship between these two variables in a scatterplot.

```{r}
#| label: fig-scatterplot
#| fig-cap: "Scatterplot of price vs. area of houses in Duke Forest"

ggplot(duke_forest, aes(x = area, y = price)) +
  geom_point() +
  labs(title = "Price and area of houses in Duke Forest")
```

### Summary statistics

@tbl-stats displays basic summary statistics for these two variables.

```{r}
#| label: tbl-stats
#| tbl-cap: "Summary statistics for price and area of houses in Duke Forest"

duke_forest %>%
  summarise(
    `Median price` = median(price),
    `IQR price` = IQR(price),
    `Median area` = median(area),
    `IQR area` = IQR(area),
    `Correlation, r` = cor(price, area)
    ) %>%
  kable(digits = c(0, 0, 0, 0, 2))
```

## Modeling {#sec-model}

We can fit a simple linear regression model of the form shown in @eq-slr.

$$
price = \hat{\beta}_0 + \hat{\beta}_1 \times area + \epsilon
$$ {#eq-slr}

@tbl-lm shows the regression output for this model.

```{r}
#| label: tbl-lm
#| tbl-cap: "Linear regression model for predicting price from area"

price_fit <- lm(price ~ area, data = duke_forest)
  
price_fit %>%
  tidy() %>%
  kable(digits = c(0, 0, 2, 2, 2))
```

::: callout-note
This is a pretty incomplete analysis, but hopefully the document provides a good overview of some of the authoring features of Quarto!
:::

## References {.unnumbered}
```````

## File: docs/get-started/authoring/_authoring.qmd
```````
---
title: "Housing Prices"
author: "Mine Çetinkaya-Rundel"
format: pdf
---

## Introduction

In this analysis, we build a model predicting sale prices of houses based on data on houses that were sold in the Duke Forest neighborhood of Durham, NC around November 2020.
Let's start by loading the packages we'll use for the analysis.

```{r}
#| label: load-pkgs
#| code-summary: "Packages"
#| message: false

library(openintro)  # for data
library(tidyverse)  # for data wrangling and visualization
library(knitr)      # for tables
library(broom)      # for model summary
```

We present the results of exploratory data analysis in @sec-eda and the regression model in @sec-model.

<!--# ADD CITATION HERE -->

## Exploratory data analysis {#sec-eda}

The data contains `{r} nrow(duke_forest)` houses.
As part of the exploratory analysis let's visualize and summarize the relationship between areas and prices of these houses.

### Data visualization

@fig-histogram shows two histograms displaying the distributions of `price` and `area` individually.

```{r}
#| label: fig-histogram
#| fig-cap: "Histograms of individual variables"
#| fig-subcap:
#|   - "Histogram of `price`s"
#|   - "Histogram of `area`s" 
#| layout-ncol: 2

ggplot(duke_forest, aes(x = price)) +
  geom_histogram(binwidth = 50000) +
  labs(title = "Histogram of prices")

ggplot(duke_forest, aes(x = area)) +
  geom_histogram(binwidth = 250) +
  labs(title = "Histogram of areas")
```

@fig-scatterplot displays the relationship between these two variables in a scatterplot.

```{r}
#| label: fig-scatterplot
#| fig-cap: "Scatterplot of price vs. area of houses in Duke Forest"

ggplot(duke_forest, aes(x = area, y = price)) +
  geom_point() +
  labs(title = "Price and area of houses in Duke Forest")
```

### Summary statistics

@tbl-stats displays basic summary statistics for these two variables.

```{r}
#| label: tbl-stats
#| tbl-cap: "Summary statistics for price and area of houses in Duke Forest"

duke_forest %>%
  summarise(
    `Median price` = median(price),
    `IQR price` = IQR(price),
    `Median area` = median(area),
    `IQR area` = IQR(area),
    `Correlation, r` = cor(price, area)
    ) %>%
  kable(digits = c(0, 0, 0, 0, 2))
```

## Modeling {#sec-model}

We can fit a simple linear regression model of the form shown in @eq-slr.

\[ADD EQUATION HERE\]

@tbl-lm shows the regression output for this model.

```{r}
#| label: tbl-lm
#| tbl-cap: "Linear regression model for predicting price from area"

price_fit <- lm(price ~ area, data = duke_forest)
  
price_fit %>%
  tidy() %>%
  kable(digits = c(0, 0, 2, 2, 2))
```

<!--# ADD CALLOUT HERE -->

<!--# ADD SECTION HEADING FOR REFERENCES HERE -->
```````

## File: docs/get-started/authoring/index.qmd
```````
---
# These pages exist but are no longer needed; they're there in case someone links to them
# from the web
title: "Tutorial: Authoring"
include-in-header: ../_redirect.html
---
```````

## File: docs/get-started/authoring/jupyter.qmd
```````
---
title: "Tutorial: Authoring"
code-copy: hover
editor_options:
  markdown:
    wrap: sentence
    canonical: true
---

{{< include ../_tool-chooser.md >}}

## Overview

In this tutorial we'll show you how to author Quarto documents in Jupyter Lab.
In particular, we'll discuss the various document formats you can produce and show you how to add components like table of contents, equations, citations, cross-references, and more.

## Output Formats

Quarto supports rendering notebooks to dozens of different [output formats](/docs/output-formats/all-formats.qmd).
By default, the `html` format is used, but you can specify an alternate format (or formats) within document options.

### Format Options

Let's create a notebook and define various formats for it to be rendered to and add some options to each of the formats.
As a reminder, document options are specified in YAML within a "Raw" cell at the beginning of the notebook.
To create a Raw cell, add a cell at the top of the notebook and set its type to Raw using the notebook toolbar:

![](images/jupyter-raw-cell.png){.border fig-alt="Notebook formats.ipynb with a dropdown shown for a cell with three options: Code, Markdown, and Raw. Raw is highlighted."}

Now, let's add some basic document metadata and a default output format.

``` {.yaml .visually-hidden}
---
title: "Quarto Document"
author: "Norah Jones"
format: pdf
jupyter: python3
---
```

![](images/jupyter-format.png){.border fig-alt=""}

We specified `pdf` as the default output format (if we exclude the `format` option then it will default to `html`).

Let's add some options to control our PDF output.

``` {.yaml .visually-hidden}
---
title: "Quarto Document"
author: "Norah Jones"
format: 
  pdf: 
    toc: true
    number-sections: true
jupyter: python3
---
```

![](images/jupyter-format-options.png){.boder fig-alt=""}

### Multiple Formats

Some documents you create will have only a single output format, however in many cases it will be desirable to support multiple formats.
Let's add the `html` and `docx` formats to our document.

``` {.yaml .visually-hidden}
---
title: "Quarto Document"
author: "Norah Jones"
toc: true
number-sections: true
highlight-style: pygments
format: 
  html: 
    code-fold: true
    html-math-method: katex
  pdf: 
    geometry: 
      - top=30mm
      - left=20mm
  docx: default
jupyter: python3
---
```

![](images/jupyter-formats.png){.border fig-alt=""}

There's a lot to take in here!
Let's break it down a bit.
The first two lines are generic document metadata that aren't related to output formats at all.

``` yaml
title: "Quarto Document"
author: "Norah Jones"
```

The next three lines are document format options that *apply to all formats*.
which is why they are specified at the root level.

``` yaml
toc: true
number-sections: true
highlight-style: pygments
```

Next, we have the `format` option, where we provide format-specific options.

``` yaml
format:
  html: 
    code-fold: true
    html-math-method: katex
  pdf:
    geometry: 
      - top=30mm
      - left=30mm
  docx: default
```

The `html` and `pdf` formats each provide an option or two.
For example, for the HTML output we want the user to have control over whether to show or hide the code (`code-fold: true`) and use `katex` for math text.
For PDF we define some margins.
The `docx` format is a bit different---it specifies `docx: default`.
This means just use all of the default options for the format.

## Rendering

The formats specified within document options define what is rendered by default.
If we render the notebook with all the options given above using the following.

``` {.bash filename="Terminal"}
quarto render notebook.ipynb
```

Then, the following files would be created.

-   `notebook.html`
-   `notebook.pdf`
-   `notebook.docx`

We can select one or more formats using the `--to` option.

``` {.bash filename="Terminal"}
quarto render notebook.ipynb --to docx
quarto render notebook.ipynb --to docx,pdf
```

Note that the target file (in this case `notebook.ipynb`) should always be the very first command line argument.

If needed we can also render formats that aren't specified within document options.

``` {.bash filename="Terminal"}
quarto render notebook.ipynb --to odt
```

Since the `odt` format isn't included within document options, the default options for the format will be used.

::: {.callout-note appearance="simple"}
Note that when rendering an `.ipynb` Quarto **will not** execute the cells within the notebook by default (the presumption being that you already executed them while editing the notebook).
If you want to execute the cells you can pass the `--execute` flag to render.

``` {.bash filename="Terminal"}
quarto render notebook.ipynb --execute
```
:::

## Sections

You can use a table of contents and/or section numbering to make it easier for readers to navigate your document.
Do this by adding the `toc` and/or `number-sections` options to document options.
Note that these options are typically specified at the root level because they are shared across all formats.

``` {.yaml .visually-hidden}
---
title: Quarto Basics
author: Norah Jones
date: 'May 22, 2021'
toc: true
number-sections: true
jupyter: python3
---

## Colors

- Red
- Green 
- Blue

## Shapes

- Square
- Circle
- Triangle

## Textures

- Smooth
- Bumpy
- Fuzzy
```

![](images/jupyter-sections.png){.border fig-alt=""}

Here's what this document looks like when rendered to HTML.

![](images/sections-render.png){.border fig-alt="Document with title Quarto Basics, author, and date. Table of contents is on the left-hand side with numbered items for each of the three sections: 1. Colors, 2. Shapes, 3. Textures. Each section is shown in the document with the list contents from the source ipynb."}

There are lots of options available for controlling how the table of contents and section numbering behave.
See the output format documentation (e.g. [HTML](/docs/output-formats/html-basics.qmd), [PDF](/docs/output-formats/pdf-basics.qmd), [MS Word](/docs/output-formats/ms-word.qmd)) for additional details.

## Equations

You can add LaTeX equations to markdown cells within Jupyter Lab.

``` {.markdown .visually-hidden}
Einstein's theory of special relatively that expresses the equivalence of mass and energy:

$E = mc^{2}$
```

$E = mc^{2}$

![](/docs/get-started/authoring/images/jupyter-equation.png){.border fig-alt=""}

Equations are rendered when you run the cell.

![](/docs/get-started/authoring/images/jupyter-equation-render.png){.border fig-alt="Rendered notebook with LaTeX equation shown for E equals mc squared."}

Inline equations are delimited with `$…$`.
To create equations in a new line (display equation) use `$$…$$`.
See the documentation on [markdown equations](/docs/authoring/markdown-basics.qmd#equations) for additional details.

## Citations

To cite other works within a Quarto document.
First create a bibliography file in a supported format (BibTeX or CSL).
Then, link the bibliography to your document using the `bibliography` YAML metadata option.

Here's a notebook that includes a bibliography and single citation.
Note that markdown cells are un-executed so you can see all of the syntax.

```` {.markdown .visually-hidden}
---
title: Quarto Basics
format: html
bibliography: references.bib
jupyter: python3
---

## Overview

Knuth says always be literate [@knuth1984].

```{{python}}
1 + 1
```

## References
````

![](/docs/get-started/authoring/images/jupyter-citations.png){.border fig-alt=""}

Note that items within the bibliography are cited using the `@citeid` syntax.

``` markdown
 Knuth says always be literate [@knuth1984].
```

References will be included at the end of the document, so we include a `## References` heading at the bottom of the notebook.

Here is what this document looks like when rendered.

![](/docs/get-started/authoring/images/citations-render.png){.border width="600" fig-alt="Rendered notebook with references section at the bottom the content of which reads 'Knuth, Donald E. 1984. Literate Programming. The Computer Journal 27 (2): 97-111.'"}

\
The `@` citation syntax is very flexible and includes support for prefixes, suffixes, locators, and in-text citations.
See the documentation on [Citations](/docs/authoring/citations.qmd) to learn more.

## Cross References

Cross-references make it easier for readers to navigate your document by providing numbered references and hyperlinks to figures, tables, equations, and sections.
Cross-reference-able entities generally require a label (unique identifier) and a caption.

The notebook below illustrates cross-referencing various types of entities.
Once again, the markdown cells are again un-executed so that the syntax is visible.

```` {.markdown .visually-hidden}
---
title: Quarto Crossrefs
format: html
jupyter: python3
---

## Overview

See @fig-simple in @sec-plot for a demonstration of a simple plot. 

See @eq-stddev to better understand standard deviation.

## Plot {#sec-plot}

```{{python}}
#| label: fig-simple
#| fig-cap: "Simple Plot"
import matplotlib.pyplot as plt
plt.plot([1,23,2,4])
plt.show()
```

## Equation {#sec-equation}

$$
s = \sqrt{\frac{1}{N-1} \sum_{i=1}^N (x_i - \overline{x})^2}
$$ {#eq-stddev}
````

$$
x + 1
$$

![](/docs/get-started/authoring/images/jupyter-crossref.png){.border fig-alt=""}

This example includes cross-referenced sections, figures, and equations.
The table below shows how we expressed each of these.

+----------+---------------+----------------------------------+
| Entity   | Reference     | Label / Caption                  |
+==========+===============+==================================+
| Section  | `@sec-plot`   | ID added to heading:             |
|          |               |                                  |
|          |               | ``` {.default code-copy="false"} |
|          |               | # Plot {#sec-plot}               |
|          |               | ```                              |
+----------+---------------+----------------------------------+
| Figure   | `@fig-simple` | YAML options in code cell:       |
|          |               |                                  |
|          |               | ``` {.default code-copy="false"} |
|          |               | #| label: fig-simple             |
|          |               | #| fig-cap: "Simple Plot"        |
|          |               | ```                              |
+----------+---------------+----------------------------------+
| Equation | `@eq-stddev`  | At end of display equation:      |
|          |               |                                  |
|          |               | ``` default                      |
|          |               | $$ {#eq-stddev}                  |
|          |               | ```                              |
+----------+---------------+----------------------------------+

: {tbl-colwidths=\[20,30,50\]}

And finally, here is what this notebook looks like when rendered.

![](/docs/get-started/authoring/images/crossref-render.png){.border width="600" fig-alt="Rendered page with linked cross references to figures and equations."}

See the article on [Cross References](/docs/authoring/cross-references.qmd) to learn more, including how to customize caption and reference text (e.g. use "Fig." rather than "Figure").

## Callouts

Callouts are an excellent way to draw extra attention to certain concepts, or to more clearly indicate that certain content is supplemental or applicable to only some scenarios.

Callouts are markdown divs that have special callout attributes.
Here's an example of creating a callout within a markdown cell.

``` {.markdown .visually-hidden}
::: {.callout-note}
Note that there are five types of callouts, including:
`note`, `tip`, `warning`, `caution`, and `important`.
:::
```

![](/docs/get-started/authoring/images/jupyter-callout.png){.border fig-alt=""}

When we ultimately render the document with Quarto the callout appears as intended.

::: callout-note
Note that there are five types of callouts, including `note`, `tip`, `warning`, `caution`, and `important`.
:::

You can learn more about the different types of callouts and options for their appearance in the [Callouts](/docs/authoring/callouts.qmd) documentation.

## Article Layout

The body of Quarto articles have a default width of approximately 700 pixels.
This width is chosen to [optimize readability](https://medium.com/ben-shoemate/optimum-web-readability-max-and-min-width-for-page-text-dee9987a27a0).
This normally leaves some available space in the document margins and there are a few ways you can take advantage of this space.

In this notebook, we use the `reference-location` option to indicate that we would like footnotes to be placed in the right margin.

We also use the `column: screen-inset` cell option to indicate we would like our figure to occupy the full width of the screen, with a small inset.

```` {.markdown .visually-hidden}
---
title: Quarto Layout
format: html
reference-location: margin
jupyter: python3
---

## Placing Colorbars

Colorbars indicate the quantitative extent of image data.
Placing in a figure is non-trivial because room needs to
be made for them. The simplest case is just attaching a 
colorbar to each axes:^[See the [Matplotlib Gallery](https://matplotlib.org/stable/gallery/subplots_axes_and_figures/colorbar_placement.html) to explore colorbars further].

```{{python}}
#| code-fold: true
#| column: screen-inset
import matplotlib.pyplot as plt
import numpy as np

fig, axs = plt.subplots(2, 2)
fig.set_size_inches(20, 8)
cmaps = ['RdBu_r', 'viridis']
for col in range(2):
    for row in range(2):
        ax = axs[row, col]
        pcm = ax.pcolormesh(
          np.random.random((20, 20)) * (col + 1),
          cmap=cmaps[col]
        )
        fig.colorbar(pcm, ax=ax)
plt.show()
```
````

![](images/jupyter-layout.png){.border fig-alt=""}

Here is what this document looks like when rendered.

![](images/layout-render.png){.border fig-alt="Document with Quarto Layout title at the top followed by Placing Colorbars header with text below it. Next to the text is a footnote in the page margin. Below the text is a toggleable code widget to hide/reveal the code followed by four plots displayed in two rows and two columns."}

You can locate citations, footnotes, and [asides](/docs/authoring/article-layout.qmd#asides) in the margin.
You can also define custom column spans for figures, tables, or other content.
See the documentation on [Article Layout](/docs/authoring/article-layout.qmd) for additional details.

{{< include _footer.md >}}
```````

## File: docs/get-started/authoring/neovim.qmd
```````
---
title: "Tutorial: Authoring"
code-copy: hover
---

{{< include ../_tool-chooser.md >}}

{{< include _text-editor.md >}}


See the article on [Using Neovim with Quarto](/docs/tools/neovim.qmd) to learn more about installing, using, and customizing Neovim for Quarto.
```````

## File: docs/get-started/authoring/rstudio.qmd
```````
---
title: "Tutorial: Authoring"
editor_options:
  markdown:
    wrap: sentence
    canonical: true
---

{{< include ../_tool-chooser.md >}}

## Overview

In this tutorial we'll show you how to author Quarto documents in RStudio.
In particular, we'll discuss the various document formats you can produce with the same source code and show you how to add components like table of contents, equations, citations, etc.
The [visual markdown editor](/docs/visual-editor/index.qmd) in RStudio makes many of these tasks easier so we'll highlight its use in this tutorial, but note that it's possible to accomplish these tasks in the source editor as well.

If you would like to follow along step-by-step in your own environment, install the [latest release](https://posit.co/download/rstudio-desktop/) of RStudio.

## Output Formats

Quarto supports rendering notebooks to dozens of different output formats.
By default, the `html` format is used, but you can specify an alternate format (or formats) within document options.

### Format Options

You can choose the format you want to render your Quarto document to at the time of creating your new document.
To create a new document, go to **File** \> **New File** \> **Quarto Document...** Alternatively, use the command palette (accessible via Ctrl+Shift+P), search for **Create a new Quarto document** and hit return.

In the **Title** field, give a title for your document (e.g. the screenshot below suggests "Housing Prices") and add your name to the **Author** field.
Next, you will select the output format for your document.
By default, RStudio suggests using HTML as the output, let's leave that default for now.

![](images/rstudio-new-document.png){.border fig-alt="Pop up menu for creating a new document. The title field shows that we entered \"Housing Prices\" and the author field shows the name \"Mine Çetinkaya-Rundel\". HTML format is selected via the radio button. All else is left as default choices (e.g., Engine is Knitr and the Use visual markdown editor checkbox is checked)." fig-align="center" width="600"}

A new document will be created with the following YAML.

``` yaml
---
title: "Housing Prices"
author: "Mine Çetinkaya-Rundel"
---
```

Note that our format choice (HTML) is not even reflected in the YAML as it is the default output format for Quarto documents.
However you can directly edit the YAML to change the output format, e.g. to PDF (`pdf`) or MS Word (`docx`).
Add `format: pdf` to your document's YAML as shown below.

``` yaml
---
title: "Housing Prices"
author: "Mine Çetinkaya-Rundel"
format: pdf
---
```

Unfortunately, this document has no content, so rendering it would not result in very interesting output.
To make it a bit easier to demonstrate all the features we want to highlight in this tutorial, let's close this empty document and start with one that has a little bit of content in it.
If you would like to follow along step-by-step in your own environment, download the Quarto document (`.qmd`) below and open it in RStudio.

::: {.callout-note appearance="minimal" icon="false"}
<i class="bi bi-download"></i> [Download authoring.qmd](_authoring.qmd){download="authoring.qmd"}
:::

In order to create PDFs you will need to install a recent distribution of [LaTeX](https://www.latex-project.org/).
We recommend the use of TinyTeX (which is based on TexLive), which you can install with the following command:

``` {.bash filename="Terminal"}
quarto install tinytex
```

See the article on [PDF Engines](/docs/output-formats/pdf-engine.qmd) for details on using other LaTeX distributions and PDF compilation engines.

Once you have LaTeX setup, click on <kbd>![](images/rstudio-render-button.png){width="25" height="20"}</kbd> **Render** (or use the keyboard shortcut ⇧⌘K).
We recommend also checking the box for **Render on Save** for a live preview of your changes.
As shown below, you should see the rendered PDF in the Viewer in RStudio.

![](images/rstudio-pdf-preview.png){.border .column-page-right fig-alt="RStudio with authoring.qmd open. On the left: Source code in the visual editor. On the left: Rendered document as a PDF in the Viewer."}

Next, let's add an option to the YAML, e.g. to add line numbers to the code chunks (`code-line-numbers: true`).
Add this option to your document's YAML as shown below, paying attention to the indentation scheme.
Under `format:` our format choice `pdf` is indented (with two spaces) and it's followed by `:` to indicate that further options for that format will be specified.
In the next line, further indented by two spaces, we add `code-line-numbers: true`.

``` yaml
---
title: "Housing Prices"
author: "Mine Çetinkaya-Rundel"
format:
  pdf:
    code-line-numbers: true
---
```

If you checked **Render on Save** earlier, just save the document after making this change for a live preview.
Otherwise render the document to see your updates reflected, including a table of contents that looks like the following.

![](images/rstudio-code-line-numbers.png){.border fig-alt="Rendered version of authoring.qmd as PDF, with line numbers next to each of the lines of code chunks." fig-align="center"}

An incredibly exciting format option that we won't go into too much detail in this tutorial is `revealjs`.
Yes, you can make presentations with Quarto as well!
In fact, Quarto supports a variety of formats for creating presentations, including `revealjs` for HTML slides, `pptx` for PowerPoint, and `beamer` for LaTeX/PDF.
The [Presentations](/docs/presentations/index.qmd) article gives a thorough walk through of creating slide decks with Quarto.

### Multiple Formats

Some documents you create will have only a single output format, however in many cases it will be desirable to support multiple formats.
Let's add the `html` and `docx` formats to our document and modify some options specific to each format.

``` yaml
---
title: "Housing Prices"
author: "Mine Çetinkaya-Rundel"
highlight-style: pygments
format:
  html: 
    code-fold: true
    html-math-method: katex
  pdf:
    geometry: 
      - top=30mm
      - left=30mm
  docx: default
---
```

There's a lot to take in here!
Let's break it down a bit.
The first two lines are generic document metadata that aren't related to output formats at all.

``` yaml
---
title: "Housing Prices"
author: "Mine Çetinkaya-Rundel"
---
```

The next line is a document format option that *applies to all formats*, which is why it is specified at the root level.

``` yaml
---
highlight-style: pygments
---
```

Next, we have the `format` option, where we provide format-specific options.

``` yaml
---
format:
  html: 
    code-fold: true
    html-math-method: katex
  pdf:
    geometry: 
      - top=30mm
      - left=30mm
  docx: default
---
```

The `html` and `pdf` formats each provide an option or two.
For example, for the HTML output we want the user to have control over whether to show or hide the code (`code-fold: true`) and use `katex` for math text.
For PDF we define some margins.
The `docx` format is a bit different---it specifies `docx: default`.
This indicates that we just want to use all of the default options for the format.

## Rendering

Clicking the <kbd>![](images/rstudio-render-button.png){width="25" height="21"}</kbd> **Render** button (or using the keyboard shortcut <kbd>⇧⌘K</kbd>) in RStudio will render the document to the first format listed in the YAML.

![](images/rstudio-html-preview.png){.border fig-alt="Rendered version of authoring.qmd as HTML. There is no table of contents and the code chunks are folded, hiding the code."}

Note that the <kbd>![](images/rstudio-render-button.png){width="25" height="21"}</kbd> **Render** button also has a drop down menu that enables you to render to any of the formats listed in YAML front matter:

![](images/rstudio-render-formats.png){.border}

If you would like to render to all formats, you can do so with the [**quarto**](https://github.com/quarto-dev/quarto-r) package, which provides an R interface to the Quarto CLI. For example, to render the current document, use `quarto::quarto_render()`.
You can also specify the name of the document you want to render as well as the output format(s).

``` r
quarto::quarto_render(
  "authoring.qmd", 
  output_format = c("pdf", "html", "docx")
)
```

As a result, you will see three new files appear in your Files pane:

-   `authoring.docx`
-   `authoring.html`
-   `authoring.pdf`

![](images/rstudio-files-pane.png){.border fig-alt="RStudio Files pane, with four document, all titled authoring, but with different suffixes: docx, html, pdf, qmd." fig-align="center" width="600"}

## Sections

You can use a table of contents and/or section numbering to make it easier for readers to navigate your document.
Do this by adding the `toc` and/or `number-sections` options to document options.
Note that these options are typically specified at the root level because they are shared across all formats.

``` yaml
---
title: "Housing Prices"
author: "Mine Çetinkaya-Rundel"
toc: true
number-sections: true
highlight-style: pygments
format:
  html: 
    code-fold: true
    html-math-method: katex
  pdf:
    geometry: 
      - top=30mm
      - left=30mm
  docx: default
---
```

Here's what this document looks like when rendered to HTML.

![](images/rstudio-toc-secnum.png){.border fig-alt="Rendered version of authoring.qmd as HTML with numbered sections and a table of contens on the top right. The table of contents shows three sections: Introduction, Exploratory data analysis (with subsections Data visualization and Summary statistics), and Modeling."}

There are lots of options available for controlling how the table of contents and section numbering behave.
See the output format documentation (e.g. [HTML](/docs/output-formats/html-basics.qmd), [PDF](/docs/output-formats/pdf-basics.qmd), [MS Word](/docs/output-formats/ms-word.qmd)) for additional details.

## Equations

If you are using the visual editor mode, you can add LaTeX equations to Quarto documents in RStudio using the [Insert Anything](/docs/visual-editor/index.qmd#insert-anything) tool.
You can access it with <kbd>/</kbd> at the beginning of an empty block or <kbd>Cmd+/</kbd> anywhere else.

![](images/rstudio-insert-equation.png){.border fig-alt="Insert anything tool in the RStudio visual editor being used to insert a display math." fig-align="center" width="600"}

Display equations (in a new line) are delimited with `$$…$$` while inline equations are delimited with `$…$`.
Add the following as display math in the document.

``` markdown
price = \hat{\beta}_0 + \hat{\beta}_1 \times area + \epsilon
```

RStudio displays a rendered version of the tutorial as you type it in the editor.
See the documentation on [markdown equations](/docs/authoring/markdown-basics.qmd#equations) for additional details.

![](/docs/get-started/authoring/images/rstudio-equation-render.png){.border}

## Citations

The Insert Anything tool can also be used to insert citations to your document.

![](images/rstudio-insert-citation.png){fig-alt="Using the visual editor insert citation tool." width="700"}

In the next window you can insert a citation via from a variety of sources including your document bibliography, [Zotero](/docs/visual-editor/technical.qmd#citations-from-zotero) personal or group libraries, [DOI](/docs/visual-editor/technical.qmd#citations-from-dois) (Document Object Identifier) references, and searches of [Crossref](https://www.crossref.org/), [DataCite](https://datacite.org/), or [PubMed](https://pubmed.ncbi.nlm.nih.gov/).
You can find out more about citations with the visual editor [here](/docs/visual-editor/technical.qmd#citations).

Select **From DOI** on the left and copy-and-paste the DOI [`10.1093/comjnl/27.2.97`](https://doi.org/10.1093/comjnl/27.2.97) in the search bar and hit **Search**.
Then, select the found reference, and **Insert** it into your document.

![](images/rstudio-insert-citaton-menu.png){fig-alt="Insert citation to Knuth, D's Literate Programming article via DOI."}

If this is the first citation you are adding to your document, RStudio will automatically create a bibliography file for you.
This file is called `references.bib` by default and RStudio will also add `bibliography: references.bib` to your document's YAML metadata.

Note that items within the bibliography are cited using the `@citeid` syntax.
Add the following text to your document.

``` markdown
We're going to do this analysis using literate programming [@knuth1984].
```

References will be included at the end of the document, so we include a `## References` heading at the bottom of the notebook.
You might also add `.unnumbered` class to this section by clicking on the three dots (<kbd>...</kbd>) to edit its attributes.

![](images/rstudio-references-section.png){.border fig-alt="Edit Attributes window for the section title References. The image shows that this menu can be accessed by cliking on the three dots." width="700"}

Here is what this document looks like when rendered (with middle sections removed to highlight the relevant parts.

![](images/rstudio-references.png){.border fig-alt="Document with a single citation and a references section at the end."}

The `@` citation syntax is very flexible and includes support for prefixes, suffixes, locators, and in-text citations.
See the documentation on [Citations](/docs/authoring/citations.qmd) to learn more.

## Cross References

Cross-references make it easier for readers to navigate your document by providing numbered references and hyperlinks to figures, tables, equations, and sections.
Cross-reference-able entities generally require a label (unique identifier) and a caption.

For example, to add a label to the equation inserted earlier, click on the three dots to edit its attributes and use the suggested format (starting with `#eq-`) to label the equation.

![](images/rstudio-crossref-equation.png){.border fig-alt="Add label to an equation using the visual editor. The label added is #eq-slr."}

Then, add a cross reference using the Insert Anything tool in the visual editor.
You might add a sentence like `"We can fit a simple linear regression model of the form shown in"` to contextualize the cross reference and then add the reference to the end of that sentence.

![](images/rstudio-crossref-equation-insert.png){.border fig-alt="Use the insert anything tool in the visual editor to insert a cross reference."}

In the Insert Cross Reference menu, navigate to the desired cross reference entity on the left, and select the equation labeled earlier.

![](images/rstudio-crossref-insert-menu.png){.border fig-alt="Use the insert cross reference menu, select Equations on the left side, and select an equation to cross reference."}

Alternatively, start typing the label of the equation to be referenced in the visual editor, and the autofill tool will bring up the cross references to choose from.

![](images/rstudio-crossref-eq-autofill.png){.border fig-alt="Cross reference an equation by starting to type out its label."}

Below we illustrate cross-referencing various types of entities using fragments from the document you've been working with.

``` markdown
We present the results of exploratory data analysis in @sec-eda and the regression model in @sec-model.


@fig-scatterplot displays the relationship between these two variables in a scatterplot.


@tbl-stats displays basic summary statistics for these two variables.


We can fit a simple linear regression model of the form shown in @eq-slr.
```

This examples include cross-referenced sections, figures, and equations.
The table below summarizes how we express each of these.

+----------+--------------------+------------------------------------------------------------------------------+
| Entity   | Reference          | Label / Caption                                                              |
+==========+====================+==============================================================================+
| Section  | `@sec-eda`         | ID added to heading:                                                         |
|          |                    |                                                                              |
|          |                    | ``` {.default code-copy="false"}                                             |
|          |                    | # Exploratory data analysis {#sec-eda}                                       |
|          |                    | ```                                                                          |
+----------+--------------------+------------------------------------------------------------------------------+
| Figure   | `@fig-scatterplot` | YAML options in code cell:                                                   |
|          |                    |                                                                              |
|          |                    | ``` {.default code-copy="false"}                                             |
|          |                    | #| label: fig-scatterplot                                                    |
|          |                    | #| fig-cap: "Scatterplot of price vs. area of houses in Duke Forest"         |
|          |                    | ```                                                                          |
+----------+--------------------+------------------------------------------------------------------------------+
| Table    | `@tbl-stats`       | YAML options in code cell:                                                   |
|          |                    |                                                                              |
|          |                    | ``` {.default code-copy="false"}                                             |
|          |                    | #| label: tbl-stats                                                          |
|          |                    | #| tbl-cap: "Summary statistics for price and area of houses in Duke Forest" |
|          |                    | ```                                                                          |
+----------+--------------------+------------------------------------------------------------------------------+
| Equation | `@eq-slr`          | At end of display equation:                                                  |
|          |                    |                                                                              |
|          |                    | ``` default                                                                  |
|          |                    | $$ {#eq-slr}                                                                 |
|          |                    | ```                                                                          |
+----------+--------------------+------------------------------------------------------------------------------+

: {tbl-colwidths=\[20,30,50\]}

See the article on [Cross References](/docs/authoring/cross-references.qmd) to learn more, including how to customize caption and reference text (e.g. use "Fig." rather than "Figure").

## Callouts

Callouts are an excellent way to draw extra attention to certain concepts, or to more clearly indicate that certain content is supplemental or applicable to only some scenarios.

Callouts are markdown divs that have special callout attributes.
We can insert a callout using the Insert Anything tool.

![](images/rstudio-insert-callout.png){.border fig-alt="Insert Anything tool to insert a callout."}

In the subsequent dialogue you can select one of five types of callout (note, tip, important, caution, or warning), customize its appearance (default, simple, or minimal), and decide whether you want to show the icon.

![](images/rstudio-callout-dialogue.png){.border fig-alt="Callout dialogue. Type note is selected with default appearance and show icon box is checked." fig-align="center" width="500"}

Then, try inserting the following text in the callout box.

``` markdown
This is a pretty incomplete analysis, but hopefully the document provides a good overview of some of the authoring features of Quarto!
```

Here is what a callout looks like in the visual editor.

![](images/rstudio-callout-note-source.png){.border fig-alt="Callout box in the visual editor. Callout text reads \"This is a pretty incomplete analysis, but hopefully the document provides a good overview of some of the authoring features of Quarto!\""}

And here is the rendered callout in the output document.

![](images/rstudio-callout-note-rendered.png){.border fig-alt="Callout box in the rendered HTML document. Callout text reads \"This is a pretty incomplete analysis, but hopefully the document provides a good overview of some of the authoring features of Quarto!\""}

You can learn more about the different types of callouts and options for their appearance in the [Callouts](/docs/authoring/callouts.qmd) documentation.

## Article Layout

The body of Quarto articles have a default width of approximately 700 pixels.
This width is chosen to [optimize readability](https://medium.com/ben-shoemate/optimum-web-readability-max-and-min-width-for-page-text-dee9987a27a0).
This normally leaves some available space in the document margins and there are a few ways you can take advantage of this space.

We can use the `column: page-right` cell option to indicate we would like our figure to occupy the full width of the screen, with some inset.
Go ahead and add this chunk option to the chunk labeled `fig-histogram`.

``` r
#| label: fig-histogram
#| fig-cap: "Histograms of individual variables"
#| fig-subcap:
#|   - "Histogram of `price`s"
#|   - "Histogram of `area`s" 
#| layout-ncol: 2
#| column: page-right
```

Here is what the relevant section of the document looks like when rendered.

![](images/rstudio-column-page-right-render.png){.border fig-alt="Rendered version of authoring.qmd as HTML. Exploratory data analysis section is shown, the side-by-side histograms span a width wider than the rest of the document."}

You can locate citations, footnotes, and asides in the margin.
You can also define custom column spans for figures, tables, or other content.
See the documentation on [Article Layout](/docs/authoring/article-layout.qmd) for additional details.

## Publishing

Once your document is rendered to HTML, you can publish to [RPubs](https://rpubs.com/) (a free service from RStudio for sharing documents on the web) simply by clicking the <kbd>![](images/rstudio-publish-button.png){width="25" height="23"}</kbd> Publish button on the editor toolbar or preview window.
Alternatively, you can use the `quarto::quarto_publish_doc()` function.

``` r
quarto::quarto_publish_doc(
  "authoring.qmd", 
  server = "rpubs.com"
  )
```

Other possible publishing options include RStudio Connect and ShinyApps as well as GitHub Pages, Netlify, etc.
The [Publishing HTML](/docs/output-formats/html-publishing.qmd) article gives a much more detailed overview of your publishing options.

If you followed along step-by-step with this tutorial, you should now have a Quarto document that implements everything we covered.
Otherwise, you can download a completed version of `computations.qmd` below.

::: {.callout-note appearance="minimal"}
<i class="bi bi-download"></i> [Download authoring-complete.qmd](_authoring-complete.qmd){download="authoring-complete.qmd"}
:::

{{< include _footer.md >}}
```````

## File: docs/get-started/authoring/text-editor.qmd
```````
---
title: "Tutorial: Authoring"
code-copy: hover
editor_options:
  markdown:
    wrap: sentence
    canonical: true
---

{{< include ../_tool-chooser.md >}}

{{< include _text-editor.md >}}
```````

## File: docs/get-started/authoring/vscode.qmd
```````
---
title: "Tutorial: Authoring"
code-copy: hover
editor_options:
  markdown:
    wrap: sentence
    canonical: true
---

{{< include ../_tool-chooser.md >}}

{{< include _text-editor.md >}}


Additionally, if you are interested in seeing how to use Quarto from within `.ipynb` notebooks, check out the documentation on using the VS Code [Notebook Editor](/docs/tools/vscode/notebook.qmd) with Quarto.
```````

## File: docs/get-started/computations/_computations-complete.qmd
```````
---
title: "Quarto Computations"
format:
  html:
    code-fold: true
---

```{r}
#| label: load-packages
#| echo: false

library(ggplot2)
```

There are `{r} nrow(mpg)` observations in our data.

```{r}
#| echo: false

mean_cty <- round(mean(mpg$cty), 2)
mean_hwy <- round(mean(mpg$hwy), 2)
```

The average city mileage of the cars in our data is `{r} mean_cty` and the average highway mileage is `{r} mean_hwy`.

The plots in @fig-mpg show the relationship between city and highway mileage for 38 popular models of cars.
In @fig-mpg-1 the points are colored by the number of cylinders while in @fig-mpg-2 the points are colored by engine displacement.

```{r}
#| label: fig-mpg
#| fig-cap: "City and highway mileage for 38 popular models of cars."
#| fig-subcap:
#|   - "Color by number of cylinders"
#|   - "Color by engine displacement, in liters"
#| layout-ncol: 2
#| column: page
#| cache: true

ggplot(mpg, aes(x = hwy, y = cty, color = cyl)) +
  geom_point(alpha = 0.5, size = 2) +
  scale_color_viridis_c() +
  theme_minimal()

ggplot(mpg, aes(x = hwy, y = cty, color = displ)) +
  geom_point(alpha = 0.5, size = 2) +
  scale_color_viridis_c(option = "E") +
  theme_minimal()
```
```````

## File: docs/get-started/computations/_computations-text-editor.qmd
```````
---
title: Quarto Computations
jupyter: python3
---

## NumPy

```{python}
import numpy as np
a = np.arange(15).reshape(3, 5)
a
```

## Matplotlib

```{python}
import matplotlib.pyplot as plt

fig = plt.figure()
x = np.arange(10)
y = 2.5 * np.sin(x / 20 * np.pi)
yerr = np.linspace(0.05, 0.2, 10)

plt.errorbar(x, y + 3, yerr=yerr, label='both limits (default)')
plt.errorbar(x, y + 2, yerr=yerr, uplims=True, label='uplims=True')
plt.errorbar(x, y + 1, yerr=yerr, uplims=True, lolims=True,
             label='uplims=True, lolims=True')

upperlimits = [True, False] * 5
lowerlimits = [False, True] * 5
plt.errorbar(x, y, yerr=yerr, uplims=upperlimits, lolims=lowerlimits,
             label='subsets of uplims and lolims')

plt.legend(loc='lower right')
plt.show()
```

## Plotly

```{python}
import plotly.express as px
import plotly.io as pio
gapminder = px.data.gapminder()
gapminder2007 = gapminder.query("year == 2007")
fig = px.scatter(gapminder2007, 
                 x="gdpPercap", y="lifeExp", color="continent", 
                 size="pop", size_max=60,
                 hover_name="country")
fig.show()
```
```````

## File: docs/get-started/computations/_computations.qmd
```````
---
title: "Quarto Computations"
---

This dataset contains a subset of the fuel economy data from the EPA.
Specifically, we use the `mpg` dataset from the **ggplot2** package.

```{r}
#| label: load-packages
#| echo: false

library(ggplot2)
```

The visualization below shows a positive, strong, and linear relationship between the city and highway mileage of these cars.
Additionally, mileage is higher for cars with fewer cylinders.

```{r}
#| label: scatterplot

ggplot(mpg, aes(x = hwy, y = cty, color = cyl)) +
  geom_point(alpha = 0.5, size = 2) +
  scale_color_viridis_c() +
  theme_minimal()
```
```````

## File: docs/get-started/computations/index.qmd
```````
---
title: "Tutorial: Computations"
---
```````

## File: docs/get-started/computations/jupyter.qmd
```````
---
title: "Tutorial: Computations"
editor_options:
  markdown:
    wrap: sentence
tool:
  name: jupyter
---

{{< include ../_tool-chooser.md >}}

## Overview

Quarto has a wide variety of options available for controlling how code and computational output appear within rendered documents.
In this tutorial we'll take a simple notebook that has some numeric output and plots, and cover how to apply these options.

If you want to follow along step-by-step in your own environment, download the notebook below:

::: {.callout-note appearance="minimal"}
<i class="bi bi-journal-code"></i> [Download computations.ipynb](_computations.ipynb){download="computations.ipynb"}
:::

Then, create a new directory to work within and copy the notebook into this directory.

Once you've done that, switch to this directory in a Terminal, install notebook dependencies (if necessary), and open Jupyter Lab to get started working with the notebook.
The commands you can use for installation and opening Jupyter Lab are given in the table below.

+-----------+---------------------------------------------------------+
| Platform  | Commands                                                |
+===========+=========================================================+
|           | ```{.bash filename="Terminal"}                          |
| Mac/Linux | python3 -m pip install jupyter matplotlib plotly pandas |
|           | python3 -m jupyter lab computations.ipynb               |
|           | ```                                                     |
+-----------+---------------------------------------------------------+
|           | ```{.powershell filename="Terminal"}                    |
| Windows   | py -m pip install jupyter matplotlib plotly pandas      |
|           | py -m jupyter lab computations.ipynb                    |
|           | ```                                                     |
+-----------+---------------------------------------------------------+

The notebook as we start out is shown below.
Note that none of the cells are executed yet.

```` {.markdown .visually-hidden}
---
title: Quarto Computations
jupyter: python3
---

## NumPy

```{{python}}
import numpy as np
a = np.arange(15).reshape(3, 5)
a
```

## Matplotlib

```{{python}}
import matplotlib.pyplot as plt

fig = plt.figure()
x = np.arange(10)
y = 2.5 * np.sin(x / 20 * np.pi)
yerr = np.linspace(0.05, 0.2, 10)

plt.errorbar(x, y + 3, yerr=yerr, label='both limits (default)')
plt.errorbar(x, y + 2, yerr=yerr, uplims=True, label='uplims=True')
plt.errorbar(x, y + 1, yerr=yerr, uplims=True, lolims=True,
             label='uplims=True, lolims=True')

upperlimits = [True, False] * 5
lowerlimits = [False, True] * 5
plt.errorbar(x, y, yerr=yerr, uplims=upperlimits, lolims=lowerlimits,
             label='subsets of uplims and lolims')

plt.legend(loc='lower right')
plt.show(fig)
```

## Plotly

```{{python}}
import plotly.express as px
import plotly.io as pio
gapminder = px.data.gapminder()
gapminder2007 = gapminder.query("year == 2007")
fig = px.scatter(gapminder2007, 
                 x="gdpPercap", y="lifeExp", color="continent", 
                 size="pop", size_max=60,
                 hover_name="country")
fig.show()
```
````

![](images/jupyter-computations.png){.border fig-alt="Screen shot of computations.ipynb Jupyter notebook with NumPy, Matplotlib, and Plotly code cells shown."}

Next, create a new Terminal within Jupyter Lab to use for Quarto commands.

![](../hello/images/jupyter-terminal.png){.border fig-alt="Screenshot of menu items in Jupuyter Lab: File > New > Terminal."}

Finally, run `quarto preview` in the Terminal, and position Jupyter Lab side-by-side with the browser showing the preview.

``` {.bash filename="Terminal"}
quarto preview computations.ipynb
```

![](images/jupyter-computations-preview.png){.border fig-alt="Side-by-side preview of notebook on the left and live preview in the browser on the right."}

Go ahead and run all of the cells and then save the notebook.
You'll see that the preview updates immediately.

## Cell Output

All of the code in the notebook is displayed within the rendered document.
However, for some documents, you may want to hide all of the code and just show the output.
Let's go ahead and specify `echo: false` within the document `execute` options to prevent code from being printed.

``` {.yaml .visually-hidden}
---
title: Quarto Computations
execute:
  echo: false
jupyter: python3
---
```

![](images/jupyter-execute-echo-false.png){.border fig-alt="Screen shot of metadata section of Jupyter notebook with 'echo: false' included under the 'execute:' option."}

Save the notebook after making this change.
The preview will update to show the output with no code.

![](images/exec-echo-false-preview.png){.border fig-alt="Output of notebook with echo: false set, shows resulting array in NumPy section, line chart in Numpy section, and interactive bubble chart in Plotly section."}

You might want to selectively enable code `echo` for some cells.
To do this add the `echo: true` cell option.
Try this with the NumPy cell.

```` {.markdown .visually-hidden}
```{{python}}
#| echo: true

import numpy as np
a = np.arange(15).reshape(3, 5)
a
```
````

![](images/jupyter-exec-echo-true.png){.border fig-alt="Screen shot of NumPy section of Jupyter notebook with 'echo: true' set as a cell option for the code cell."}

Save the notebook and note that the code is now included for the NumPy cell.

![](images/exec-echo-true-preview.png){.border fig-alt="Screen shot of rendered NumPy section of Jupyter notebook which shows the code and the resulting array."}

There are a large number of other options available for cell output, for example `warning` to show/hide warnings (which can be especially helpful for package loading messages), `include` as a catch all for preventing any output (code or results) from being included in output, and `error` to prevent errors in code execution from halting the rendering of the document (and print the error in the rendered document).

See the [Jupyter Cell Options](/docs/reference/cells/cells-jupyter.qmd) documentation for additional details.

## Code Folding

Rather than hiding code entirely, you might want to fold it and allow readers to view it at their discretion.
You can do this via the `code-fold` option.
Remove the `echo` option we previously added and add the `code-fold` HTML format option.

``` {.yaml .visually-hidden}
---
title: Quarto Computations
execute:
   code-fold: true
jupyter: python3
---
```

![](images/jupyter-code-fold.png){.border fig-alt="Screen shot of metadata section of Jupyter notebook with 'code-fold: true' included under the 'html:' option, which is under the `format:` option."}

Save the notebook.
Now a "Code" widget is available above the output of each cell.

![](images/code-fold-preview.png){.border fig-alt="Screen shot of rendered NumPy section of Jupyter notebook which shows a toggleable section that is labelled 'Code' and the resulting array."}

You can also provide global control over code folding.
Try adding `code-tools: true` to the HTML format options.

``` {.yaml .visually-hidden}
---
title: Quarto Computations
execute:
   code-fold: true
   code-tools: true
jupyter: python3
---
```

![](images/jupyter-code-tools.png){.border fig-alt="Metadata section of Jupyter notebook with 'code-tools: true' added to the HTML format options."}

Save the notebook and you'll see that a code menu appears at the top right of the document that provides global control over showing and hiding code.

![](images/code-tools-preview.png){.border fig-alt="Output of notebook with 'code-tools: true' which includes a Code dropdown button next to the document header with two options: Show All Code, and Hide All Code."}

```` {.markdown .visually-hidden}
```{{python}}
#| label: fig-limits
#| fig-cap: "Errorbar limit selector"

import matplotlib.pyplot as plt

fig = plt.figure()
fig.set_size_inches(12, 7)
```
````

Let's improve the appearance of our Matplotlib output.
It could certainly stand to be wider, and it would be nice to provide a caption and a label for cross-referencing.

Go ahead and modify the Matplotlib cell to include `label` and `fig-cap` options as well as a call to `fig.set_size_inches()` to set a larger figure size with a wider aspect ratio.

```` {.markdown .visually-hidden}
```{{python}}
#| label: fig-limits
#| fig-cap: "Errorbar limit selector"

import matplotlib.pyplot as plt

fig = plt.figure()
fig.set_size_inches(12, 7)
```
````

![](images/jupyter-figure-options.png){.border fig-alt="Code cell with label and fig-cap options added, as well as a call to set the figure size explicitly."}

Execute the cell to see the updated plot.
Then, save the notebook so that the Quarto preview is updated.

![](images/figure-options-preview.png){.border fig-alt="Output of Matplotlib section of notebook which includes a caption under the figure that reads 'Figure 1: Errorbar limit selection.'"}

## Multiple Figures

The Plotly cell visualizes GDP and life expectancy data from a single year (2007).
Let's plot another year next to it for comparison and add a caption and subcaptions.
Since this will produce a wider visualization we'll also use the `column` option to lay it out across the entire page rather than being constrained to the body text column.

There are quite a few changes to this cell.
Copy and paste the code below into the notebook if you want to try them locally.

``` python
#| label: fig-gapminder
#| fig-cap: "Life Expectancy and GDP"
#| fig-subcap:
#|   - "Gapminder: 1957"
#|   - "Gapminder: 2007"
#| layout-ncol: 2
#| column: page

import plotly.express as px
import plotly.io as pio
gapminder = px.data.gapminder()
def gapminder_plot(year):
    gapminderYear = gapminder.query("year == " + 
                                    str(year))
    fig = px.scatter(gapminderYear, 
                     x="gdpPercap", y="lifeExp",
                     size="pop", size_max=60,
                     hover_name="country")
    fig.show()
    
gapminder_plot(1957)
gapminder_plot(2007)
```

Run the modified cell then save the notebook.
The preview will update as follows:

![](images/plotly-preview.png){.border fig-alt="Output of Plotly section which shows two charts side-by-side. The first has a caption below that reads '(a) Gapminder: 1957', the second's caption reads '(b) Gapminder 2007'. Below both figures, there's a caption that reads 'Figure 1: Life Expectancy and GDP (Data from World Bank via gapminder.org).'"}

Let's discuss some of the new options used here.
You've seen `fig-cap` before but we've now added a `fig-subcap` option.

``` python
#| fig-cap: "Life Expectancy and GDP"
#| fig-subcap:
#|   - "Gapminder: 1957"
#|   - "Gapminder: 2007"
```

For code cells with multiple outputs adding the `fig-subcap` option enables us to treat them as subfigures.

We also added an option to control how multiple figures are laid out---in this case we specified side-by-side in two columns.

``` python
#| layout-ncol: 2
```

If you have 3, 4, or more figures in a panel there are many options available for customizing their layout.
See the article on [Figures](/docs/authoring/figures.qmd) for details.

Finally, we added an option to control the span of the page that our figures occupy.

``` python
#| column: page
```

This allows our figure display to span out beyond the normal body text column.
See the documentation on [Article Layout](/docs/authoring/article-layout.qmd) to learn about all of the available layout options.

{{< include _footer.md >}}
```````

## File: docs/get-started/computations/neovim.qmd
```````
---
title: "Tutorial: Computations"
editor_options:
  markdown:
    wrap: sentence
    canonical: true
tool:
  name: neovim
---

{{< include _text-editor.md >}}
```````

## File: docs/get-started/computations/rstudio.qmd
```````
---
title: "Tutorial: Computations"
editor_options:
  markdown:
    wrap: sentence
    canonical: true
tool: 
  name: rstudio
---

{{< include ../_tool-chooser.md >}}


## Overview

Quarto supports executable code blocks within markdown.
This allows you to create fully reproducible documents and reports---the code required to produce your output is part of the document itself, and is automatically re-run whenever the document is rendered.

In this tutorial we'll show you how to author fully reproducible computational documents with Quarto in RStudio.

If you would like to follow along step-by-step in your own environment, download the Quarto document (`.qmd`) below, open it in RStudio, and click on <kbd>![](images/rstudio-render-button.png){width="25" height="20"}</kbd> **Render** (or use the keyboard shortcut ⇧⌘K).
We recommend also checking the box for **Render on Save** for a live preview of your changes.

::: {.callout-note appearance="minimal"}
<i class="bi bi-download"></i> [Download computations.qmd](_computations.qmd){download="computations.qmd"}
:::

Note that you will need to open this document in RStudio {{< var rstudio.min_version >}} or later, which you can download [here](https://posit.co/download/rstudio-desktop/).

## Cell Output

By default, the code and its output are displayed within the rendered document.

![](images/rstudio-computations-preview.png){.border .column-page-right fig-alt="RStudio window with computations.qmd open in the visual editor (on the right) and the rendered document (on the left). The document is titled Quarto Computations and contains some text and code. The rendered version also shows a visualization."}

However, for some documents, you may want to hide all of the code and just show the output.
To do so, specify `echo: false` within the `execute` option in the YAML.

``` yaml
---
title: "Quarto Computations"
execute:
  echo: false
---
```

If you checked **Render on Save** earlier, just save the document after making this change for a live preview.
Otherwise render the document to see your updates reflected.
The result will look like the following.

![](images/rstudio-exec-echo-false.png){.border fig-alt="Rendered computations.qmd document with title Quarto Computations, some descriptive text, and a plot. Code is not shown."}

You might want to selectively enable code `echo` for some cells.
To do this add the `echo: true` cell option.
Try this with the chunk labelled `scatterplot`.

``` r
#| label: scatterplot
#| echo: true

ggplot(mpg, aes(x = hwy, y = cty, color = cyl)) +
  geom_point(alpha = 0.5, size = 2) +
  scale_color_viridis_c() +
  theme_minimal()
```

Save the document again and note that the code is now included for the `scatterplot` chunk.

![](images/rstudio-exec-echo-true-preview.png){.border fig-alt="Rendered computations.qmd document with title Quarto Computations, some descriptive text, and a plot. Code is shown for the plot, but not for package loading."}

The `echo` option can be set to `true`, `false`, or `fenced`.
The last one might be of special interest for writing documentation and teaching materials as it allows you to include the fenced code delimiter in your code output to emphasize that executable code requires that delimiter.
You can read more about this option in the [Fenced Echo](/docs/computations/execution-options.qmd#fenced-echo) documentation.

There are a large number of other options available for cell output, for example `warning` for showing/hiding warnings (which can be especially helpful for package loading messages), `include` as a catch all for preventing any output (code or results) from being included in output, and `error` to prevent errors in code execution from halting the rendering of the document (and print the error in the rendered document).

See the [Knitr Cell Options](/docs/reference/cells/cells-knitr.qmd) documentation for additional details.

## Code Folding

Rather than hiding code entirely, you might want to fold it and allow readers to view it at their discretion.
You can do this via the `code-fold` option.
Remove the `echo` option we previously added and add the `code-fold` HTML format option.

``` yaml
---
title: "Quarto Computations"
format:
  html:
    code-fold: true
---
```

Save the document again and note that new Code widgets are now included for each code chunk.

![](images/rstudio-code-fold-preview.png){.border .column-page-right fig-alt="RStudio with computations.qmd open. On the right is the visual editor. The YAML has title and format defined. Title is Quarto Computations. Format is html, and code-fold option is set to true. On the right is the rendered version of the document. The title is followed by some text, which is followed by a Code widget that would expand if clicked on, which is followed by some more text, another code widget, and finally the plot. The Code widgets are folded, so the code is not visible in the rendered document."}

You can also provide global control over code folding.
Try adding `code-tools: true` to the HTML format options.

``` yaml
---
title: "Quarto Computations"
format:
  html:
    code-fold: true
    code-tools: true
---
```

Save the document and you'll see that a code menu appears at the top right of the rendered document that provides global control over showing and hiding all code.

![](images/rstudio-code-tools-preview.png){.border fig-alt="Rendered version of the computations.qmd document. A new code widget appears on top right of the document. The screenshot shows that the widget is clicked on, which reveals a drop down menu with three choices: Show All Code, Hide All Code, and View Source. In the background is the rendered document. The title is followed by some text, which is followed by a Code widget that would expand if clicked on, which is followed by some more text, another code widget, and finally the plot. The Code widgets are folded, so the code is not visible in the rendered document."}

## Code Linking

The `code-link` option enables hyper-linking of functions within code blocks to their online documentation.
Try adding `code-link: true` to the HTML format options.

``` yaml
---
title: "Quarto Computations"
format:
  html:
    code-link: true
---
```

Save the document and observe that the functions are now clickable hyperlinks.

![](images/rstudio-code-link-preview.png){.column-page-right fig-alt="Rendered version of the computations.qmd document. The document contains a title (Quarto Computations), text, code chunks, and a plot. The screenshot shows that function names in code chunks are clickable, and clicking on one brings you to documentation on the package website (which is shown on the foreground of the image). The function shown is theme_minimal() from ggplot2."}

Note that code linking is currently implemented only for the knitr engine via the [downlit](https://downlit.r-lib.org/) package.
A limitation of downlit currently prevents code linking if `code-line-numbers` and/or `code-annotations` are also `true`.

## Figures

We can improve the appearance and accessibility of our plot.
We can change its aspect ratio by setting `fig-width` and `fig-height`, provide a `fig-cap`, modify its `label` for cross referencing, and add [alternative text](https://medium.com/nightingale/writing-alt-text-for-data-visualization-2a218ef43f81) with `fig-alt`.

We'll add the following chunk options.

``` r
#| label: fig-scatterplot
#| fig-cap: "City and highway mileage for 38 popular models of cars."
#| fig-alt: "Scatterplot of city vs. highway mileage for cars, where points are colored by the number of cylinders. The plot displays a positive, linear, and strong relationship between city and highway mileage, and mileage increases as the number of cylinders decreases."
#| fig-width: 6
#| fig-height: 3.5
```

Save the document to see the updated plot.
Note that we have also updated the narrative with a [cross reference](/docs/authoring/cross-references.qmd#computations) to this figure using the following.

``` markdown
@fig-scatterplot shows a positive, strong, and linear relationship between the city and highway mileage of these cars.
```

![](images/rstudio-figure-options.png){.border .column-page-right fig-alt="RStudio with computations.qmd open. On the right is the visual editor. The YAML has title and format defined. Title is Quarto Computations. Format is html, and code-fold option is set to true. Compared to earlier images on the page, the code chunk shows the new chunk options added to the code chunk. On the right is the rendered version of the document. The title is followed by some text, which is followed by a Code widget that would expand if clicked on, which is followed by some more text, another code widget, and finally the plot. The Code widgets are folded, so the code is not visible in the rendered document."}

## Multiple Figures

Let's add another plot to our chunk---a scatterplot where the points are colored by engine displacement, using a different color scale.
Our goal is to display these plots side-by-side (i.e., in two columns), with a descriptive subcaption for each plot.
Since this will produce a wider visualization we'll also use the `column` option to lay it out across the entire page rather than being constrained to the body text column.

There are quite a few changes to this chunk.
To follow along, copy and paste the options outlined below into your Quarto document.

``` r
#| label: fig-mpg
#| fig-cap: "City and highway mileage for 38 popular models of cars."
#| fig-subcap:
#|   - "Color by number of cylinders"
#|   - "Color by engine displacement, in liters"
#| layout-ncol: 2
#| column: page

ggplot(mpg, aes(x = hwy, y = cty, color = cyl)) +
  geom_point(alpha = 0.5, size = 2) +
  scale_color_viridis_c() +
  theme_minimal()

ggplot(mpg, aes(x = hwy, y = cty, color = displ)) +
  geom_point(alpha = 0.5, size = 2) +
  scale_color_viridis_c(option = "E") +
  theme_minimal()
```

Additionally, replace the existing text that describes the visualization with the following.

``` markdown
The plots in @fig-mpg show the relationship between city and highway mileage for 38 popular models of cars.
In @fig-mpg-1 the points are colored by the number of cylinders while in @fig-mpg-2 the points are colored by engine displacement.
```

Then, save the document and inspect the rendered output, which should look like the following.

![](images/rstudio-multi-figure-preview.png){.border fig-alt="Rendered version of the computations.qmd document with a new plot. The document contains a title (Quarto Computations), text, code chunks, and figure include two side-by-side subfigures, each scatterplots. The text shows clickable cross reference links to Figure 1, Figure 1a, and Figure 1b."}

Let's discuss some of the new options used here.
You've seen `fig-cap` before but we've now added a `fig-subcap` option.

``` r
#| fig-cap: "City and highway mileage for 38 popular models of cars."
#| fig-subcap:
#|   - "Color by number of cylinders"
#|   - "Color by engine displacement, in liters"
```

For code cells with multiple outputs adding the `fig-subcap` option enables us to treat them as subfigures.

We also added an option to control how multiple figures are laid out---in this case we specified side-by-side in two columns.

``` r
#| layout-ncol: 2
```

If you have 3, 4, or more figures in a panel there are many options available for customizing their layout.
See the article [Figure Layout](/docs/authoring/figures.qmd#figure-panels) for details.

Finally, we added an option to control the span of the page that our figures occupy.

``` r
#| column: page
```

This allows our figure display to span out beyond the normal body text column.
See the documentation on [Article Layout](/docs/authoring/article-layout.qmd) to learn about all of the available layout options.

## Data Frames

{{< include ../../computations/_knitr-df-print.md >}}


## Inline Code

To include executable expressions within markdown, enclose the expression in `` `{r} ` ``^[Quarto also supports the Knitr syntax `` `r ` ``, read more in [Inline Code](/docs/computations/inline-code.qmd)].
For additional details on inline code expressions, please visit the [Inline Code](/docs/computations/inline-code.qmd) documentation.

For example, we can use inline code to state the number of observations in our data.
Try adding the following markdown text to your Quarto document.

````markdown
There are `{r} nrow(mpg)` observations in our data.
````

Save your document and inspect the rendered output.
The expression inside the backticks has been executed and the sentence includes the actual number of observations.

::: border
There are 234 observations in our data.
:::

If the expression you want to inline is more complex, involving many functions or a pipeline, we recommend including it in a code chunk (with `echo: false`) and assigning the result to an object.
Then, you can call that object in your inline code.

For example, say you want to state the average city and highway mileage in your data.
First, compute these values in a code chunk.

``` r
#| echo: false

mean_cty <- round(mean(mpg$cty), 2)
mean_hwy <- round(mean(mpg$hwy), 2)
```

Then, add the following markdown text to your Quarto document.

```markdown
The average city mileage of the cars in our data is `{r} mean_cty` and the average highway mileage is `{r} mean_hwy`. 
```

Save your document and inspect the rendered output.

::: border
The average city mileage of the cars in our data is 16.86 and the average highway mileage is 23.44.
:::

## Caching

If your document includes code chunks that take too long to compute, you might want to cache the results of those chunks.
You can use the `cache` option either at the document level using the YAML execute option.

``` yaml
execute:
  cache: true
```

However caching all code chunks in a document may not be preferable.
You can also indicate which chunks should be cached directly with using a chunk option.

``` r
#| cache: true
```

Try adding this chunk option to one of the code chunks in your document that produces a plot and save.
When the document is rendered, you'll see that a new folder has been created in your working directory with the same name as your document and the suffix `_cache`.
This folder contains the cached results.
You can find out more about caching in Quarto documents in the [Cache](/docs/projects/code-execution.qmd#cache) documentation.

If you followed along step-by-step with this tutorial, you should now have a Quarto document that implements everything we covered.
Otherwise, you can download a completed version of `computations.qmd` below.

::: {.callout-note appearance="minimal"}
`<i class="bi bi-download"></i>`{=html} [Download computations-complete.qmd](_computations-complete.qmd){download="computations-complete.qmd"}
:::

{{< include _footer.md >}}
```````

## File: docs/get-started/computations/text-editor.qmd
```````
---
title: "Tutorial: Computations"
editor_options:
  markdown:
    wrap: sentence
    canonical: true
tool:
  name: text-editor
---

{{< include _text-editor.md >}}
```````

## File: docs/get-started/computations/vscode.qmd
```````
---
title: "Tutorial: Computations"
editor_options:
  markdown:
    wrap: sentence
    canonical: true
tool:
  name: vscode
---

{{< include ../_tool-chooser.md >}}

## Overview

Quarto has a wide variety of options available for controlling how code and computational output appear within rendered documents.
In this tutorial we'll take a `.qmd` file that has some numeric output and plots, and cover how to apply these options.

This tutorial will make use of the `matplotlib` and `plotly` Python packages.
The commands you can use to install them are given in the table below.

+-----------+---------------------------------------------------------+
| Platform  | Commands                                                |
+===========+=========================================================+
| Mac/Linux | ```{.bash filename="Terminal"}                          |
|           | python3 -m pip install jupyter matplotlib plotly pandas |
|           | ```                                                     |
+-----------+---------------------------------------------------------+
| Windows   | ```{.powershell filename="Terminal"}                    |
|           | py -m pip install jupyter matplotlib plotly pandas      |
|           | ```                                                     |
+-----------+---------------------------------------------------------+

If you want to follow along step-by-step in your own environment, create a `computations.qmd` file and copy the following content into it.

```` markdown
---
title: Quarto Computations
jupyter: python3
---

## NumPy

```{{python}}
import numpy as np
a = np.arange(15).reshape(3, 5)
a
```

## Matplotlib

```{{python}}
import matplotlib.pyplot as plt

fig = plt.figure()
x = np.arange(10)
y = 2.5 * np.sin(x / 20 * np.pi)
yerr = np.linspace(0.05, 0.2, 10)

plt.errorbar(x, y + 3, yerr=yerr, label='both limits (default)')
plt.errorbar(x, y + 2, yerr=yerr, uplims=True, label='uplims=True')
plt.errorbar(x, y + 1, yerr=yerr, uplims=True, lolims=True,
             label='uplims=True, lolims=True')

upperlimits = [True, False] * 5
lowerlimits = [False, True] * 5
plt.errorbar(x, y, yerr=yerr, uplims=upperlimits, lolims=lowerlimits,
             label='subsets of uplims and lolims')

plt.legend(loc='lower right')
plt.show(fig)
```

## Plotly

```{{python}}
import plotly.express as px
import plotly.io as pio
gapminder = px.data.gapminder()
gapminder2007 = gapminder.query("year == 2007")
fig = px.scatter(gapminder2007, 
                 x="gdpPercap", y="lifeExp", color="continent", 
                 size="pop", size_max=60,
                 hover_name="country")
fig.show()
```
````

Then, execute the **Quarto: Preview** command.
You can alternatively use the <kbd>Ctrl+Shift+K</kbd> keyboard shortcut, or the **Preview** button (![](/docs/tools/images/vscode-preview-icon.svg){fig-alt="Preview icon"}) at the top right of the editor:

![](/docs/tools/images/vscode-preview-button.png){.border fig-alt="The top of the Visual Studio code editor. The right side of the editor tab area includes a Preview button."}

::: {.callout-note appearance="simple"}
Note that on the Mac you should use `Cmd` rather than `Ctrl` as the prefix for all Quarto keyboard shortcuts.
:::

Here is what you should see within VS Code:

![](images/vscode-computations-preview.png){.border .column-page-outset-right fig-alt="Side-by-side preview of text editor on the left and live preview in the browser on the right."}

## Cell Execution

As you author a document you may want to execute one or more cells without re-rendering the entire document.
You can do this using the **Run Cell** button above the code cell.
Click that button to execute the cell (output is shown side by side in the Jupyter interactive console):

![](/docs/tools/images/vscode-execute-cell.png){.border fig-alt="VS Code with two panes open, vscode.qmd source code on the right, and the interactive output of that code shown in a second pane on the left."}

There are a variety of commands and keyboard shortcuts available for executing cells:

| Quarto Command       | Keyboard Shortcut   |
|----------------------|---------------------|
| Run Current Cell     | <kbd>⇧⌘ Enter</kbd> |
| Run Selected Line(s) | <kbd>⌘ Enter</kbd>  |
| Run Next Cell        | <kbd>⌥⌘ N</kbd>     |
| Run Previous Cell    | <kbd>⌥⌘ P</kbd>     |
| Run All Cells        | <kbd>⌥⌘ R</kbd>     |
| Run Cells Above      | <kbd>⇧⌥⌘ P</kbd>    |
| Run Cells Below      | <kbd>⇧⌥⌘ N</kbd>    |

## Cell Output

All of the code in the source file is displayed within the rendered document.
However, in some cases, you may want to hide all of the code and just show the output.
Let's go ahead and specify `echo: false` within the document `execute` options to prevent code from being printed.

``` yaml
---
title: Quarto Computations
execute:
  echo: false
jupyter: python3
---
```

Re-render the document and the preview will update to show the output with no code (remember that you do not need to save the file before rendering, as this happens automatically when you render).

![](images/exec-echo-false-preview.png){.border fig-alt="Output of computations.qmd with 'echo: false' set, shows Title, resulting array in NumPy section, line chart in Matplotlib section, and interactive bubble chart in Plotly section."}

You might want to selectively enable code `echo` for some cells.
To do this add the `echo: true` cell option.
Try this with the NumPy cell.

```` markdown
```{{python}}
#| echo: true

import numpy as np
a = np.arange(15).reshape(3, 5)
a
```
````

Re-render note that the code is now included for the NumPy cell.

![](images/exec-echo-true-preview.png){.border fig-alt="Rendered NumPy section of computations.qmd which shows the code and the resulting array."}

There a large number of other options available for cell output, for example `warning` to show/hide warnings (which can be especially helpful for package loading messages), `include` as a catch all for preventing any output (code or results) from being included in output, and `error` to prevent errors in code execution from halting the rendering of the document (and print the error in the rendered document).

See the [Jupyter Cell Options](/docs/reference/cells/cells-jupyter.qmd) documentation for additional details.

## Code Folding

Rather than hiding code entirely, you might want to fold it and allow readers to view it at their discretion.
You can do this via the `code-fold` option.
Remove the `echo` option we previously added and add the `code-fold` HTML format option.

``` yaml
---
title: Quarto Computations
format:
  html:
    code-fold: true
jupyter: python3
---
```

Render the document.
Now a "Code" widget is available above the output of each cell.

![](images/code-fold-preview.png){.border fig-alt="Rendered NumPy section of computations.qmd which shows a toggleable section that is labelled 'Code' and the resulting array."}

You can also provide global control over code folding.
Try adding `code-tools: true` to the HTML format options.

``` yaml
---
title: Quarto Computations
format:
  html:
    code-fold: true
    code-tools: true
jupyter: python3
---
```

Render the document and you'll see that a code menu appears at the top right of the document that provides global control over showing and hiding code.

![](images/text-editor-code-tools-preview.png){.border fig-alt="Rendered version of the computations.qmd document. A new code widget appears on top right of the document. The screenshot shows that the widget is clicked on, which reveals a drop down menu with three choices: Show All Code, Hide All Code, and View Source. In the background is the rendered document. The title is followed by some text, which is followed by a Code widget that would expand if clicked on, which is followed by the output of the code. The Code widgets are folded, so the code is not visible in the rendered document."}

## Figures

Let's improve the appearance of our Matplotlib output.
It could certainly stand to be wider, and it would be nice to provide a caption and a label for cross-referencing.

Go ahead and modify the Matplotlib cell to include `label` and `fig-cap` options as well as a call to `fig.set_size_inches()` to set a larger figure size with a wider aspect ratio:

```` markdown
```{{python}}
#| label: fig-limits
#| fig-cap: "Errorbar limit selector"

import matplotlib.pyplot as plt

fig = plt.figure()
fig.set_size_inches(12, 7)
```
````

After re-rendering the document you'll see the updated plot:

![](images/figure-options-preview.png){.border fig-alt="Rendered Matplotlib section of computations.qmd which includes a toggleable code-folding widget, the figure, and a caption under the figure that reads 'Figure 1: Errorbar limit selection.'"}

## Multiple Figures

The Plotly cell visualizes GDP and life expectancy data from a single year (2007).
Let's plot another year next to it for comparison and add a caption and subcaptions.
Since this will produce a wider visualization we'll also use the `column` option to lay it out across the entire page rather than being constrained to the body text column.

There are quite a few changes to this cell.
Copy and paste this code into `computations.qmd` if you want to try them locally:

``` python
#| label: fig-gapminder
#| fig-cap: "Life Expectancy and GDP"
#| fig-subcap:
#|   - "Gapminder: 1957"
#|   - "Gapminder: 2007"
#| layout-ncol: 2
#| column: page

import plotly.express as px
import plotly.io as pio
gapminder = px.data.gapminder()
def gapminder_plot(year):
    gapminderYear = gapminder.query("year == " + 
                                    str(year))
    fig = px.scatter(gapminderYear, 
                     x="gdpPercap", y="lifeExp",
                     size="pop", size_max=60,
                     hover_name="country")
    fig.show()
    
gapminder_plot(1957)
gapminder_plot(2007)
```

Render the document and the preview will update as follows:

![](images/plotly-preview.png){.border fig-alt="Output of Plotly section which shows two charts side-by-side. The first has a caption below that reads '(a) Gapminder: 1957', the second's caption reads '(b) Gapminder 2007'. Below both figures, there's a caption that reads 'Figure 1: Life Expectancy and GDP (Data from World Bank via gapminder.org).'"}

Let's discuss some of the new options used here.
You've seen `fig-cap` before but we've now added a `fig-subcap` option:

``` python
#| fig-cap: "Life Expectancy and GDP"
#| fig-subcap:
#|   - "Gapminder: 1957"
#|   - "Gapminder: 2007"
```

For code cells with multiple outputs adding the `fig-subcap` option enables us to treat them as subfigures.

We also added an option to control how multiple figures are laid out---in this case we specified side-by-side in two columns:

``` python
#| layout-ncol: 2
```

If you have 3, 4, or more figures in a panel there are many options available for customizing their layout.
See the article [Figures](/docs/authoring/figures.qmd) for details.

Finally, we added an option to control the span of the page that our figures occupy:

``` python
#| column: page
```

This allows our figure display to span out beyond the normal body text column.
See the documentation on [Article Layout](/docs/authoring/article-layout.qmd) to learn about all of the available layout options.

{{< include _footer.md >}}
```````

## File: docs/get-started/hello/rstudio/_hello.qmd
```````
---
title: "Hello, Quarto"
format: html
editor: visual
---

```{r}
#| label: load-packages
#| include: false

library(tidyverse)
library(palmerpenguins)
```

## Meet Quarto

Quarto enables you to weave together content and executable code into a finished document. To learn more about Quarto see <https://quarto.org>.

## Meet the penguins

![](https://raw.githubusercontent.com/quarto-dev/quarto-web/main/docs/get-started/hello/rstudio/lter_penguins.png){style="float:right;" fig-alt="Illustration of three species of Palmer Archipelago penguins: Chinstrap, Gentoo, and Adelie. Artwork by @allison_horst." width="401"}

The `penguins` data from the [**palmerpenguins**](https://allisonhorst.github.io/palmerpenguins "palmerpenguins R package") package contains size measurements for `{r} nrow(penguins)` penguins from three species observed on three islands in the Palmer Archipelago, Antarctica.

The plot below shows the relationship between flipper and bill lengths of these penguins.

```{r}
#| label: plot-penguins
#| warning: false
#| echo: false

ggplot(penguins, 
       aes(x = flipper_length_mm, y = bill_length_mm)) +
  geom_point(aes(color = species, shape = species)) +
  scale_color_manual(values = c("darkorange","purple","cyan4")) +
  labs(
    title = "Flipper and bill length",
    subtitle = "Dimensions for penguins at Palmer Station LTER",
    x = "Flipper length (mm)", y = "Bill length (mm)",
    color = "Penguin species", shape = "Penguin species"
  ) +
  theme_minimal()
```
```````

## File: docs/get-started/hello/_hello.qmd
```````
---
title: "Quarto Basics"
format:
  html:
    code-fold: true
jupyter: python3
---

## Polar Axis

For a demonstration of a line plot on a polar axis, see @fig-polar.

```{python}
#| label: fig-polar
#| fig-cap: "A line plot on a polar axis"

import numpy as np
import matplotlib.pyplot as plt

r = np.arange(0, 2, 0.01)
theta = 2 * np.pi * r
fig, ax = plt.subplots(
  subplot_kw = {'projection': 'polar'} 
)
ax.plot(theta, r)
ax.set_rticks([0.5, 1, 1.5, 2])
ax.grid(True)
plt.show()
```
```````

## File: docs/get-started/hello/index.qmd
```````
---
# These pages exist but are no longer needed; they're there in case someone links to them
# from the web
title: "Tutorial: Hello, Quarto"
include-in-header: ../_redirect.html
---
```````

## File: docs/get-started/hello/jupyter.qmd
```````
---
title: "Tutorial: Hello, Quarto"
editor_options:
  markdown:
    wrap: sentence
    canonical: true
tool:
  name: jupyter
---

{{< include ../_tool-chooser.md >}}

## Overview

In this tutorial we'll show you how to use Jupyter Lab with Quarto.
You'll edit code and markdown in Jupyter Lab, just as you would with any notebook, and preview the rendered document in a web browser as you work.

Below is an overview of how this will look.

![](images/jupyter-quarto-preview.png){fig-alt="On the left: A Jupyter notebook titled Quarto Basics containing some text, a code cell, and the result of the code cell, which is a line plot on a polar axis. On the right: Rendered version of the same notebook."}

The notebook on the left is *rendered* into the HTML version you see on the right.
This is the basic model for Quarto publishing---take a source document (in this case a notebook) and render it to a variety of [output formats](/docs/output-formats/all-formats.qmd), including HTML, PDF, MS Word, etc.

::: callout-note
Note that while this tutorial uses Python, using Julia (via the [IJulia](https://julialang.github.io/IJulia.jl/stable/) kernel) is also well supported.
See the article on [Using Julia](/docs/computations/julia.qmd) for additional details.
:::

## Rendering

We'll start out by opening a notebook (`hello.ipynb`) in Jupyter Lab and rendering it to a couple of formats.
If you want to follow along step-by-step in your own environment, download the notebook below.

::: {.callout-note appearance="minimal"}
<i class="bi bi-journal-code"></i> [Download hello.ipynb](_hello.ipynb){download="hello.ipynb"}
:::

Then, create a new directory to work within, copy the notebook into this directory, and switch to this directory in a Terminal.

Next, execute these commands to install JupyterLab along with the packages used in the tutorial (`matplotlib` and `plotly),` and to open the tutorial notebook:

+---------------+------------------------------------------------+
| Platform      | Commands                                       |
+===============+================================================+
| Mac/Linux     | ```{.bash filename="Terminal"}                 |
|               | python3 -m pip install jupyter jupyterlab      |
|               | python3 -m pip install matplotlib plotly       |
|               | python3 -m jupyter lab hello.ipynb             |
|               | ```                                            |
+---------------+------------------------------------------------+
| Windows       | ```{.bash filename="Terminal"}                 |
|               | py -m pip install jupyter jupyterlab           |
|               | py -m pip install matplotlib plotly            |
|               | py -m jupyter lab hello.ipynb                  |
|               | ```                                            |
+---------------+------------------------------------------------+

Here is our notebook in Jupyter Lab.

```` {.markdown .visually-hidden}
---
title: "Quarto Basics"
format:
  html:
    code-fold: true
jupyter: python3
---

For a demonstration of a line plot on a polar axis, see @fig-polar.

```{{python}}
#| label: fig-polar
#| fig-cap: "A line plot on a polar axis"

import numpy as np
import matplotlib.pyplot as plt

r = np.arange(0, 2, 0.01)
theta = 2 * np.pi * r
fig, ax = plt.subplots(
  subplot_kw = {'projection': 'polar'} 
)
ax.plot(theta, r)
ax.set_rticks([0.5, 1, 1.5, 2])
ax.grid(True)
plt.show()
```
````

![](images/jupyter-basics.png){.border fig-alt="A Jupyter notebook titled Quarto Basics containing some text, a code cell, and the result of the code cell, which is a line plot on a polar axis."}

Next, create a new Terminal within Jupyter Lab to use for Quarto commands.

![](images/jupyter-terminal.png){.border fig-alt="Screenshot of menu items in Jupuyter Lab: File > New > Terminal."}

And finally, render the notebook to a couple of formats.

``` {.bash filename="Terminal"}
quarto render hello.ipynb --to html
quarto render hello.ipynb --to docx
```

Note that the target file (in this case `hello.ipynb`) should always be the very first command line argument.

When you render a Jupyter notebook with Quarto, the contents of the notebook (code, markdown, and outputs) are converted to plain markdown and then processed by [Pandoc](http://pandoc.org/), which creates the finished format.

![](images/ipynb-how-it-works.png){style="margin-left: 15px;" fig-align="left" width="516" fig-alt="Workflow diagram starting with a Jupyter notebook, then md, then pandoc, then PDF, MS Word, or HTML."}

## Authoring

The `quarto render` command is used to create the final version of your document for distribution.
However, during authoring you'll use the `quarto preview` command.
Try it now from the Terminal with `hello.ipynb`.

``` {.bash filename="Terminal"}
quarto preview hello.ipynb
```

This will render your document and then display it in a web browser.

![](images/quarto-preview.png){.border fig-alt="Rendered version of the earlier notebook in a web browser." width="500"}

You might want to position Jupyter Lab and the browser preview side-by-side so you can see changes as you work.

![](images/jupyter-quarto-preview.png){fig-alt="Side-by-side preview of notebook on the left and live preview in the browser on the right."}

To see live preview in action:

1.  Change the line of code that defines `theta` as follows:

    ``` python
    theta = 4 * np.pi * r
    ```

2.  Re-run the code cell to generate a new version of the plot.

3.  Save the notebook (the preview will update automatically).

This is the basic workflow for authoring with Quarto. Once you are comfortable with this, we also recommend installing the [Quarto JupyterLab Extension](/docs/tools/jupyter-lab-extension.qmd) which provides additional tools for working with Quarto in JupyterLab.

There are few different types of cells in our notebook, let's work a bit with each type.

## YAML Options

You are likely already familiar with markdown and code cells, but there is a new type of cell ("Raw") that is used for document-level YAML options.

``` {.yaml .visually-hidden}
---
title: "Quarto Basics"
format:
  html:
    code-fold: true
jupyter: python3
---
```

![](images/jupyter-yaml.png){.border fig-alt="YAML of the notebook with the fields title, format, and jupyter. Title is set to Quarto Basics with title: \"Quarto Basics\". Format is defined as html in the next line, and within the html format, code-fold is set to true. Jupyter is set to python3 with jupyter: python3."}

Try changing the `code-fold` option to `false`.

``` yaml
format: 
  html:
    code-fold: false
```

Then save the notebook.
You'll notice that the code is now shown above the plot, where previously it was hidden with a **Code** button that could be used to show it.

## Markdown Cells

Markdown cells contain raw markdown that will be passed through to Quarto during rendering.
You can use any valid Quarto [markdown syntax](/docs/authoring/markdown-basics.qmd) in these cells.
Here we specify a heading and a cross-reference to the figure created in the code cell below.

``` {.markdown .visually-hidden}
## Polar Axis

For a demonstration of a line plot on a polar axis, see @fig-polar.
```

![](images/jupyter-markdown.png){.border fig-alt="A Markdown cell with the title Polar Axis as a second level header and text that reads 'For a demonstration of a line plot on a polar axis, see @fig-polar.'"}

Try changing the heading and saving the notebook---the preview will update with the new heading text.

## Code Cells

You are likely already familiar with code cells, like the one shown below.

```` {.markdown .visually-hidden}
```{{python}}
#| label: fig-polar
#| fig-cap: "A line plot on a polar axis"

import numpy as np
import matplotlib.pyplot as plt

r = np.arange(0, 2, 0.01)
theta = 2 * np.pi * r
fig, ax = plt.subplots(
  subplot_kw = {'projection': 'polar'} 
)
ax.plot(theta, r)
ax.set_rticks([0.5, 1, 1.5, 2])
ax.grid(True)
plt.show()
```
````

![](images/jupyter-cell.png){.border fig-alt="A code cell with cell options for label and fig-cap and the code required to create the line plot on a polar axis."}

But there are some new components at the top of the code cell: `label` and `fig-cap`options.
Cell options are written in YAML using a specially prefixed comment (`#|`).

In this example, the cell options are used to make the figure cross-reference-able.
Try changing the `fig-cap` and/or the code, running the cell, and then saving the notebook to see the updated preview.

There are a wide variety of [cell options](/docs/reference/cells/cells-jupyter.qmd) that you can apply to tailor your output.
We'll delve into these options in the next tutorial.

::: callout-note
One particularly useful cell option for figures is `fig-alt`, which enables you to add alternative text to images for users with visual impairments.
See Amy Cesal's article on [Writing Alt Text for Data Visualization](https://medium.com/nightingale/writing-alt-text-for-data-visualization-2a218ef43f81) to learn more.
:::


{{< include _footer.md >}}

Additionally, you may want to install the [Quarto JupyterLab Extension](/docs/tools/jupyter-lab-extension.qmd) which provides additional tools for working with Quarto in JupyterLab.
```````

## File: docs/get-started/hello/neovim.qmd
```````
---
title: "Tutorial: Hello, Quarto"
editor_options:
  markdown:
    wrap: sentence
    canonical: true
tool:
  name: neovim
---

{{< include ../_tool-chooser.md >}}

## Overview

In this tutorial we'll show you how to use Quarto with Neovim. While we cover the basics here, you will also want to review the article on [Using Neovim with Quarto](/docs/tools/neovim.qmd) to learn more about installing, using, and customizing Neovim for Quarto. 

If you already have Neovim configured to your liking, you may only want to add the [quarto-nvim](https://github.com/quarto-dev/quarto-nvim) plugin and only refer to this guide for inspiration and seeing the possibilities.
But if you are entirely new to Neovim or want to simply try out a configuration already set up for data science with Quarto, you should head over to this [kickstarter configuration](https://github.com/jmbuhr/quarto-nvim-kickstarter).
This is also what we will be using for this tutorial.

::: callout-note
Neovim is a highly customizable editor.
So much so that Neovim core member TJ Devries has recently coined the term Personal Development Environments (PDE)^[In [this video](https://www.youtube.com/watch?v=QMVIJhC9Veg)] to separate the concept from Integrated Development Environments (IDEs) such as VS Code and RStudio.

Out of the box neovim is fairly minimal.
To work efficiently and get all the nice features, you have to configure it.
You have to make it your own.
If this approach sounds enticing to you, read on.
Welcome to the rabbit hole. 🐰
:::


You can also watch [this video](https://youtu.be/3sj7clNowlA) for a quick guide to getting started with the kickstarter configuration alongside this write-up.

{{< video https://youtu.be/3sj7clNowlA >}}

The Quarto Neovim plugin aims to not reinvent the wheel.
Existing plugins in the Neovim ecosystem are leveraged to provide the full experience.
Some of the features provided by `quarto-nvim` and enhanced by plugins found in the kickstarter configuration are:

-   Preview for Quarto documents.
-   Syntax highlighting for markdown and embedded languages
-   Completion for embedded languages (e.g. Python, R, Julia, etc.)
-   Commands and key-bindings for running cells and selected lines.
-   Completion for bibliography references, file paths, LaTeX math symbols, emoji.
-   Optional spellchecking and completion.
-   Code snippets.
-   Export of code chunks into standalone scripts.

See the article on [Using Neovim with Quarto](/docs/tools/neovim.qmd) for all of the details.

### Basic Workflow

Quarto `.qmd` files contain a combination of markdown and executable code cells.
Here's what it might look like in Neovim to edit and preview a `.qmd` file:

![](./images/neovim-overview.png){.border fig-alt="Three windows arranged side by side. The window on the left is a qmd file opened in Neovim. The upper window on the right is a web browser. The contents of the qmd document are rendered by Quarto in the browser window. The third window is a rendered graph showing the output of executing a code chunk in the qmd file."}

The `.qmd` file you see on the left is *rendered* into the HTML document you see on the right side.
This is the basic model for Quarto publishing---take a source document and render it to a variety of [output formats](/docs/output-formats/all-formats.qmd), including HTML, PDF, MS Word, etc.

The tutorials will make use of the `matplotlib` and `plotly` Python packages---the commands you can use to install them are given in the table below.

+-----------+-----------------------------------------------------+
| Platform  | Commands                                            |
+===========+=====================================================+
|           | ```{.bash filename="Terminal"}                      |
| Mac/Linux | python3 -m pip install jupyter matplotlib plotly    |
|           | ```                                                 |
+-----------+-----------------------------------------------------+
|           | ```{.powershell filename="Terminal"}                |
| Windows   | py -m pip install jupyter matplotlib plotly         |
|           | ```                                                 |
+-----------+-----------------------------------------------------+

::: callout-note
Note that while this tutorial uses Python, using Julia (via the [IJulia](https://julialang.github.io/IJulia.jl/stable/) kernel) or using R (via the [knitr package](https://github.com/yihui/knitr)), are also well supported.
See the articles on [Using Julia](/docs/computations/julia.qmd) and [Using R](/docs/computations/r.qmd) for additional details.
:::

## Render and Preview

We'll start out by rendering a simple example (`hello.qmd`) to a couple of formats.
If you want to follow along step-by-step in your own environment, create a new file named `hello.qmd` and copy the following content into it.

```` markdown
---
title: "Quarto Basics"
format:
  html:
    code-fold: true
jupyter: python3
---

For a demonstration of a line plot on a polar axis, see @fig-polar.

```{{python}}
#| label: fig-polar
#| fig-cap: "A line plot on a polar axis"

import numpy as np
import matplotlib.pyplot as plt

r = np.arange(0, 2, 0.01)
theta = 2 * np.pi * r
fig, ax = plt.subplots(
  subplot_kw = {'projection': 'polar'} 
)
ax.plot(theta, r);
ax.set_rticks([0.5, 1, 1.5, 2]);
ax.grid(True);
plt.show()
```
````

To render and preview, execute the **QuartoPreview** command by pressing `:` to enter command mode and typing the command (there is autocompletion if you press the <kbd>tab</kbd> key).
In the kickstarter configuration, there are more shortcuts starting with <kbd>space q</kbd> (spacebar followed by q, in normal mode).

### How it Works

When you render a `.qmd` file with Quarto, the executable code blocks are processed by Jupyter, and the resulting combination of code, markdown, and output is converted to plain markdown.
Then, this markdown is processed by [Pandoc](http://pandoc.org/), which creates the finished format.

![](images/qmd-how-it-works.png){alt="" fig-alt="Workflow diagram starting with a qmd file, then Jupyter, then md, then pandoc, then PDF, MS Word, or HTML." fig-align="left"}

### Authoring

Let's try making a small change and then re-rendering:

1.  Change the line of code that defines `theta` as follows:

    ``` python
    theta = 4 * np.pi * r
    ```

2.  Save the file using either `:w` in normal mode or `ctrl-s` ^[if you are using the kickstarter configuration -- otherwise `ctrl-s` puts your terminal in a waiting mode until you press `ctrl+q`, which can be confusing]

The document is rendered, and the browser preview is updated.
This is the basic workflow for authoring with Quarto.

### Running Cells

{{< include _neovim-running-cells.md >}}

There are few different types of content in `hello.qmd`, let's work a bit with each type.

## YAML Options

At the top of the file there is a YAML block with document level options.

``` yaml
---
title: "Quarto Basics"
format:
  html:
    code-fold: true
jupyter: python3
---
```

Try changing the `code-fold` option to `false`:

``` yaml
format: 
  html:
    code-fold: false
```

Then re-render the document by saving it.
You'll notice that the code is now shown above the plot, where previously it was hidden with a **Code** button that could be used to show it.

Narrative content is written using markdown.
Here we specify a heading and a cross-reference to the figure created in the code cell below.

``` markdown
## Polar Axis

For a demonstration of a line plot on a polar axis, see @fig-polar.
```

Try changing the heading and re-rendering---the preview will update with the new heading text.

## Code Cells

Code cells contain executable code to be run during render, with the output (and optionally the code) included in the rendered document.

```` markdown
```{{python}}
#| label: fig-polar
#| fig-cap: "A line plot on a polar axis"

import numpy as np
import matplotlib.pyplot as plt

r = np.arange(0, 2, 0.01)
theta = 2 * np.pi * r
fig, ax = plt.subplots(
  subplot_kw = {'projection': 'polar'} 
)
ax.plot(theta, r)
ax.set_rticks([0.5, 1, 1.5, 2])
ax.grid(True)
plt.show()
```
````

You are likely familiar with the Matplotlib code given here.
However, there are some less familiar components at the top of the code cell: `label` and `fig-cap` options.
Cell options are written in YAML using a specially prefixed comment (`#|`).

In this example, the cell options are used to make the figure cross-reference-able.
Try changing the `fig-cap` and/or the code then re-rendering to see the updated preview.

There are a wide variety of [cell options](/docs/reference/cells/cells-jupyter.qmd) that you can apply to tailor your output.
We'll delve into these options in the next tutorial.

::: callout-note
One particularly useful cell option for figures is `fig-alt`, which enables you to add alternative text to images for users with visual impairments.
See Amy Cesal's article on [Writing Alt Text for Data Visualization](https://medium.com/nightingale/writing-alt-text-for-data-visualization-2a218ef43f81) to learn more.
:::


## Next Up

{{< include _footer.md >}}

See the article on [Using Neovim with Quarto](/docs/tools/neovim.qmd) to learn more about installing, using, and customizing Neovim for Quarto.
```````

## File: docs/get-started/hello/rstudio.qmd
```````
---
title: "Tutorial: Hello, Quarto"
editor_options:
  markdown:
    wrap: sentence
    canonical: true
tool:
  name: rstudio
---

{{< include ../_tool-chooser.md >}}

## Overview

Quarto is a multi-language, [next-generation](/docs/faq/rmarkdown.qmd) version of R Markdown from Posit and includes dozens of new features and capabilities while at the same being able to render most existing Rmd files without modification.

In this tutorial, we'll show you how to use RStudio with Quarto.
You'll edit code and markdown in RStudio just as you would with any computational document (e.g., R Markdown) and preview the rendered document in the Viewer tab as you work.

The following is a Quarto document with the extension `.qmd` (on the left), along with its rendered version as HTML (on the right).
You could also choose to render it into other formats like PDF, MS Word, etc.

![](images/rstudio-hello.png){.column-page-right .border fig-alt="RStudio with a Quarto document titled \"Penguins, meet Quarto!\" open on the left side and the rendered version of the document on the right side." fig-align="center"}

This is the basic model for Quarto publishing---take a source document and render it to a variety of output formats.

If you would like a video introduction to Quarto before you dive into the tutorial, watch the [Get Started with Quarto](https://youtu.be/_f3latmOhew) where you can see a preview of authoring a Quarto document with executable code chunks, rendering to multiple formats, including revealjs presentations, creating a website, and publishing on QuartoPub.

{{< video "https://www.youtube.com/embed/_f3latmOhew" >}}

If you would like to follow along with this tutorial in your own environment, follow the steps outlined below.

1.  Download and install the latest release of RStudio:

    ::: {.callout appearance="minimal"}
    <i class="bi bi-download"></i> [Download RStudio](https://posit.co/download/rstudio-desktop/)
    :::

2.  Be sure that you have installed the `tidyverse` and `palmerpenguins` packages:

    ``` r
    install.packages("tidyverse")
    install.packages("palmerpenguins")
    ```

3.  Download the Quarto document (`.qmd`) below, open it in RStudio, and click on <kbd>![](images/rstudio-render-button.png){width="25" height="20"}</kbd> Render.

    ::: {.callout appearance="minimal"}
    <i class="bi bi-download"></i> [Download hello.qmd](rstudio/_hello.qmd){download="hello.qmd"}
    :::

## Rendering

Use the <kbd>![](images/rstudio-render-button.png){width="25" height="20"}</kbd> **Render** button in the RStudio IDE to render the file and preview the output with a single click or keyboard shortcut (⇧⌘K).

![](images/rstudio-render.png){.border fig-alt="Top of the text editor in RStudio with the Render button highlighted with a purple box." fig-align="center"}

If you prefer to automatically render whenever you save, you can check the Render on Save option on the editor toolbar.
The preview will update whenever you re-render the document.
Side-by-side preview works for both HTML and PDF outputs.

![](images/rstudio-render-on-save.png){.border fig-alt="Top of the text editor in RStudio with the Render on Save checkbox checked and highlighted with a purple box." fig-align="center"}

Note that documents can also be rendered from the R console via the **quarto** package:

``` r
install.packages("quarto")
quarto::quarto_render("hello.qmd")
```

When rendering, Quarto generates a new file that contains selected text, code, and results from the .qmd file.
The new file can be an [HTML](/docs/output-formats/all-formats.qmd), [PDF](/docs/output-formats/pdf-basics.qmd), [MS Word](/docs/output-formats/ms-word.qmd) document, [presentation](/docs/presentations/index.qmd), [website](/docs/websites/website-basics.qmd), [book](/docs/books/book-basics.qmd), [interactive document](/docs/interactive/index.qmd), or [other format](/docs/output-formats/all-formats.qmd).

## Authoring

In the image below, we can see the same document in the two modes of the RStudio editor: visual (on the left) and source (on the right).
RStudio's [visual editor](/docs/visual-editor/index.qmd) offers a [WYSIWYM](https://en.wikipedia.org/wiki/WYSIWYM) authoring experience for markdown.
For formatting (e.g., bolding text), you can use the toolbar, a keyboard shortcut (⌘B), or the markdown construct (`**bold**`).
The plain text source code underlying the document is written for you, and you can view/edit it at any point by switching to source mode for editing.
You can toggle back and forth between these two modes by clicking on **Source** and **Visual** in the editor toolbar (or using the keyboard shortcut ⌘⇧ F4).

![](images/rstudio-source-visual.png){.column-page-right fig-alt="On the left: Document in the visual editor. On the right: Same document in the source editor. The visual/source editor toggle is highlighted in both documents marking their current state. The document shown is the \"Hello Quarto\" document from a previous image on the page." fig-align="center"}

Next, let's turn our attention to the contents of our Quarto document.
The file contains three types of content: a YAML header, code chunks, and markdown text.

### YAML header

An (optional) YAML header demarcated by three dashes (`---`) on either end.

``` yaml
---
title: "Hello, Quarto"
format: html
editor: visual
---
```

When rendered, the `title`, `"Hello, Quarto"`, will appear at the top of the rendered document with a larger font size than the rest of the document.
The other two YAML fields denote that the output should be in `html` `format` and the document should open in the `visual` `editor` by default.

The basic syntax of YAML uses key-value pairs in the format `key: value`.
Other YAML fields commonly found in headers of documents include metadata like `author`, `subtitle`, `date` as well as customization options like `theme`, `fontcolor`, `fig-width`, etc.
You can find out about all available YAML fields for HTML documents [here](/docs/reference/formats/html.qmd).
The available YAML fields vary based on document format, e.g., see [here](/docs/reference/formats/pdf.qmd) for YAML fields for PDF documents and [here](/docs/reference/formats/docx.qmd) for MS Word.

### Code chunks

R code chunks identified with `{r}` with (optional) chunk options, in YAML style, identified by `#|` at the beginning of the line.

```` markdown
```{{r}}
#| label: load-packages
#| include: false

library(tidyverse)
library(palmerpenguins)
```
````

In this case, the `label` of the code chunk is `load-packages`, and we set `include` to `false` to indicate that we don't want the chunk itself or any of its outputs in the rendered documents.

In addition to rendering the complete document to view the results of code chunks, you can also run each code chunk interactively in the RStudio editor by clicking the ![](https://d33wubrfki0l68.cloudfront.net/18153fb9953057ee5cff086122bd26f9cee8fe93/3aba9/images/notebook-run-chunk.png) icon or keyboard shortcut (⇧⌘⏎).
RStudio executes the code and displays the results either inline within your file or in the Console, depending on your preference.

![](images/rstudio-inline-output.png){fig-alt="In the background, the code chunk labeled plot-penguins from hello.qmd. The chunk is partially covered by its output, a scatterplot showing the relationship between bill length and flipper length of penguins, colors by species. The button for running the code chunk is highlighted, and an arrow extends to the plot, showing that clicking the button results in the plot being generated." fig-align="center"}

### Markdown text

Text with formatting, including section headings, hyperlinks, an embedded image, and an inline code chunk.

![](images/rstudio-text.png){.border fig-alt="Text portion of the of the linked example document titled \"Penguins, meet Quarto!\", with an annotation that reads \"Text\"." fig-align="center"}

Quarto uses markdown syntax for text.
If using the visual editor, you won't need to learn much markdown syntax for authoring your document, as you can use the menus and shortcuts to add a heading, bold text, insert a table, etc.
If using the source editor, you can achieve these with markdown expressions like `##`, `**bold**`, etc.

## How it works

When you render a Quarto document, first [knitr](http://yihui.name/knitr/) executes all of the code chunks and creates a new markdown (.md) document, which includes the code and its output.
The markdown file generated is then processed by [pandoc](http://pandoc.org/), which creates the finished format.
The Render button encapsulates these actions and executes them in the right order for you.

![](images/rstudio-qmd-how-it-works.png){.border fig-alt="Workflow diagram starting with a qmd file, then knitr, then md, then pandoc, then PDF, MS Word, or HTML." fig-align="center"}

{{< include _footer.md >}}
```````

## File: docs/get-started/hello/text-editor.qmd
```````
---
title: "Tutorial: Hello, Quarto"
editor_options:
  markdown:
    wrap: sentence
    canonical: true
tool:
  name: text-editor
---

{{< include ../_tool-chooser.md >}}


## Overview

In this tutorial we'll show you how to use your favorite text editor with Quarto.
You'll edit plain text `.qmd` files and preview the rendered document in a web browser as you work.

Below is an overview of how this will look.

![](images/text-editor-quarto-preview.png){.border .column-body-outset-right fig-alt="On the left: A VS Code notebook titled Quarto Basics containing some text, a code cell, and the result of the code cell, which is a line plot on a polar axis. On the right: Rendered version of the same notebook."}

The notebook on the left is *rendered* into the HTML version you see on the right.
This is the basic model for Quarto publishing---take a source document (in this case a notebook) and render it to a variety of [output formats](/docs/output-formats/all-formats.qmd), including HTML, PDF, MS Word, etc.

The tutorials will make use of the `matplotlib` and `plotly` Python packages---the commands you can use to install them are given in the table below.

+-----------+---------------------------------------------------+
| Platform  | Commands                                          |
+===========+===================================================+
|           | ```{.bash filename="Terminal"}                    |
| Mac/Linux | python3 -m pip install jupyter matplotlib plotly  |
|           | ```                                               |
+-----------+---------------------------------------------------+
|           | ```{.powershell filename="Terminal"}              |
| Windows   | py -m pip install jupyter matplotlib plotly       |
|           | ```                                               |
+-----------+---------------------------------------------------+

::: callout-note
Note that while this tutorial uses Python, using Julia (via the [IJulia](https://julialang.github.io/IJulia.jl/stable/) kernel) is also well supported.
See the article on [Using Julia](/docs/computations/julia.qmd) for additional details.
:::

## Editor Modes

If you are using VS Code, you should install the [Quarto Extension](https://marketplace.visualstudio.com/items?itemName=quarto.quarto) for VS Code before proceeding.
The extension provides syntax highlighting for markdown and embedded languages, completion for embedded languages (e.g. Python, R, Julia, LaTeX, etc.), commands and key-bindings for running cells and selected line(s), and much more.

There are also Quarto syntax highlighting modes available for several other editors:

| Editor       | Extension                                      |
|--------------|------------------------------------------------|
| Emacs        | <https://github.com/quarto-dev/quarto-emacs>   |
| Vim / Neovim | <https://github.com/quarto-dev/quarto-vim>     |
| Neovim       | <https://github.com/quarto-dev/quarto-nvim>    |
| Sublime Text | <https://github.com/quarto-dev/quarto-sublime> |

: {tbl-colwidths="\[30,70\]"}

## Rendering

We'll start out by rendering a simple example (`hello.qmd`) to a couple of formats.
If you want to follow along step-by-step in your own environment, create a new file named `hello.qmd` and copy the following content into it.

```` markdown
---
title: "Quarto Basics"
format:
  html:
    code-fold: true
jupyter: python3
---

For a demonstration of a line plot on a polar axis, see @fig-polar.

```{{python}}
#| label: fig-polar
#| fig-cap: "A line plot on a polar axis"

import numpy as np
import matplotlib.pyplot as plt

r = np.arange(0, 2, 0.01)
theta = 2 * np.pi * r
fig, ax = plt.subplots(
  subplot_kw = {'projection': 'polar'} 
)
ax.plot(theta, r)
ax.set_rticks([0.5, 1, 1.5, 2])
ax.grid(True)
plt.show()
```
````

Next, open a Terminal and switch to the directory containing `hello.qmd`.

Let's start by rendering the document to a couple of formats.

``` {.bash filename="Terminal"}
quarto render hello.qmd --to html
quarto render hello.qmd --to docx
```

Note that the target file (in this case `hello.qmd`) should always be the very first command line argument.

When you render a `.qmd` file with Quarto, the executable code blocks are processed by Jupyter, and the resulting combination of code, markdown, and output is converted to plain markdown.
Then, this markdown is processed by [Pandoc](http://pandoc.org/), which creates the finished format.

![](images/qmd-how-it-works.png){alt="" fig-alt="Workflow diagram starting with a qmd file, then Jupyter, then md, then pandoc, then PDF, MS Word, or HTML." fig-align="left"}

## Authoring

The `quarto render` command is used to create the final version of your document for distribution.
However, during authoring you'll use the `quarto preview` command.
Try it now from the Terminal with `hello.qmd`.

``` {.bash filename="Terminal"}
quarto preview hello.qmd
```

This will render your document and then display it in a web browser.

![](images/quarto-preview.png){.border fig-alt="Rendered version of the earlier notebook in a web browser." width="500"}

You might want to position your editor and the browser preview side-by-side so you can see changes as you work.

![](images/text-editor-quarto-preview.png){.border .column-body-outset-right fig-alt="Side-by-side preview of notebook on the left and live preview in the browser on the right."}

To see live preview in action:

1.  Change the line of code that defines `theta` as follows:

    ``` python
    theta = 4 * np.pi * r
    ```

2.  Save the file.
    The document is re-rendered, and the browser preview is updated.

This is the basic workflow for authoring with Quarto.

There are few different types of content in `hello.qmd`, let's work a bit with each type.

## YAML Options

At the top of the file there is a YAML block with document level options.

``` yaml
---
title: "Quarto Basics"
format:
  html:
    code-fold: true
jupyter: python3
---
```

Try changing the `code-fold` option to `false`:

``` yaml
format: 
  html:
    code-fold: false
```

Then save the file.
You'll notice that the code is now shown above the plot, where previously it was hidden with a **Code** button that could be used to show it.

## Markdown

Narrative content is written using markdown.
Here we specify a heading and a cross-reference to the figure created in the code cell below.

``` markdown
## Polar Axis

For a demonstration of a line plot on a polar axis, see @fig-polar.
```

Try changing the heading and saving the notebook---the preview will update with the new heading text.

## Code Cells

Code cells contain executable code to be run during render, with the output (and optionally the code) included in the rendered document.

```` markdown
```{{python}}
#| label: fig-polar
#| fig-cap: "A line plot on a polar axis"

import numpy as np
import matplotlib.pyplot as plt

r = np.arange(0, 2, 0.01)
theta = 2 * np.pi * r
fig, ax = plt.subplots(
  subplot_kw = {'projection': 'polar'} 
)
ax.plot(theta, r)
ax.set_rticks([0.5, 1, 1.5, 2])
ax.grid(True)
plt.show()
```
````

You are likely familiar with the Matplotlib code given here.
However, there are some less familiar components at the top of the code cell: `label` and `fig-cap` options.
Cell options are written in YAML using a specially prefixed comment (`#|`).

In this example, the cell options are used to make the figure cross-reference-able.
Try changing the `fig-cap` and/or the code, running the cell, and then saving the file to see the updated preview.

There are a wide variety of [cell options](/docs/reference/cells/cells-jupyter.qmd) that you can apply to tailor your output.
We'll delve into these options in the next tutorial.

::: callout-note
One particularly useful cell option for figures is `fig-alt`, which enables you to add alternative text to images for users with visual impairments.
See Amy Cesal's article on [Writing Alt Text for Data Visualization](https://medium.com/nightingale/writing-alt-text-for-data-visualization-2a218ef43f81) to learn more.
:::

{{< include _footer.md >}}
```````

## File: docs/get-started/hello/vscode.qmd
```````
---
title: "Tutorial: Hello, Quarto"
editor_options:
  markdown:
    wrap: sentence
    canonical: true
tool:
  name: vscode
---

{{< include ../_tool-chooser.md >}}


## Overview

In this tutorial we'll show you how to use Quarto with VS Code.
Before getting started, you should install the [Quarto VS Code Extension](https://marketplace.visualstudio.com/items?itemName=quarto.quarto), which includes many tools that enhance working with Quarto, including:

-   Integrated render and preview for Quarto documents.
-   Syntax highlighting for markdown and embedded languages
-   Completion and diagnostics for YAML options
-   Completion for embedded languages (e.g. Python, R, Julia, etc.)
-   Commands and key-bindings for running cells and selected lines.

You can install the Quarto extension from within the **Extensions** tab in VS Code, from the [Extension Marketplace](https://marketplace.visualstudio.com/items?itemName=quarto.quarto), the [Open VSX Registry](https://open-vsx.org/extension/quarto/quarto) or directly from a [VISX extension file](https://github.com/quarto-dev/quarto-vscode#visx-install).

::: callout-note
This tutorial focuses on editing plain text Quarto `.qmd` files in VS Code. Depending on your preferences and the task at hand there are two other editing modes available for Quarto documents: the [Visual Editor](/docs/tools/vscode/visual-editor.qmd) and the [Notebook Editor](/docs/tools/vscode/notebook.qmd). For the purposes of learning we recommend you work through this tutorial using the VS Code text editor, then after you've mastered the basics explore using the other editing modes.
:::

### Basic Workflow

Quarto `.qmd` files contain a combination of markdown and executable code cells.
Here's what it might look like in VS Code to edit and preview a `.qmd` file:

![](/docs/tools/images/vscode-render.png){.border fig-alt="Two windows arranged side by side. The window on the left is a qmd file opened in VSCode. The contents of this document are the same as the first part of the Getting Started: Welcome section of this website. The contents of this document are rendered by Quarto in the window on the right."}

The document on the left is *rendered* into the HTML version you see on the right.
This is the basic model for Quarto publishing---take a source document and render it to a variety of [output formats](/docs/output-formats/all-formats.qmd), including HTML, PDF, MS Word, etc.

The tutorials will make use of the `matplotlib` and `plotly` Python packages---the commands you can use to install them are given in the table below.

+-----------+---------------------------------------------------+
| Platform  | Commands                                          |
+===========+===================================================+
|           | ```{.bash filename="Terminal"}                    |
| Mac/Linux | python3 -m pip install jupyter matplotlib plotly  |
|           | ```                                               |
+-----------+---------------------------------------------------+
|           | ```{.powershell filename="Terminal"}              |
| Windows   | py -m pip install jupyter matplotlib plotly       |
|           | ```                                               |
+-----------+---------------------------------------------------+

::: callout-note
Note that while this tutorial uses Python, using Julia (via the [IJulia](https://julialang.github.io/IJulia.jl/stable/) kernel) is also well supported.
See the article on [Using Julia](/docs/computations/julia.qmd) for additional details.
:::

## Render and Preview

We'll start out by rendering a simple example (`hello.qmd`) to a couple of formats.
If you want to follow along step-by-step in your own environment, create a new file named `hello.qmd` and copy the following content into it.

```` markdown
---
title: "Quarto Basics"
format:
  html:
    code-fold: true
jupyter: python3
---

For a demonstration of a line plot on a polar axis, see @fig-polar.

```{{python}}
#| label: fig-polar
#| fig-cap: "A line plot on a polar axis"

import numpy as np
import matplotlib.pyplot as plt

r = np.arange(0, 2, 0.01)
theta = 2 * np.pi * r
fig, ax = plt.subplots(
  subplot_kw = {'projection': 'polar'} 
)
ax.plot(theta, r)
ax.set_rticks([0.5, 1, 1.5, 2])
ax.grid(True)
plt.show()
```
````

Note that if you are following along be sure to install the required dependencies if you haven't already:

+-----------+----------------------------------------------------+
| Platform  | Commands                                           |
+===========+====================================================+
|           | ```{.bash filename="Terminal"}                     |
| Mac/Linux | python3 -m pip install jupyter matplotlib plotly   |
|           | ```                                                |
+-----------+----------------------------------------------------+
|           | ```{.powershell filename="Terminal"}               |
| Windows   | py -m pip install jupyter matplotlib plotly        |
|           | ```                                                |
+-----------+----------------------------------------------------+

To render and preview, execute the **Quarto: Preview** command.
You can alternatively use the <kbd>Ctrl+Shift+K</kbd> keyboard shortcut, or the **Preview** button (![](/docs/tools/images/vscode-preview-icon.svg){fig-alt="Preview icon"}) at the top right of the editor:

![](/docs/tools/images/vscode-preview-button.png){.border fig-alt="The top of the Visual Studio code editor. The right side of the editor tab area includes a Preview button."}

::: {.callout-note appearance="simple"}
Note that on the Mac you should use `Cmd` rather than `Ctrl` as the prefix for all Quarto keyboard shortcuts.
:::


### How it Works

When you render a `.qmd` file with Quarto, the executable code blocks are processed by Jupyter, and the resulting combination of code, markdown, and output is converted to plain markdown.
Then, this markdown is processed by [Pandoc](http://pandoc.org/), which creates the finished format.

![](images/qmd-how-it-works.png){alt="" fig-alt="Workflow diagram starting with a qmd file, then Jupyter, then md, then pandoc, then PDF, MS Word, or HTML." fig-align="left"}

### Authoring

Let's try making a small change and then re-rendering:

1.  Change the line of code that defines `theta` as follows:

    ``` python
    theta = 4 * np.pi * r
    ```

2.  Re-render the file (using **Quarto: Preview** or the <kbd>Ctrl+Shift+K</kbd> shortcut) The document is rendered, and the browser preview is updated.

This is the basic workflow for authoring with Quarto.

You do not need to save the file before rendering (as this happens automatically when you render).
If you prefer, you can configure the Quarto extension to render whenever you save a document.
See the documentation on [Render on Save](/docs/tools/vscode/index.qmd#render-on-save) for additional details.

### Running Cells

You don't need to fully render documents in order to iterate on code cells.
You'll notice that there is a **Run Cell** button above the code cell.
Click that button to execute the cell (output is shown side by side in the Jupyter interactive console):

![](/docs/tools/images/vscode-execute-cell.png){.border fig-alt="VS Code with two panes open, vscode.qmd source code on the right, and the interactive output of that code shown in a second pane on the left."}

Execute the current cell with <kbd>Ctrl+Shift+Enter</kbd>, the current line(s) with <kbd>Ctrl+Enter</kbd>, or previous cells with <kbd>Ctrl+Alt+P</kbd> (note that on the Mac you should use `Cmd` rather than `Ctrl` as the prefix for all Quarto keyboard shortcuts).

There are few different types of content in `hello.qmd`, let's work a bit with each type.

## YAML Options

At the top of the file there is a YAML block with document level options.

``` yaml
---
title: "Quarto Basics"
format:
  html:
    code-fold: true
jupyter: python3
---
```

Try changing the `code-fold` option to `false`:

``` yaml
format: 
  html:
    code-fold: false
```

Then re-render the document (again, no need to save before rendering).
You'll notice that the code is now shown above the plot, where previously it was hidden with a **Code** button that could be used to show it.

## Markdown

Narrative content is written using markdown.
Here we specify a heading and a cross-reference to the figure created in the code cell below.

``` markdown
## Polar Axis

For a demonstration of a line plot on a polar axis, see @fig-polar.
```

Try changing the heading and re-rendering---the preview will update with the new heading text.

## Code Cells

Code cells contain executable code to be run during render, with the output (and optionally the code) included in the rendered document.

```` markdown
```{{python}}
#| label: fig-polar
#| fig-cap: "A line plot on a polar axis"

import numpy as np
import matplotlib.pyplot as plt

r = np.arange(0, 2, 0.01)
theta = 2 * np.pi * r
fig, ax = plt.subplots(
  subplot_kw = {'projection': 'polar'} 
)
ax.plot(theta, r)
ax.set_rticks([0.5, 1, 1.5, 2])
ax.grid(True)
plt.show()
```
````

You are likely familiar with the Matplotlib code given here.
However, there are some less familiar components at the top of the code cell: `label` and `fig-cap` options.
Cell options are written in YAML using a specially prefixed comment (`#|`).

In this example, the cell options are used to make the figure cross-reference-able.
Try changing the `fig-cap` and/or the code then re-rendering to see the updated preview.

There are a wide variety of [cell options](/docs/reference/cells/cells-jupyter.qmd) that you can apply to tailor your output.
We'll delve into these options in the next tutorial.

::: callout-note
One particularly useful cell option for figures is `fig-alt`, which enables you to add alternative text to images for users with visual impairments.
See Amy Cesal's article on [Writing Alt Text for Data Visualization](https://medium.com/nightingale/writing-alt-text-for-data-visualization-2a218ef43f81) to learn more.
:::

## External Preview

In this tutorial we've demonstrated previewing rendered output in a pane within VS Code.
If you prefer to use an external browser for preview (or have no preview triggered at all by rendering) you can use the **Preview Type** option to specify an alternate behavior:

![](/docs/tools/images/vscode-preview-settings.png){.border fig-alt="VS Code settings interface with 'quarto preview type' entered into the search bar. User settings reveals Quarto > Render: Preview Type, with a dropdown to select location for document preview after render. The default, internal, is selected, which previews using a side-by-side panel in VS Code. The other two options in the dropdown are external and none."}

{{< include _footer.md >}}

Additionally, you may wish to learn about the other editing modes for Quarto documents available within VS Code:

-  The [Visual Editor](/docs/tools/vscode/visual-editor.qmd) for WYSIWYG editing of `.qmd` documents.

-  The [Notebook Editor](/docs/tools/vscode/notebook.qmd) for editing `.ipynb` notebooks.
```````

## File: docs/get-started/index.qmd
```````
---
title: "Get Started"
subtitle: "Install Quarto, then check out the tutorials to learn the basics."
format:
  html:
    include-in-header: 
      - '../download/_download.html'
    include-before-body:
      - '_tool-menu.html'
    include-after-body: 
      text: |
        <script type="text/javascript">
        window['quarto-download-release'] = true;
        window['quarto-download-prerelease'] = true;
        window['quarto-download-nonews'] = true;
        window["quarto-prerelease-mode"] = '{{< meta prerelease-mode >}}';
        </script>      
page-layout: full
toc: false
anchor-sections: false
editor: source
aliases:
  - /docs/getting-started/installation.html
image: /images/hero_right.png
---

::: {.grid .step .column-page-right}
::: {.g-col-lg-3 .g-col-12}
## Step 1 

#### Install Quarto {.fw-light}
:::

::: {.g-col-lg-9 .g-col-12}


::: {.content-visible when-profile="rc"}

{{< include ../download/_download-pre.md >}}

:::

::: {.content-visible unless-profile="rc"}

{{< include ../download/_download.md >}}

:::


:::
:::

::: {.grid .step .column-page-right}
::: {.g-col-lg-3 .g-col-12}
## Step 2 

#### Choose your tool<br/>and get started{.fw-light}
:::

::: {.tool .g-col-lg-9 .g-col-12}


<a href="hello/vscode.html" role="button" class="btn btn-outline-light">
![](images/vscode-logo.png){width="77" fig-alt="VS Code logo."}VS Code
</a>

<a href="hello/jupyter.html" role="button" class="btn btn-outline-light">
![](images/jupyter-logo.png){width="77" fig-alt="Jupyter logo."}Jupyter
</a>

<a href="hello/rstudio.html" role="button" class="btn btn-outline-light">
![](images/rstudio-logo.png){width="77" fig-alt="RStudio logo."}RStudio
</a>


<a href="hello/neovim.html" role="button" class="btn btn-outline-light">
![](images/neovim-logo.svg){width="77" fig-alt="Neovim logo."}Neovim
</a>


<a href="hello/text-editor.html" role="button" class="btn btn-outline-light">
![](images/text-editor-logo.png){width="77" fig-alt="Text Editor logo: circle with white outline and black fill inside of which is a command-line prompt."}Text Editor
</a>

:::
:::
```````

## File: docs/guide/index.qmd
```````
---
title: "Guide"
subtitle: Comprehensive guide to using Quarto. If you are just starting out, you may want to  explore the [tutorials](/docs/get-started/index.qmd) to learn the basics.
page-layout: article
anchor-sections: false
search: false
listing:
  id: guide-links
  template: ../../ejs/links.ejs
  contents: guide.yml
image: /images/hero_right.png
---

::: {#guide-links .column-screen-inset-right style="max-width: 850px;"}
:::
```````

## File: docs/interactive/ojs/examples/_shiny/binning/binning-shiny-ojs.qmd
```````
---
title: "Visualizing 1 million points with OJS + Shiny"
format:
  html:
    code-tools: 
      source: https://github.com/quarto-dev/quarto-web/blob/main/docs/interactive/ojs/examples/_shiny/binning/binning-shiny-ojs.qmd
server: shiny
---

This example visualizes 1 million x/y points using 2D binning. The user can choose the number of bins.

This version uses client-side OJS to provide an input slider and the visualization, but uses server-side Shiny code to provide the data and perform the binning.

Combining OJS and Shiny in this way gives us huge gains in efficiency and performance. Compare this to a client-only implementation here: <https://connect.rstudioservices.com/01-binning-ojs/01-binning-ojs.html>.

Click the **Code** button above to see the source code.

```{ojs}
viewof bins = Inputs.range([10, 100], {value: 10, step: 1, label: "Bins"})
```

```{ojs}
Plot.plot({
  width: 600,
  height: 600,
  color: {
    scheme: "blues"
  },
  marks: [
    Plot.rect(transpose(rects), {x1: "x1", x2: "x2", y1: "y1", y2: "y2", fill: "z"})
  ]
})
```

```{r}
#| context: server-start
library(readr)
library(ggplot2)
library(dplyr)

# points.csv can be generated by running https://git.io/J0kMj
points <- read_csv("points.csv", col_types = "dd")

# Quick and dirty 2D binning implementation
bin2d <- function(x, y, breaks = 30) {
  stopifnot(length(x) == length(y))
  
  # Create cut points for the x dimension's bins
  xbreaks <- seq.int(min(x), max(x), length.out = breaks)
  # Put each x coordinate in a bin
  xbin <- cut(x, breaks = xbreaks, include.lowest = TRUE)
  
  # Now the same for y
  ybreaks <- seq.int(min(y), max(y), length.out = breaks)
  ybin <- cut(y, breaks = ybreaks, include.lowest = TRUE)
  
  # Count the number of x/y points in each 2D bin; result is a matrix
  binned <- table(xbin, ybin)

  # Convert to the data frame format that Observable Plot expects.
  # Note that the order of arguments to expand.grid matters; the
  # results need to line up with the matrix when it's turned into a vector
  cbind(
    expand.grid(x1 = head(xbreaks, -1), y1 = head(ybreaks, -1)),
    expand.grid(x2 = tail(xbreaks, -1), y2 = tail(ybreaks, -1)),
    z = as.vector(binned)
  )
}
```

```{r}
#| context: server

bins_debounced <- reactive(req(input$bins)) %>% debounce(125)

df <- reactive({
  bin2d(points$x, points$y, bins_debounced())
})

ojs_define(rects = df)
```
```````

## File: docs/interactive/ojs/examples/_shiny/data/data-shiny-ojs.qmd
```````
---
title: "Notebook with Data from Shiny"
format:
  html:
    code-tools: 
      source: https://github.com/quarto-dev/quarto-web/blob/main/docs/interactive/ojs/examples/_shiny/data/data-shiny-ojs.qmd
server: shiny
---

This example takes the existing Observable notebook [\@d3/hexbin](https://observablehq.com/@d3/hexbin) and renders the interesting parts in this page (the input slider and the output plot).

We also replace the data in the original notebook with our own copy of the data from Shiny, adding the ability to filter the data.

Click the **Code** button above to see the source code.

```{ojs}
// Import the hexbin notebook, replacing its data with our own
import {viewof radius, chart} with {data as data} from "@d3/hexbin";

// The data used by the chart is this: a transposed version of the
// diamonds Shiny reactive that is defined in the R chunk below.
data = transpose(diamonds)
```

```{ojs}
//| panel: sidebar
viewof radius

viewof cut = {
  const levels = ["Fair", "Good", "Very Good", "Premium", "Ideal"];
  return Inputs.select(levels, {value: levels, multiple: true, label: "Filter by cut:"});
}
```

```{ojs}
//| panel: fill
chart
```

```{r}
#| context: server
library(dplyr)

diamonds <- reactive({
  ggplot2::diamonds %>%
    filter(cut %in% input$cut) %>%
    select(x = carat, y = price)
})
ojs_define(diamonds)
```
```````

## File: docs/interactive/ojs/examples/_shiny/kmeans/kmeans-shiny-ojs.qmd
```````
---
title: "OJS and Shiny Reactives"
format: 
  html:
    code-tools: 
      source: https://github.com/quarto-dev/quarto-web/blob/main/docs/interactive/ojs/examples/_shiny/kmeans/kmeans-shiny-ojs.qmd
server:
  type: shiny
---

[K-Means Clustering](https://shiny.rstudio.com/gallery/kmeans-example.html) example 
from the Shiny Gallery implemented with an OJS client and Shiny Server.

The source code for client and server are shown below. Alternatively,
click **Code** and **View Source** above to see the source in full.

```{ojs}
//| panel: sidebar

vars = ["Sepal.Length", "Sepal.Width", "Petal.Length", "Petal.Width"]
viewof xcol = Inputs.select(vars, {label: "X Variable", value: vars[0]})
viewof ycol = Inputs.select(vars, {label: "Y Variable", value: vars[1]})
viewof count = Inputs.range([1, 9], {label: "Cluster Count", step: 1, value: 3})
```

```{ojs}
//| panel: fill

Plot.plot({
  color: {
    type: "ordinal",
    scheme: "category10"
  },
  marks: [
    Plot.dot(transpose(selectedData), {
      x: xcol,
      y: ycol,
      fill: (d, i) => clusters.cluster[i],
    }),
    Plot.dot(clusters.centers, { 
      x: d => d[0],
      y: d => d[1],
      r: 10,
      stroke: "black",
      fill: (d, i) => i + 1
    }),
  ]
})
```

```{r}
#| context: server-start

library(readr)
library(ggplot2)
library(dplyr)
```

```{r}
#| context: server

selectedData <- reactive({
  req(input$xcol)
  req(input$ycol)
  iris[, c(input$xcol, input$ycol)]
})

clusters <- reactive({
  req(input$count)
  kmeans(selectedData(), input$count)
})

ojs_define(selectedData, clusters)
```


::: {.panel-tabset}

### OJS Client

```{{ojs}}
//| panel: sidebar

vars = ["Sepal.Length", "Sepal.Width", "Petal.Length", "Petal.Width"]
viewof xcol = Inputs.select(vars, {label: "X Variable", value: vars[0]})
viewof ycol = Inputs.select(vars, {label: "Y Variable", value: vars[1]})
viewof count = Inputs.range([1, 9], {label: "Cluster Count", step: 1, value: 3})
```

```{{ojs}}
//| panel: fill

Plot.plot({
  color: {
    type: "ordinal",
    scheme: "category10"
  },
  marks: [
    Plot.dot(transpose(selectedData), {
      x: xcol,
      y: ycol,
      fill: (d, i) => clusters.cluster[i],
    }),
    Plot.dot(clusters.centers, { 
      x: d => d[0],
      y: d => d[1],
      r: 10,
      stroke: "black",
      fill: (d, i) => i + 1
    }),
  ]
})
```

### Shiny Server

```{{r}}
#| context: server-start

library(readr)
library(ggplot2)
library(dplyr)
```

```{{r}}
#| context: server

selectedData <- reactive({
  req(input$xcol)
  req(input$ycol)
  iris[, c(input$xcol, input$ycol)]
})

clusters <- reactive({
  req(input$count)
  kmeans(selectedData(), input$count)
})

ojs_define(selectedData, clusters)
```


:::
```````

## File: docs/interactive/ojs/examples/arquero.qmd
```````
---
title: "Arquero"
format:
  html:
    code-tools: true
---

Simple demonstration of [Arquero](https://uwdata.github.io/arquero/) using Allison Horst's [Palmer Penguins](https://allisonhorst.github.io/palmerpenguins/) dataset. 

```{ojs}
import { aq, op } from '@uwdata/arquero'
penguins = aq.loadCSV("palmer-penguins.csv")

penguins.view()

penguins
  .groupby('species')
  .filter(d => d.body_mass_g > 0)
  .rollup({
    count: op.count(),
    avg_mass: op.average('body_mass_g')
   })
  .view()
```

If you want to use inputs in an arquero query, you can use the `params` method of table.
Below is a simple example of filtering a dataset by the values provided.

```{ojs}
//| panel: input
viewof bill_length_min = Inputs.range(
  [32, 50],
  {value: 35, step: 1, label: "Bill length (min):"}
)
viewof islands = Inputs.checkbox(
  ["Torgersen", "Biscoe", "Dream"],
  { value: ["Torgersen", "Biscoe"],
    label: "Islands:"
  }
)
```

```{ojs}
penguins
  .params({
    blm: bill_length_min,
    i: islands
  })
  .filter((d, $) => op.includes($.i, d.island) && d.bill_length_mm > $.blm)
  .view()
```
```````

## File: docs/interactive/ojs/examples/github.qmd
```````
---
title: "GitHub API"
format: 
  html:
    toc: false
    code-tools: true
---

Demonstration of using the [GitHub API](https://developer.github.com/v3). 

```{ojs}
//| code-fold: true
viewof repo = Inputs.radio(
  [
    "pandas-dev/pandas",
    "tidyverse/ggplot2",
  ], 
  { label: "Repo:", value: "pandas-dev/pandas"}
)
```

```{ojs}
//| code-fold: true
import { chart } with { commits as data } from "@d3/d3-bubble-chart"
chart
```


## Data

```{ojs}
d3 = require('d3')
contributors = await d3.json(
  "https://api.github.com/repos/" + repo + "/stats/contributors"
)
commits = contributors.map(contributor => {
  const author = contributor.author;
  return {
    name: author.login,
    title: author.login,
    group: author.type,
    value: contributor.total
  }
})
```

```{ojs}
Inputs.table(commits, { sort: "value", reverse: true })
```
```````

## File: docs/interactive/ojs/examples/layout.qmd
```````
---
title: "Layout"
format:
  html:
    echo: false
    code-tools: true
    page-layout: full
    toc: false
---

You can control the layout of OJS content in a number of ways.

## `page-layout: full`

This example uses `page-layout: full` to have its contents occupy the entire width of the page:

``` yaml
---
title: "Layout"
format: 
  html: 
    page-layout: full
---
```

Enclose the inputs in a sidebar panel and the outputs in a tabset panel (click the "Code" button at top right to see the full source code):

```{ojs}
//| panel: sidebar
viewof bill_length_min = Inputs.range(
  [32, 50], 
  {value: 35, step: 1, label: "Bill length (min):"}
)
viewof islands = Inputs.checkbox(
  ["Torgersen", "Biscoe", "Dream"], 
  { value: ["Torgersen", "Biscoe"], 
    label: "Islands:"
  }
)
```

::: {#penguins-tabset .panel-tabset .ojs-track-layout}
## Plot

```{ojs}
Plot.rectY(filtered, 
  Plot.binX(
    {y: "count"}, 
    {x: "body_mass_g", fill: "species", thresholds: 20}
  ))
  .plot({
    facet: {
      data: filtered,
      x: "sex",
      y: "species",
      marginRight: 80
    },
    marks: [
      Plot.frame(),
    ]
  }
)
```

## Data

```{ojs}
Inputs.table(filtered)
```
:::

Read and filter the data based on the user's inputs:

```{ojs}
//| echo: true
data = FileAttachment("palmer-penguins.csv").csv({typed: true})
filtered = data.filter(function(penguin) {
  return bill_length_min < penguin.bill_length_mm &&
         islands.includes(penguin.island);
})
```

## `width` and `layoutWidth`: fine-grained layout tracking

Like ObservableHQ, `ojs` cells support the reactive `width` which tracks the `clientWidth` of the main HTML element. 

```{ojs}
//| echo: true
width
```

In addition, if you need the widths of specific parts of the layout, use the CSS class `ojs-track-layout` in a div. Quarto's OJS runtime tracks all such divs in `layoutWidth`. In this example, the tabset above has id `penguins-tabset`, and you can see its `clientWidth` reactively below. If this webpage is sufficiently wide, the sidebar will take up some of the space and the width of the resulting tabset will be smaller:

```{ojs}
//| echo: true
layoutWidth
```
```````

## File: docs/interactive/ojs/examples/noaa-co2.qmd
```````
---
title: "NOAA CO2"
format: 
  html:
    code-tools: true
---

Read and plot a CSV of NOAA's Monthly [CO2 concentration data](https://gml.noaa.gov/ccgg/trends/data.html) from Mauna Loa:

```{ojs}
data = {
  const co2data = await FileAttachment("co2_mm.csv")
    .csv({ typed: true });
  return co2data.map(d => { 
    d["decimal date"] = Number(d["decimal date"]);
    d.average = Number(d.average); 
    return d; 
  });
}
Plot.plot({
  marks: [
    Plot.line(data, 
      { x: "decimal date", y: "average"}, 
      { stroke: "black" }
    )
  ]
})
```

Read the same data into R, do some grouping and summarization, then make it available using `ojs_define`:

```{r}
#| output: false
#| warning: false
library(readr)
library(dplyr)

co2 = read_csv("co2_mm.csv")  %>% 
  group_by(year) %>% 
  summarize(max = max(average))

ojs_define(co2data = co2)
```

Now plot the summarized data:

```{ojs}
Plot.plot({
  marks: [
    Plot.line(transpose(co2data), 
      {x: "year", y: "max"}, 
      { stroke: "black" }
    )
  ]}
)
```
```````

## File: docs/interactive/ojs/examples/penguins.qmd
```````
---
title: "Penguins"
format:
  html:
    toc: false
    echo: false
    keep-hidden: true
    code-tools: true
---

A simple example based on Allison Horst's [Palmer Penguins](https://allisonhorst.github.io/palmerpenguins/) dataset. Here we look at how penguin body mass varies across both sex and species (use the provided inputs to filter the dataset by bill length and island):

```{ojs}
//| panel: input
viewof bill_length_min = Inputs.range(
  [32, 50], 
  {value: 35, step: 1, label: "Bill length (min):"}
)
viewof islands = Inputs.checkbox(
  ["Torgersen", "Biscoe", "Dream"], 
  { value: ["Torgersen", "Biscoe"], 
    label: "Islands:"
  }
)
```

::: {.panel-tabset}

## Plot

```{ojs}
Plot.rectY(filtered, 
  Plot.binX(
    {y: "count"}, 
    {x: "body_mass_g", fill: "species", thresholds: 20}
  ))
  .plot({
    facet: {
      data: filtered,
      x: "sex",
      y: "species",
      marginRight: 80
    },
    marks: [
      Plot.frame(),
    ]
  }
)
```

## Data

```{ojs}
Inputs.table(filtered)
```

:::

```{ojs}
data = FileAttachment("palmer-penguins.csv").csv({ typed: true })
```

```{ojs}
filtered = data.filter(function(penguin) {
  return bill_length_min < penguin.bill_length_mm &&
         islands.includes(penguin.island);
})
```
```````

## File: docs/interactive/ojs/examples/population.qmd
```````
---
title: "Population"
format: 
  html:
    code-tools: true
    toc: false
---

This example demonstrates importing a notebook from ObervableHQ and replacing its data with data of our own (the code and data for this example were originally published  [here](https://github.com/observablehq/examples/tree/main/custom-data)).

First we read from a local JSON file into `population`:

```{ojs}
population = FileAttachment("population.json").json()
```

Then we import from <https://observablehq.com/@d3/zoomable-sunburst> and specify that we'd like to use `population` instead of the data built in to the notebook:

```{ojs}
import { chart } with { population as data } from "@d3/zoomable-sunburst"
```

Finally, we display the chart:

```{ojs}
chart
```
```````

## File: docs/interactive/ojs/examples/sunburst.qmd
```````
---
title: "Sunburst"
subtitle: "Originally published at <https://observablehq.com/@d3/zoomable-sunburst>"
author: "Mike Bostock"
date: "2018-04-30"
license: ISC License
format: 
  html:
    toc: false
    code-tools: true
---

This variant of a [sunburst diagram](https://observablehq.com/@d3/sunburst) shows only two layers of the hierarchy at a time. Click a node to zoom in, or the center to zoom out. Compare to an [icicle](https://observablehq.com/@d3/zoomable-icicle).

```{ojs}
//| code-fold: true
sunburst = {
  const root = partition(flareData);

  root.each(d => d.current = d);

  const svg = d3.create("svg")
      .attr("viewBox", [0, 0, width, width])
      .style("font", "15px sans-serif");

  const g = svg.append("g")
      .attr("transform", `translate(${width / 2},${width / 2})`);

  const path = g.append("g")
    .selectAll("path")
    .data(root.descendants().slice(1))
    .join("path")
      .attr("fill", d => { while (d.depth > 1) d = d.parent; return color(d.data.name); })
      .attr("fill-opacity", d => arcVisible(d.current) ? (d.children ? 0.6 : 0.4) : 0)
      .attr("d", d => arc(d.current));

  path.filter(d => d.children)
      .style("cursor", "pointer")
      .on("click", clicked);

  path.append("title")
      .text(d => `${d.ancestors().map(d => d.data.name).reverse().join("/")}\n${format(d.value)}`);

  const label = g.append("g")
      .attr("pointer-events", "none")
      .attr("text-anchor", "middle")
      .style("user-select", "none")
    .selectAll("text")
    .data(root.descendants().slice(1))
    .join("text")
      .attr("dy", "0.35em")
      .attr("fill-opacity", d => +labelVisible(d.current))
      .attr("transform", d => labelTransform(d.current))
      .text(d => d.data.name);

  const parent = g.append("circle")
      .datum(root)
      .attr("r", radius)
      .attr("fill", "none")
      .attr("pointer-events", "all")
      .on("click", clicked);

  function clicked(event, p) {
    parent.datum(p.parent || root);

    root.each(d => d.target = {
      x0: Math.max(0, Math.min(1, (d.x0 - p.x0) / (p.x1 - p.x0))) * 2 * Math.PI,
      x1: Math.max(0, Math.min(1, (d.x1 - p.x0) / (p.x1 - p.x0))) * 2 * Math.PI,
      y0: Math.max(0, d.y0 - p.depth),
      y1: Math.max(0, d.y1 - p.depth)
    });

    const t = g.transition().duration(750);

    // Transition the data on all arcs, even the ones that aren’t visible,
    // so that if this transition is interrupted, entering arcs will start
    // the next transition from the desired position.
    path.transition(t)
        .tween("data", d => {
          const i = d3.interpolate(d.current, d.target);
          return t => d.current = i(t);
        })
      .filter(function(d) {
        return +this.getAttribute("fill-opacity") || arcVisible(d.target);
      })
        .attr("fill-opacity", d => arcVisible(d.target) ? (d.children ? 0.6 : 0.4) : 0)
        .attrTween("d", d => () => arc(d.current));

    label.filter(function(d) {
        return +this.getAttribute("fill-opacity") || labelVisible(d.target);
      }).transition(t)
        .attr("fill-opacity", d => +labelVisible(d.target))
        .attrTween("transform", d => () => labelTransform(d.current));
  }
  
  function arcVisible(d) {
    return d.y1 <= 3 && d.y0 >= 1 && d.x1 > d.x0;
  }

  function labelVisible(d) {
    return d.y1 <= 3 && d.y0 >= 1 && (d.y1 - d.y0) * (d.x1 - d.x0) > 0.03;
  }

  function labelTransform(d) {
    const x = (d.x0 + d.x1) / 2 * 180 / Math.PI;
    const y = (d.y0 + d.y1) / 2 * radius;
    return `rotate(${x - 90}) translate(${y},0) rotate(${x < 180 ? 0 : 180})`;
  }

  return svg.node();
}
```

```{ojs}
flareData = FileAttachment("flare-2.json").json()

partition = flareData => {
  const root = d3.hierarchy(flareData)
      .sum(d => d.value)
      .sort((a, b) => b.value - a.value);
  return d3.partition()
      .size([2 * Math.PI, root.height + 1])
    (root);
}

color = d3.scaleOrdinal(
  d3.quantize(d3.interpolateRainbow, flareData.children.length + 1)
)

format = d3.format(",d")

width = 932

radius = width / 6

arc = d3.arc()
    .startAngle(d => d.x0)
    .endAngle(d => d.x1)
    .padAngle(d => Math.min((d.x1 - d.x0) / 2, 0.005))
    .padRadius(radius * 1.5)
    .innerRadius(d => d.y0 * radius)
    .outerRadius(d => Math.max(d.y0 * radius, d.y1 * radius - 1))
```
```````

## File: docs/interactive/ojs/_reactivity.qmd
```````
---
title: "Reactivity"
---

The interactivity in interactive Quarto documents comes from the
*reactive* values provided by Observable's JavaScript dialect.

# Basics

## Inputs

```{ojs}
//| echo: false
md`There are a number of built-in reactive values in Observable you can use, and they automatically change as needed. For example, the local time of day (in milliseconds) is available as the \`now\` variable: ${now}; the width of the Quarto text area is available as \`width\`: ${width}. If you use these values as inputs in your code, you expressions will automatically be recomputed as the values change. For the full set of built-in values, see the [standard library documentation](https://github.com/observablehq/stdlib/blob/main/README.md).`
```

To obtain values from user input, start with Observable's Inputs
library, which gives you a simple way to create interactive inputs:

```{ojs}
viewof number = Inputs.range([10, 100], { value: 50, step: 1 })
viewof text = Inputs.text()
```

That `viewof` statement is special to Observable's runtime.  For now,
just remember that input value expressions should have `viewof` in
front of them.

## Outputs

An interactive output is just a JavaScript expression. If that
expression includes reactive inputs, the Observable runtime library will
automatically update the output when the input changes:

```{ojs}
md`Output: **You typed "${text}" into the text box, and the slider value is ${number}.**`
```

Outputs can be anything that JavaScript can create, including HTML and
SVG elements. This green rectangle below will change with the value of the
slider:

```{ojs}
//| echo: false
{
  let result = DOM.svg(width, 50);
  let rect = svg`<rect width=${number} height="30" y="10" x="10" fill="green"></rect>`
  let label = svg`<text>${text}</text>`;
  result.appendChild(rect);
  rect.appendChild(label);
  return result;
}
```

# Example: [conditioning on a collider](http://www.the100.ci/2017/03/14/that-one-weird-third-variable-problem-nobody-ever-mentions-conditioning-on-a-collider/)

Imagine a simplistic scenario where the **fame** of an actor is a weighted function of **talent** and **looks**, each measured as independent quantities.

```{ojs}
//| echo: false
viewof talentWeight = Inputs.range([-2, 2], { value: 0.7, step: 0.01, label: "talent weight" })
viewof looksWeight = Inputs.range([-2, 2], { value: 0.7, step: 0.01, label: "looks weight" })
viewof minimum = Inputs.range([-2, 2], { value: 1, step: 0.01, label: "minimum fame" })
```

The data for the actors visualization is computed in Python:

```{python}
import numpy
import pandas as pd
ojs_define(points = pd.DataFrame(dict(
    x = numpy.random.randn(100),
    y = numpy.random.randn(100))))
```

The *fame* value for each actor, on the other hand, uses the JavaScript UI elements and so
is computed as a JavaScript value:

```{ojs}
//| output: false 
actors = transpose(points).map(v => ({
  talent: v.x,
  looks: v.y,
  fame: v.x * talentWeight + v.y * looksWeight
}));
```

If we look at actors that are talented or good-looking, a surprising phenomenon happens: there appears to be a causal relationship between two independent variables. 
This idea that "the better a famous actor looks, the less talented they are" manifests itself in our model as a sloped line fit.
The reality, however, is that it's simply more common for actors to be good-looking but not too talented or talented but not too good-looking, than it is for actors to be good-looking *and* talented. 

```{ojs}
//| label: fig-collider
//| fig-cap: "An example of conditioning on a collider. When you fit a regression line to a dataset that has undergone a selection process that depends on multiple values, there exists a dependency between the two values, but there's no causation relationship."
//| echo: false
{
  const result = d3.create("svg").attr("width", width).attr("height", 300);
  const margin = 20;
  const xScale = d3.scaleLinear().domain([-2, 2]).range([margin, 300 - margin]);
  const yScale = d3.scaleLinear().domain([-2, 2]).range([300 - margin, margin]);
  const points = result
    .append("g")
    .selectAll("circle")
    .data(actors)
    .join(enter => {
       const sel = enter
         .append("circle")
         .attr("r", 3)
         .attr("cx", d => xScale(d.talent))
         .attr("cy", d => yScale(d.looks))
         .attr("fill", d3.lab(50, 40, 20));
       return sel.filter(d => d.fame <= minimum)
         .attr("fill", "rgb(200, 200, 200)")
         .attr("r", 2);
    });
    
  const linearRegression = regression.regressionLinear()
    .x(d => d.talent)
    .y(d => d.looks)
    .domain([-2, 2]);

  const chosenActors = actors
    .filter(d => d.fame > minimum);

  const line = result
    .append("g")
    .append("line")
    .attr("stroke", d3.lab(20, 40, 20))
    .attr("stroke-width", 1.5)
    .datum(linearRegression(chosenActors))
    .attr("x1", d => xScale(d[0][0]))
    .attr("x2", d => xScale(d[1][0]))
    .attr("y1", d => yScale(d[0][1]))
    .attr("y2", d => yScale(d[1][1]));


  const xAxis = d3.axisBottom(xScale).ticks(3);
  result.append("g")
    .attr("transform", `translate(0, ${yScale(0)})`)
    .call(xAxis);

  result.append("text")
    .attr("x", xScale(0.05))
    .attr("y", yScale(2))
    .text("Looks");

  result.append("text")
    .attr("y", yScale(0))
    .attr("x", xScale(2))
    .text("Talent");

  const yAxis = d3.axisLeft(yScale).ticks(3);
  result.append("g")
    .attr("transform", `translate(${xScale(0)}, 0)`)
    .call(yAxis);
  
  return result.node();
}
```

# More details

## All the inputs in the standard library

There are many ready-made input UI elements: see the [Observable documentation]() for details.

## Reactivity in depth

TBF

* Generators
* Converting callback style to reactive style
* Converting reactive style to callback style

<!-- Includes + Definitions -->

```{ojs}
//| echo: false
//| output: false
transpose = function(df)
{
  const keys = Object.keys(df);
  return df[keys[0]]
    .map((v, i) => Object.fromEntries(keys.map(key => [key, df[key][i] || undefined])))
    .filter(v => Object.values(v).every(e => e !== undefined));
}
regression = require('d3-regression@1');
```
```````

## File: docs/interactive/ojs/code-reuse.qmd
```````
---
title: "Code Reuse"
---

As you build larger Quarto projects (like [websites](/docs/websites/) and [books](/docs/books/)) that incorporate OJS, you'll likely want to re-use code, data, and output across different pages.

## Modules

JavaScript modules are directly supported in Quarto's OJS blocks. For example, if we have the following source file `square.js`:

``` js
export function square(x) {
  return x * x;
}
```

Then you can import and use the `square()` function as follows:

```{ojs}
import { square } from "./square.js"
square(5)
```

## Data

You may be using Python or R to pre-process data that is then provided to OJS via the `ojs_define()` function (this is described in more depth in the [Data Sources](data-sources.qmd#python-and-r) article). If you want to share data prepared in this fashion you can import it directly from another `.qmd`.

For example, here we import the `co2data` that we read and pre-processed with dplyr in [`data-sources.qmd`](data-sources.qmd):

```{ojs}
import { co2data } from "./data-sources.qmd";
Inputs.table(transpose(co2data))
```

## Output

You can import any reactive value from another `.qmd` file. Here, we're reusing a chart directly from [`data-sources.qmd`](data-sources.qmd):

```{ojs}
import { yearlyChart } from "./data-sources.qmd";
yearlyChart
```
```````

## File: docs/interactive/ojs/data-sources.qmd
```````
---
title: "Data Sources"
format: html
execute:
  echo: fenced
---

## Overview

There are a wide variety of way to make data available to OJS:

-   Read CSV, JSON, SQLite, and more using the [FileAttachments](https://github.com/observablehq/stdlib#file-attachments) API.

-   Use the `ojs_define()` function to make data processed in Python or R available to `{ojs}` cells.

-   Make calls to Web APIs for online services and data stores.

We'll explore all of these techniques below.

## File Attachments

Use the [FileAttachment](https://github.com/observablehq/stdlib#file-attachments) function from the standard library to read data from a file. For example, here we read and plot a CSV of NOAA's Monthly [CO2 concentration data](https://gml.noaa.gov/ccgg/trends/data.html) from Mauna Loa:

```{ojs}
data = {
  const co2data = await FileAttachment("co2_mm.csv")
    .csv({ typed: true } );
  return co2data.map(d => { 
    d["decimal date"] = Number(d["decimal date"]);
    d.average = Number(d.average); 
    return d; 
  });
}
Plot.plot({
  marks: [
    Plot.line(data, 
      { x: "decimal date", y: "average"}, 
      { stroke: "black" }
    )
  ]
})
```

Note that we specified the `typed: true` option to the `csv()` function. When this option is specified [d3.autoType](https://observablehq.com/@d3/d3-autotype) is used to automatically detect numbers, dates, etc. and convert them to the correct JavaScript types. This is highly recommend when you know that your data is compatible with automatic type detection.

Here are the methods available for structured data formats:

| Method                                                                                                                       | Description                          |
|------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
| [csv](https://github.com/observablehq/stdlib#attachment_csv)                                                                 | Comma separated values               |
| [tsv](https://github.com/observablehq/stdlib#attachment_tsv)                                                                 | Tab separated values                 |
| [json](https://github.com/observablehq/stdlib#attachment_json)                                                               | JSON (JavaScript objects)            |
| [sqlite](https://github.com/observablehq/stdlib#attachment_sqlite)                                                           | SQLite database client               |
| [arrow](https://github.com/observablehq/stdlib/blob/8d9f4d18df0b237a5e0870a6f39584048007aca7/src/fileAttachment.mjs#L59-L62) | Apache Arrow IPC file (uncompressed) |

There are also methods to get the raw data as a [blob](https://github.com/observablehq/stdlib#attachment_blob), [text](https://github.com/observablehq/stdlib#attachment_text), [image](https://github.com/observablehq/stdlib#attachment_image), or [stream](https://github.com/observablehq/stdlib#attachment_stream).

Note that if you are using the `arrow()` method the Apache Arrow IPC file (Feather V2 file) should be written uncompressed. For example:

```` markdown
```{{r}}
arrow::write_feather(
  mtcars, 
  "data.arrow", 
  compression = "uncompressed"
)
```

```{{ojs}}
data = FileAttachment("data.arrow").arrow()
```
````

## Python and R

The data you want to use with OJS might not always be available in raw form. Often you'll need to read and preprocess the raw data using Python or R. You can perform this preprocessing during document render (in an `{r}` or `{python}` code cell) and then make it available to `{ojs}` cells via the `ojs_define()` function.

Here's an example. We'll read the same data into R, do some grouping and summarization, then make it available to OJS using `ojs_define`:

```{r}
#| output: false

library(readr)
library(dplyr)

co2 = read_csv("co2_mm.csv")  %>% 
  group_by(year) %>% 
  summarize(max = max(average))

ojs_define(co2data = co2)
```

Note that we could have done the same thing using Python (the `ojs_define` function is available in any document that uses R or Python).

Now we plot the data using [Observable Plot](https://github.com/observablehq/plot):

```{ojs}
yearlyChart = Plot.plot({
  marks: [
    Plot.line(transpose(co2data), 
      {x: "year", y: "max"}, 
      { stroke: "black" }
    )
  ]}
)
```

See the [NOAA C02](examples/noaa-co2.qmd) example for the full source code.

### Transpose

You'll note one additional twist in the OJS code above: we call the `transpose` function on our `co2data` before plotting it. The `transpose` function is built in to Quarto's OJS engine, and will convert column-oriented datasets (like the ones used in Python and R) into the row-oriented datasets used by many JavaScript plotting libraries (including [Plot](https://github.com/observablehq/plot)).

For example, the following JSON data emitted from R or Python:

``` json
{
  "year": [1958, 1959, 1960],
  "max":  [317.51, 318.29, 320.04]
}
```

Is converted to the following via the call to `transpose`:

``` json
[
  { "year": 1959, "max": 317.51 },
  { "year": 1960, "max": 318.29 },
  { "year": 1960, "max": 320.04 }
]
```

Check the documentation for whatever plotting library you are using from OJS to see whether a call to `transpose` is required.

## Web APIs

You can use the [`d3.json()`](https://github.com/d3/d3-fetch/blob/v3.0.1/README.md#json) function to read JSON data from web services and data sources. Here we query the GitHub API for data on contributions to the Python pandas package:

```{ojs}
d3 = require('d3')

contributors = await d3.json(
  "https://api.github.com/repos/pandas-dev/pandas/stats/contributors"
)

commits = contributors.map(contributor => {
  const author = contributor.author;
  return {
    name: author.login,
    title: author.login,
    group: author.type,
    value: contributor.total
  }
})
```

View the data sorted by number of commits:

```{ojs}
Inputs.table(commits, { sort: "value", reverse: true })
```

See the [GitHub API](examples/github.qmd) example for the full source code.
```````

## File: docs/interactive/ojs/index.qmd
```````
---
title: "Observable JS"
execute:
  echo: false
---

## Overview

Quarto includes native support for [Observable JS](https://observablehq.com/@observablehq/observables-not-javascript), a set of enhancements to vanilla JavaScript created by [Mike Bostock](https://en.wikipedia.org/wiki/Mike_Bostock) (also the author of [D3](https://d3js.org/)). Observable JS is distinguished by its [reactive runtime](https://github.com/observablehq/runtime), which is especially well suited for interactive data exploration and analysis.

The creators of Observable JS (Observable, Inc.) run a hosted service at <https://observablehq.com/> where you can create and publish notebooks. Additionally, you can use Observable JS ("OJS") in standalone documents and websites via its [core libraries](https://github.com/observablehq). Quarto uses these libraries along with a [compiler](https://github.com/asg017/unofficial-observablehq-compiler/tree/beta) that is run at render time to enable the use of OJS within Quarto documents.

OJS works in any Quarto document (plain markdown as well as Jupyter and Knitr documents). Just include your code in an `{ojs}` executable code block. Documents that use OJS need to run on the `http://` or `https://` protocol and not the `file://` protocol. The rest of this article explains the basics of using OJS with Quarto.

## Example

We'll start with a simple example based on Allison Horst's [Palmer Penguins](https://allisonhorst.github.io/palmerpenguins/) dataset. Here we look at how penguin body mass varies across both sex and species (use the provided inputs to filter the dataset by bill length and island):

```{ojs}
filtered = transpose(data).filter(function(penguin) {
  return bill_length_min < penguin.bill_length_mm &&
         islands.includes(penguin.island);
})
```

```{ojs}
viewof bill_length_min = Inputs.range(
  [32, 50], 
  {value: 35, step: 1, label: "Bill length (min):"}
)
viewof islands = Inputs.checkbox(
  ["Torgersen", "Biscoe", "Dream"], 
  { value: ["Torgersen", "Biscoe"], 
    label: "Islands:"
  }
)
```

```{ojs}
Plot.rectY(filtered, 
  Plot.binX(
    {y: "count"}, 
    {x: "body_mass_g", fill: "species", thresholds: 20}
  ))
  .plot({
    facet: {
      data: filtered,
      x: "sex",
      y: "species",
      marginRight: 80
    },
    marks: [
      Plot.frame(),
    ]
  }
)
```

Let's take a look at the source code for this example. First we create an `{ojs}` cell that reads in some data from a CSV file using a [FileAttachment](https://observablehq.com/@observablehq/file-attachments):

```{{ojs}}
data = FileAttachment("palmer-penguins.csv").csv({ typed: true })
```

The example above doesn't plot all of the data but rather a filtered subset. To create our filter we'll need some inputs, and we'll want to be able to use the values of these inputs in our filtering function. To do this, we use the `viewof` keyword and with some standard [Inputs](https://observablehq.com/@observablehq/inputs):

```{{ojs}}
viewof bill_length_min = Inputs.range(
  [32, 50], 
  {value: 35, step: 1, label: "Bill length (min):"}
)
viewof islands = Inputs.checkbox(
  ["Torgersen", "Biscoe", "Dream"], 
  { value: ["Torgersen", "Biscoe"], 
    label: "Islands:"
  }
)
```

Now we write the filtering function that will transform the `data` read from the CSV using the values of `bill_length_min` and `island`.

```{{ojs}}
filtered = data.filter(function(penguin) {
  return bill_length_min < penguin.bill_length_mm &&
         islands.includes(penguin.island);
})
```

Here we see reactivity in action: we don't need any special syntax to refer to the dynamic input values, they "just work", and the filtering code is automatically re-run when the inputs change. This works in much the same way a spreadsheet works when you update a cell and other cells that refer to it are recalculated.

Finally, we'll plot the filtered data using [Observable Plot](https://observablehq.com/@observablehq/plot) (an open-source JavaScript library for quick visualization of tabular data):

```{{ojs}}
Plot.rectY(filtered, 
  Plot.binX(
    {y: "count"}, 
    {x: "body_mass_g", fill: "species", thresholds: 20}
  ))
  .plot({
    facet: {
      data: filtered,
      x: "sex",
      y: "species",
      marginRight: 80
    },
    marks: [
      Plot.frame(),
    ]
  }
)
```

Note that as with our inputs, we refer to the `filtered` variable with no special syntax---the plotting code will be automatically re-run whenever `filtered` changes (which in turn is updated whenever an input changes).

That covers a basic end-to-end use of OJS (see the [Penguins](/docs/interactive/ojs/examples/penguins.qmd) examples for the full source code).

::: {.callout-tip appearance="simple"}
If you take a look at the [Penguins](/docs/interactive/ojs/examples/penguins.qmd) code, you'll notice something curious: the inputs and plotting code are defined *before* the data processing code. This demonstrates a critical difference between OJS cell execution and traditional notebooks: cells do not need to be defined in any particular order.

Because execution is fully reactive, the runtime will automatically execute cells in the correct order based on how they reference each other. This is more akin to a spreadsheet than a traditional notebook with linear cell execution.
:::

## Libraries

Our example above made use of several standard libraries, including:

1.  [Observable stdlib](https://github.com/observablehq/stdlib) --- Core primitives for DOM manipulation, file handling, importing code, and much more.

2.  [Observable Inputs](https://github.com/observablehq/inputs) --- Standard inputs controls including sliders, drop-downs, tables, check-boxes, etc.

3.  [Observable Plot](https://github.com/observablehq/plot) --- High level plotting library for exploratory data visualization.

The libraries are somewhat special because they are automatically available within notebooks on <https://observablehq.com> as well as within `{ojs}` cells in Quarto documents.

Using other JavaScript libraries is also straightforward, they just need to be explicitly imported. For example, here we import a some libraries using the [require](https://github.com/observablehq/stdlib#require) function (which in turn loads NPM modules from [jsDelivr](https://www.jsdelivr.com/){.uri}):

```{{ojs}}
d3 = require("d3@7")
topojson = require("topojson")
```

See the article on [Libraries](/docs/interactive/ojs/libraries.qmd) to learn more about using standard and third-party libraries.

## Data Sources

In our initial example we used a [FileAttachment](https://github.com/observablehq/stdlib#file-attachments) as our data source. File attachments support many formats including CSV, TSV, JSON, Arrow (uncompressed), and SQLite so are a convenient way to read a dataset that has already been prepared for analysis.

Frequently though you'll need to do some pre-processing of your data in Python or R before it's ready for visualization. Within Quarto, you can do this pre-processing during document render then make the results available to OJS.

Use the `ojs_define()` function from Python or R to define variables that you want to use within JavaScript. For example, to reproduce the simple CSV read in Python you might do this:

```{python}
#| echo: fenced
import pandas as pd
penguins = pd.read_csv("palmer-penguins.csv")
ojs_define(data = penguins)
```

The call to `ojs_define(data = penguins)` says that we want to make a variable named `data` (with the value of the `penguins` data frame) available to OJS

Depending on the visualization library you use, one additional step may be required to consume the data from JavaScript. In this case, the `Plot` function expects data by row rather than by column, so we `transpose()` it before filtering:

```{{ojs}}
filtered = transpose(data).filter(function(penguin) {
  return bill_length_min < penguin.bill_length_mm &&
         islands.includes(penguin.island);
})
```

See the article on [Data Sources](/docs/interactive/ojs/data-sources.qmd) to learn more about the various ways to prepare and read data.

## OJS Cells

There are many options available to customize the behavior of `{ojs}` code cells, including showing, hiding, and collapsing code as well as controlling the visibility and layout of outputs.

The most important cell option to be aware of is the `echo` option, which controls whether source code is displayed. You'll have different preferences depending on whether you are embedding visualizations in an article or creating a notebook or full-on tutorial.

Code in `{ojs}` cells is displayed by default. To prevent display of code for an entire document, set the `echo: false` option in YAML metadata:

``` yaml
---
title: "My Document"
execute:
  echo: false
---
```

You can also specify this option on a per-cell basis. For example:

```{{ojs}}
//| echo: false
data = FileAttachment("palmer-penguins.csv").csv({ typed: true })
```

To learn about all of the options available, see the article on [OJS Cells](/docs/interactive/ojs/ojs-cells.qmd).

## Learning More

These articles go into more depth on using OJS in Quarto documents:

-   [Libraries](/docs/interactive/ojs/libraries.qmd) covers using standard libraries and external JavaScript libraries.

-   [Data Sources](/docs/interactive/ojs/data-sources.qmd) outlines the various ways to read and pre-process data.

-   [OJS Cells](/docs/interactive/ojs/ojs-cells.qmd) goes into more depth on cell execution, output, and layout.

-   [Shiny Reactives](/docs/interactive/ojs/shiny.qmd) describes how to integrate Shiny with OJS.

-   [Code Reuse](/docs/interactive/ojs/code-reuse.qmd) delves into ways to re-use OJS code across multiple documents.

If you want to learn more about the underlying mechanics of reactivity, check out these notebooks from [Mike Bostock](https://observablehq.com/@mbostock):

-   [Five Minute Introduction](https://observablehq.com/@observablehq/five-minute-introduction)

-   [Observable's not JavaScript](https://observablehq.com/@observablehq/observables-not-javascript)

-   [Introduction to Views](https://observablehq.com/@observablehq/introduction-to-views)

-   [How Observable Runs](https://observablehq.com/@observablehq/how-observable-runs)
```````

## File: docs/interactive/ojs/libraries.qmd
```````
---
title: "Libraries"
format: html
execute:
  echo: fenced
---

## Overview

There are three types of library you'll generally use with OJS:

1.  [Observable core libraries](https://github.com/observablehq) automatically available in every document.

2.  Third-party JavaScript libraries from [npm](https://docs.npmjs.com/about-packages-and-modules) and [ObservableHQ](https://observablehq.com).

3.  Custom libraries you and/or your colleagues have created

In this document we'll provide a high-level overview of the core libraries and some examples of using third-party libraries ([D3](#d3) and [Arquero](#arquero)). Creating your own libraries is covered in the article on [Code Reuse](code-reuse.qmd).

## Stdlib

The Observable standard library provides the core capabilities that underlie rendering content and loading code and data. Some particularly important components of the standard library include:

| Component                                                                  | Description                                       |
|----------------------------------------------------------------------------|---------------------------------------------------|
| [DOM](https://github.com/observablehq/stdlib#dom)                          | Dynamically creating DOM elements                 |
| [FileAttachments](https://github.com/observablehq/stdlib#file-attachments) | Reading files in a variety of formats             |
| [require](https://github.com/observablehq/stdlib#require)                  | Importing third-party modules from NPM and GitHub |

You can find complete documentation for the standard library at <https://github.com/observablehq/stdlib>.

::: {.callout-note}

Quarto always embeds a specific version of ObservableHQ's runtime, which means that Quarto might be behind the very latest ObservableHQ version on their website.
If you need to use the latest version of Plot (or other core libraries), you can use the `import` function to import the latest version directly from a CDN. For example:

```ojs
Plot = import("https://cdn.jsdelivr.net/npm/@observablehq/plot/+esm")
```

:::

## Inputs

The Observable inputs library provides widgets that can be bound to reactive expressions via the `viewof` keyword. Some particularly useful input include:

| Component                                                   | Description                                   |
|-------------------------------------------------------------|-----------------------------------------------|
| [Radio](https://github.com/observablehq/inputs#Radio)       | Choose from mutually exclusive set of options |
| [Checkbox](https://github.com/observablehq/inputs#Checkbox) | Choose one or more options from a list        |
| [Range](https://github.com/observablehq/inputs#Range)       | Slider for continuous numeric values          |
| [Select](https://github.com/observablehq/inputs#Select)     | Drop down select box                          |
| [Table](https://github.com/observablehq/inputs#Table)       | Select one or more rows from a table          |

You can find complete documentation for all of the inputs at <https://github.com/observablehq/inputs>.

## Plot

Observable Plot is a JavaScript library for exploratory data visualization. Plot is built upon a set of core concepts ([Marks](https://observablehq.com/@observablehq/plot-marks), [Scales](https://observablehq.com/@observablehq/plot-scales), [Transforms](https://observablehq.com/@observablehq/plot-transforms), and [Facets](https://observablehq.com/@observablehq/plot-facets)) that can be composed together to create custom visualizations.

Here's an example of a histogram of the weight of Olympic athletes created with Plot:

```{ojs}
athletes = FileAttachment("athletes.csv").csv({typed: true})

Plot.plot({
  grid: true,
  facet: {
    data: athletes,
    y: "sex"
  },
  marks: [
    Plot.rectY(
      athletes, 
      Plot.binX({y: "count"}, {x: "weight", fill: "sex"})
    ),
    Plot.ruleY([0])
  ]
})
```

You can find complete documentation for Observable plot <https://github.com/observablehq/plot>.

## D3 {#d3}

[D3.js](https://d3js.org/) is a JavaScript library for manipulating documents based on data. D3 is capable of creating just about any interactive graphic you can imagine!

Here's a "zoomable sunburst" diagram (originally published at: <https://observablehq.com/@d3/zoomable-sunburst>) created with D3. Only two layers of the hierarchy are shown at a time. Click a node to zoom in, or the center to zoom out.

```{ojs}
//| echo: false
//| output: true
sunburst = {
  const root = partition(flareData);

  root.each(d => d.current = d);

  const svg = d3.create("svg")
      .attr("viewBox", [0, 0, width, width])
      .style("font", "15px sans-serif");

  const g = svg.append("g")
      .attr("transform", `translate(${width / 2},${width / 2})`);

  const path = g.append("g")
    .selectAll("path")
    .data(root.descendants().slice(1))
    .join("path")
      .attr("fill", d => { while (d.depth > 1) d = d.parent; return color(d.data.name); })
      .attr("fill-opacity", d => arcVisible(d.current) ? (d.children ? 0.6 : 0.4) : 0)
      .attr("d", d => arc(d.current));

  path.filter(d => d.children)
      .style("cursor", "pointer")
      .on("click", clicked);

  path.append("title")
      .text(d => `${d.ancestors().map(d => d.data.name).reverse().join("/")}\n${format(d.value)}`);

  const label = g.append("g")
      .attr("pointer-events", "none")
      .attr("text-anchor", "middle")
      .style("user-select", "none")
    .selectAll("text")
    .data(root.descendants().slice(1))
    .join("text")
      .attr("dy", "0.35em")
      .attr("fill-opacity", d => +labelVisible(d.current))
      .attr("transform", d => labelTransform(d.current))
      .text(d => d.data.name);

  const parent = g.append("circle")
      .datum(root)
      .attr("r", radius)
      .attr("fill", "none")
      .attr("pointer-events", "all")
      .on("click", clicked);

  function clicked(event, p) {
    parent.datum(p.parent || root);

    root.each(d => d.target = {
      x0: Math.max(0, Math.min(1, (d.x0 - p.x0) / (p.x1 - p.x0))) * 2 * Math.PI,
      x1: Math.max(0, Math.min(1, (d.x1 - p.x0) / (p.x1 - p.x0))) * 2 * Math.PI,
      y0: Math.max(0, d.y0 - p.depth),
      y1: Math.max(0, d.y1 - p.depth)
    });

    const t = g.transition().duration(750);

    // Transition the data on all arcs, even the ones that aren’t visible,
    // so that if this transition is interrupted, entering arcs will start
    // the next transition from the desired position.
    path.transition(t)
        .tween("data", d => {
          const i = d3.interpolate(d.current, d.target);
          return t => d.current = i(t);
        })
      .filter(function(d) {
        return +this.getAttribute("fill-opacity") || arcVisible(d.target);
      })
        .attr("fill-opacity", d => arcVisible(d.target) ? (d.children ? 0.6 : 0.4) : 0)
        .attrTween("d", d => () => arc(d.current));

    label.filter(function(d) {
        return +this.getAttribute("fill-opacity") || labelVisible(d.target);
      }).transition(t)
        .attr("fill-opacity", d => +labelVisible(d.target))
        .attrTween("transform", d => () => labelTransform(d.current));
  }
  
  function arcVisible(d) {
    return d.y1 <= 3 && d.y0 >= 1 && d.x1 > d.x0;
  }

  function labelVisible(d) {
    return d.y1 <= 3 && d.y0 >= 1 && (d.y1 - d.y0) * (d.x1 - d.x0) > 0.03;
  }

  function labelTransform(d) {
    const x = (d.x0 + d.x1) / 2 * 180 / Math.PI;
    const y = (d.y0 + d.y1) / 2 * radius;
    return `rotate(${x - 90}) translate(${y},0) rotate(${x < 180 ? 0 : 180})`;
  }

  return svg.node();
}
```

To use D3 in an `{ojs}` cell, first import it using the [require](https://github.com/observablehq/stdlib#require) function (which loads modules hosted at [jsDelivr](https://www.jsdelivr.com/)):

```{{ojs}}
d3 = require("d3@7")
```

Then, use d3 as needed to create your visualization. For example, here are the first few lines of the cell that creates the visualization above:

```{{ojs}}
sunburst = {
  const root = partition(flareData);
  root.each(d => d.current = d);
  const svg = d3.create("svg")
      .attr("viewBox", [0, 0, width, width])
      .style("font", "15px sans-serif");

  // ...remainder of implementation
  
  return svg.node();
}
```

See the [Sunburst](examples/sunburst.qmd) example for the complete source code. To learn more about D3, visit <https://d3js.org/>.

## Arquero {#arquero}

[Arquero](https://uwdata.github.io/arquero/) is a JavaScript library for query processing and transformation of array-backed data tables. Following the [relational algebra](https://en.wikipedia.org/wiki/Relational_algebra) and inspired by the design of [dplyr](https://dplyr.tidyverse.org/), Arquero provides a fluent API for manipulating column-oriented data frames.

Here we'll import Arquero (`aq`) and an alias to Arquero operations (`op`), read a dataset, then filter, aggregate, and view the data:

```{ojs}
import { aq, op } from '@uwdata/arquero'
penguins = aq.loadCSV("palmer-penguins.csv")
penguins
  .groupby('species')
  .filter(p => p.body_mass_g > 0)
  .rollup({
    count: op.count(),
    avg_mass: op.average('body_mass_g')
   })
  .view()
```

See the [Arquero](examples/arquero.qmd) example for complete source code. To learn more about using Arquero, see the [Introducing Arquero](https://observablehq.com/@uwdata/introducing-arquero) tutorial.

## Modules

### NPM

The [require](https://github.com/observablehq/stdlib#require) function in the standard library can be used to import [npm modules](https://docs.npmjs.com/about-packages-and-modules) (which are served from the [jsDelivr](https://www.jsdelivr.com/) CDN):

```{{ojs}}
d3 = require("d3")
topojson = require("topojson")
```

Modules can optionally include an `@` sign with a version. For example:

```{{ojs}}
d3 = require("d3@7")
```

See the [jsDelivr documentation](https://www.jsdelivr.com) for additional details. Note that the require function automatically prepends the prefix `https://cdn.jsdelivr.net/npm/` when resolving imports, so where the jsDeliver documentation says to use this URL:

    https://cdn.jsdelivr.net/npm/package@version/file

You need only pass this to `require`:

    package@version/file

### ObservableHQ

Notebooks published on <http://observablehq.com> can also be compiled and downloaded as [JavaScript modules](https://observablehq.com/@observablehq/downloading-and-embedding-notebooks#notebooks-as-es-modules).

While notebooks often have their own embedded dataset, you can actually replace this data with your own when you import them! Returning to the sunburst example from above, here we `import` a notebook and use the `with` keyword to provide our own value for `data`:

```{ojs}
pdata = FileAttachment("population.json").json()
import { chart } with { pdata as data } from "@d3/zoomable-sunburst"
chart
```

::: {.callout-warning appearance="simple"}
One important restriction to be aware of is that not all notebooks published on ObservableHQ have an open-source license. Notebooks need to [explicitly tagged with a license](https://observablehq.com/@observablehq/licenses) as an indication that it's okay to use them outside of ObservableHQ.

You can see the license for a notebook in its header area. For, example this notebook is tagged with the ISC license:

![](images/observable-license.png)

You should check the license of ObservableHQ notebooks before you import them. See the documentation on [notebook licenses](https://observablehq.com/@observablehq/licenses) for additional details on how to do this.
:::

## Appendix {.hidden .unlisted}

```{ojs}
flareData = FileAttachment("examples/flare-2.json").json()
```

```{ojs}
partition = flareData => {
  const root = d3.hierarchy(flareData)
      .sum(d => d.value)
      .sort((a, b) => b.value - a.value);
  return d3.partition()
      .size([2 * Math.PI, root.height + 1])
    (root);
}
```

```{ojs}
color = d3.scaleOrdinal(d3.quantize(d3.interpolateRainbow, flareData.children.length + 1))
```

```{ojs}
format = d3.format(",d")
```

```{ojs}
width = 932
```

```{ojs}
radius = width / 6
```

```{ojs}
arc = d3.arc()
    .startAngle(d => d.x0)
    .endAngle(d => d.x1)
    .padAngle(d => Math.min((d.x1 - d.x0) / 2, 0.005))
    .padRadius(radius * 1.5)
    .innerRadius(d => d.y0 * radius)
    .outerRadius(d => Math.max(d.y0 * radius, d.y1 * radius - 1))
```

```{ojs}
d3 = require("d3@7")
```
```````

## File: docs/interactive/ojs/ojs-cells.qmd
```````
---
title: "OJS Cells"
execute:
  echo: fenced
---

OJS code cells `{ojs}` behave a bit differently than cells in traditional notebooks, and have many options available to control their display and layout.

## Cell Execution

A critical difference between OJS cell execution and traditional notebooks is that in OJS cells do not need to be defined in any particular order.

Because execution is fully reactive, the runtime will automatically execute cells in the correct order based on how they reference each other. This is more akin to a spreadsheet than a traditional notebook with linear cell execution.

For example, in this cell we reference a variable that is not yet defined (it's defined immediately below):

```{ojs}
x + 5
```

```{ojs}
x = 10
```

This code works because the Observable runtime automatically determines the correct order of execution for the cells.

## Cell Output

By default, OJS cells show their full source code and output within rendered documents. Depending on the type of document you are creating you might want to change this behavior either globally or for individual cells.

### Code Visibility

The `echo` option controls whether cells display their source code. To prevent display of code for an entire document, set the `echo: false` option in YAML metadata:

``` yaml
---
title: "My Document"
execute:
  echo: false
---
```

You can also specify this option on a per-cell basis. For example:

```{{ojs}}
//| echo: false
data = FileAttachment("palmer-penguins.csv").csv({ typed: true })
```

### Output Visibility

OJS cell output is also displayed by default. You can change this at a global or (more likely) per-cell level using the `output` option. For example, here we disable output for a cell:

```{{ojs}}
//| output: false
data
```

Note that cells which only carry assignments do not print their output by default. For example, this assignment won't print anything:

```{ojs}
//| echo: fenced
dummy1 = "aHiddenAssignment"
```

If you want to print even the results of assignments, you can specify the `output: all` option. For example:

```{ojs}
//| echo: fenced
//| output: all
dummy2 = [{key: 1, value: [1, 2, [3, 4], dummy1]}]
```

If you click the inspector you'll see it expand to reveal the data as JSON.

### Code Display

We talked about showing and hiding source code above, but what about controlling exactly how it's displayed?

There are options available for customizing the appearance of code blocks (highlighting, background, border, etc.) as well as how horizontal overflow is handled. See the article on [HTML Code Blocks](/docs/output-formats/html-code.qmd) for all of the details.

One option we wanted to specifically highlight here is code folding, which enables you to collapse code but still provide an option for users to view it. This is especially handy for custom JavaScript visualizations as they often span dozens of lines of code.

Add the `code-fold: true` option to a code cell to enable code folding (you can also enable this globally). For example, click the "Code" button to show the code block (note the `code-fold: true` option is specified)

```{ojs}
//| code-fold: true
pdata = FileAttachment("palmer-penguins.csv").csv({typed: true})

Plot.plot({
  facet: {
    data: pdata,
    x: "sex",
    y: "species",
    marginRight: 80
  },
  marks: [
    Plot.frame(),
    Plot.rectY(pdata, 
      Plot.binX(
        {y: "count"}, 
        {x: "body_mass_g", thresholds: 20, fill: "species"}
      )
    ),
    Plot.tickX(pdata, 
      Plot.groupZ(
        {x: "median"}, 
        {x: "body_mass_g",
         z: d => d.sex + d.species,
         stroke: "#333",
         strokeWidth: 2
        }
      )
    )
  ]
})
```

## Cell Layout

There are additional `panel` and `layout` options which you can add to OJS cells to customize how their output is presented. Here's a version of some of the previous examples we've used presented with a sidebar and tabset:

```{ojs}
//| echo: false
filtered = pdata.filter(function(penguin) {
  return bill_length_min < penguin.bill_length_mm &&
         islands.includes(penguin.island);
})
```

```{ojs}
//| echo: false
//| output: true
//| panel: sidebar
viewof bill_length_min = Inputs.range(
  [32, 50], 
  {value: 35, step: 1, label: "Bill length (min):"}
)
viewof islands = Inputs.checkbox(
  ["Torgersen", "Biscoe", "Dream"], 
  { value: ["Torgersen", "Biscoe"], 
    label: "Islands:"
  }
)
```

::: panel-tabset
## Plot

```{ojs}
//| echo: false
//| output: true
Plot.rectY(filtered, 
  Plot.binX(
    {y: "count"}, 
    {x: "body_mass_g", fill: "species", thresholds: 20}
  ))
  .plot({
    facet: {
      data: filtered,
      x: "sex",
      y: "species",
      marginRight: 80
    },
    marks: [
      Plot.frame(),
    ]
  }
)
```

## Data

```{ojs}
//| echo: false
Inputs.table(filtered)
```
:::

We created this layout by first adding the `panel: sidebar` option to the cell with our inputs:

```{{ojs}}
//| panel: sidebar

viewof bill_length_min = Inputs.range(
  [32, 50], 
  {value: 35, step: 1, label: "Bill length (min):"}
)
viewof islands = Inputs.checkbox(
  ["Torgersen", "Biscoe", "Dream"], 
  { value: ["Torgersen", "Biscoe"], 
    label: "Islands:"
  }
)
```

We then added a tabset (div of class `.panel-tabset`) with **Plot** and **Data** tabs (headings within the div define the tabs):

    ::: {.panel-tabset}

    ## Plot

    ```{{ojs}}
    Plot.rectY(filtered, 
      Plot.binX(
        {y: "count"}, 
        {x: "body_mass_g", fill: "species", thresholds: 20}
      ))
      .plot({
        facet: {
          data: filtered,
          x: "sex",
          y: "species",
          marginRight: 80
        },
        marks: [
          Plot.frame(),
        ]
      }
    )
    ```

    ## Data

    ```{{ojs}}
    Inputs.table(filtered)
    ```

    :::

See the [Layout](examples/layout.qmd) example for the full source code.

Learn more in the article on [Layout](../layout.qmd) for interactive documents.

## Cell Figures

OJS cells can also be rendered as numbered, [cross-referenceable](/docs/authoring/cross-references.qmd) figures. To do this, add the `label` and `fig-cap` options to the cell. For example:

```{ojs}
//| echo: fenced
//| label: fig-penguin-body-mass
//| fig-cap: "Penguin body mass by sex and species"
Plot.rectY(filtered, 
  Plot.binX(
    {y: "count"}, 
    {x: "body_mass_g", fill: "species", thresholds: 20}
  ))
  .plot({
    facet: {
      data: filtered,
      x: "sex",
      y: "species",
      marginRight: 80
    },
    marks: [
      Plot.frame(),
    ]
  }
)
```

See @fig-penguin-body-mass for further illustration.

To reference the figure use its label in a markdown [cross reference](/docs/authoring/cross-references.qmd):

``` markdown
See @fig-penguin-body-mass for further illustration.
```
```````

## File: docs/interactive/ojs/shiny.qmd
```````
---
title: "Shiny Reactives"
from: markdown-grid_tables
format: html
---

## Overview

Earlier we described how to use the `ojs_define()` function to make data from Python and R available in OJS cells. In this scenario, data pre-processing is done once during render time then all subsequent interactions are handled on the client.

But what if you want to do data transformation dynamically in response to user inputs? This is also possible with `ojs_define()`, as it can be passed not just static values but also Shiny reactives (assuming it's running inside a Shiny [interactive document](../shiny/index.qmd)).

## Hello, Shiny

Here is the [K-Means Clustering](https://shiny.rstudio.com/gallery/kmeans-example.html) example from the Shiny Gallery implemented with an OJS client and Shiny Server:

[![](images/kmeans-shiny-ojs.png){.border}](https://jjallaire.shinyapps.io/kmeans-shiny-ojs/)

You can see the document deployed at <https://jjallaire.shinyapps.io/kmeans-shiny-ojs/>.

### Source Code

Let's take a look at the source code. On the client we have familiar looking OJS inputs and a plot laid out using `panel: sidebar` and `panel: fill`:

    ```{{ojs}}
    //| panel: sidebar
    vars = ["Sepal.Length", "Sepal.Width", "Petal.Length", "Petal.Width"]
    viewof xcol = Inputs.select(vars, {label: "X Variable"})
    viewof ycol = Inputs.select(vars, {label: "Y Variable", value: vars[1]})
    viewof count = Inputs.range([1, 9], {label: "Cluster Count", step: 1, value: 3})
    ```

    ```{{ojs}}
    //| panel: fill
    Plot.plot({
      color: {
        type: "ordinal",
        scheme: "category10"
      },
      marks: [
        Plot.dot(transpose(selectedData), {
          x: xcol,
          y: ycol,
          fill: (d, i) => clusters.cluster[i],
        }),
        Plot.dot(clusters.centers, { 
          x: d => d[0],
          y: d => d[1],
          r: 10,
          stroke: "black",
          fill: (d, i) => i + 1
        }),
      ]
    })
    ```

Note that the plotting code references the variables `selectedData` and `clusters`. These will be provided by reactive expressions within the Shiny server code. Note also that we use the `transpose()` function to reshape the data into the row-oriented format that the Plot library expects.

Here is the server code:

```{{r}}
#| context: server

selectedData <- reactive({
  iris[, c(input$xcol, input$ycol)]
})

clusters <- reactive({
  kmeans(selectedData(), input$count)
})

ojs_define(selectedData, clusters)
```

We designate this code as running on the server via the `context: server` option.

Note that we reference several inputs that were defined by `viewof` expressions on the client (e.g. `input$xcol`). When these inputs change they will cause the appropriate server side reactives to re-execute.

We create two reactive values (`selectedData` and `clusters`) and provide them to the client using `ojs_define()`. The plot will be automatically re-drawn on the client side when these values change.

## Examples

Here are some examples that demonstrate various ways to use OJS with Shiny:

| Example                                                        | Source                       | Description                                                                                                        |
|----------------------------------------------------------------|------------------------------|--------------------------------------------------------------------------------------------------------------------|
| [K-Means](https://jjallaire.shinyapps.io/kmeans-shiny-ojs/)    | [Code](https://git.io/J0kPK) | Simple example of binding OJS inputs to Shiny inputs and shiny reactives to OJS plots.                             |
| [Binning](https://jjallaire.shinyapps.io/binning-shiny-ojs/)   | [Code](https://git.io/J0kPu) | Demonstrates fast binning of a medium sized dataset (32mb) on the server.                                          |
| [Data Binding](https://jjallaire.shinyapps.io/data-shiny-ojs/) | [Code](https://git.io/J0kPl) | Demonstrates importing a notebook from <https://observablehq.com> and binding it's data field to a Shiny reactive. |

## Bindings

### OJS to Shiny

In the example above we took advantage of the fact that by default OJS `viewof` expressions are automatically propagated to Shiny inputs (e.g `input$xcol`). This provides a reasonable separation of concerns, and prevents excess network traffic in the case that you have large OJS variables.

However, if you want to use other OJS variables as Shiny inputs this is also possible using the `ojs-export` option. The default behavior maps to the following configuration:

``` yaml
---
server:
  type: shiny
  ojs-export: viewof
---
```

You can also specify `ojs-export: all` to cause all OJS reactives to be bound to Shiny inputs:

``` yaml
---
server:
  type: shiny
  ojs-export: all
---
```

Alternatively, you can specify a list of OJS reactives by name (including using `~` to filter out reactives), and optionally combine this with the `viewof` and/or `all` options. For example:

``` yaml
---
server:
  type: shiny
  ojs-export: [all, ~large_dataset]
---
```

### Shiny to OJS

Less common but occasionally useful is the ability to bind Shiny inputs into OJS. By default no such bindings occur, however you can use the `ojs-import` option to opt-in for specific Shiny inputs. For example:

``` yaml
---
server: 
  type: shiny
  ojs-import: [minimum, maximum]
---
```
```````

## File: docs/interactive/shiny/_examples/covid19-bicartogram/covid19-bicartogram.qmd
```````
---
title: "COVID-19 cases per state"
format:
  html:
    code-tools:
      source: https://github.com/quarto-dev/quarto-web/blob/main/docs/interactive/shiny/_examples/covid19-bicartogram/covid19-bicartogram.qmd
server: shiny
---

```{ojs}
//| panel: sidebar
viewof ojsDateStart = Inputs.text({label: "Date start", type: "date", min: "2020-01-01", max:"2021-08-31", value: "2021-08-01"});
viewof ojsDateEnd = Inputs.text({label: "Date end", type: "date", min: "2020-01-01", max:"2021-08-31", value: "2021-08-08"});
```

::: panel-tabset
## Map

```{ojs}
import { chart, objectMap } with { covidDorlingData as data, casesScale as areaScaleA, deathsScale as areaScaleB } from "@cscheid/bivariate-dorling-cartogram";
chart
```

## Scatter

```{ojs}
Plot.plot({
  x: {
    type: "log"
  },
  y: {
    type: "log"
  },
  marks: [
    Plot.dot(covidDorlingData, {x: "cases", y: "deaths"})
  ]
})
```

## Data

```{ojs}
{
  const result = covidDorlingData.map(d => ({
    state: d.name,
    cases: d.cases,
    deaths: d.deaths
  }));
  return Inputs.table(result)
}
```
:::

```{ojs}
function datePicker(min, max, value, label)
{
  const div = html`<div></div>`;
  const id = `${String(Math.random()).slice(2)}`
  const labelEl = html`<label for=${id}> ${label}</label>`;
  const inputEl = html`<input type=date min="${min}$ max="${max}" value="${value}" id=${id}>`;
  div.appendChild(inputEl);
  div.appendChild(labelEl);
  div.date = inputEl;
  return div;
}

rows = transpose(summary_data)

casesScale =  d3.scaleSqrt().domain([0, d3.max(rows, d => d.cases)]).range([0, 60])

deathsScale = d3.scaleSqrt().domain([0, d3.max(rows, d => d.deaths)]).range([0, 60])

covidDorlingData = {
  const allStates = ["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","District of Columbia","Florida","Georgia","Guam","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Northern Mariana Islands","Ohio","Oklahoma","Oregon","Pennsylvania","Puerto Rico","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virgin Islands","Virginia","Washington","West Virginia","Wisconsin","Wyoming"];
  const fmt = d3.format(",");
  const result = rows.map(d => ({
    cases: d.cases,
    deaths: d.deaths,
    areaA: d.cases,
    areaB: d.deaths,
    name: d.state,
    tooltip: `${d.state}:\n${fmt(d.cases)} cases\n${fmt(d.deaths)} deaths`,
    fixed: ["Hawaii", "Alaska"].indexOf(d.state) !== -1
  }));
  const existingRows = new Set();
  rows.forEach(d => {
    existingRows.add(d.state);
  })
  allStates.forEach(state => {
    if (existingRows.has(state))
      return;
    result.push({ name: state, areaA: 0, areaB: 0, fillA: "none",  fillB: "none", stroke: "none", fixed: false });
  });

  return result;
}
```

### About

The map displayed in this dashboard is a [bivariate cartogram](https://observablehq.com/@cscheid/bivariate-dorling-cartogram).

```{r}
#| context: server-start
library(tidyverse)
covid_data <- read_csv("https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-states.csv")
```

```{r}
#| context: server
get_cases <- function(s, e) {
  t1 <- covid_data %>% filter(date == s) %>% select(cases, deaths, state);
  t2 <- covid_data %>% filter(date == e) %>% select(cases, deaths, state);
  t3 <- inner_join(t1, t2, "state");
  t3 %>% mutate(cases = cases.y - cases.x, deaths = deaths.y - deaths.x) %>% select(state, cases, deaths)
}

summary_data = reactive({
  get_cases(substring(input$ojsDateStart, 1, 10), 
            substring(input$ojsDateEnd, 1, 10))
})
ojs_define(summary_data)
```
```````

## File: docs/interactive/shiny/_examples/diamonds/shiny-diamonds.qmd
```````
---
title: "Diamonds Explorer"
format:
  html:
    page-layout: full
    code-tools: 
      source: https://github.com/quarto-dev/quarto-web/blob/main/docs/interactive/shiny/_examples/diamonds/shiny-diamonds.qmd 
server: shiny
---

```{r}
#| context: setup
library(ggplot2)
dataset <- diamonds
```

```{r}
#| panel: fill
plotOutput('plot')
```

::: {layout-ncol="3"}
```{r}
sliderInput('sampleSize', 'Sample Size', 
            min=1, max=nrow(dataset),
            value=min(1000, nrow(dataset)), 
            step=500, round=0)
br()
checkboxInput('jitter', 'Jitter')
checkboxInput('smooth', 'Smooth')
```

```{r}
selectInput('x', 'X', names(dataset))
selectInput('y', 'Y', names(dataset), names(dataset)[[2]])
selectInput('color', 'Color', c('None', names(dataset)))
```

```{r}
selectInput('facet_row', 'Facet Row',
            c(None='.', names(diamonds[sapply(diamonds, is.factor)])))
selectInput('facet_col', 'Facet Column',
            c(None='.', names(diamonds[sapply(diamonds, is.factor)])))
```
:::

```{r}
#| context: server

dataset <- reactive({
  diamonds[sample(nrow(diamonds), input$sampleSize),]
})
 
output$plot <- renderPlot({
  
  p <- ggplot(dataset(), aes_string(x=input$x, y=input$y)) + geom_point()
  
  if (input$color != 'None')
    p <- p + aes_string(color=input$color)
  
  facets <- paste(input$facet_row, '~', input$facet_col)
  if (facets != '. ~ .')
    p <- p + facet_grid(facets)
  
  if (input$jitter)
    p <- p + geom_jitter()
  if (input$smooth)
    p <- p + geom_smooth()
  
  print(p)
  
})
```
```````

## File: docs/interactive/shiny/_examples/k-means/shiny-k-means.qmd
```````
---
title: "Iris K-Means Clustering"
format: 
  html:
    page-layout: full
    code-tools:
      source: https://github.com/quarto-dev/quarto-web/blob/main/docs/interactive/shiny/_examples/k-means/shiny-k-means.qmd
server: shiny
---

```{r}
#| panel: sidebar
vars <- setdiff(names(iris), "Species")
selectInput('xcol', 'X Variable', vars)
selectInput('ycol', 'Y Variable', vars, selected = vars[[2]])
numericInput('clusters', 'Cluster count', 3, min = 1, max = 9)
```

```{r}
#| panel: fill
plotOutput('plot1')
```

```{r}
#| context: server
selectedData <- reactive({
    iris[, c(input$xcol, input$ycol)]
  })

clusters <- reactive({
  kmeans(selectedData(), input$clusters)
})

output$plot1 <- renderPlot({
  palette(c("#E41A1C", "#377EB8", "#4DAF4A", "#984EA3",
    "#FF7F00", "#FFFF33", "#A65628", "#F781BF", "#999999"))

  par(mar = c(5.1, 4.1, 0, 1))
  plot(selectedData(),
       col = clusters()$cluster,
       pch = 20, cex = 3)
  points(clusters()$centers, pch = 4, cex = 4, lwd = 4)
})
```
```````

## File: docs/interactive/shiny/_examples/old-faithful/shiny-old-faithful.qmd
```````
---
title: "Old Faithful"
format: 
  html:
    code-tools: 
      source: https://github.com/quarto-dev/quarto-web/tree/main/docs/interactive/shiny/_examples/old-faithful/shiny-old-faithful.qmd
server: shiny
---

Data on eruptions of the Old Faithful geyser in Yellowstone National Park,
Wyoming, USA. The data was collected continuously from August 1st until
August 15th, 1985.

```{r}
sliderInput("bins", "Number of bins:", min = 1, max = 50, value = 30)
plotOutput("distPlot")
```

The data consists of 299 pairs of measurements, referring to the time interval
between the starts of successive eruptions and the duration of the subsequent
eruption.

Click the **Code** button above to see the source code for this example.

```{r}
#| context: server
output$distPlot <- renderPlot({
  x <- faithful[, 2]  # Old Faithful Geyser data
  bins <- seq(min(x), max(x), length.out = input$bins + 1)
  hist(x, breaks = bins, col = 'darkgray', border = 'white')
})
```
```````

## File: docs/interactive/shiny/execution.qmd
```````
---
title: "Execution Contexts"
---

## Overview

Shiny interactive documents can contain both code that executes at render time as well as code that executes on the server in response to user actions and changes in input values. A solid understanding of these execution contexts is important both to have the right mental model during development as well as to optimize the performance of your document.

## Render & Server Contexts

To break this down more clearly, let's revisit the "Hello, Shiny" document we started with in the introduction to interactive documents:

    ---
    title: "Old Faithful"
    format: html
    server: shiny
    ---

    ```{{r}}
    sliderInput("bins", "Number of bins:", 
                min = 1, max = 50, value = 30)
    plotOutput("distPlot")
    ```

    ```{{r}}
    #| context: server
    output$distPlot <- renderPlot({
      x <- faithful[, 2]  # Old Faithful Geyser data
      bins <- seq(min(x), max(x), length.out = input$bins + 1)
      hist(x, breaks = bins, col = 'darkgray', border = 'white')
    })
    ```

Here is how execution breaks down for this document:

1.  The first code chunk that contains the calls to `sliderInput()` and `plotOutput()` will execute when you render the document (e.g. `quarto render old-faithful.qmd`).

2.  The second code chunk with the `context: server` option will *not* execute at render time, but rather will execute only when the document is served.

It's critical to understand that the two chunks are run in completely separate R sessions. That means that you cannot access variables created in the first chunk within the second, and vice-versa. The is analogous to the `ui.R` and `server.R` scripts that compose most normal Shiny applications.

Of course, it's quite useful to be able to re-use code between contexts, and we'll cover some ways to do this in the [Sharing Code](#sharing-code) section below.

::: {.callout-tip appearance="simple"}
In order to make the code of interactive documents straightforward to understand and work with, we strongly recommend that your server contexts (there can be more than one) be located *at the bottom* of the document. This makes the separate execution environments more clear in the flow of the document source code.
:::

### server.R {.unlisted}

There is one other option if you prefer to have a stronger separation. You can restrict your `.qmd` file to *only* code that will execute at render time, and then split out the server code into a separate `server.R` file.

Re-writing our example in this fashion would look like this:

##### old-faithful.qmd {.tabset}

    ---
    title: "Old Faithful"
    format: html
    server: shiny
    ---

    ```{{r}}
    sliderInput("bins", "Number of bins:", 
                min = 1, max = 50, value = 30)
    plotOutput("distPlot")
    ```

##### server.R

``` r
function(input, output, session) {
  output$distPlot <- renderPlot({
    x <- faithful[, 2]  # Old Faithful Geyser data
    bins <- seq(min(x), max(x), length.out = input$bins + 1)
    hist(x, breaks = bins, col = 'darkgray', border = 'white')
  })
}
```

This is perhaps a bit less convenient but does align better with the traditional `ui.R` / `server.R` separation that exists in traditional Shiny applications.

## Sharing Code {#sharing-code}

Sharing code between rendering contexts works a bit differently depending on if your code is in a single `.qmd` file or if it uses `server.R`. We'll cover both scenarios below.

### Single File

#### context: setup

To have code execute in both rendering and serving contexts, create a code chunk with `context: setup`. For example:

```{{r}}
#| context: setup
#| include: false

# load libraries
library(dplyr)

# load data
dataset <- import_data("data.csv")
dataset <- sample_n(dataset, 1000)
```

This code will execute at both render time as well as when the server is created for each new user session. Note that we also specify `include: false` to make sure that code, warnings, and output from the chunk are not included in the rendered document.

#### context: data

The loading and manipulation of data often dominates the startup time of Shiny applications. Since interactive documents are executed in two phases (the initial render and then the serving of the document to users) we can perform the expensive data manipulations during rendering and then simply load the data when starting up the application.

You can define prerendered data by adding the `context: data` option to an R code chunk. The chunk will be executed during render and any R objects it creates will be saved to an .RData file, which will then be loaded during Shiny server startup. For example, we could take the setup chunk illustrated above and factor out the data loading into its own chunk:

```{{r}}
#| context: data
#| include: false

dataset <- import_data("data.csv")
dataset <- sample_n(dataset, 1000)
```

Note that R objects created within a `context: data` chunk are available to both the UI rendering and server contexts.

#### Knitr cache

You can further improve the performance of data rendering by adding the `cache: true` option to the data chunk. This will cause the code chunk to be re-executed only when required. For example:

```{{r}}
#| context: data
#| include: false
#| cache: true
#| cache.extra: !expr file.info("data.csv")$mtime

dataset <- import_data("data.csv")
dataset <- sample_n(dataset, 1000)
```

In this example the cache will be invalidated if either the R code in the chunk changes or the modification time of the "data.csv" file changes (this is accomplished using the `cache.extra` option).

You can also invalidate an existing cache by removing the `_cache` directory alongside with your interactive document.

#### context: server-start

There is one additional execution context that enables you to share code and data across multiple user sessions. Chunks with `context: server-start` execute once when the Shiny document is first run and are *not* re-executed for each new user of the document. Using `context: server-start` is appropriate for several scenarios including:

1.  Establishing shared connections to remote servers (e.g. databases, Spark contexts, etc.).

2.  Creating reactive values intended to be shared across sessions (e.g. with [reactivePoll](http://shiny.rstudio.com/reference/shiny/latest/reactivePoll.html) or [reactiveFileReader](http://shiny.rstudio.com/reference/shiny/latest/reactiveFileReader.html)).

For example:

```{{r}}
#| context: server-start

library(DBI)
db <- dbConnect(...)
```

### Multiple Files

If your interactive document uses a `.qmd` file to define the user-interface and a `server.R` file for the server, you can put shared code in a file named `global.R`. Functions and variables defined within `global.R` will be available both during render as well as during execution of the server.

In this scenario your interactive document consists of 3 source files:

| File       | Description                                                                                       |
|------------|---------------------------------------------------------------------------------------------------|
| `doc.qmd`  | Markdown content as well as Shiny inputs and outputs (e.g. `sliderInput()`, `plotOutput()`, etc.) |
| `server.R` | Main server function with reactive expressions, assignments to outputs, etc.                      |
| `global.R` | Code shared between `doc.qmd` and `server.R`.                                                     |
```````

## File: docs/interactive/shiny/index.qmd
```````
---
title: "Shiny"
---

## Introduction

If you are an R user, you may already be familiar with [Shiny](https://shiny.posit.co/), a package that makes it easy to build interactive web apps with R.

When using the Knitr computation engine, Quarto documents can include embedded Shiny components (e.g. a plot with sliders that control its inputs) or even simple Shiny applications that include several components.

This section covers integrating Shiny with Quarto and assumes that you already have basic familiarity with Shiny. To learn more about Shiny please visit <https://shiny.posit.co/>.

::: {.callout-note appearance="simple"}
In order to run the examples below you will need a recent version of the **rmarkdown** package, which you can install with:

``` r
 install.packages("rmarkdown")
```
:::

## Hello, Shiny

For example, here's a document that contains a plot of the "Old Faithful" dataset along with a slider to control the number of bins:

![](images/old-faithful.png){.border}

Here's the source code for this example:

    ---
    title: "Old Faithful"
    format: html
    server: shiny
    ---

    ```{{r}}
    sliderInput("bins", "Number of bins:", 
                min = 1, max = 50, value = 30)
    plotOutput("distPlot")
    ```

    ```{{r}}
    #| context: server
    output$distPlot <- renderPlot({
      x <- faithful[, 2]  # Old Faithful Geyser data
      bins <- seq(min(x), max(x), length.out = input$bins + 1)
      hist(x, breaks = bins, col = 'darkgray', border = 'white')
    })
    ```

There are two important differences between this document and a normal static document:

1.  The inclusion of `server: shiny` within the document's options, which instructs Quarto to run a Shiny Server behind the document:

    ``` yaml
    ---
    title: "Old Faithful"
    format: html
    server: shiny
    ---
    ```

2.  The inclusion of `context: server` as an option in the second code chunk, which delineates this R code as running within the Shiny Server (this is the code you would typically put in `server.R`):

    ```{{r}}
    #| context: server
    ```

We'll cover running and deploying Quarto documents with Shiny components in the article on [Running Documents](running.qmd). Before that though, let's cover a more in-depth example.

## Custom Layout

Here's an example that includes multiple inputs as well as a more application like page layout with a sidebar:

![](images/iris-k-means.png){.border}

Here's the source code for this example:

    ---
    title: "Iris K-Means Clustering"
    format: 
      html:
        page-layout: custom
    server: shiny
    ---

    ```{{r}}
    #| panel: sidebar
    vars <- setdiff(names(iris), "Species")
    selectInput('xcol', 'X Variable', vars)
    selectInput('ycol', 'Y Variable', vars, selected = vars[[2]])
    numericInput('clusters', 'Cluster count', 3, min = 1, max = 9)
    ```

    ```{{r}}
    #| panel: fill
    plotOutput('plot1')
    ```

    ```{{r}}
    #| context: server
    selectedData <- reactive({
        iris[, c(input$xcol, input$ycol)]
      })

    clusters <- reactive({
      kmeans(selectedData(), input$clusters)
    })

    output$plot1 <- renderPlot({
      palette(c("#E41A1C", "#377EB8", "#4DAF4A", "#984EA3",
        "#FF7F00", "#FFFF33", "#A65628", "#F781BF", "#999999"))

      par(mar = c(5.1, 4.1, 0, 1))
      plot(selectedData(),
           col = clusters()$cluster,
           pch = 20, cex = 3)
      points(clusters()$centers, pch = 4, cex = 4, lwd = 4)
    })
    ```

There are a few things worth noting in this example:

1.  The YAML front-matter includes the `page-layout: custom` option (to indicate we want our content to occupy the entire page rather than being centered with padding).
2.  We add `panel: sidebar` and `panel: fill` to the two code chunks that define the user-interface to specify that we want them laid out in special panel containers.
3.  We again use `context: server` on the last R code chunk to indicate that it contains the Shiny Server code.

#### Page Layout

Some interactive documents you create will use narrative interspersed with Shiny components and some (like this example) will be full page applications. Some may even by hybrids---for example imagine a sidebar on the left containing inputs that control outputs interspersed with narrative in the main document body.

See the article on [Component Layout](../layout.qmd) to learn more about the available tools for managing the layout of interactive documents.

## Examples

Here are some deployed examples of Quarto documents that use Shiny:

| Example                                                            | Source                       | Description                                                                                  |
|--------------------------------------------------------------------|------------------------------|----------------------------------------------------------------------------------------------|
| [Old Faithful](https://jjallaire.shinyapps.io/shiny-old-faithful/) | [Code](https://git.io/J0qnQ) | Demonstrates incorporating an interactive plot into the main flow of a document.             |
| [K-Means](https://jjallaire.shinyapps.io/shiny-k-means/)           | [Code](https://git.io/J0qnj) | Demonstrates using a more "application-like" page layout (sidebar and main panel)            |
| [Diamonds](https://jjallaire.shinyapps.io/shiny-diamonds/)         | [Code](https://git.io/J0qcR) | Demonstrates an alternate way to layout inputs (at the bottom of the page in three columns). |

## Learning More

To learn more about Shiny interactive documents see the following articles:

-   [Running Documents](running.qmd) covers how to run interactive documents both within RStudio and at the command line, as well as how to deploy them to end users.

-   [Execution Contexts](execution.qmd) goes in depth on when different code blocks (e.g. rendering vs. serving) run as well as how to cache expensive computations for more responsive documents.

-   [External Resources](resources.qmd) describes how to make sure that Shiny can locate resources (e.g. CSS, JS, images, etc.) that you include in your document.

-   [Component Layout](../layout.qmd) enumerates the various techniques you can use to layout interactive components within your documents.

If you are using both JavaScript and Shiny to create interactive documents, you might also be interested in the article on using [Shiny Reactives with OJS](../ojs/shiny.qmd).
```````

## File: docs/interactive/shiny/resources.qmd
```````
---
title: "External Resources"
---

## Overview

There are two types of external resource file that might be referenced from within a Shiny interactive document:

1.  Files referenced from R code (e.g. R scripts, datasets, configuration files, etc.); and

2.  Static assets referenced from the web document (e.g. CSS style-sheets, images, etc.)

Below we'll describe how each of these resource types are handled within interactive documents.

## Code Resources

For files referenced from R code, you can reference anything located within the directory of (or sub-directories of) the main `.qmd` file. This is no different than with any other `.qmd` file or even R script.

Similarly, files created by executing R code (e.g. figures generated from code chunks) are automatically located in the document `_files` directory alongside the HTML output file. No special handling is required for these files.

## Asset Resources

Many interactive documents will consist of only the generated HTML and figures located in the `_files` directory. However, in some cases you may want to add static images, CSS files, or other assets to your document.

In these cases, you need to be sure to locate the files within one of the following specially named sub-directories to ensure they can be located by the Shiny server:

| Directory | Description                                  |
|:----------|:---------------------------------------------|
| `images/` | Image files (e.g. PNG, JPEG, etc.)           |
| `css/`    | CSS stylesheets                              |
| `js/`     | JavaScript scripts                           |
| `www/`    | Any other files (e.g. downloadable datasets) |

The reason that all files within the directory of the main `.qmd` can't be referenced from within the web document is that many of these files are application source code and data, which may not be something you want to be downloadable by end users. By restricting the files which can be referenced to the above directories you can control which files are downloadable and which are not.

\
```````

## File: docs/interactive/shiny/running.qmd
```````
---
title: "Running Documents"
---

## Overview

There are a number of ways to run Shiny interactive documents:

1.  Use **Run Document** within the RStudio IDE.
2.  Use the `quarto serve` command line interface.
3.  Deploy them to a server for use by a wider audience.

We'll cover all of these scenario in depth here. Note that in order to run interactive Shiny documents you will to install the very latest version of the **rmarkdown** package (v2.10) which you can install as follows:

``` r
install.packages("rmarkdown")
```

## RStudio IDE

While you are developing an interactive document it will likely be most convenient to run within RStudio.

Note that you need RStudio {{< var rstudio.min_version >}} or a later version in order to run Quarto interactive documents. You can download the latest release at <https://posit.co/download/rstudio-desktop/>.

Click the **Run Document** button while editing a Shiny interactive document to render and view the document within the IDE:

![](images/rstudio-ide.png){.border}

When you make changes, just click **Run Document** again to see them reflected in the document preview.

Two options you may want to consider enabling are **Run on Save** and **Preview in Viewer Pane** (by default previews occur in an external window). You can access these options on the editor toolbar:

![](images/rstudio-ide-options.png){.border}

## Command Line

You can also run Shiny interactive documents from the command line via `quarto serve`. For example:

```{.bash filename="Terminal"}
quarto serve document.qmd
```

There are a number of options to the `serve` command to control the port and host of the document server as well as whether a browser is automatically opened for the running document. You can learn more about these options with `quarto serve help`.

If you are within an R session you can also use the **quarto** R package to run a document:

``` r
library(quarto)
quarto_serve("document.qmd")
```

## Deployment

### ShinyApps

You can publish Shiny interactive documents to the [ShinyApps](http://shinyapps.io/) hosted service. To do this you should ensure that you have:

1.  An account on ShinyApps (use the [signup form](http://shinyapps.io/) to create an account).

2.  The very latest versions of the **rsconnect** and **quarto** R packages. You can install them as follows:

    ``` r
    install.packages("rsconnect")
    install.packages("quarto")
    ```

You can then deploy your interactive document using the `quarto_publish_app()` function of the **quarto** package. You can do this as follows (working from the directory that contains your document):

``` r
library(quarto)
quarto_publish_app(server = "shinyapps.io")
```

If you are using RStudio you can also use the **Publish** button <kbd>![](/docs/output-formats/images/publish-button.png){width="21"}</kbd> available when working with an interactive document:

![](images/rstudio-ide-publish.png){.border width="587"}

Note that you should always **Run Document** locally prior to publishing your document (as this will create the `.html` file that is served on ShinyApps.

### Hugging Face

HuggingFace Spaces provides an SDK for deploying Shiny for R applications. Learn more about using HuggingFace with Shiny for R here: <https://huggingface.co/docs/hub/spaces-sdks-docker-shiny#shiny-for-r>.

### Posit Connect

[Posit Connect](https://www.rstudio.com/products/connect/) is a server product from Posit for secure sharing of applications, reports, and plots. You can publish Shiny interactive documents to Posit Connect in much the same way as described above for [ShinyApps].

First, make sure you very latest development versions of the **rsconnect** and **quarto** R packages. You can install them as follows:

``` r
install.packages("rsconnect")
install.packages("quarto")
```

Next, deploy your interactive document using the `quarto_publish_app()` function of the **quarto** package, providing the domain name or IP address of your Posit Connect installation via the `server` parameter. You can do this as follows (working from the directory that contains your document):

``` r
library(quarto)
quarto_publish_app(server = "rsc.example.com")
```

If you are using RStudio you can also use the **Publish** button <kbd>![](/docs/output-formats/images/publish-button.png){width="21"}</kbd> as described above in the ShinyApps documentation:

![](images/rstudio-ide-rsc-publish.png){.border width="573"}

As with ShinyApps, you should always **Run Document** locally prior to publishing your document (as this will create the `.html` file that is served by Posit Connect).
```````

## File: docs/interactive/widgets/htmlwidgets.qmd
```````
---
title: "htmlwidgets for R"
---

## Overview

The [htmlwidgets](http://www.htmlwidgets.org) package enables you to use JavaScript visualization libraries like [Leaflet](http://rstudio.github.io/leaflet/), [Plotly](https://plot.ly/r/), [dygraphs](http://rstudio.github.io/dygraphs/), and [threejs](https://bwlewis.github.io/rthreejs/) directly from R.

If you are using the Knitr engine with Quarto this is a great way to incorporate interactivity without learning JavaScript or requiring a Shiny Server to view your document.

## Usage

Including htmlwidgets within a Quarto document is as easy as including an R plot. For example, here is how we embed a [Leaflet](http://rstudio.github.io/leaflet/) map:

```{{r}}
library(leaflet)
leaflet() %>%
  addTiles() %>%  # Add default OpenStreetMap map tiles
  addMarkers(lng=174.768, lat=-36.852, popup="The birthplace of R")
```

```{r}
#| echo: false
#| fig.height: 3
library(leaflet)
leaflet() %>%
  addTiles() %>%  # Add default OpenStreetMap map tiles
  addMarkers(lng=174.768, lat=-36.852, popup="The birthplace of R")
```

## Layout

You can also use `layout` options with htmlwidgets. For example, here we provide a custom `layout` to arrange three [dygraph](http://rstudio.github.io/dygraphs/) time series plots:

```{{r}}
#| layout: [[1,1], [1]]
library(dygraphs)
dygraph(fdeaths, "Female Deaths")
dygraph(mdeaths, "Male Deaths")
dygraph(ldeaths, "All Deaths")
```

```{r}
#| echo: false
#| fig.height: 3
#| layout: [[1,1], [1]]
library(dygraphs)
dygraph(fdeaths, "Female Deaths")
dygraph(mdeaths, "Male Deaths")
dygraph(ldeaths, "All Deaths")
```

See the article on [Figures](/docs/authoring/figures.qmd#complex-layouts) for additional documentation on custom layouts.

To learn about available htmlwidgets see the [showcase page](http://www.htmlwidgets.org/showcase_leaflet.html) and the [htmlwidget gallery](http://gallery.htmlwidgets.org/).
```````

## File: docs/interactive/widgets/jupyter.qmd
```````
---
title: "Jupyter Widgets"
toc: false
---

## Overview

[Jupyter Widgets](https://jupyter.org/widgets) enable you to use JavaScript visualization libraries like [Leaflet](https://ipyleaflet.readthedocs.io/en/latest/), [Plotly](https://plotly.com/python/), and [threejs](https://pythreejs.readthedocs.io/) directly from Python.

If you are using the Jupyter engine with Quarto this is a great way to incorporate interactivity without learning JavaScript.

Note that while Quarto uses a Jupyter kernel during rendering, there is no Jupyter kernel once the site is published, so there is interactivity with JavaScript but not with Python.

## Leaflet Example

Including Jupyter Widgets within a Quarto document is as easy as including a plot. For example, here is how we embed a [Leaflet](https://ipyleaflet.readthedocs.io/en/latest/) map:

```{python}
from ipyleaflet import Map, Marker, basemaps, basemap_to_tiles
m = Map(
  basemap=basemap_to_tiles(
    basemaps.NASAGIBS.ModisTerraTrueColorCR, "2017-04-08"
  ),
  center=(52.204793, 360.121558),
  zoom=4
)
m.add_layer(Marker(location=(52.204793, 360.121558)))
m
```

To learn about available Jupyter Widgets visit <https://jupyter.org/widgets>.

## Plotly

Plotly is an interactive graphics library that can also be used with the Jupyter engine. Here's an example of using [Plotly](https://plotly.com/python/):

```{python}
import plotly.express as px
import plotly.io as pio
df = px.data.iris()
fig = px.scatter(df, x="sepal_width", y="sepal_length", 
                 color="species", 
                 marginal_y="violin", marginal_x="box", 
                 trendline="ols", template="simple_white")
fig.show()
```

::: {.callout-note}
If you are using Plotly within the VS Code Notebook Editor you will need to add a line of code to ensure that your plots can be seen both within VS Code and when rendered to HTML by Quarto. You can do this by configuring the Plotly [default renderer](https://plotly.com/python/renderers/#setting-the-default-renderer) as follows:

```{{python}}
import plotly.io as pio
pio.renderers.default = "plotly_mimetype+notebook_connected"
```

This workaround is required because when running within VS Code, Plotly chooses a default rendering that can't be easily exported to HTML (for more background, see this [GitHub Issue](https://github.com/microsoft/vscode-jupyter/issues/6999) and related discussion). Note that this workaround is only required for the VS Code Notebook Editor (it is not required if you are using Jupyter Lab or if you are editing a plain-text `.qmd` file).
:::
```````

## File: docs/interactive/index.qmd
```````
---
title: "Interactivity"
execute: 
  echo: false
---

## Overview

Adding interactivity to an article is a great way to help readers explore the concepts and data you are presenting more deeply. There are three ways to add interactive components to Quarto documents:

1.  Create custom JavaScript visualizations using [Observable JS](ojs/).

2.  Use the [Shiny](shiny/) R package to add interactivity to Knitr engine documents.

3.  Incorporate [Jupyter Widgets](widgets/jupyter.qmd) or [htmlwidgets](widgets/htmlwidgets.qmd) (for the Jupyter and Knitr engines, respectively) into your document.

Each of these techniques has distinct benefits and drawbacks in terms of expressiveness, ease of development, and deployment requirements. We'll touch on these considerations briefly below, then provide links to more in depth documentation for learning more.

## Observable JS

Quarto includes native support for [Observable JS](https://observablehq.com/@observablehq/observables-not-javascript), a set of enhancements to vanilla JavaScript created by [Mike Bostock](https://en.wikipedia.org/wiki/Mike_Bostock) (also the author of [D3](https://d3js.org/)). Observable JS is distinguished by its [reactive runtime](https://github.com/observablehq/runtime), which is especially well suited for interactive data exploration and analysis.

Here's an example that provides slider inputs to condition the behavior of a visualization:

```{ojs}
//| panel: sidebar
viewof talentWeight = Inputs.range([-2, 2], { value: 0.7, step: 0.01, label: "talent weight" })
viewof looksWeight = Inputs.range([-2, 2], { value: 0.7, step: 0.01, label: "looks weight" })
viewof minimum = Inputs.range([-2, 2], { value: 1, step: 0.01, label: "minimum fame" })
```

```{ojs}
//| panel: fill
{
  const w = 400
  const h = 400;
  const result = d3.create("svg").attr("width", w).attr("height", h);
  const margin = 20;
  const xScale = d3.scaleLinear().domain([-2, 2]).range([margin, w - margin]);
  const yScale = d3.scaleLinear().domain([-2, 2]).range([h - margin, margin]);
  const points = result
    .append("g")
    .selectAll("circle")
    .data(actors)
    .join(enter => {
       const sel = enter
         .append("circle")
         .attr("r", 3)
         .attr("cx", d => xScale(d.talent))
         .attr("cy", d => yScale(d.looks))
         .attr("fill", d3.lab(50, 40, 20));
       return sel.filter(d => d.fame <= minimum)
         .attr("fill", "rgb(200, 200, 200)")
         .attr("r", 2);
    });
    
  const linearRegression = regression.regressionLinear()
    .x(d => d.talent)
    .y(d => d.looks)
    .domain([-2, 2]);

  const chosenActors = actors
    .filter(d => d.fame > minimum);

  const line = result
    .append("g")
    .append("line")
    .attr("stroke", d3.lab(20, 40, 20))
    .attr("stroke-width", 1.5)
    .datum(linearRegression(chosenActors))
    .attr("x1", d => xScale(d[0][0]))
    .attr("x2", d => xScale(d[1][0]))
    .attr("y1", d => yScale(d[0][1]))
    .attr("y2", d => yScale(d[1][1]));


  const xAxis = d3.axisBottom(xScale).ticks(3);
  result.append("g")
    .attr("transform", `translate(0, ${yScale(0)})`)
    .call(xAxis);

  result.append("text")
    .attr("x", xScale(0.05))
    .attr("y", yScale(2))
    .text("Looks");

  result.append("text")
    .attr("y", yScale(0.1))
    .attr("x", xScale(-2))
    .text("Talent");

  const yAxis = d3.axisLeft(yScale).ticks(3);
  result.append("g")
    .attr("transform", `translate(${xScale(0)}, 0)`)
    .call(yAxis);
  
  return result.node();
}
```

```{python}
import numpy
import pandas as pd
ojs_define(points = pd.DataFrame(dict(
    x = numpy.random.randn(100),
    y = numpy.random.randn(100))))
```

```{ojs}
actors = transpose(points).map(v => ({
  talent: v.x,
  looks: v.y,
  fame: v.x * talentWeight + v.y * looksWeight
}));
```

```{ojs}
transpose = function(df)
{
  const keys = Object.keys(df);
  return df[keys[0]]
    .map((v, i) => Object.fromEntries(keys.map(key => [key, df[key][i] || undefined])))
    .filter(v => Object.values(v).every(e => e !== undefined));
}
regression = require('d3-regression@1');
```

Observable JS uses some special keywords and a custom runtime to make JavaScript reactive. For example, the "minimum fame" slider in the example above was created with the following code:

``` js
viewof minimum = Inputs.range([-2, 2], { 
  value: 1, step: 0.01, 
  label: "minimum fame"
})
```

It's then referenced as a normal JavaScript variable in code that creates the plot:

``` js
sel.filter(d => d.fame <= minimum)
```

As the user interacts with the slider, the `minimum` value is updated and any code that references it is automatically re-executed.

One benefit of using JavaScript for interactive documents is that all the logic and computation is performed on the client (so no server is required for deployment).

To learn more see the articles on [Observable JS](ojs/).

## Shiny

The Shiny package provides a flexible, easy to use framework for creating interactive web applications with R. Quarto in turn includes support for embedding Shiny components and applets into documents created with the Knitr engine.

Here's a live example of Shiny interactive components along with a brief explanation of the code required to create them:

::: {.border layout-ncol="2"}
```{=html}
 <iframe id="example1" src="https://gallery.shinyapps.io/goog-trend-index/" style="border: none; width: 100%; height: 720px" frameborder="0"></iframe>
```
<div>

<br/>

Shiny comes with a variety of built in input widgets. With minimal syntax it is possible to include widgets like the ones shown on the left in your apps:

``` r
# Select type of trend to plot
selectInput(inputId = "type", 
            label = strong("Trend index"),
            choices = unique(trend_data$type),
            selected = "Travel")
```

Displaying outputs is equally hassle-free:

``` r
mainPanel(
  plotOutput(outputId = "lineplot", 
             height = "300px"),
)
```

Build your plots or tables as you normally would in R, and make them reactive with a call to the appropriate render function:

``` r
output$lineplot <- renderPlot({
  plot(x = selected_trends()$date, 
       y = selected_trends()$close, 
       type = "l",
       xlab = "Date", 
       ylab = "Trend index")
})
```

</div>
:::

Shiny makes it very straightforward to create interactive documents using only R. Unlike using JavaScript though, you will need to [deploy](shiny/running.qmd#deployment) documents that use Shiny to a server.

To learn more see the articles on [Using Shiny with Quarto](shiny/).

## Widgets

[Jupyter Widgets](https://jupyter.org/widgets) and [htmlwidgets](https://www.htmlwidgets.org/) are great ways to incorporate interactivity into your documents if you don't know JavaScript and prefer to work exclusively in Python or R. They also run entirely client-side so can be deployed within normal static HTML documents.

For example, the following Python code is all that is required to embed a Leaflet map into a Jupyter engine document:

```{python}
#| echo: fenced
from ipyleaflet import Map, Marker, basemaps, basemap_to_tiles
m = Map(
  basemap=basemap_to_tiles(
    basemaps.NASAGIBS.ModisTerraTrueColorCR, "2017-04-08"
  ),
  center=(52.204793, 360.121558),
  zoom=4
)
m.add_layer(Marker(location=(52.204793, 360.121558)))
m
```

To learn more see these articles on using widgets with Quarto:

-   [Jupyter Widgets](widgets/jupyter.qmd) (Jupyter engine).

-   [htmlwidgets](widgets/htmlwidgets.qmd) (Knitr engine).

## Layout

Once you've gotten familiar with using various interactive components see the article on [Component Layout](layout.qmd) to learn how to:

-   Group inputs into an [input panel](layout.qmd#input-panel).

-   Present multiple outputs in a [tabset panel](layout.qmd#tabset-panel).

-   Use a [full page layout](layout.qmd#full-page-layout) rather than the default article layout.

-   Add a [sidebar panel](layout.qmd#sidebar-panel) for inputs in a full page layout.

-   Create custom [panel layouts](layout.qmd#panel-layout) to arrange outputs into rows and columns.

## Observable JS on the RStudio IDE
  
Observable JS offers full access to [NPM](https://www.npmjs.com/) libraries, and these tend to use JS features that require the Electron version of the RStudio IDE [daily builds](https://dailies.rstudio.com/). If you plan on using Observable JS in the RStudio IDE, we recommend the Electron daily builds.
```````

## File: docs/interactive/layout.qmd
```````
---
title: "Component Layout"
execute:
  echo: false
---

## Overview

When you introduce interactive components into a document you'll want to be sure to lay them out in a fashion that optimizes for readability and navigation.

There are of course a wide variety of ways you can incorporate interactivity spanning from visualizations embedded within a longer-form article all the way up to a more application/dashboard style layout. We'll cover both of these layout scenarios below.

We'll use examples from both [Observable JS](ojs/) and [Shiny](shiny/) interactive documents---if you aren't familiar with the code/syntax used for a given example just focus on the enclosing layout markup rather than the application code.

## Input Panel

If you have several inputs, you may want to group them inside an input panel (code block with option `panel: input` or div with class `.panel-input`). For example:

![](images/article-input-panel-columns.png)

The inputs are grouped in a panel and laid out in three columns by adding the `panel: input` and `layout-ncol: 3` options to the OJS code cell:

```{{ojs}}
//| panel: input
//| layout-ncol: 3

viewof ch = checkbox({
  title: "Passport color:",
  options: [
    { value: "red", label: "Red" },
    { value: "green", label: "Green" },
    { value: "blue", label: "Blue" },
    { value: "black", label: "Black" }
  ],
  value: ["red", "green", "blue", "black"],
  submit: false
})

viewof type = radio({
  title: "Representation:",
  options: [
    { label: 'Passports', value: 'p' },
    { label: 'Circles', value: 'c' }
  ],
  value: 'p'
})

viewof k = slider({
  title: "Symbol size:",
  min: 1,
  max: 10,
  value: 3,
  step: 1
})
```

## Tabset Panel

If you want to allow users to toggle between multiple visualizations, use a tabset (div with class `.panel-tabset`). Include a heading (e.g. `##`) for each tab in the tabset.

For example, here are a plot and data each presented in their own tab:

```{ojs}
data = FileAttachment("ojs/palmer-penguins.csv").csv({typed: true})
```

::: panel-tabset
## Plot

```{ojs}
Plot.rectY(data, 
  Plot.stackY(
    Plot.binX( 
      {y: "count"}, 
      {x: "body_mass_g", fill: "species", thresholds: 20})
    )
  ).plot({
    facet: {
      data,
      x: "sex"
    },
    marks: [Plot.frame()]
  })
```

## Data

```{ojs}
Inputs.table(data)
```
:::

Here is the markup and code used to create the tabset:

    ::: {.panel-tabset}

    ## Plot

    ```{{ojs}}
    Plot.rectY(data, 
      Plot.stackY(
        Plot.binX( 
          {y: "count"}, 
          {x: "body_mass_g", fill: "species", thresholds: 20})
        )
      ).plot({
        facet: {
          data,
          x: "sex"
        },
        marks: [Plot.frame()]
      })
    ```

    ## Data

    ```{{ojs}}
    Inputs.table(filtered)
    ```

    :::

## Full Page Layout

By default Quarto documents center their content within the document viewport, and don't exceed a maximum width of around 900 pixels. This behavior exists to optimize readability, but for an application layout you generally want to occupy the entire page.

To do this, add the `page-layout: custom` option. For example:

``` yaml
format: 
  html:
    page-layout: custom
```

Here's an example of a Shiny application that occupies the full width of the browser:

![](shiny/images/iris-k-means.png){.border}

You'll also note that the inputs are contained within a sidebar---the next section describes how to create sidebars.

## Sidebar Panel

Sidebars are created using divs with class `.panel-sidebar`. You can do this using a markdown div container (as illustrated above for `.panel-input`), or, if the entire contents of your sidebar is created from a single code cell, by adding the `panel: sidebar` option to the cell.

Sidebar panels should always have an adjacent panel with class `.panel-fill` or `.panel-center` which they will be laid out next to. The former (`.panel-fill`) will fill all available space, the latter (`.panel-center`) will leave some horizontal margin around its content.

For example, here is the source code of the user-interface portion of the Shiny application displayed above:

    ---
    title: "Iris K-Means Clustering"
    format: 
      html:
        page-layout: custom
    server: shiny
    ---

    ```{{r}}
    #| panel: sidebar
    vars <- setdiff(names(iris), "Species")
    selectInput('xcol', 'X Variable', vars)
    selectInput('ycol', 'Y Variable', vars, selected = vars[[2]])
    numericInput('clusters', 'Cluster count', 3, min = 1, max = 9)
    ```

    ```{{r}}
    #| panel: fill
    plotOutput('plot1')
    ```

The `panel: fill` option is added to the plot output chunk. You can alternately use `panel: center` if you want to leave some horizontal margin around the contents of the panel.

Adding the `panel` option to a code chunk is shorthand for adding the CSS class to its containing div (i.e. it's equivalent to surrounding the code chunk with a div with class e.g. `panel-fill`).

Here's an example of using a sidebar with OJS inputs:

![](images/application-sidebar-panel.png)

To do this you would use the following code:

    ```{{ojs}}
    //| panel: sidebar

    viewof myage = {
      const myage = select({
        title: "Quelle classe d'âge voulez-vous cartographier ?",
        options: ages,
        value: "80etplus"
      });
      return myage;
    }

    viewof pctvax = slider({
      title: '<br/>Objectif de vaccination',
      description: '200% signifie 2 doses par personnes pour tout le monde',
      min: 50,
      max: 200,
      value: 200,
      step: 10,
      format: v => v + "%"
    })

    viewof overlay = radio({
      title: "Écarter les cercles",
      options: [{ label: 'Oui', value: 'Y' }, { label: 'Non', value: 'N' }],
      value: 'N'
    })

    viewof label = radio({
      title: "Numéros des départements",
      options: [{ label: 'Afficher', value: 'Y' }, { label: 'Masquer', value: 'N' }],
      value: 'N'
    })
    ```

    ```{{ojs}}
    //| panel: fill

    (vaccine visualization code)

    ```

## Panel Layout

You can arrange multiple interactive components into a panel using the `layout` attribute of a containing div. For example, here we have a main visualization in the first row and two ancillary visualizations in the second row:

![](images/application-panel-layout.png){.border}

As described in the article on [Figures](/docs/authoring/figures.qmd#complex-layouts), you can arrange panels of figures in very flexible fashion using the `layout` attribute. For the example above we enclosed the three visualizations in the following div:

``` default
::: {layout="[ [1], [1,1] ]"}

(outputs)

:::
```

Note that you can apply the `layout` attribute to a div that is already a panel (e.g. `.panel-fill`) to specify layout for content adjacent to a sidebar. So the following markup is also valid:

``` default
::: {.panel-sidebar}

(inputs)

:::

::: {.panel-fill layout="[ [1], [1,1] ]"}

(outputs)

:::
```

The `layout` attribute is an array of arrays, each of which defines a row of the layout. Above we indicate that we want the first row to encompass the first visualization, and then to split the next two equally over the second row.

The values in rows don't need to add up to anything in particular (they are relative within each row), so we could have just as well have specified different relative widths for the second row if that was better suited to presenting our data:

``` default
::: {layout="[ [1], [3,2] ]"}

(outputs)

:::
```
```````

## File: docs/journals/_draft/create-extensions.qmd
```````
---
title: Creating an Extension
draft: true
---

For an overview of Quarto extensions, see [the overview](index.qmd) of Quarto Extensions.

## Extension Structure

Quarto extensions are conceptually very simple though powerful. An extension is a bundle of metadata and resources that is made available to Quarto during the rendering of a document. When the user of the extension refers to the extension (for example by using a shortcode, by placing the extension name in a list of filters, or by using the extension format name as a render target), the contributions of the extension are merged into the render pipeline as appropriate.

Extensions are structured on the file system as follows:

``` {.bash filename="Terminal"}
# Extension root folder
_extensions/<organization-name>/<extension-name>/

# Extension YAML file
_extensions/<organization-name>/<extension-name>/_extension.yml

# Other resources
_extensions/<organization-name>/<extension-name>/*
```

The `_extension.yml` file provides the metadata and configuration of the extension.

Extensions can be hosted and distributed as tarballs via URL, but the easiest way to distribute and host them is to use Github. When distributing extensions with Github, the `organization-name` above corresponds to the Github organization name and the `extension-name` corresponds to the repo name. For example, for the repo:

`https://github.com/quarto-ext/fontawesome`

The extension folder is

``` {.bash filename="Terminal"}
# The extension root folder
_extensions/quarto-ext/fontawesome/
```

and the command to add, update, or remove this extension is:

``` {.bash filename="Terminal"}
quarto add quarto-ext/fontawesome
quarto update quarto-ext/fontawesome
quarto remove quarto-ext/fontawesome
```

## Extension Metadata

Each extension is defined by its `_extension.yml` file which contains the metadata about the extension as well as the what items it contributes when used. At the root level, specify the following information in the `_extension.yml` file:

`title`

:   The extension's name

`author`

:   The author of the extension

`version`

:   A semantic version number this release. When installing, updating, or releasing an extension, this version number will be used to present a summary of actions to the user.

`quarto-required`

:   A semantic version number indicating the minimum version of quarto required to run this extension.

`contributes`

:   The items that this extension will contribute to the render. There are three allowed subkeys:

::: {style="margin-left: 1em;"}

`shortcodes`

:   A list of shortcode files that should be loaded when this extension is installed.

`filters`

:   A list of filters that should be loaded when this extension is included in the list of filters used to render a document or project. The order of the filters in this list will be preserved.

`formats`:

:   A record containing the key value pairs of output formats and the metadata associated with that output format.
:::

## Filter Extensions

For example, a simple filter extension looks like:

``` yaml
title: My Filter Extension
author: Norah Jones
version: 0.0.1
contributes:
  filters:
    - extension.lua
```

For more information about authoring filters, see [Pandoc Filters](/docs/authoring/filters.qmd#pandoc-filters).

## Shortcode Extensions

A simple shortcode filter extension looks like:

``` yaml
title: My Filter Extension
author: Norah Jones
version: 0.0.1
contributes:
  shortcodes:
    - shortcode.lua
```

For more information about authoring shortcodes, see [Shortcodes](/docs/authoring/shortcodes.qmd).

## Format Extensions

And a simple format extension looks like:

``` yaml
title: My Filter Extension
author: Norah Jones
version: 0.0.1
contributes:
  formats:
    pdf:
      keep-tex: true
      pdf-engine: lualatex
      cite-method: natbib
    html:
      css: my-style.css
    
```

Format extensions permit you to combine metadata and resources to provide specific behavior when rendering specific output formats. For example, if you'd like to create LaTeX and PDF output targeting a specific academic journal, you could create a format that provides the proper Quarto metadata as well as referenced LaTeX class files and bibliography styles. That metadata will be activated when the user renders a document targeting the extension format, by doing:

`quarto render my-article.qmd –to <extension>-pdf`

### Common Metadata

If you have metadata that is common to any output format when your format extension is targeted, you can place that metadata under the `common` key. For example:

``` yaml
contributes:
  format:
    common:
      filters:
        - filter.lua
      shortcodes:
        - quarto-ext/fancy-text
```

### Resources

You can easily include other files and resources within a format extension by placing those files within the extension directory and using relative paths to reference them. These relative paths will be properly handled.

If there are resources that you need to have copied to the input directory as a part of rendering the document (for example, a `bst` file for LaTeX bibliographies or a logo file), you can provide `format-resources`, which is a list of file paths. Each of these files will be copied into the directory containing the input that is being rendered when the document is rendered.

### Embedding Other Extensions in a Format Extension

It is often convenient to include the functionality from an extension in another extension, particularly for format extensions which might embed shortcodes or filters from another extension. This is allowed, but installing extensions into another extension must be done with a special syntax to embed them in the extension.

For example, running the following command from the directory which contains your `_extensions` directory:

``` {.bash filename="Terminal"}
$ quarto add quarto-ext/fancy-text --embed quarto-journals/jss
```

Will add the `quarto-ext/fancy-text` extension into the `quarto-journals/jss` extension in the `_extensions` folder. Once you have added the embedded extension, you can simply refer to it using its name under the `filters` or `shortcodes` keys in the relevant formats.

### Complete Example YML

``` yml
title: Journal of Statistical Software Format
author: Charles Teague
version: 0.9.2
contributes:
  format:
    common:
      filters:
        - filter.lua
      shortcodes:
        - quarto-ext/fancy-text
      knitr:
        opts_chunk:
          R.options:
            prompt: "R> "
            continue: "+"
    pdf:
      shift-heading-level-by: -1
      tbl-cap-location: bottom
      highlight-style: none
      include-in-header:
        text: |
          \usepackage{orcidlink,thumbpdf,lmodern}

          \newcommand{\class}[1]{`\code{#1}'}
          \newcommand{\fct}[1]{\code{#1()}}
      fig-width: 4.9 # 6.125" * 0.8, as in template
      fig-height: 3.675 # 4.9 * 3:4
      template-partials:
        - "partials/doc-class.tex"
        - "partials/title.tex"
        - "partials/before-body.tex"
        - "partials/_print-address.tex"
        - "partials/_print-author.tex"
      cite-method: natbib
      biblio-config: false
      format-resources:
        - jss.bst
        - jss.cls
        - jsslogo.jpg
    html:
      number-sections: true
      toc: true
```

The above could be rendered using:

``` {.bash filename="Terminal"}
$ quarto render my-article.qmd --to jss-pdf
```

Note that the command

``` {.bash filename="Terminal"}
$ quarto render my-article.qmd --to pdf
```

Would render a simple pdf. Since the extension name prefix is omitted, none of the extensions `pdf` or `common` metadata is merged into the document metadata when rendering.
```````

## File: docs/journals/_draft/extension-templates.qmd
```````
---
title: Extension Templates
draft: true
---

For format extensions in particular, it is often very useful to have a sample document that can demonstrate the functionality of the format extension and serve as a starting point for a user who is authoring a document targeting that format. You can support this by adding a template to the repository that hosts your Quarto extension. Users can then choose whether they'd like to simply install your extension (for example, into an existing project) or install the extension and use a template to start a new project.

## Using a Template

When you'd like to install an extension and use its template, you can do so with the following command:

`quarto use template <extension>`

For example, to install the format extension for author PLOS journal articles, you can use the command:

`quarto use template quarto-journals/plos`

When the `quarto use template` command is executed, the extension hosted at `quarto-journals/plos` will be installed, but in addition, other files in the repo will be placed in the directory, providing the user a scaffolding to get started.

If the command is run in an empty directory, you will be prompted whether you'd like to use the existing directory or whether you'd like to create a new directory. If the command is run in a directory which contains other files or directories, you will be prompted for the name of a directory to create.

## Template.qmd

Usually, an extension template will provide a `template.qmd` file in the root of the repository. This is the primary `qmd` file that demonstrates the functionality of the extension or serves as the starting point for the user. When the extension template is copied into the target directory, the `template.qmd` will automatically be renamed to match the name that the user provided for the directory.

## Choosing Which Files Exclude

By default, Quarto will exclude common Github repository files when copying an extension template. This includes any file name or directory starting with a `.` (e.g. `.gitignore`), `README.md`, `LICENSE`, and other such files. If you'd like, you can place `.quartoignore` file in the root of your repository with each line of the file being a glob describing file(s) to ignore (using syntax like a `.gitignore` file).

Unless excluded, any files or folders within the repository that aren't automatically ignored or listed in the `.quartoignore` file be copied into the target directory when using an extension template.

If you want to include a file that is automatically excluded, prepend a `!` to the glob (for example, `!README.md`).

## Creating a Template

To create a template, you can add any number of files to the root of your repository and they will be treated as template files when your extension is used in a directory. We recommend that you:

-   Provide a `template.qmd` file that will serve as the main document

-   Include other files that are used by your `template.qmd`, for example a bibliography file that is used, a CSL file that is used, or images, stylesheets or other files.

-   Provide a `_quarto.yml` file if appropriate

Your extension repository extension is structured in such a a way that you can test your extension and the template by simply rendering the `template.qmd` file right in the root of your repository. The `template.qmd` will be able to load your extension just as it would when installed, so testing and iterating should be as simple as working within your extension directory until you're satisfied (without the need to repeatedly install or update the extension in order to test it).
```````

## File: docs/journals/authors.qmd
```````
---
title: "Authors & Affiliations"
---

{{< include ../extensions/_extension-version.qmd >}}

## Overview

An important goal for Quarto is to make it possible to use the same source document to produce multiple output formats. One significant challenge to overcome is defining a consistent way to express author and affiliation metadata such that articles targeting multiple Journals do not require special tweaking of authors and affiliations for each publication.

Quarto's answer to this challenge is two-fold:

1.  Parse a variety of expressions of authors and affiliations into a standard schema.

2.  Provide de-normalized views of authors together with affiliations such that it is straightforward for template authors to create the LaTeX required by Journals.

Below we'll explore these facilities in more detail from the standpoint of template authors. To learn more about these facilities from the perspective of article writers, see [Authors & Affiliations](/docs/authoring/front-matter.qmd#authors-and-affiliations).

::: callout-note
Note that while there is a great deal of variety afforded in how authors and affiliations are specified, for a given Journal `template.qmd` you will likely have a preferred approach, and it's good form to seed the template with an example of this approach.
:::

## Author Metadata

Quarto will look in the `author` or `authors` field for data that can be parsed into a normalized representation of authors. This can be as simple as a name of list of names:

``` yaml
author:   
  - Norah Jones   
  - Bill Gates
```

Or alternatively can be a complex data structure expressing a variety of properties and attributes of authors along with their affiliations:

``` yaml
author:
  - name: Bill Gates
    orcid: 0000-0003-1689-0557
    email: bill@gates.com
    affiliations:
      - name: Bill & Melinda Gates Foundation
        address: 440 5th Ave N
        city: Seattle
        state: WA
        postal-code: 98109-4631
```

For both of the above expressions, Quarto processes and normalizes the author and affiliation data into the keys described below.

### author

The `author` metadata key receives a simple list of names that will render properly in most existing Pandoc templates not aware of the Quarto extended schema.

### authors

The `authors` metadata key contains the normalized author data structure. Affiliations are referenced (rather than placed inline), so this typically shouldn't be used by templates to output author data. The order the authors appear in the metadata will be preserved.

### affiliations

The `affiliations` metadata key contains the normalized affiliation data structure. Ids are automatically assigned if not defined. Affiliations contain no reference to their authors, so are typically not used by templates to output affiliation data. The order the affiliations appear in the metadata will be preserved. Duplicate affiliations are removed.

### by-author

The `by-author` metadata key contains a denormalized version of the author data organized in the original order of the authors. Rather than referencing affiliations, each author will have the full parsed contents of affiliations available in the affiliations subkey, making it easy for template authors to iterate through authors and then, within that, their affiliations. The order the authors appear in the metadata will be preserved.

### by-affiliation

The `by-affiliation` metadata key contains a denormalized version of affiliation data in the original order the affiliations appeared. Author data appears in order in the authors subkey, which contains the full parsed author data. This makes it easy for template authors to iterate over affiliations and the authors for each affiliation. The order the affiliations appear in the metadata will be preserved.

## Author Schema

The complete, normalized, author schema is as follows:

``` yaml
author:
  - id: string
    number: number
    name:
      given: string
      family: string
      literal: string
      dropping-particle: string
      non-dropping-particle: string
    url: string
    email: string
    phone: string
    fax: string
    degrees: 
      # see schema below
    orcid: string
    note: string
    acknowledgements: string
    attributes:
      corresponding: boolean
      equal-contributor: boolean
      deceased: boolean
    roles: 
      # see schema below
    metadata: object
    affiliations: 
      # see schema below
```

### Names

Most often, users will write a single string for name, like:

``` yaml
author: Norah Jones
```

or perhaps like:

``` yaml
author:
  - name: Norah Jones
```

Which will be parsed into:

``` yaml
author:
  - name:
      given: Norah
      family: Jones
      literal: Norah Jones
```

Quarto will parse names using BibTeX (a la [openjournals/inara](https://github.com/openjournals/inara/blob/main/data/filters/normalize-author-names.lua)), supporting BibTeX's parsing behavior for comma count, capitalization, and so on. When the name is unparseable by BibTeX, Quarto will attempt to parse names into given and family using spaces (everything after the last space is considered a family name), but to disambiguate, you may provide separate keys for the given name, family name and particle:

``` yaml
name:
  given: Norah
  family: Jones
  dropping-particle: von
```

### Degrees

Degrees or academic titles can specified with `degrees` and can be either of:

-   A single string:

    ``` yaml
    author: 
      degrees: PhD
    ```
-   An array of strings:

    ``` yaml
    author: 
      degrees:
        - PhD
        - MsSc
    ```

It will always be normalized into an array of degrees.

### Attributes

Recognized attribute keys that appear at the top level (for example, `corresponding`) will automatically be normalized under attributes. For example:

``` yaml
author:
  name: Norah Jones
  corresponding: true
```

would be normalized into:

``` yaml
author:
  - name:
      given: Norah
      family: Jones
      literal: Norah Jones
    attributes:
      corresponding: true
```

### Roles

Author roles can be specified with either `role` or `roles` and can be any of:

-   A single string:

    ``` yaml
    author: 
      role: "Conceived and designed the study"
    ```
-   An array of strings:

    ``` yaml
    author: 
      role: 
        - conceptualization
        - methodology
    ```
    
-   An array of key-value pairs of the form `role: contribution`:

    ``` yaml
    author: 
      role: 
        - conceptualization: lead
        - methodology: supporting
    ```

If a role matches one of the [CRediT roles or their aliases](https://github.com/quarto-dev/quarto-cli/blob/f65180a75e1cf2996328cd51cb4fd5d02d391511/src/resources/filters/modules/authors.lua#L119-L144), the additional properties `vocab-identifier`, `vocab-term`, and `vocab-term-indentifier`, will be added to the role with the appropriate value from the CRediT specification.

### Arbitrary Metadata

The normalized authors schema at the top level is a closed schema. Unrecognized keys that are passed in the root of authors will be normalized under the `metadata` key. For example:

``` yaml
author:
  name: Norah Jones
  corresponding: true
  custom-info: "custom value"
```

would be normalized into:

``` yaml
author:
  - name:
      given: Norah
      family: Jones
      literal: Norah Jones
    attributes:
      corresponding: true
    metadata:
      custom-info: "custom value"
```

Keys that are normalized into `metadata` should be considered potentially template specific and may not be present or depended upon when implementing a template.

## Affiliations Schema

The complete, normalized affiliations schema is defined as:

``` yaml
affiliations:
  - id: string
    number: number
    name: string
    department: string
    group: string
    address: string
    city: string
    region: string
    country: string
    postal-code: string
    url: string
```

### Parsing Notes

-   You may specify either state or region- either will be normalized into the region key.

-   If you specify only a string for an affiliation, it will be used as the name of affiliation.

-   You may omit an id and the id will be automatically generated (a simple counter based id will be used).

-   The url field may also be populated by an `affiliation-url` key in the author, which preserves compatibility with Distill metadata for authors and affiliations.

## Combinations

To combine the above schemas, users may specify author and affiliations in a number of different ways. Each will be normalized into the standard schema described above.

### Inline Affiliations

You may write affiliations as simple string or complex affiliations inline. For example:

``` yaml
author:
  - name: Norah Jones
    affiliations:
      - Carnegie Mellon University
      - University of Chicago
```

or

``` yaml
author:
  - name: Norah Jones
    affiliations:
      - name: Carnegie Mellon University
        city: Pittsburgh
        state: PA
      - name: University of Chicago
        city: Chicago
        state: IL
```

### Reference Affiliations

You may write out the affiliations into a separate key and only reference the affiliation in the author. For example:

``` yaml
author:
  - name: Norah Jones
    affiliations:
      - ref: cmu
      - ref: chicago
affiliations:
  - id: cmu
    name: Carnegie Mellon University
    city: Pittsburgh
    state: PA
  - id: chicago
    name: University of Chicago
    city: Chicago
    state: IL
```

### Inline References

You may also assign ids to affiliations created in the author key and use those ids as references in other authors. For example:

``` yaml
author:
  - name: Norah Jones
    affiliations:
      - id: cmu
        name: Carnegie Mellon University
        city: Pittsburgh
        state: PA
      - id: chicago
        name: University of Chicago
        city: Chicago
        state: IL
  - name: John Hamm
    affiliations:
      - ref: cmu
      - name: University of California, San Diego
        city: San Diego
        state: CA
```
```````

## File: docs/journals/formats.qmd
```````
---
title: "Journal Formats"
example-org: quarto-journals
example-format: acm
---

{{< include ../extensions/_extension-version.qmd >}}

## Overview

This article provides a guide to creating your own custom Journal formats. As a supplement to this guide we also recommend the following learning resources:

-   The source code for the Journal article formats available from the [quarto-journals](https://github.com/quarto-journals/) GitHub organization.

-   The [GitHub template repository](https://github.com/quarto-journals/article-format-template) for creating new Journal formats. The code in the template repository is heavily annotated so creating a new repository using this template and experimenting with it is an excellent way to learn.

Journal custom formats can be used just like normal Quarto formats (e.g. `pdf` and `html`):

You can specify a custom format beneath the `format` key just like a built-in format. For example:

``` yaml
----
title: "My Document"
format:
   acm-pdf: 
     toc: true
---
```

Custom formats all derive from one of the base formats, and include that base format as a suffix. Formats can also provide multiple variations that derive from distinct base formats. For example:

``` yaml
----
title: "My Document"
toc: true
format:
   acm-pdf: default
   acm-html: default
---
```

Note that we moved the `toc` option to the top level since it is shared between both of the formats.

Custom formats can also be used with the `--to` argument to `quarto render`. For example:

``` {.bash filename="Terminal"}
quarto render document.qmd --to acm-pdf
```

## Quick Start

Here we'll describe how to create a simple Journal article format extension. We'll use the `quarto create` command to do this. If you are using VS Code or RStudio you should execute `quarto create` within their respective integrated Terminal panes. 

To get started, execute `quarto create extension journal` within the parent directory where you'd like the format to be created:

```{.bash filename="Terminal"}
$ quarto create extension journal
 ? Extension Name › aps
```

As shown above, you'll be prompted for an extension name. Type `aps` (an acronym for a fictional academic association) and press Enter---the Journal format extension is then created:

```bash
Creating extension at /Users/jjallaire/quarto/dev/aps:
  - Created README.md
  - Created template.qmd
  - Created _extensions/aps/aps.lua
  - Created _extensions/aps/styles.css
  - Created _extensions/aps/_extension.yml
  - Created _extensions/aps/header.tex
  - Created bibliography.bib
```

If you are running within VS Code or RStudio a new window will open with the extension project. 

Here's what the contents of the files in `_extensions/aps/` look like:

``` {.yaml filename="_extensions/aps/_extension.yml"}
title: Aps
author: J.J. Allaire
version: 1.0.0
quarto-required: ">=1.2.222"
contributes:
  formats:
    common:
      toc: true
      filters:
        - aps.lua
    pdf:
      include-in-header: header.tex
    html:
      css: styles.css
```

The main `_extension.yml` config file defines the output formats available for this Journal. Here we defined `pdf` and `html` formats, which will be available to Quarto documents as `aps-pdf` and `aps-html`, respectively.

The config file also points to a number of other files that are used to customize the appearance of the Journal article:

- `header.tex` --- Custom LaTeX header directives

- `styles.css` --- Custom CSS for HTML output

- `aps.lua` --- Lua filter for various custom transformations

Finally, the `template.qmd` provides a base example article for users of the format:

``` {.markdown filename="template.qmd"}
---
title: Aps Template
format:
  aps-pdf:
    keep-tex: true  
  aps-html: default
author:
  - name: Sarah Malloc
    affiliations:
      - name: An Organization
        department: The Department
        address: 1 Main St
        city: Boston
        country: USA
        postal-code: 02210-1022
      - A second affiliation
    orcid: 0000-0000-0000-0000
    email: sm@example.org
    url: https://example.org/
  - name: Eliza Dealloc
    affiliations:
      - Another Affiliation
abstract: |
  This document is a template demonstrating the Aps format.
keywords: [template, demo]
bibliography: bibliography.bib  
---

## Introduction {#sec-intro}

*TODO* Create a template that demonstrates the appearance, formatting, layout, and functionality of your format. Learn more about journal formats at <https://quarto.org/docs/journals/>.
```

To develop your format, render/preview `template.qmd`, and then make changes to the various files in the `_extensions` directory (the preview will automatically refresh when you change these files).


## Example: ACM Format

The Quick Start above creates a very simple Journal article format. Here we'll walk through some of the code for a more complex example, the [ACM Format](https://github.com/quarto-journals/) available from [quarto-journals](https://github.com/quarto-journals/).

Before proceeding to the example we recommend you review these articles which cover some foundations that will be made use of in the example:

-   [Article Templates](templates.qmd)

-   [Authors & Affiliations](authors.qmd)

### Format Components

Here is what the source code repository for the ACM extension looks like:

``` default
.gitignore
.quartoignore
LICENSE
README.md
bibliography.bib
template.qmd
_extensions/
  acm/
    _extension.yml
    acm_proc_article-sp.cls
    sensys-abstract.cls
    include-in-header.tex
    acm-sig-proceedings.csl
    partials/
      doc-class.tex
      title.tex
      before-bib.tex
```

For the time being we'll ignore all of the files above the `_extensions` directory (those files aren't strictly part of the extension but rather provide documentation and a starter template---we'll describe their usage below).

-   The `_extensions` directory contains one or more extensions---in this case it contains the `acm` format extension.

-   The `_extension.yml` file declares the format extension and provides default metadata and options for articles created for the format (we'll do a deep dive into its contents below).

-   The `acm_proc_article-sp.cls` and `sensys-abstract.cls` files are LaTeX class files used by the ACM.

-   The `include-in-header.tex` file provides some standard content included in the preamble of ACM articles.

-   The `acm-sig-proceedings.csl` is a Citation Style Language (CSL) file that enables rendering of citations and bibliographies according to the standards of the ACM.

-   The `partials` directory contains some `.tex` files that override various parts of the standard Pandoc LaTeX template (see [Article Templates](templates.qmd) to learn more about partials).

Here's what the contents of `_extension.yml` look like:

``` yaml
title: ACM Journal Format
author: Charles Teague
version: 0.1.0
quarto-required: ">=1.2.0"
contributes:
  format:
    common:
      csl: acm-sig-proceedings.csl
      number-sections: true
    pdf:
      shift-heading-level-by: -1
      template-partials:
        - partials/before-bib.tex
        - partials/doc-class.tex
        - partials/title.tex
      include-in-header:
        - include-in-header.tex
```

As you can see, many of the files located in the `_extensions/acm` folder are referenced here. Also note that while there are several options declared for the `pdf` format, there are also some options declared in `common`---these options will be applied to `pdf` and will also be applied to other format variants (e.g. HTML) when they are developed.

### Format Template

Now let's return to the files outside of the `_extensions` directory. The `LICENSE` and `README.md` files provide documentation that is good form to include in all extensions. The `.gitignore` files masks selected files out of version control. The remainder of the files provide a format template that make it easier for users to get started with your format.

For any custom format that includes a `template.qmd`, users can get started with the format with a command like this:

``` {.bash filename="Terminal"}
quarto use template quarto-journals/acm
```

The files included within the ACM template are:

-   `template.qmd` is a starter template for using the format. Here's what the YAML document options for the template look like:

    ``` yaml
    ---
    title: Short Paper
    author:
      - name: Alice Anonymous
        email: alice@example.com
        affiliation: Some Institute of Technology
      - name: Bob Security
        email: bob@example.com
        affiliation: Another University
    abstract: |
      This is the abstract.
      It consists of two paragraphs.
    format:
      acm-pdf: 
        keep-tex: true  
    bibliography: bibliography.bib
    ---
    ```

-   `bibliography.bib` is a sample bibliography referenced by `template.qmd`

Note that the schema for author information used here is relatively straightforward. See the article on [Authors & Affiliations](authors.qmd) to learn about more sophisticated schemas for author information.

You can also include other files alongside `template.qmd` and they will be copied as well. Note that by default, Quarto will exclude common Github repository files when copying an extension template. This includes any file name or directory starting with a `.` (e.g. `.gitignore`), `README.md`, `LICENSE`, etc.. If you'd like, you can place a `.quartoignore` file in the root of your repository with each line of the file being a glob describing file(s) to ignore (using syntax like a `.gitignore` file).

{{< include ../extensions/_formats-common.qmd >}}

## Learning More

Here are some additional learning resources you may find valuable:

-   The source code for the Journal article formats available from the [quarto-journals](https://github.com/quarto-journals/) GitHub organization.

-   The [GitHub template repository](https://github.com/quarto-journals/article-format-template) for creating new Journal formats. The code in the template repository is heavily annotated so creating a new repository using this template and experimenting with it is an excellent way to learn.

-   In depth treatment of creating [Article Templates](templates.qmd) for Journals (including how to use partials to compose templates)

-   Review of the schema and options for expressing and rendering [Authors & Affiliations](authors.qmd).
```````

## File: docs/journals/index.qmd
```````
---
title: "Journal Articles"
---

## Overview

Quarto supports the creation of custom formats that extend base formats like `pdf`, `html`, and `docx`. The custom format system is very flexible, and has been designed to accommodate the creation of articles for publishing in professional Journals.

A major focus is single-source publishing: the same Quarto document source should be capable of producing both HTML and LaTeX output, and should also be capable of creating the LaTeX required for submission to multiple Journals. Key capabilities that enable this include:

-   The ability to flexibly adapt the native LaTeX templates provided by Journals for use with Pandoc.

-   The use of spans and divs to apply formatting (which enables targeting by CSS for HTML output and LaTeX macros/environments for PDF output).

-   A standardized schema for authors and affiliations so that you can express this data once and then have it automatically formatted according to the styles required for various Journals.

-   The use of Citation Style Language (CSL) to automate the formatting of citations and bibliographies according to whatever style is required by various Journals.

## Journal Formats

The Quarto team has developed several Journal formats and made them available within the [quarto-journals](https://github.com/quarto-journals/) GitHub organization. These formats include:

-   [ACM](https://github.com/quarto-journals/acm) [(preview)](https://quarto-journals.github.io/acm/)
-   [PLOS](https://github.com/quarto-journals/plos) [(preview)](https://quarto-journals.github.io/plos/)
-   [ASA](https://github.com/quarto-journals/jasa) [(preview)](https://quarto-journals.github.io/jasa/)
-   [Elsevier](https://github.com/quarto-journals/elsevier) [(preview)](https://quarto-journals.github.io/elsevier/)
-   [Biophysical](https://github.com/quarto-journals/biophysical-journal) [(preview)](https://quarto-journals.github.io/biophysical-journal/)
-   [ACS](https://github.com/quarto-journals/acs) [(preview)](https://quarto-journals.github.io/acs/)
-   [JSS](https://github.com/quarto-journals/jss) [(preview)](https://quarto-journals.github.io/jss/)

Many more formats will be added over time and we welcome proposals from the community for contributed formats (please post an issue at <https://github.com/quarto-journals/article-format-template/issues> if you are interested in contributing a format).

The `quarto use template` command can be used to create an article from one these formats. For example:

```{.bash filename="Terminal"}
quarto use template quarto-journals/acm
quarto use template quarto-journals/plos
quarto use template quarto-journals/elsevier
quarto use template quarto-journals/acs
quarto use template quarto-journals/jss
```

Note that the above commands will create a brand new article with default contents. In some cases you may want to use a Journal format in an existing document or project without copying the entire template. In that case you can just add the format extension by itself. For example:

```{.bash filename="Terminal"}
quarto add quarto-journals/acm
quarto add quarto-journals/plos
```

Follow the links for any of the formats above to learn more about how to use them with your own articles.

## Creating Formats

While the list of supported journals on [quarto-journals](https://github.com/quarto-journals/) will grow over time, it's likely that many users will want to create their own Journal formats. Creating a new format typically involves:

1.  Adapting the LaTeX template typically provided by Journals for use with Quarto.
2.  Selecting the appropriate citation processing and style for use with the format.
3.  Creating a `template.qmd` that demonstrates using the format.
4.  Optionally, ensuring that both HTML and LaTeX articles are well supported.

See the article on [Journal Formats](formats.qmd) for additional details on creating your own formats.
```````

## File: docs/journals/templates.qmd
```````
---
title: "Article Templates"
---

{{< include ../extensions/_extension-version.qmd >}}

## Overview

Journal article formats often require fine grained control of generated output as well as the ability to use Journal-specific commands and directives. This can be achieved for Quarto formats by providing custom Pandoc templates (LaTeX and/or HTML). Often these templates are a mix of Journal-specific LaTeX and standard directives required by Pandoc. This article describes how to create custom Journal templates that behave well with Pandoc and produce high-fidelity publisher ready output.

## Templates

Quarto uses [Pandoc templates](https://pandoc.org/MANUAL.html#templates) to generate the rendered output from a markdown file. A Pandoc template is a mix of format specific content and variables. The variables will be replaced with their values from a rendered document. For example, the most basic template looks like:

``` {.latex filename="mytemplate.tex"}
\documentclass{scrartcl}
\begin{document}
$body$
\end{document}
```

In the above template, the `$body$` variable will be replaced with the LaTeX that is generated from the body of the document. If the body text is `Hello **world**!` in Markdown, the value of `$body$` will be `Hello \textbf{world}!`.

By providing your own custom template used when rendering, you have complete control of the final output. You can provide this custom template to be used when rendering like this:

``` yaml
format:
  pdf:
    template: mytemplate.tex
```

For more complete information about template syntax, see [Template syntax](https://pandoc.org/MANUAL.html#template-syntax).

## Template Partials

Replacing an entire template gives you complete control of the rendered output, but many features of Pandoc and Quarto depend upon code and variables that appear in the built in templates. If you replace the entire template and omit these variables, features will not work properly.

It's therefore recommended that you take one of two approaches when authoring templates:

1.  Selectively [replace partials](#replacing-partials) that exist within the master LaTeX or HTML template.

2.  Replace the entire LaTeX or HTML template, but then [include partials](#including-partials) provided with Quarto to ensure that your template takes advantage of all Pandoc and Quarto features.

Below we'll cover both of these approaches. Note that after reviewing this documentation you may also want to check out the source code of formats published on [quarto-journals](https://github.com/quarto-journals/) for additional examples.

### Replacing Partials {#replacing-partials}

For LaTeX / PDF and HTML output, Quarto provides built in templates that are composed of a set of 'partial' template files. For these formats, you may replace portions of Quarto's built in template, allowing you to customize just a portion of the template without needing to replace the whole thing. A simple partial to provide custom handling of the document title in LaTeX looks like:

``` {.latex filename="title.tex"}
\title{$title$}
\author{$for(author)$$author$$sep$ \and $endfor$}
\date{$date$}
```

You provide this partial to Quarto like:

``` yaml
format:
  pdf:
    template-partials:
      - title.tex
```

When Quarto renders a document with a partial, it will use the built in template but replace a portion of the template with the provided partial. In the above case, the LaTeX title will be replaced with the implementation provided as the partial, while the rest of the built in template will be used.

The name of the partial file is important. You choose which portion of the template to replace by providing a partial with that name. Providing an empty file as a partial is a way to opt out of some features without modifying the whole main template.

You can see the list of partials available for each format below: [LaTeX Partials](#latex-partials), [Beamer Partials](#beamer-partials), [Typst Partials](#typst-partials), [HTML Partials](#html-partials) and [Revealjs Partials](#revealjs-partials).

### Including Partials {#including-partials}

In addition to replacing built in partials with your own, you may also choose to use built in partials when composing your own template. This allows you to create a template that takes advantage of the capabilities and options provided by Quarto and Pandoc without copying and maintaining the entire template code. For example, you can use the `$pandoc.tex()$` partial to include pandoc configuration for text highlighting, tables, graphics, tight lists, citations, and header includes:

``` {.latex filename="my-template.tex"}
\documentclass{scrartcl}
$pandoc.tex()$
\begin{document}
$body$
\end{document}
```

This modular approach means that it is easier to implement templates that:

-   Include required elements of Pandoc templates

-   Support general Pandoc features and options

-   Provide only the minimal LaTeX or HTML rather than being required to provide all of it

## LaTeX Partials {#latex-partials}

::: {.callout-note}

For `format: beamer`, see [Beamer Partials](#beamer-partials)

:::

View the Quarto LaTeX template and partials [source code here](https://github.com/quarto-dev/quarto-cli/tree/main/src/resources/formats/pdf/pandoc).

{{< include /docs/journals/_about-latex-beamer-partials.md >}}

A copy of some of Pandoc's original files are also kept in Quarto's source as a reference. These files are: `latex.template`, the main template used as `template.tex` containing all the partials; and `latex.common` the original version of `common.latex`,  which is tweaked to support Quarto's more specific partials.

See the [full source code](https://github.com/quarto-dev/quarto-cli/blob/main/src/resources/formats/pdf/pandoc/template.tex) for the Quarto LaTeX template to see how these partials are invoked by default.

## Beamer Partials {#beamer-partials}

::: {.callout-note}

New from Quarto 1.7: `format: beamer` now uses its own template and partials.

:::

View the Quarto Beamer template and partials [source code here](https://github.com/quarto-dev/quarto-cli/tree/main/src/resources/formats/beamer/pandoc).

{{< include /docs/journals/_about-latex-beamer-partials.md >}}

A copy of some of Pandoc's original files are also kept in Quarto's source as a reference. These files are: `beamer.template`, the main template used as `template.tex` containing all the partials; and `latex.common` the original version of `common.latex`,  which is tweaked to support Quarto's more specific partials.

See the [full source code](https://github.com/quarto-dev/quarto-cli/blob/main/src/resources/formats/beamer/pandoc/template.tex) for the Quarto Beamer template to see how these partials are invoked by default.

## Typst Partials {#typst-partials}

View the Quarto Typst template and partials [source code here](https://github.com/quarto-dev/quarto-cli/tree/main/src/resources/formats/typst/pandoc/quarto). 

template.typ

:   The core Typst template file which includes the basic document skeleton plus the following partials. This can't be replaced as a `partial`, instead use the `template` option to provide your own template.

definitions.typ

:   Definitions for Pandoc and Quarto features like block quotes, callouts, subfloats etc. In general, this partial must always be included within your custom template.

typst-template.typ

:   The definition of the Typst template function that will be called on the entire document contents. In the default template this function is called `article()` and generates a title block and author list, followed by the document content, optionally laid out in columns.

typst-show.typ

:   A show rule for the entire document that captures document metadata and passes it to the function defined in `typst-template.typ`.

notes.typ

:   Creates footnotes.

biblio.typ

:   Creates the bibliography.

## HTML Partials {#html-partials}

View the Quarto html template and partials [source code here](https://github.com/quarto-dev/quarto-cli/tree/main/src/resources/formats/html/pandoc). Note that `html.template` is a copy of the complete Pandoc template that the Quarto template and partials is based upon.

Quarto's HTML template is broken down into the following components:

template.html

:   The core HTML template which includes the basic document skeleton plus the following partials. This can't be replaced as a `partial`, instead use the `template` option to provide your own template.

metadata.html

:   Populates basic document metadata into the HTML document head. More advanced metadata elements are not currently implemented within this template (e.g. social media, academic metadata) but are implemented as post processors.

title-block.html

:   Provides the title block for the document. 

toc.html

:   Provide the table of contents target for the document

## Revealjs Partials {#revealjs-partials}

View the Quarto Revealjs template and partials [source code here](https://github.com/quarto-dev/quarto-cli/tree/main/src/resources/formats/revealjs/pandoc). Note that `revealjs.template` is a copy of the complete Pandoc template that the Quarto template and partials is based upon.

template.html

:   The core Revealjs templates which includes the basic presentation skeleton plus the following partials. This can't be replaced as a `partial`, instead use the `template` option to provide your own template.

title-slide.html

:   HTML used for the presentation title slide. By default, Quarto uses a fancy `title-slide.html` partial that leverages [Authors & Affiliations](/docs/journals/authors.qmd) handling. Use the `title-slide.html` [source code](https://github.com/quarto-dev/quarto-cli/blob/main/src/resources/formats/revealjs/pandoc/title-fancy/title-slide.html) as a starter if you want to tweak this partial.

toc-slide.html

:   HTML used for the presentation table of contents.
```````

## File: docs/manuscripts/authoring/_authoring-content.qmd
```````
{{< include ../_tool-chooser.md >}}

## Overview

{{< include _overview.qmd >}}

## Setup

{{< include _setup.qmd >}}

## Project Files

{{< include _files.qmd >}}

## Workflow

::: {.content-visible when-meta="tool.is_jupyterlab"}
{{< include _workflow-ipynb.qmd >}}
:::

::: {.content-visible unless-meta="tool.is_jupyterlab"}
{{< include _workflow-qmd.qmd >}}
:::

::: {.content-visible unless-meta="tool.is_jupyterlab"}
## Visual Editor

{{< include _visual-editor.qmd >}}

:::

## Notebook Structure

{{< include _structure.qmd >}}

## Front Matter

{{< include _front-matter.qmd >}}

## Markdown

{{< include _markdown.qmd >}}

## Computations {#inline-computations}

{{< include _inline-computations.qmd >}}

## Citations

{{< include _citations.qmd >}}

## Cross References {#cross-ref}

{{< include _cross-refs.qmd >}}

## Equations

{{< include _equations.qmd >}}

## Tables

{{< include _tables.qmd >}}

## Static Figures

{{< include _figures.qmd >}}

## External Embeds {#embed}

::: {.content-visible when-meta="tool.is_jupyterlab"}
{{< include _embeds-ipynb.qmd >}}
:::

::: {.content-visible unless-meta="tool.is_jupyterlab"}
{{< include _embeds-qmd.qmd >}}
:::

## Up Next

{{< include _footer.qmd >}}
```````

## File: docs/manuscripts/authoring/_citations.qmd
```````
::: callout-tip

## Article Citation

This section describes adding citations in the text of your article. The citation for your own article that is displayed at the bottom of the article webpage is controlled using [Front Matter](#front-matter).

:::

To add citations you need a bibliography file, `.bib`, containing the citation data. You can specify this file in the document YAML with the `bibliography` option. For example, the citation data for `{{< meta tool.article-file >}}` is stored in `references.bib`:

```yaml
bibliography: references.bib
```

The file `references.bib` contains only one citation:

```{.bib filename="references.bib"}
@article{marrero2019,
  author = {Marrero, Jos{\' e} and Garc{\' i}a, Alicia and Berrocoso, Manuel and Llinares, {\' A}ngeles and Rodr{\' i}guez-Losada, Antonio and Ortiz, R.},
  journal = {Journal of Applied Volcanology},
  year = {2019},
  month = {7},
  pages = {},
  title = {Strategies for the development of volcanic hazard maps in monogenetic volcanic fields: the example of {La} {Palma} ({Canary} {Islands})},
  volume = {8},
  doi = {10.1186/s13617-019-0085-5},
}
```

To cite an article from the bibliography in your text, you use `@` followed by the citation identifier, e.g. `marrero2019`. For example, the article includes this line citing this reference: 

```markdown
Studies of the magma systems feeding the volcano, such as @marrero2019, have proposed ...
```

This renders as:

> Studies of the magma systems feeding the volcano, such as Marrero et al. (2019), have proposed ...

Hovering over the citation text reveals the full reference details. Clicking on the citation takes a reader to the reference in the References section at the end of the article:

![](images/article-references.png){fig-alt="Screenshot of the rendered article showing a section titled References. Below the title is a full reference starting 'Marrero, José, '." .border}



The above citation is an example where the author's names are incorporated into the sentence itself. Another common style is to place the citation within parentheses, often at the end of a sentence. You can achieve this by enclosing the citation syntax in square brackets `[`. For example,

```markdown
A prior study of the magma systems feeding the volcano proposed that there are two main magma reservoirs feeding the Cumbre Vieja volcano [@marrero2019].
```

This renders as:

> A prior study of the magma systems feeding the volcano proposed that there are two main magma reservoirs feeding the Cumbre Vieja volcano (Marrero et al. 2019).

There are many other syntax variations to include page numbers, chapters, or exclude the author names. You can read more in the [Citations](/docs/authoring/citations.qmd) documentation.

::: {.content-visible unless-meta="tool.is_jupyterlab"}

The Visual Editor **Insert -> Citation** dialog has utilities for adding citations from their DOI, your Zotero library, and public databases like Crossref, PubMed and DataCite. This provides an easy way to build the  bibliography file (`.bib`) and generate the markdown citation syntax. 
:::
```````

## File: docs/manuscripts/authoring/_cross-refs.qmd
```````
Quarto can generate cross references that keep track of numbering and linking for you. The general syntax for a cross reference is an `@` followed by a label. For example, to reference the timeline figure, you could write:

``` markdown
@fig-timeline
```

When rendered, cross references include a word to indicate the type of object being referenced, like "Figure" or "Table". So for instance, this line in `{{< meta tool.article-file >}}`:

``` markdown
Eight eruptions have been recorded since the late 1400s (@fig-timeline).
```

Results in the text:

> Eight eruptions have been recorded since the late 1400s (Figure 1).

Where "Figure 1" is also a link to the appropriate figure.

The labels you add to elements must have the appropriate prefix to allow cross referencing:

| Element  | Label Prefix | Rendered Cross Reference |
|----------|--------------|--------------------------|
| Figure   | `fig-`       | Figure 1                 |
| Table    | `tbl-`       | Table 1                  |
| Equation | `eq-`        | Equation 1               |
| Section  | `sec-`       | Section 1                |

You've already seen you can add a label to output generated by code using the `label` code chunk option. You'll see how to add labels to non-code generated elements, like [equations](#equations), [tables](#tables), and [static figures](#static-figures), as you learn about them below.

To cross reference sections your document YAML header must also include:

```yaml
number-sections: true
```

You can add a label to a section heading in curly braces after the heading, e.g:

```markdown
## Data & Methods {#sec-data-methods}
```

You can then reference this section in the text, like:

```markdown
Data and methods are discussed in @sec-data-methods.
```

Which will be rendered as:

> Data and methods are discussed in Section 2.

You can read more about the types of objects that can be referenced, including code listings, and mathematical theorems, as well as some of the options to control how references appear in the Quarto [Cross References](/docs/authoring/cross-references.qmd) documentation.


::: {.content-visible unless-meta="tool.is_jupyterlab"}

In the Visual Editor, you can use **Insert -> Cross Reference** to get a dialog box with the available labels in your document and quickly generate the syntax needed for a cross reference.
:::
```````

## File: docs/manuscripts/authoring/_embeds-ipynb.qmd
```````
An alternative to including computations directly in the article notebook, is to embed output from other notebooks. This manuscript project includes the notebook `data-screening.ipynb` in the `notebooks/` folder.

To embed output from a notebook, you can use the `embed` shortcode. Quarto shortcodes are special markdown directives that generate content. The `embed` shortcode is used in main article file in the line:

``` {.markdown filename="index.ipynb" shortcodes="false"}
{{< embed notebooks/data-screening.ipynb#fig-spatial-plot >}}
```

The double curly braces (`{{`) and angle brackets (`<`) indicate this is a shortcode. The `embed` shortcode requires a path to a notebook cell. In this case, it's the file path to `data-screening.ipynb`, followed by `#` and a cell identifier. Here, the cell identifier is the cell label, set using the Quarto cell option `label` in code cell in the `data-screening.ipynb` notebook:

``` {.python filename="data-screening.ipynb"}
#| label: fig-spatial-plot
#| fig-cap: "Locations of earthquakes on La Palma since 2017."
#| fig-alt: "A scatterplot of earthquake locations plotting latitude 
#|   against longitude."
from matplotlib import colormaps
cmap = colormaps['viridis_r']
ax = df.plot.scatter(x="Longitude", y="Latitude", 
                     s=40-df["Depth(km)"], c=df["Magnitude"], 
                     figsize=(12,10), grid="on", cmap=cmap)
colorbar = ax.collections[0].colorbar
colorbar.set_label("Magnitude")

plt.show()
```

Just like any figure, using a label starting with `fig-` allows it to be cross referenced in the text. Any other options, like the figure caption (`fig-cap`) and alt text (`fig-alt`), can also be set in the source notebook.

In this manuscript, the notebook `data-screening.ipynb` isn't reproducible: you can't regenerate all the outputs because some inputs (e.g. the data) aren't included in the project. However, you can change the Quarto cell options without rerunning the code cells in the notebook. If you edit the caption to:

``` python
#| fig-cap: "Earthquakes on La Palma since 2017."
```

When you save `data-screening.ipynb`, you'll find the preview updates and the caption is reflected in the article itself.
```````

## File: docs/manuscripts/authoring/_embeds-qmd.qmd
```````
::: callout-note
## Embedding Quarto Notebooks

This section covers embedding outputs from Quarto documents (`.qmd`). You can also [embed outputs from Jupyter Notebooks (`.ipynb`)](/docs/authoring/notebook-embed.qmd).

:::

An alternative to including computations directly in the article notebook is to embed output from other notebooks. This manuscript project includes the notebook `{{< meta tool.notebook-file >}}` in the `notebooks/` folder.

To embed output from a notebook, you can use the `embed` shortcode. Quarto shortcodes are special markdown directives that generate content. The `embed` shortcode is used in main article file in the line:

::: {.content-visible when-meta="tool.is_rstudio"}
``` {.markdown filename="index.qmd" shortcodes="false"}
{{< embed notebooks/explore-earthquakes.qmd#fig-spatial-plot >}}
```
:::

::: {.content-visible when-meta="tool.is_vscode"}
``` {.markdown filename="index.qmd" shortcodes="false"}
{{< embed notebooks/data-screening.qmd#fig-spatial-plot >}}
```
:::

The double curly braces (`{{`) and angle brackets (`<`) indicate this is a shortcode. The `embed` shortcode requires a path to a notebook chunk. In this case, it's the file path to a source notebook, `{{< meta tool.notebook-file >}}`, followed by `#` and a chunk label. The chunk label is set using the Quarto chunk option `label` in `{{< meta tool.notebook-file >}}` notebook:

::: {.content-visible when-meta="tool.is_rstudio"}
````{.qmd filename="explore-earthquakes.qmd"}
```{{r}}
#| label: fig-spatial-plot
#| fig-cap: "Locations of earthquakes on La Palma since 2017"
#| fig-alt: "A scatterplot of earthquake locations plotting latitude 
#|   against longitude."
la_palma |> 
  ggplot(aes(Longitude, Latitude)) +
  geom_point(aes(color = Magnitude, size = 40-`Depth(km)`)) +
  scale_color_viridis_c(direction = -1) + 
  scale_size(range = c(0.5, 2), guide = "none") +
  theme_bw()
```
````
:::

::: {.content-visible when-meta="tool.is_vscode"}
````{.qmd filename="data-screening.qmd"}
```{{python}}
#| label: fig-spatial-plot
#| fig-cap: Locations of earthquakes on La Palma since 2017.
#| fig-alt: A scatterplot of earthquake locations plotting latitude against longitude.
from matplotlib import colormaps
cmap = colormaps['viridis_r']
ax = df.plot.scatter(x="Longitude", y="Latitude", 
                     s=47-df["Depth(km)"], c=df["Magnitude"], 
                     figsize=(12,10), grid="on", cmap=cmap)
colorbar = ax.collections[0].colorbar
colorbar.set_label("Magnitude")

plt.show()
```
````
:::

Just like any figure, using a label starting with `fig-` allows it to be cross referenced in the text. Any other options, like the figure caption (`fig-cap`) and alt text (`fig-alt`), can also be set in the source notebook.

Whenever you change the content of `{{< meta tool.notebook-file >}}`, including updating chunk options like the caption, it will be re-rendered. 
Consequently, the code in `{{< meta tool.notebook-file >}}` will also be re-run.

::: {.content-visible when-meta="tool.is_rstudio"}
To re-run the code in this notebook, you'll need to have the tidyverse package: 
``` r
install.packages("tidyverse")
```
:::


For example, if you edit the caption to:

```{.r}
#| fig-cap: "Earthquakes on La Palma since 2017."
```

You'll notice in the background `quarto preview` re-renders the file:
```{.bash filename="Terminal"}
processing file: {{< meta tool.notebook-file >}}
                                                                                    output file: {{< meta tool.notebook-file >}}

Rendering output notebook [notebooks/{{< meta tool.notebook-file >}}]
Rendering HTML preview [notebooks/{{< meta tool.notebook-file >}}]
```

And then the caption in the main article preview updates.
```````

## File: docs/manuscripts/authoring/_equations.qmd
```````
Quarto markdown can include equations specified in LaTeX notation. Use single dollar signs (`$`) to add an equation inline or double dollar signs (`$$`) to add a display equation. Both of these are illustrated in the following paragraph in `{{< meta tool.article-file >}}`:

``` markdown
Let $x$ denote the number of eruptions in a year. Then, $x$ can be modeled by a Poisson distribution

$$
p(x) = \frac{e^{-\lambda} \lambda^{x}}{x !}
$$ {#eq-poisson}

where $\lambda$ is the rate of eruptions per year. Using @eq-poisson, the probability of an eruption in the next $t$ years can be calculated.
```
Notice the display equation has a label added in curly braces after the closing `$$`. This allows it to be referenced using `@eq-poisson` in the text.

When rendered, this displays as:

> Let $x$ denote the number of eruptions in a year. Then, $x$ can be modeled by a Poisson distribution
> $$
> p(x) = \frac{e^{-\lambda} \lambda^{x}}{x !}
> $$ {#eq-poisson}
> where $\lambda$ is the rate of eruptions per year. Using @eq-poisson, the probability of an eruption in the next $t$ years can be calculated.
```````

## File: docs/manuscripts/authoring/_figures.qmd
```````
To include a figure from a file, the markdown syntax looks like:

``` markdown
![Caption](file_path_to_image)
```

For example, to include the `la-palma-map.png` image from the `images/` folder in the project, along with the caption "Map of La Palma", you would write:

``` markdown
![Map of La Palma](images/la-palma-map.png)
```

::: callout-tip
## Image File Location

You don't have to store your images in a folder called `images/`, although it is a common convention. Your images can be anywhere **inside** your manuscript project directory, just make sure you include the full path to the image, relative to the location of `{{< meta tool.article-file >}}`.
:::

The actual markdown in `{{< meta tool.article-file >}}` includes a further attribute, `#fig-map` inside curly braces following the image path to provide a label for cross references:

``` markdown
![Map of La Palma](images/la-palma-map.png){#fig-map}
```

Another attribute that you may wish to add is `fig-alt`, the alt text to be provided for the image. For example:

``` markdown
![Map of La Palma](images/la-palma-map.png){#fig-map fig-alt="A map of the Canary Islands. The second most west island, La Palma, is highlighted."}
```

You can read more about including figures in Quarto documents, including how to resize figures and arrange multiple figures, on the Quarto docs [Figures](/docs/authoring/figures.qmd) page.
```````

## File: docs/manuscripts/authoring/_files.qmd
```````
At its simplest, a Quarto manuscript project has two files:

-   A notebook file where you write your article: `{{< meta tool.article-file >}}`. This file contains:
    -   document metadata, including article front matter (authors, affiliations, etc.) and Quarto options,
    -   the article body, written using special Quarto markdown syntax that allows you to add things like cross references and citations, and
    -   optionally, code, where you control if, or how, the code and its output appear in the article.
-   A configuration file `_quarto.yml` that identifies the project as a Quarto manuscript and controls how your manuscript is put together.

This particular manuscript project includes some other files and folders, you'll learn about these files as you work through this tutorial.
```````

## File: docs/manuscripts/authoring/_footer.qmd
```````
You've now covered the main features of Quarto for authoring a manuscript. You've edited `{{< meta tool.article-file >}}`, added resources like figures, notebooks or bibliographic data, and previewed the result.

Once, you are happy with the changes you've made, you'll need update your public manuscript webpage.

Head on to [Publishing](/docs/manuscripts/publishing.qmd) to learn how to publish and share your manuscript with the world.
```````

## File: docs/manuscripts/authoring/_front-matter.qmd
```````
The YAML header consists of key-value pairs set using the syntax `key: value`. The header is often extensive for articles because it is used to specify much of the scholarly front matter, like the authors and their affiliations, and the abstract.

::: {.callout-tip appearance="simple" collapse="true"}
## Expand to see full YAML header for `{{< meta tool.article-file >}}`

``` yaml
title: La Palma Earthquakes
author:
  - name: Steve Purves
    orcid: 0000-0002-0760-5497
    corresponding: true
    email: steve@curvenote.com
    roles:
      - Investigation
      - Project administration
      - Software
      - Visualization
    affiliations:
      - Curvenote
  - name: Rowan Cockett
    orcid: 0000-0002-7859-8394
    corresponding: false
    roles: []
    affiliations:
      - Curvenote
keywords:
  - La Palma
  - Earthquakes
abstract: |
  In September 2021, a significant jump in seismic activity on the island of La Palma (Canary Islands, Spain) signaled the start of a volcanic crisis that still continues at the time of writing. Earthquake data is continually collected and published by the Instituto Geográphico Nacional (IGN). ...
plain-language-summary: |
  Earthquake data for the island of La Palma from the September 2021 eruption is found ...
key-points:
  - A web scraping script was developed to pull data from the Instituto Geogràphico Nacional into a machine-readable form for analysis
  - Earthquake events on La Palma are consistent with the presence of both mantle and crustal reservoirs.
date: last-modified
bibliography: references.bib
citation:
  container-title: Earth and Space Science
number-sections: true
```
:::

For example, at the top level the header in `{{< meta tool.article-file >}}` sets the following keys: `title`, `author`, `keywords`, `abstract`, `plain-language-summary`, `key-points`, `date`, `bibliography`, `citation`, and `number-sections`.

You've seen how editing the `title` key updated the title of the article on the manuscript webpage. The `title` key is also used by the PDF and Word formats, but not all of the keys are used in all formats. 

You can read more about setting the front matter for your article in [Scholarly Front Matter](/docs/authoring/front-matter.qmd).
```````

## File: docs/manuscripts/authoring/_inline-computations.qmd
```````
::: {.content-visible unless-meta="tool.is_rstudio"}
::: callout-tip
## Python Examples

This section uses Python code examples, but Quarto also supports R, Julia and Observable.

::: {.content-visible when-meta="tool.is_jupyterlab"}
You don't need to rerun the Python code to follow along, but if you would like to, you'll need the `matplotlib` and `numpy` packages.
:::
:::
:::

::: {.content-visible when-meta="tool.is_rstudio"}
::: callout-tip
## R Examples

This section uses R code examples, but Quarto also supports Python, Julia and Observable.
:::
:::

Your article can include executable code. By default, code itself will not display in the article, but any output including tables and figures will. When you include code in your article, you'll also get an additional link to the "Article Notebook" under Notebooks on the manuscript webpage. This is a rendered version of your article notebook that includes the code.

For example, `{{< meta tool.article-file >}}`, includes:

::: {.content-visible when-meta="tool.is_jupyterlab"}
``` python
import matplotlib.pyplot as plt
import numpy as np
eruptions = [1492, 1585, 1646, 1677, 1712, 1949, 1971, 2021]
```
:::

::: {.content-visible when-meta="tool.is_rstudio"}
``` r
eruptions <- c(1492, 1585, 1646, 1677, 1712, 1949, 1971, 2021)
n_eruptions <- length(eruptions)
```
:::

::: {.content-visible when-meta="tool.is_vscode"}
```{{python}}
import matplotlib.pyplot as plt
import numpy as np
eruptions = [1492, 1585, 1646, 1677, 1712, 1949, 1971, 2021]
```
:::

This code doesn't appear in the rendered article, but does in the "Article Notebook".

::: {.content-visible unless-meta="tool.is_rstudio"}
::: {layout-ncol=2}
![Rendered Article](images/code-webpage.png){.border fig-alt="Screenshot of the rendered article with a section starting with 'Let x denote'. No code is visible."}

![Article Notebook](images/code-article-notebook.png){.border fig-alt="Screenshot of the Article Notebook with a section starting with 'Let x denote'. Code is visible in two cells. The first cell starts 'import matplotlib'"}
:::
:::

::: {.content-visible when-meta="tool.is_rstudio"}
::: {layout-ncol=2}
![Rendered Article](images/code-webpage.png){.border fig-alt="Screenshot of the rendered article with a section starting with 'Let x denote'. No code is visible."}

![Article Notebook](images/code-article-notebook-r.png){.border fig-alt="Screenshot of the Article Notebook with a section starting with 'Let x denote'. Code is visible in two blocks. The first block starts 'eruptions <-'"}
:::
:::

You can add Quarto options to code cells by adding a `#|` comment to the top, followed by the option in YAML syntax. For example, adding the `echo` option with the value `true` would look like this:

::: {.content-visible when-meta="tool.is_jupyterlab"}
``` python
#| echo: true
import matplotlib.pyplot as plt
import numpy as np
eruptions = [1492, 1585, 1646, 1677, 1712, 1949, 1971, 2021]
```
:::

::: {.content-visible when-meta="tool.is_rstudio"}
```{{r}}
#| echo: true
eruptions <- c(1492, 1585, 1646, 1677, 1712, 1949, 1971, 2021)
n_eruptions <- length(eruptions)
```
:::

::: {.content-visible when-meta="tool.is_vscode"}
```{{python}}
#| echo: true
import matplotlib.pyplot as plt
import numpy as np
eruptions = [1492, 1585, 1646, 1677, 1712, 1949, 1971, 2021]
```
:::

The `echo` option describes whether the code is included in the rendered article. If you make this change and save `{{< meta tool.article-file >}}`, you'll see this code now appears in the article.

::: {.content-visible unless-meta="tool.is_rstudio"}
You can find a list of all the code cell options available on the [Jupyter Code Cell](/docs/reference/cells/cells-jupyter.qmd) reference page.
:::

::: {.content-visible when-meta="tool.is_rstudio"}
You can find a list of all the code cell options available on the [Knitr Code Cell](/docs/reference/cells/cells-knitr.qmd) reference page.
:::

The next code cell creates a figure:

::: {.content-visible when-meta="tool.is_jupyterlab"}
``` python
#| label: fig-timeline
#| fig-cap: Timeline of recent earthquakes on La Palma
#| fig-alt: An event plot of the years of the last 8 eruptions on La Palma.

plt.figure(figsize=(6, 1))
plt.eventplot(eruptions, lineoffsets=0, linelengths=0.1, color='black')
plt.gca().axes.get_yaxis().set_visible(False)
plt.ylabel('')
plt.show()
```
:::

::: {.content-visible when-meta="tool.is_rstudio"}
```{{r}}
#| label: fig-timeline
#| fig-cap: Timeline of recent earthquakes on La Palma
#| fig-alt: An event plot of the years of the last 8 eruptions on La Palma.
#| fig-height: 1.5
#| fig-width: 6
par(mar = c(3, 1, 1, 1) + 0.1)
plot(
  eruptions, rep(0, n_eruptions), 
  pch = "|", axes = FALSE
)
axis(1)
box()
```
:::

::: {.content-visible when-meta="tool.is_vscode"}
```{{python}}
#| label: fig-timeline
#| fig-cap: Timeline of recent earthquakes on La Palma
#| fig-alt: An event plot of the years of the last 8 eruptions on La Palma.

plt.figure(figsize=(6, 1))
plt.eventplot(eruptions, lineoffsets=0, linelengths=0.1, color='black')
plt.gca().axes.get_yaxis().set_visible(False)
plt.ylabel('')
plt.show()
```
:::

The `label` option is used to add an identifier to code cell and its output, for example to allow cross referencing. The prefix `fig-` is required for figure cross references, but the suffix, in this case `timeline`, is up to you. You'll learn more about [Cross References](#cross-ref) below. 

The option `fig-cap` provides the caption text displayed below the figure in the manuscript, and  `fig-alt` provides alt text for the figure, helping your manuscript webpage to meet accessibility guidelines. 

Computations are also a good way to include tables based on data. You can read more about doing this in the Quarto documentation on [Tables from Computations](/docs/authoring/tables.qmd#computations).

If you have code output you don't want to include in your article you can use `output: false`. For example, you may have a value that is helpful for writing your content, but you don't want it to appear in the article itself. The next code cell is an example:

::: {.content-visible when-meta="tool.is_jupyterlab"}
``` python
#| output: false
avg_years_between_eruptions = np.mean(np.diff(eruptions[:-1]))
avg_years_between_eruptions
```
:::

::: {.content-visible when-meta="tool.is_rstudio"}
```{{r}}
#| output: false
avg_years_between_eruptions <- mean(diff(eruptions[-n_eruptions]))
avg_years_between_eruptions
```
:::

::: {.content-visible when-meta="tool.is_vscode"}
```{{python}}
#| output: false
avg_years_between_eruptions = np.mean(np.diff(eruptions[:-1]))
avg_years_between_eruptions
```
:::

If you are viewing the rendered "Article Notebook", you'll see the value of `avg_years_between_eruptions` displayed below this code, but the value does not appear in the rendered article.

If you'd like to exclude a cell and its output from both the article and the rendered notebook, you could use `include: false` instead:

::: {.content-visible when-meta="tool.is_jupyterlab"}
``` python
#| include: false
avg_years_between_eruptions = np.mean(np.diff(eruptions[:-1]))
avg_years_between_eruptions
```
:::

::: {.content-visible when-meta="tool.is_rstudio"}
```{{r}}
#| include: false
avg_years_between_eruptions <- mean(diff(eruptions[-n_eruptions]))
avg_years_between_eruptions
```
:::

::: {.content-visible when-meta="tool.is_vscode"}
```{{python}}
#| include: false
avg_years_between_eruptions = np.mean(np.diff(eruptions[:-1]))
avg_years_between_eruptions
```
:::

::: {.content-visible when-meta="tool.is_jupyterlab"}
You can also use computed values directly in your article text by using inline code. Read more in [Inline Code](/docs/computations/inline-code.qmd).
:::

::: {.content-visible when-meta="tool.is_rstudio"}
You can use computed values directly in your article text using the syntax `` `{{r}} expr` ``. For example, consider this line in `index.qmd`:

``` markdown
Based on data up to and including 1971, eruptions on La Palma happen every `{{r}} round(avg_years_between_eruptions, 1)` years on average.
```

When rendered, it displays as:

> Based on data up to and including 1971, eruptions on La Palma happen every 79.8 years on average.

You can read more about using code inline at [Inline Code](/docs/computations/execution-options.qmd#inline-code).
:::

::: {.content-visible when-meta="tool.is_vscode"}
You can use computed values directly in your article text using the syntax `` `{{python}} expr` ``. For example, consider this line in `index.qmd`:

``` markdown
Based on data up to and including 1971, eruptions on La Palma happen every `{{python}} f"{avg_years_between_eruptions:.1f}"` years on average.
```

When rendered, it displays as:

> Based on data up to and including 1971, eruptions on La Palma happen every 79.8 years on average.

You can read more about using code inline at [Inline Code](/docs/computations/execution-options.qmd#inline-code).
:::

Rather than including computations directly in your article you can also embed outputs from other notebooks, read more below in [Embedding Notebooks](#embed).

### When is code executed?

::: {.content-visible when-meta="tool.is_jupyterlab"}

By default, Quarto doesn't execute any code in `.ipynb` notebooks.
If you need to update cell outputs, run the appropriate cells, and save the notebook. 

:::

::: {.content-visible unless-meta="tool.is_jupyterlab"}

By default, Quarto will execute code in a `.qmd` notebook during the rendering process. This means, as you edit `index.qmd` you may notice messages that indicate code is being run.

This manuscript template uses Quarto's freeze feature, which allows us to avoid having to set up a computational environment on GitHub during the publishing process. Freeze saves the rendered versions of notebooks so that they are not re-rendered, and consequently, the code is not re-evaluated unless their source changes.

You may not have noticed, but the first time you rendered the manuscript no code was evaluated. This was because the template repo included the `_freeze/` folder, and the contents of `index.qmd` had not changed since the freeze was generated. As you change `index.qmd`, code will be re-evaluated, and the contents of `_freeze/` will be updated. Remember when you come to publish, you'll need to commit the changes in `_freeze/` as well.

:::
```````

## File: docs/manuscripts/authoring/_markdown.qmd
```````
::: {.content-visible when-meta="tool.is_jupyterlab"}
Markdown cells in the document will be processed by Quarto's specific markdown syntax. Quarto's markdown syntax is based on [Pandoc Markdown](https://pandoc.org/MANUAL.html#pandocs-markdown), which in turn is based on John Gruber's [Markdown](https://daringfireball.net/projects/markdown/), the same markdown Jupyter Notebooks use.
:::

::: {.content-visible unless-meta="tool.is_jupyterlab"}
Markdown cells in the document will be processed by Quarto's specific markdown syntax. Quarto's markdown syntax is based on [Pandoc Markdown](https://pandoc.org/MANUAL.html#pandocs-markdown), which in turn is based on John Gruber's [Markdown](https://daringfireball.net/projects/markdown/). 
:::

As an example, the markdown to create the heading for the article's introduction is:

```markdown
## Introduction
```

First-level headings are reserved for the article title, so you'll use second-level and deeper headings to structure the sections in your article.

If Markdown syntax is unfamiliar, you might want to read about Quarto [Markdown Basics](/docs/authoring/markdown-basics.qmd).
```````

## File: docs/manuscripts/authoring/_overview.qmd
```````
On this page, we'll show you how to author an academic manuscript with Quarto in {{< meta tool.name >}}. You'll learn how to:

-   Preview your manuscript using {{< meta tool.name >}}.

-   Add scholarly front matter to describe your article.

-   Add figures, tables, cross references, and citations with Quarto-specific markdown.

-   Include output from computations using inline code or embedded from external notebooks.

::: {.content-visible when-meta="tool.is_jupyterlab"}
The commands and syntax you'll learn will apply to any tool you might use to edit notebooks, not just Jupyter Lab. And, although we'll use Python code examples, Quarto works with any kernel, so you could use R or Julia instead. 
:::

::: {.content-visible when-meta="tool.is_rstudio"}
The syntax you'll learn will apply regardless of the tool you are using to edit notebooks. And although we'll use R code examples, you could use Python or Julia instead. 
:::

::: {.content-visible when-meta="tool.is_vscode"}
The syntax you'll learn will apply regardless of the tool you are using to edit notebooks. And although we'll use Python code examples, you could use R or Julia instead. 

::: callout-tip

## Do you mostly use `.ipynb`?

As a VS Code user, we recommend writing your article in a `.qmd` file. However, if you currently use VS Code primarily to work with `.ipynb` files, you may find the Jupyter Lab tutorial more applicable. Install the [Quarto extension for Jupyter Lab](#install-the-quarto-vs-code-extension), then pick up the Jupyter Lab tutorial at [Clone the Template Repository](jupyterlab.qmd#clone-repo). You might also like read about using [Quarto with VS Code's Notebook Editor](/docs/tools/vscode/notebook.qmd).
:::

:::

::: {.content-visible when-meta="tool.is_rstudio"}

::: callout-caution

## What's a notebook?

You'll see us refer to Quarto documents (`.qmd`) as notebooks throughout this tutorial. In fact, we'll use the term "notebook"  interchangeably to refer to a Quarto document (`.qmd`) or a Jupyter Notebook (`.ipynb`). Although there are implementation differences these formats are both designed to combine code and narrative - a feature that is central to being a computational notebook.

When Quarto prepares your manuscript for publication, both as website and a submission archive, your Quarto `.qmd` documents and their outputs will be made available as Jupyter notebooks. Jupyter Notebooks have the advantage that computational outputs are included in the notebook file - allowing a record of both your code and its results to travel through the publication process and become part of your manuscript's document of record.

:::

:::

### Is this tutorial for me?

We will assume you:

-   are comfortable using {{< meta tool.name >}} to open and edit files,
-   have a GitHub account, and are comfortable cloning a repo to your computer,
-   are comfortable navigating your file system, and executing commands in a Terminal.
```````

## File: docs/manuscripts/authoring/_setup.qmd
```````
::: {.content-visible when-meta="tool.is_jupyterlab"}
To follow along, you'll need to install the Jupyter Lab Quarto extension and clone the template repository.
:::

::: {.content-visible when-meta="tool.is_rstudio"}
To follow along, you'll need to clone the template repository.
:::

::: {.content-visible when-meta="tool.is_vscode"}
To follow along, you'll need to install the VS Code Quarto extension, install some Python packages, and clone the template repository.
:::

::: callout-important
## Install Quarto First

If you haven't already, make sure you've installed the latest release version of Quarto, as described in the [Manuscript Overview](/docs/manuscripts/index.qmd#install).
:::

::: {.content-visible when-meta="tool.is_jupyterlab"}
### Install the Jupyter Lab Quarto Extension

{{< include /docs/tools/_jupyter-lab-extension-install.qmd >}}
:::

::: {.content-visible when-meta="tool.is_vscode"}
### Install the Quarto VS Code Extension

Install the Quarto extension from the [VS Code Extension Marketplace](https://marketplace.visualstudio.com/items?itemName=quarto.quarto) or the [Open VSX Registry](https://open-vsx.org/extension/quarto/quarto).

### Install Python Packages

The template manuscript includes some executable Python code. To render Python code you'll need `jupyter` along with the packages specific to this code, `pandas`, and `matplotlib`:

```{.bash filename="Terminal"}
python3 -m pip install jupyter matplotlib pandas 
```

Alternatively, once you have the template repo below, you can use the file `requirements.txt` to get the packages you need.

:::

### Clone the Template Repository {#clone-repo}

To follow this tutorial you'll need your own copy of the [template repository]({{< meta tool.template-repo >}}), including all of its branches.

1.  Head to [GitHub to create a new repository from the template]({{< meta tool.template-repo >}}/generate).

    Provide a **Repository Name** and make sure you check **Include all branches**. Then **Create repository from template**. ![](images/github-create-from-template.png){fig-alt="Screenshot of GitHub's create a new repo from a template page. Repository name has been filled with manuscript-template, and the box labelled Include all branches is checked."}

2.  Once your repository is created, clone it to your local computer.

    ::: {.content-visible unless-meta="tool.is_rstudio"}
    You can do this any way you are comfortable, for instance in the Terminal, it might look like:

    ``` {.bash filename="Terminal"}
    git clone git@github.com:<username>/<repo-name>.git
    ```

    Where you use your own user name and repo name.
    :::

    ::: {.content-visible when-meta="tool.is_rstudio"}
    You can do this any way you are comfortable, but one approach is to use **File** > **New Project**. In the **New Project** dialog, select **From Version Control**, then **Git**, and copy and paste the repo URL from GitHub.
    :::

::: {.content-visible when-meta="tool.is_rstudio"}
![Template manuscript open in RStudio](images/rstudio-open.png){fig-alt="Screenshot of the RStudio IDE with a project called manuscript-template-rstudio-test open. The File pane shows the folders: _extensions, _freeze, .github, images, and notebooks; and the files: _quarto.yml, .gitignore, index.ipynb, README.md and references.bib."}
:::

::: {.content-visible when-meta="tool.is_jupyterlab"}
3.  You'll be working inside this directory throughout the tutorial, so if you are ready to proceed, navigate inside the directory, and start Jupyter Lab:

    ``` {.bash filename="Terminal"}
    cd manuscript-tutorial
    python3 -m jupyter lab
    ```

![Template manuscript opened in Jupyter Lab](images/jupyter-open.png){.border fig-alt="A screenshot of Jupyter Lab. The File Browser is open showing the folders: _extensions, images, and notebooks; and the files: _quarto.yml, index.ipynb, README.md and references.bib."}
:::

::: {.content-visible when-meta="tool.is_vscode"}
3.  You'll be working inside this directory throughout the tutorial, so if you are ready to proceed, open the directory in VS Code.

![Template manuscript open in VS Code](images/vscode-open.png){fig-alt="A screenshot of VS Code. The File Explorer is open showing the folders: _extensions, _freeze, .github, images, and notebooks; and the files: _quarto.yml, index.ipynb, README.md and references.bib."}
:::
```````

## File: docs/manuscripts/authoring/_structure.qmd
```````
::: {.content-visible when-meta="tool.is_jupyterlab"}
The file `index.ipynb` is a Jupyter Notebook. Like any Jupyter Notebook it contains cells that could be raw, markdown or code. There are three features of this notebook that are Quarto specific:

-   The first cell contains a YAML header that is used to set document metadata, including scholarly front matter. This cell must start and end with a line of three dashes (`---`), and within these lines, content is parsed as YAML. You'll notice the cell itself is set to be a Markdown cell; this allows the Quarto Jupyter Lab Extension to visually emulate how some of these options will appear in the rendered document.

-   The other markdown cells use Quarto specific markdown syntax to include things like figures, tables, equations, cross references and citations.

-   Code cells may have special Quarto comments at the top that start with `#|`. These comments set Quarto options that control how the code and its output appear in the article.

The rest of this page walks you through the cells in this article from top to bottom, introducing you to the Quarto features you'll most likely need to write a scholarly article.
:::

::: {.content-visible unless-meta="tool.is_jupyterlab"}
The file `index.qmd` is a Quarto markdown file. It contains three types of content:

-   It starts with a YAML header that is used to set document metadata, including scholarly front matter. The YAML header starts and ends with a line of three dashes (`---`), and within these lines, content is parsed as YAML. 

-   It may include executable code chunks which start with three backticks followed by the code language in curly braces (e.g. ` ```{r} ` or ` ```{python} `). These code chunks may include Quarto comments at the top which start with `#|`. These comments set Quarto options that control how the code and its output appear in the article.

-   The rest of the document is interpreted as Quarto specific markdown, which allows you to include things like figures, tables, equations, cross references and citations.

The rest of this page walks you through this article from top to bottom, introducing you to the Quarto features you'll most likely need to write a scholarly article.
:::
```````

## File: docs/manuscripts/authoring/_tables.qmd
```````
Tables can be added inline with what is known as pipe syntax. As an example, in `{{< meta tool.article-file >}}` a table of earthquakes is specified as:

```markdown
| Name                 | Year   |
| -------------------- | ------ |
| Current              | 2021   |
| Teneguía             | 1971   |
| Nambroque            | 1949   |
| El Charco            | 1712   |
| Volcán San Antonio   | 1677   |
| Volcán San Martin    | 1646   |
| Tajuya near El Paso  | 1585   |
| Montaña Quemada      | 1492   |

: Recent historic eruptions on La Palma {#tbl-history}
```

Columns are separated by pipes (`|`), and the dashes (`-`) in the second row separate the header row from the rest of the table. A caption can be provided with a line starting with `:`. A label that can be used for cross references is added at the end of the caption inside curly braces. Like figures, the label prefix `tbl-` is required for cross references, but the suffix is up to you.

::: {.content-visible unless-meta="tool.is_jupyterlab"}
Inserting and editing tables using markdown syntax can be cumbersome. 
The Visual Editor provides tools for editing existing tables, and inserting new tables. Use the Table menu in the visual editor toolbar or right-click inside a table to bring up the options.

::: {.content-visible when-meta="tool.is_rstudio"}
Read more about working with tables in the RStudio Visual Editor at [Editing Tables](/docs/visual-editor/content.qmd#editing-tables).
:::

:::

You can learn more about tables in Quarto, including an alternative syntax known as grid tables, on the [Tables](/docs/authoring/tables.qmd) page in the Quarto documentation.
```````

## File: docs/manuscripts/authoring/_visual-editor.qmd
```````
The {{< meta tool.name >}} visual editor provides a [WYSIWYM](https://en.wikipedia.org/wiki/WYSIWYM) editing interface for Quarto notebooks. Some tasks, like adding citations, or creating tables, are easier in the visual editor - we'll point these out as we introduce them.

::: {.content-visible when-meta="tool.is_rstudio"}
::: {layout-ncol="2"}
![Source Editor](images/source-editor-rstudio.png){.border fig-alt="Screenshot of the file `index.qmd` open in the Source Editor. File shows line numbers and the raw markdown for inserting a figure and table."}

![Visual Editor](images/visual-editor-rstudio.png){.border fig-alt="Screenshot of the file `index.qmd` open in the Visual Editor. File shows a figure and table."}
:::
:::

::: {.content-visible when-meta="tool.is_vscode"}
::: {layout-ncol="2"}
![Source Editor](images/source-editor-vscode.png){.border fig-alt="Screenshot of the file `index.qmd` open in the Source Editor. File shows line numbers and the raw markdown for inserting a figure and table."}

![Visual Editor](images/visual-editor-vscode.png){fig-alt="Screenshot of the file `index.qmd` open in the Visual Editor. File shows a figure and table." .border}
:::
:::

::: {.content-visible when-meta="tool.is_rstudio"}
To toggle between source and visual editor modes, toggle the "Source" and "Visual" menu items at the top of the Source Editor window, or use the keyboard shortcut {{< kbd mac=Shift-Command-F4 win=Shift-Control-F4 >}}.

![](images/source-visual-buttons-rstudio.png){fig-alt="Screenshot of the Source Editor pane in RStudio. The Visual button in the toolbar at the top of the Editor pane is highlighted."}

You can read more about RStudio's visual editor at [Visual Editing in RStudio](/docs/visual-editor/index.qmd).
:::

::: {.content-visible when-meta="tool.is_vscode"}
To toggle between source and visual editor modes, use the Editor menu and select "Edit in Visual Mode" or "Edit in Source Mode" mode, or use the keyboard shortcut {{< kbd mac=Shift-Command-F4 win=Shift-Control-F4 >}}.

![](images/source-visual-menu-vscode.png){fig-alt="Screenshot of the Editor menu in VS Code. The 'Edit in Visual Mode' item in the '...' menu is highlighted."}

There are other ways to switch modes, read about them, and other features of the visual editor at [Visual Editing in VS Code](/docs/tools/vscode/visual-editor.qmd).
:::

You can switch between the source and visual editor at any time - the location of your cursor and undo/redo history is preserved.
```````

## File: docs/manuscripts/authoring/_workflow-ipynb.qmd
```````
The basic workflow for writing a manuscript in Quarto is to make changes to your article content in `{{< meta tool.article-file >}}`, preview the changes with Quarto, and repeat. Let's try it out.

Open a new Terminal in {{< meta tool.name >}} and run:

``` {.bash filename="Terminal"}
quarto preview
```

You'll see some output from Quarto on the Terminal:

``` {.bash filename="Terminal"}
$ quarto preview
Preparing to preview
[1/1] {{< meta tool.article-file >}}

Watching files for changes
Browse at http://localhost:3806/
GET: /
```

And then, a browser window will open with a live preview of the manuscript.

You may find it helpful to move and resize your windows so that {{< meta tool.name >}} and the live preview are side by side.

![](images/jupyter-preview.png){fig-alt="A screenshot of two side by side browser windows. On the left, Jupyter Lab with the Terminal open displaying the command: quarto preview. On the right, a webpage with the address starting localhost:, and content starting with the header La Palma Earthquakes."}

The contents of the article is generated by `{{< meta tool.article-file >}}`. Go ahead and open this file in {{< meta tool.name >}}. 

![](images/jupyter-notebook.png){fig-alt="A screenshot of two side by side windows. On the left, Jupyter Lab with the file `index.ipynb` open. The first cell begins with a title La Palma Earthquakes. On the right, a webpage with the address starting localhost:, and content starting with the header La Palma Earthquakes."}

You'll dive into the details of this file next, but for now let's make a change and see what happens.

The first cell (starting with "La Palma Earthquakes") is a Markdown cell, enter Edit mode in this cell, and find the line:

``` yaml
title: La Palma Earthquakes
```

Change the line to:

``` yaml
title: La Palma Earthquake Mechanisms
```

Save the notebook, and you'll see the preview update automatically.

![](images/jupyter-edit-preview.png){fig-alt="Screenshot of two browser windows. On the left, Jupypter Lab with the file index.ipynb open, the first cell in edit mode, and with the text title: La Palma Earthquake Mechanisms. On the right, the article webpage with the title La Palma Earthquake Mechanisms."}

::: callout-tip
If you close the preview accidentally, you can navigate to it again by using the URL from the output in the Terminal, e.g. `http://localhost:3806/`. If you want to stop the preview, hit Crtl + C in the Terminal. You can start the preview again by running `quarto preview`.
:::
```````

## File: docs/manuscripts/authoring/_workflow-qmd.qmd
```````
The basic workflow for writing a manuscript in Quarto is to make changes to your article content in `{{< meta tool.article-file >}}`, preview the changes with Quarto, and repeat. Let's try it out.

Open `{{< meta tool.article-file >}}`. 

::: {.content-visible when-meta="tool.is_vscode"}
Preview the manuscript by hitting the **Preview** button (![](/docs/tools/images/vscode-preview-icon.svg){fig-alt="Preview icon"}) located in the menu bar of the editor:

![](images/vscode-render-button.png){fig-alt="Screenshot of the source editor menu bar with the Preview button highlighted."}
:::

::: {.content-visible when-meta="tool.is_rstudio"}
Render and preview the manuscript by hitting the **Render** button located in the menu bar of the editor:

![](images/rstudio-render-button.png){fig-alt="Screenshot of the source editor menu bar with the Render button highlighted."}
:::

::: {.content-visible when-meta="tool.is_vscode"}
You'll see some output from Quarto in the Terminal and then a live preview will appear in a new Quarto Preview pane.
:::

::: {.content-visible when-meta="tool.is_rstudio"}
You'll see some output from Quarto in the Background Jobs pane and then a live preview will appear in the Viewer pane.
:::

::: {.content-visible when-meta="tool.is_rstudio"}
![](images/rstudio-preview.png){fig-alt="Screenshot of the RStudio IDE. Open in the Source pane is a file called index.qmd. In the Viewer pane, a website starting with the header La Palma Earthquakes."}
:::

::: {.content-visible when-meta="tool.is_vscode"}
![](images/vscode-preview.png){fig-alt="Screenshot of the VS Code. Open in an Editor pane is a file called index.qmd. Open in a pane titled Quarto Preivew is a website starting with the header La Palma Earthquakes."}
:::


You'll dive into the details of this `{{< meta tool.article-file >}}` next, but for now let's make a change and see what happens.

Find the line:

``` yaml
title: La Palma Earthquakes
```

Change the line to:

``` yaml
title: La Palma Earthquake Mechanisms
```

::: {.content-visible when-meta="tool.is_rstudio"}
Save the notebook, re-render, and you'll see the preview update.

![](images/rstudio-edit.png){fig-alt="Screenshot of the RStudio IDE. Open in the Source pane is a file called index.qmd with the text, title: La Palma Earthquake Mechanisms. In the Viewer pane is an article webpage with the title La Palma Earthquake Mechanisms."}
:::

::: {.content-visible when-meta="tool.is_vscode"}
Save the notebook, hit Preview, and you'll see the preview update.

![](images/vscode-edit.png){fig-alt="Screenshot of VS Code.  Open in an Editor pane is a file called index.qmd with the text, title: La Palma Earthquake Mechanisms. In the Quarto Preview pane is an article webpage with the title La Palma Earthquake Mechanisms."}
:::
```````

## File: docs/manuscripts/authoring/_workflow.qmd
```````
The basic workflow for writing a manuscript in Quarto is to make changes to your article content in `{{< meta tool.article-file >}}`, preview the changes with Quarto, and repeat. Let's try it out.

Open a new Terminal in {{< meta tool.name >}} and run:

``` {.bash filename="Terminal"}
quarto preview
```

You'll see some output from Quarto on the Terminal:

``` {.bash filename="Terminal"}
$ quarto preview
Preparing to preview
[1/1] {{< meta tool.article-file >}}

Watching files for changes
Browse at http://localhost:3806/
GET: /
```

And then, a browser window will open with a live preview of the manuscript.

You may find it helpful to move and resize your windows so that {{< meta tool.name >}} and the live preview are side by side.

::: {.content-visible when-meta="tool.is_jupyterlab"}
![](images/jupyter-preview.png){fig-alt="A screenshot of two side by side browser windows. On the left, Jupyter Lab with the Terminal open displaying the command: quarto preview. On the right, a webpage with the address starting localhost:, and content starting with the header La Palma Earthquakes."}
:::

::: {.content-visible when-meta="tool.is_rstudio"}
![](images/rstudio-preview.png){fig-alt="A screenshot of two side by side windows. On the left, RStudio with the Terminal open displaying the command: quarto preview. On the right, a webpage with the address starting localhost:, and content starting with the header La Palma Earthquakes."}
:::

::: {.content-visible when-meta="tool.is_vscode"}
![](images/vscode-preview.png){fig-alt="A screenshot of two side by side windows. On the left, VS Code with the Terminal open displaying the command: quarto preview. On the right, a webpage with the address starting localhost:, and content starting with the header La Palma Earthquakes."}
:::

The contents of the article is generated by `{{< meta tool.article-file >}}`. Go ahead and open this file in {{< meta tool.name >}}. 

::: {.content-visible when-meta="tool.is_jupyterlab"}
![](images/jupyter-notebook.png){fig-alt="A screenshot of two side by side windows. On the left, Jupyter Lab with the file `index.ipynb` open. The first cell begins with a title La Palma Earthquakes. On the right, a webpage with the address starting localhost:, and content starting with the header La Palma Earthquakes."}
:::

You'll dive into the details of this file next, but for now let's make a change and see what happens.

::: {.content-visible when-meta="tool.is_jupyterlab"}
The first cell (starting with "La Palma Earthquakes") is a Markdown cell, enter Edit mode in this cell, and find the line:
:::

::: {.content-visible unless-meta="tool.is_jupyterlab"}
Find the line:
:::

``` yaml
title: La Palma Earthquakes
```

Change the line to:

``` yaml
title: La Palma Earthquake Mechanisms
```

Save the notebook, and you'll see the preview update automatically.

::: {.content-visible when-meta="tool.is_jupyterlab"}
![](images/jupyter-edit-preview.png){fig-alt="Screenshot of two browser windows. On the left, Jupypter Lab with the file index.ipynb open, the first cell in edit mode, and with the text title: La Palma Earthquake Mechanisms. On the right, the article webpage with the title La Palma Earthquake Mechanisms."}

::: callout-tip
If you close the preview accidentally, you can navigate to it again by using the URL from the output in the Terminal, e.g. `http://localhost:3806/`. If you want to stop the preview, hit Crtl + C in the Terminal. You can start the preview again by running `quarto preview`.
:::
:::

::: {.content-visible when-meta="tool.is_rstudio"}
![](images/rstudio-edit.png){fig-alt="Screenshot of two windows. On the left, RStudio IDE with the file index.qmd open, and with the text title: La Palma Earthquake Mechanisms. On the right, the article webpage with the title La Palma Earthquake Mechanisms."}
:::

::: {.content-visible when-meta="tool.is_vscode"}
![](images/vscode-edit.png){fig-alt="Screenshot of two windows. On the left, VS Code with the file index.qmd open, and with the text title: La Palma Earthquake Mechanisms. On the right, the article webpage with the title La Palma Earthquake Mechanisms."}
:::
```````

## File: docs/manuscripts/authoring/index.qmd
```````
---
# These pages exist but are no longer needed; they're there in case someone links to them
# from the web
title: "Authoring Manuscripts"
include-in-header: ../_redirect.html
---
```````

## File: docs/manuscripts/authoring/jupyterlab.qmd
```````
---
title: "Authoring Manuscripts"
tool: 
  name: "Jupyter Lab"
  article-file: "index.ipynb"
  template-repo: "https://github.com/quarto-ext/manuscript-template-jupyter"
  is_jupyterlab: true
  is_rstudio: false
  is_vscode: false
---

{{< include _authoring-content.qmd >}}
```````

## File: docs/manuscripts/authoring/rstudio.qmd
```````
---
title: "Authoring Manuscripts"
tool: 
  name: "RStudio"
  template-repo: "https://github.com/quarto-ext/manuscript-template-rstudio"
  article-file: "index.qmd"
  notebook-file: "explore-earthquakes.qmd"
  is_jupyterlab: false
  is_rstudio: true
  is_vscode: false
---

{{< include _authoring-content.qmd >}}
```````

## File: docs/manuscripts/authoring/vscode.qmd
```````
---
title: "Authoring Manuscripts"
tool: 
  name: "VS Code"
  article-file: "index.qmd"
  notebook-file: "data-screening.qmd"
  template-repo: "https://github.com/quarto-ext/manuscript-template-vscode"
  is_jupyterlab: false
  is_rstudio: false
  is_vscode: true
---

{{< include _authoring-content.qmd >}}
```````

## File: docs/manuscripts/components.qmd
```````
---
title: "Using Manuscripts"
---

{{< include /docs/_require-1.4.qmd >}}

## Overview

Manuscripts are a type of Quarto project that allow you to write scholarly articles where computational notebooks are both the source of the article, and part of the published record.

If you are new to Quarto manuscripts, start with the [Manuscript Tutorial](/docs/manuscripts).

On this page, you can learn how to:

* Create a manuscript project
* Control the manuscript output with options in `_quarto.yml`
* Add a journal template

## Creating a Manuscript Project {#create}

To identify a project as a manuscript specify `type: manuscript` in your `_quarto.yml` configuration file:

``` {.yaml filename="_quarto.yml"}
project: 
  type: manuscript
```

Then, author your article content in either a Jupyter Notebook called `index.ipynb` or a Quarto document called `index.qmd`.

You can control many manuscript options with the `manuscript` key in your configuration file.
For instance, you can specify a file other than `index.*` for your article source using the `article` key, e.g.:

``` {.yaml filename="_quarto.yml"}
manuscript:
  article: earthquakes.qmd
```

If you would rather start with some template content, you can create a new manuscript project from the command line with:

``` {.bash filename="Terminal"}
quarto create project manuscript
```

## Including Notebooks

Any notebook files (`.qmd` or `.ipynb`) that are included in your project directory will become part of your manuscript.
These notebooks will be rendered to an HTML notebook view, and will be linked from your manuscript webpage under "Notebooks".

### Notebook Links

The text for link under "Notebooks" will be the notebook `title` as set in its YAML metadata, or if that isn't set, the first markdown heading in the notebook.
If neither exist, the link text will be the notebook file name.

You can also set the text using `notebooks`.
Use `notebook` to specify the path to the notebook, and `title` to set the link text:

``` {.yaml filename="_quarto.yml"}
manuscript:
  notebooks:
    - notebook: notebooks/data-screening.ipynb
      title: Data Processing
```

### External Notebooks

To provide links to notebooks that are hosted elsewhere, add the `url` option:

``` {.yaml filename="_quarto.yml"}
manuscript:
  notebooks:
    - notebook: index.ipynb
      title: Binder Jupyter Lab Demo
      url: http://mybinder.org/v2/gh/binder-examples/jupyterlab/master?urlpath=lab/tree/index.ipynb
```

If you want Quarto to produce an HTML notebook view from your notebook source, 
but you would like to provide a specific version for download, add the `download-url` option:

``` {.yaml filename="_quarto.yml"}
manuscript:
  notebooks:
    - notebook: notebooks/data-screening.ipynb
      title: Data Processing
      download-url: notebooks/data-screening-raw.ipynb
```

## Code Links 

Use `code-links` to add links that will appear on your manuscript webpage under the heading "Code Links". For example, the following adds a link to a Python script:

``` {.yaml filename="_quarto.yml"}
manuscript:
  code-links:
    - text: Data Import Code
      icon: file-code
      href: data-import.py
```

You can provide the following options for items in `code-links`:

| Option   | Description                                                         |
|--------------------|----------------------------------------------------|
| `text`   | The text to be displayed for the link.                              |
| `href`   | The URL for the link.                                               |
| `icon`   | The [bootstrap icon](https://icons.getbootstrap.com/) for the link. |
| `rel`    | The rel used in the `a` tag for this link.                          |
| `target` | The target used in the `a` tag for this link.                       |

### GitHub and Binder Links

There are also two special values you can pass as items to `code-links`:

`repo`

:   Add a link to "GitHub Repo" under "Code Links" that points at the GitHub repository of your manuscript:  

    ```{.yaml filename="_quarto.yml"}
    manuscript:
      code-links: repo
    ```

    Quarto infers the URL for the link from the Git settings of your manuscript project. 
    For `code-links: repo` to work, your manuscript project should be a Git repository, 
    and have GitHub as the remote `origin`.

`binder`

:   Add a link to “Launch Binder” under "Code Links" if your manuscript is configured to [Use Binder](#using-binder):

    ```{.yaml filename="_quarto.yml"}
    manuscript:
      code-links: binder
    ```

## Including Other Resources

Quarto will attempt to include resources needed to render your notebooks to HTML on the manuscript website.
However, you can also explicitly include resources using `resources`.
For example, to include a data file you've put in `data/earthquakes.csv` you would specify:

``` {.yaml filename="_quarto.yml"}
manuscript:
  resources:
    - data/earthquakes.csv
```

This ensures readers can access your data at: `{manuscript-url}/data/earthquakes.csv`.

## MECA Bundle

One of the formats a manuscript project can produce is a Manuscript Exchange Common Approach (MECA) bundle.
This bundle is a standardized way to transport your manuscript and its resources, including computational notebooks.

A MECA bundle is produced if the `jats` format is listed as an output format for your article:

``` {.yaml filename="_quarto.yml"}
format:
  html: default
  jats: default
```

Or, you can explicitly set `meca-bundle` to `true` in the `manuscript` options:

``` {.yaml filename="_quarto.yml"}
manuscript:
  meca-bundle: true
```

By default the MECA bundle is named after your article file, e.g. `index-meca.zip`, but you can also use `meca-bundle` to provide a file name:

``` {.yaml filename="_quarto.yml"}
manuscript:
  meca-bundle: "bundle.zip"
```

## Manuscript URL

Links to your notebooks in non-HTML formats are constructed using the URL of your manuscript website.
If your manuscript is published to GitHub Pages, Quarto will detect and set the URL for you.
However, if you publish to a different host, or the automatic detection isn't working, you can set the URL explicitly with `manuscript-url`:

``` {.yaml filename="_quarto.yml"}
manuscript:
  manuscript-url: www.posit.co
```

## Using Binder

[Binder](https://mybinder.org/) allows you to provide readers with a link that restores your computing environment so they can interact with your manuscript notebooks in a cloud computing environment.

Quarto can help you configure your manuscript to use Binder. Read more at [Using Binder](/docs/projects/binder.qmd).

## Customizing Pages

The article page and notebook views on your manuscript site are HTML pages, and can be customized using options for the `html` format. 
A full list of options is available at [HTML Options](/docs/reference/formats/html.qmd).

### Theme

For example, you can change the visual styling of your page with the `theme` option by providing an existing theme name:

``` {.yaml filename="_quarto.yml"}
format:
  html: 
    theme: solar
```

You can read more at [HTML Theming](/docs/output-formats/html-themes.qmd).

### Commenting

Quarto also integrates with three tools to allow commenting on your manuscript site.
To enable commenting, use the `comments` option to the `html` format. 
For example, to enable [Hypothes.is](https://web.hypothes.is/) comments, you just need to add
`hypothesis: true`:

``` {.yaml filename="_quarto.yml"}
format:
  html: 
    comments:
      hypothesis: true
```

The other two tools available are [Utterances](https://utteranc.es/) and [Giscus](https://giscus.app/). You can read about setting them up at [HTML Basics: Commenting](/docs/output-formats/html-basics.qmd#commenting).

## Add a Journal Template

You can find a list of available journal formats on the [Quarto Extensions: Journal Articles](/docs/extensions/listing-journals.qmd) page.
To use a journal format, e.g. the [**acs**](https://github.com/quarto-journals/acs#american-chemical-society-acs) format, you'll need to complete two steps:

1.  Install the appropriate journal format.
    You'll most likely be installing in an existing project, so you'll use the `quarto install extension` command, e.g.:

    ``` {.bash filename="Terminal"}
    quarto install extension quarto-journals/acs
    ```

    The extension identifier, `quarto-journals/acs`, is the GitHub user and repository for the extension.
    You'll generally find this, and the exact installation command in the extension's documentation.

2.  Add the `format` to your configuration file:

    ``` {.yaml filename="_quarto.yml"}
    format:
      html: default
      docx: default
      jats: default
      acs-pdf: default
    ```

    The format will be the extension's name (`acs`), followed by an existing Quarto format (`-pdf`).
```````

## File: docs/manuscripts/index.qmd
```````
---
title: Quarto Manuscripts
format:
  html:
    include-in-header: 
      - '../download/_download.html'
    include-after-body: 
      text: |
        <script type="text/javascript">
        window['quarto-download-release'] = true;
        window['quarto-download-prerelease'] = true;
        window['quarto-download-nonews'] = true;
        window["quarto-prerelease-mode"] = '{{< meta prerelease-mode >}}';
        </script>  
---

{{< include /docs/_require-1.4.qmd >}}

## Overview

Quarto manuscript projects provide a framework for writing and publishing scholarly articles. A Quarto manuscript lets you:

* Use one or more notebooks or `.qmd` documents as the source of content and computations, and then publish these computations alongside the manuscript, allowing readers to dive into your code.

* Produce manuscripts in multiple formats (including LaTeX or MS Word formats required by journals), and give readers easy access to all of the formats through a manuscript website.

The output of a Quarto manuscript is a website ([live example](https://quarto-ext.github.io/manuscript-template-jupyter/)). The article itself appears as the content of the website, and can include all the elements common to scholarly writing like figures, tables, equations, cross references and citations. The website also makes available other formats (e.g. PDF, Docx) as well as links to all of the computations used to create the article.

::: {layout="[[3,1]]"}

![Article Content](images/article-content.png){fig-alt="A screenshot of the content area on the manuscript webpage. Content shows a title block including the article title, authors, and abstract, body text, and an image with a caption." .border}

![Navigation](images/webpage-menu.png){fig-alt="A screenshot of the menu on the right hand side of the manuscript webpage. The menu has headings: Table of contents, Other Formats, Notebooks and Other Links." .border}

:::

On the right, you'll see navigation: a table of contents for the article itself followed by links to **Other Formats**, **Notebooks** and **Other Links**.

### Other Formats {.unnumbered .unlisted}

These links allow a reader to download alternative formats of your article. In this example, there is an MS Word version that may be useful for a reviewer to provide feedback and a PDF version that uses the American Geophysical Union's (AGU) template. Additionally, there is a MECA archive, a zip file that is designed to capture your article and its supporting documents into a single file suitable for sending to a publisher. 

### Notebooks {.unnumbered .unlisted}

These are links to notebooks included in the manuscript. The "Article Notebook" is the notebook version of the article itself. In this example, "Data Screening" is a notebook from which a single cell is embedded in the article. Any other notebooks that are included in the project, even if they are not directly used in the article will also appear here. 
    
When a reader visits any of these notebook links, they are served an HTML version of the notebook, allowing them to view the code and output without leaving their browser. In addition, a link to download the source code of the notebook is also provided.
    
![HTML view of the Data Screening notebook](images/notebook-view.png){.border fig-alt="Screenshot of the notebook view of data-screening.ipynb. The top of the page has a link Back to the Article and a button to Download Notebook. The content of the page includes some text and a cell displaying code."}
    
### Other Links {.unnumbered .unlisted}

Links that leave the manuscript webpage, for example to take a reader to the manuscript's GitHub Repo.


## Get Started {#get-started}

### Install Quarto {#install}

Manuscripts are a feature in the 1.4 release of Quarto. Before you get started, make sure you install the **latest release** version of Quarto.

{{< include ../download/_download.md >}}

```{=html}
<style type="text/css">
#download-table {
  display: none;
}
</style>
```

You can find release notes and installers for all platforms in the [download page](/docs/download/prerelease.qmd).

### Choose Your Tool {#choose}

You can author Quarto manuscripts in any tool or notebook editor.
The tutorials below walk you through authoring Quarto manuscripts with a few common tools. 

Choose your tool to start learning:

::: {.tool .g-col-lg-9 .g-col-12}
<a href="authoring/jupyterlab.html" role="button" class="btn btn-outline-light"> ![](images/jupyter-logo.png){width="77" fig-alt="Jupyter logo."}Jupyter</a>

<a href="authoring/vscode.html" role="button" class="btn btn-outline-light"> ![](images/vscode-logo.png){width="77" fig-alt="VS Code logo."}VS Code</a>

<a href="authoring/rstudio.html" role="button" class="btn btn-outline-light"> ![](images/rstudio-logo.png){width="77" fig-alt="RStudio logo."}RStudio</a>
:::
```````

## File: docs/manuscripts/next-steps.qmd
```````
---
title: "Next Steps"
---

## Learning More

You've seen the manuscript workflow, and examples of syntax in a complete template.
One way to start your own manuscript is to alter the contents of this template.
Alternatively, you could start from scratch.
Either way, here are some resources to help you with your next steps.

+---------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ### Basics          | Head to [**Manuscript Basics**](/docs/manuscripts/components.qmd) to:                                                                                                                                                                                                                                                                                |
|                     |                                                                                                                                                                                                                                                                                                                                                      |
|                     | -   Learn how to turn a directory into a manuscript project by adding the `_quarto.yml` file                                                                                                                                                                                                                                                         |
|                     |                                                                                                                                                                                                                                                                                                                                                      |
|                     | -   Start a new project with a minimal template using the `quarto create` command                                                                                                                                                                                                                                                                    |
|                     |                                                                                                                                                                                                                                                                                                                                                      |
|                     | -   Controlling manuscript settings in `_quarto.yml`                                                                                                                                                                                                                                                                                                 |
|                     |                                                                                                                                                                                                                                                                                                                                                      |
|                     | -   Add an output format for a specific journal                                                                                                                                                                                                                                                                                                      |
+---------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ### Quarto Projects | Quarto manuscripts are a type of [**Quarto project**](/docs/projects/quarto-projects.qmd), so anything you can do in a Quarto project applies to a manuscript. For instance, these pages in the Project documentation might be of interest:                                                                                                          |
|                     |                                                                                                                                                                                                                                                                                                                                                      |
|                     | -   [Managing Execution](/docs/projects/code-execution.qmd): techniques to avoid expensive computations on every render.                                                                                                                                                                                                                             |
|                     |                                                                                                                                                                                                                                                                                                                                                      |
|                     | -   [Virtual Environments](/docs/projects/virtual-environments.qmd): capture your computational environment to facilitate reproducing your work.                                                                                                                                                                                                     |
+---------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| ### Publishing      | We set up the publishing workflow for the template repository, but you can publish your manuscript website any way you can [**publish a Quarto website**](/docs/publishing/index.qmd). For example, if you need to set up the workflow to publish to GitHub pages yourself, head to [Publishing to GitHub Pages](/docs/publishing/github-pages.qmd). |
+---------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
```````

## File: docs/manuscripts/publishing.qmd
```````
---
title: "Publishing Quarto Manuscripts"
---

## Overview

::: callout-important

## Complete the Authoring Tutorial First

This page is a continuation of the [Authoring Manuscripts](authoring/) tutorial. We'll assume you've cloned the template repository, have made some changes, and are happy with the preview generated by Quarto.

:::

Publishing a Quarto manuscript is the process of taking the preview you've been viewing on your computer and making it available to anyone on the web.

We've set up the template manuscript to include most of the scaffolding needed to publish your manuscript to your repository's GitHub Pages site. Publishing your manuscript website is as simple as pushing your changes to your repo.

Since a Quarto manuscript is a special type of Quarto website, you can publish it any way you can publish a Quarto website. If GitHub Pages doesn't suit your needs you can learn about other options in [Publishing](/docs/publishing/index.qmd).

On this page, you'll change one setting in your GitHub repo to authorize read and write permissions for GitHub Actions, then walk through the publishing process. 

## Authorize GitHub Actions

The template manuscript is configured with a GitHub Action in `.github/workflows/publish.yml`. This action is triggered when there is a push to the main branch; it renders your manuscript and puts the manuscript website source on the `gh-pages` branch. 

To ensure the action has permission to write to the `gh-pages` branch, you'll need to make one change to your repository settings. Go to your repository and navigate to: Settings \> Actions \> General \> Workflow Permissions. Check the "Read and Write Permissions" box.

![](images/github-action-setting.png){fig-alt="Screenshot of GitHub repository settings, showing a checked box next to the option 'Read and Write Permission', under the Workflow Permissions heading."}

::: callout-caution

## This GitHub Action will not evaluate your code 

The GitHub Action in `.github/workflows/publish.yml` does not set up any computational environments (e.g. Python or R), so is unable to evaluate code. 

Jupyter notebooks (`.ipynb`) include their output and do not need any special treatment. However, if your manuscript includes Quarto files (`.qmd`), you must first render locally to update the saved computational outputs in the `_freeze` directory.

If you instead want your GitHub Action to also evaluate code, read how to set it up in the [Executing Code section on the Publishing to GitHub page](/docs/publishing/github-pages.qmd#executing-code).

:::

## Push to Publish

Publishing this manuscript to GitHub Pages is as simple as committing and pushing your changes, however we advise a full render first. On the Terminal, in your manuscript directory, run:

```{.bash filename="Terminal"} 
quarto render
```

::: callout-important

## The Render button isn't enough

The Render button in RStudio runs the command `quarto preview`, not `quarto render`. You'll need to explicitly run `quarto render` on the Terminal.

:::

Unlike `quarto preview` which generates outputs as needed, `quarto render` will generate all outputs (all the article formats and the manuscript website). It is also the command that will be run by the GitHub action, so verifying it locally first is a good way to avoid issues on GitHub.

If the render runs without issue, stage your changes. 

::: callout-caution

## Checked your staged files

We've added a few lines to `.gitignore` to ignore common files Quarto creates in the rendering process that don't need to be checked into version control. This means the files to stage should be the notebooks, and possibly items in the `_freeze` directory. 

If you've added any files to the project that you don't want to be pushed to GitHub, double-check you haven't staged them for the commit.

:::

Commit and push your changes to GitHub.

Once pushed, you should see the actions trigger in GitHub: "Quarto Publish" is the action we've added to render the site and push it to the `gh-pages` branch; "pages-build-deployment" is GitHub's action to deploy the `gh-pages` branch to your GitHub Pages URL.

![](images/github-publish-actions.png){fig-alt="Screenshot of the Actions page on a template repo. Under Actions, two workflows are listed: Quarto Publish and pages-build-deployment. Under All Workflows the same workflows appear both showing a green checkmark."}

Once both actions are complete, navigate to your repository's GitHub Page.

You can find your GitHub Pages website address in the Settings for your repository on GitHub under Pages.

![](images/github-pages-url.png){fig-alt="Screenshot of GitHub Pages Settings: under the heading GitHub Pages a dialog starting with 'Your page is live at:'  followed by a URL."} 

Your manuscript is now published!

## What Next?

You've now been through the full workflow of a Quarto manuscript: authoring content, previewing the generated manuscript and publishing it to GitHub Pages. When you are ready to dive into more detail, we have some recommendations on [Next Steps](next-steps.qmd).
```````

## File: docs/output-formats/examples/gt-temps.qmd
```````
---
title: "gt - temperatures"
format:
  typst: default
bibliography: [] # suppress ../../../references.bib
references:
  - type: website
    id: gt-cookbook
    url: https://themockup.blog/static/resources/gt-cookbook.html#multiple-columns
---

```{=typst}
#set page(
  numbering: none
)
```

```{r}
{{< include gt-temps.R >}}
```
```````

## File: docs/output-formats/examples/pandas-temps.qmd
```````
---
title: "gt - temperatures"
format:
  typst: default
bibliography: [] # suppress ../../../references.bib
references:
  - type: website
    id: gt-cookbook
    url: https://themockup.blog/static/resources/gt-cookbook.html#multiple-columns
---

```{=typst}
#set page(
  numbering: none
)
```

```{python}
{{< include pandas-temps.py >}}
```
```````

## File: docs/output-formats/_ssg-intro.qmd
```````
## Overview

{{< meta ssg-description >}}. Pages in {{< meta ssg-name >}} websites are typically written in plain markdown, so don't have a straightforward way to automatically and reproducibly incorporate computational output.

Using the Quarto `{{< meta format-name >}}-md` format, you can incorporate computational output (e.g. R or Python code that produces plots) into {{< meta ssg-name >}} websites. This article explains how.

It's important to note that many of the Quarto features related to theming, page layout, and navigation are not applicable when you are using Quarto with {{< meta ssg-name >}}. {{< meta ssg-name >}} has its own theming system, syntax highlighting, table of contents, page layout, navigational menus, and full text search. You'll use Quarto to execute code and generate markdown that is rendered within the {{< meta ssg-name >}} HTML publishing framework rather than Quarto's own.
```````

## File: docs/output-formats/_ssg-workflow.qmd
```````
## Workflow

The basic concept of using Quarto with {{< meta ssg-name >}} is that you take *computational* markdown documents (`.qmd`) or Jupyter notebooks (`.ipynb`) and use them to generate plain markdown files (`.md`) that are rendered to HTML by {{< meta ssg-name >}}.

**index.qmd**   *quarto =\>*   **index.md**   *{{< meta format-name >}} =\>*   **index.html**

The `quarto render` and `quarto preview` commands are used to transform `.qmd` or `.ipynb` files to {{< meta ssg-name >}} compatible markdown (`.md`). The computational files are located in the same place you would also locate ordinary markdown files (e.g. the `blog` directory).

After rendering, a plain `.md` file is written right alongside the computational document. This markdown file is then processed by {{< meta ssg-name >}}.

### Live Preview

The `quarto preview` command will automatically recognize when it is run from a directory that contains a {{< meta ssg-name >}} website:

``` {.bash filename="Terminal"}
cd my-{{< meta format-name >}}-website
quarto preview
```

This will automatically run `{{< meta ssg-preview >}}` on your behalf to bring up a local preview server. In addition, it will monitor the filesystem for changes to `.qmd` and `.ipynb` inputs and automatically re-render them to {{< meta ssg-name >}} compatible `.md` files when they change.

Note that this also works for the integrated Render/Preview command within the [Quarto VS Code Extension](/docs/tools/vscode/index.qmd).

### Rendering

If you are not previewing and want to render all of the Quarto documents (`.qmd`) and notebooks (`.ipynb`) in your site, call `quarto render` from the root directory of the site:

``` {.bash filename="Terminal"}
cd my-{{< meta format-name >}}-website
quarto render 
```

Typically you'll want to do a `quarto render` at the site level before you build the site for publishing:

``` {.bash filename="Terminal"}
quarto render && {{< meta ssg-build >}}
```

You can also render individual documents or notebooks:

``` {.bash filename="Terminal"}
quarto render blog/2022-07-26/hello-quarto/index.qmd
```

If you have computationally expensive documents you may want to consider using Quarto's [freeze](/docs/projects/code-execution.qmd#freeze) feature to only re-execute code when your document source code changes.

Note that if aren't ever rendering at the project level and just have individual files that you want to render with Quarto, you should specify the `{{< meta format-name >}}-md` format as follows:

``` yaml
---
title: "My Blog Post"
format: {{< meta format-name >}}-md
---
```

### Configuration

While Quarto works well within a {{< meta ssg-name >}} site that has no `_quarto.yml` project config file, you can add one if you want to customize the default behavior, add a bibliography, etc. For example, here is what a simple customized `_quarto.yml` file might look like:

``` {.yaml filename="_quarto.yml"}
project:
  type: {{< meta format-name >}}
      
format: 
  {{< meta format-name >}}-md:
    code-fold: true
  
execute: 
  warning: false

bibliography: references.bib
```

It's important to note that if you do provide an explicit `_quarto.yml` file you need to explicitly specify the project type (`type: {{< meta format-name >}}`) as shown above.

#### External Directory

You might decide that you prefer to keep all of your Quarto documents and/or notebooks in their own directory, separate from the {{< meta ssg-name >}} website. In this configuration you would mirror the directory structure of your site in the Quarto directory, and then set the `output-dir` in the project file to point to the {{< meta ssg-name >}} directory. For example:

``` {.yaml filename="_quarto.yml"}
project:
  type: {{< meta format-name >}}
  output-dir: ../{{< meta format-name >}}-site
```
```````

## File: docs/output-formats/all-formats.qmd
```````
---
title: All Formats
format: html
tbl-colwidths: [30,70]
---

## Overview

Pandoc supports a huge array of output formats, all of which can be used with Quarto. To use any Pandoc format just use the `format` option or the `--to` command line option.

For example, here's some YAML that specifies the use of the `html` format as well as a couple of format options:

``` yaml
---
title: "My Document"
format: 
  html:
    toc: true
    code-fold: true
---
```

Alternatively you can specify the use of a format on the command line:

``` {.bash filename="Terminal"}
quarto render document.qmd --to html
```

See below for a list of all output formats by type along with links to their reference documentation.

## Documents

|  |  |
|--------------------------|----------------------------------------------|
| [HTML](/docs/reference/formats/html.qmd) | HTML is a markup language used for structuring and presenting content on the web. |
| [PDF](/docs/reference/formats/pdf.qmd) | PDF is a file format for creating print-ready paged documents. |
| [MS Word](/docs/reference/formats/docx.qmd) | MS Word is the word processor included with Microsoft Office. |
| [OpenDocument](/docs/reference/formats/odt.qmd) | ODT is an open standard file format for word processing documents. |
| [ePub](/docs/reference/formats/epub.qmd) | ePub is an e-book file format that is supported by many e-readers. |

## Presentations

|  |  |
|-------------------------------|-----------------------------------------|
| [Revealjs](/docs/reference/formats/presentations/revealjs.qmd) | Revealjs is an open source HTML presentation framework. |
| [PowerPoint](/docs/reference/formats/presentations/pptx.qmd) | PowerPoint is the presentation editing software included with Microsoft Office. |
| [Beamer](/docs/reference/formats/presentations/beamer.qmd) | Beamer is a LaTeX class for producing presentations and slides. |

## Markdown

|  |  |
|--------------------------|----------------------------------------------|
| [GitHub](/docs/reference/formats/markdown/gfm.qmd) | GitHub Flavored Markdown (GFM) is the dialect of Markdown that is currently supported for user content on GitHub. |
| [CommonMark](/docs/reference/formats/markdown/commonmark.qmd) | CommonMark is a strongly defined, highly compatible specification of Markdown. |
| [Hugo](/docs/output-formats/hugo.qmd) | Hugo is an open-source static website generator. |
| [Docusaurus](/docs/output-formats/docusaurus.qmd) | Docusaurus is an open-source markdown documentation system. |
| [Markua](/docs/reference/formats/markdown/markua.qmd) | Markua is a markdown variant used by Leanpub. |

## Wikis

|  |  |
|-------------------------|-----------------------------------------------|
| [MediaWiki](/docs/reference/formats/wiki/mediawiki.qmd) | MediaWiki is the native document format of Wikipedia. |
| [DokuWiki](/docs/reference/formats/wiki/dokuwiki.qmd) | DokuWiki is a simple to use and highly versatile open source wiki software that doesn't require a database. |
| [ZimWiki](/docs/reference/formats/wiki/zimwiki.qmd) | Zim is a graphical text editor used to maintain a collection of wiki pages. |
| [Jira Wiki](/docs/reference/formats/wiki/jira.qmd) | Jira Wiki is the native document format for the Jira issue tracking and project management system from Atlassian. |
| [XWiki](/docs/reference/formats/wiki/xwiki.qmd) | XWiki is an open-source enterprise wiki system. |

## More Formats

|  |  |
|--------------------|----------------------------------------------------|
| [JATS](/docs/reference/formats/jats.qmd) | JATS (Journal Article Tag Suite) is an XML format for marking up and exchanging journal content. |
| [Jupyter](/docs/reference/formats/ipynb.qmd) | Jupyter Notebooks combine software code, computational output, explanatory text and multimedia resources in a single document. |
| [ConTeXt](/docs/reference/formats/context.qmd) | ConTeXt is a system for typesetting documents based on TEX and METAPOST. |
| [RTF](/docs/reference/formats/rtf.qmd) | The Rich Text Format (RTF) is a file format for cross-platform document interchange. |
| [reST](/docs/reference/formats/rst.qmd) | reStructuredText is an easy-to-read, what-you-see-is-what-you-get plaintext markup syntax and parser system. |
| [AsciiDoc](/docs/reference/formats/asciidoc.qmd) | AsciiDoc is a text document format for writing documentation, articles, and books, ebooks, slideshows, web pages, man pages and blogs. |
| [Org-Mode](/docs/reference/formats/org.qmd) | Org-Mode is an Emacs major mode for keeping notes, authoring documents, creating computational notebooks, and more. |
| [Muse](/docs/reference/formats/muse.qmd) | Emacs Muse is an authoring and publishing environment for Emacs. |
| [GNU Texinfo](/docs/reference/formats/texinfo.qmd) | Texinfo is the official documentation format of the GNU project. |
| [Groff Man Page](/docs/reference/formats/man.qmd) | The Groff (GNU troff) man page document formats consists of plain text mixed with formatting commands that produce ASCII/UTF8 for display at the terminal. |
| [Groff Manuscript](/docs/reference/formats/ms.qmd) | The Groff (GNU troff) manuscript format consists of plain text mixed with formatting commands that produces PostScript, PDF, or HTML. |
| [Haddock markup](/docs/reference/formats/haddock.qmd) | Haddock is a tool for automatically generating documentation from annotated Haskell source code. |
| [OPML](/docs/reference/formats/opml.qmd) | OPML (Outline Processor Markup Language) is an XML format for outlines. |
| [Textile](/docs/reference/formats/textile.qmd) | Textile is a simple text markup language that makes it easy to structure content for blogs, wikis, and documentation. |
| [DocBook](/docs/reference/formats/docbook.qmd) | DocBook is an XML schema particularly well suited to books and papers about computer hardware and software. |
| [InDesign](/docs/reference/formats/icml.qmd) | ICML is an XML representation of an Adobe InDesign document. |
| [TEI Simple](/docs/reference/formats/tei.qmd) | TEI Simple aims to define a new *highly-constrained* and *prescriptive* subset of the Text Encoding Initiative (TEI) Guidelines suited to the representation of early modern and modern books. |
| [FictionBook](/docs/reference/formats/fb2.qmd) | FictionBook is an open XML-based e-book format. |

```{=html}
<style type="text/css">
main h2 {
  border-bottom: none;
}  
  
</style>
```
```````

## File: docs/output-formats/docusaurus.qmd
```````
---
title: Docusaurus
format-name: docusaurus  
ssg-name: Docusaurus
ssg-description: |
  [Docusaurus](https://docusaurus.io) is a popular markdown documentation system
ssg-preview: docusaurus start
ssg-build: npm run build
---

{{< include _ssg-intro.qmd >}}

{{< include _ssg-workflow.qmd >}}

## Code Blocks

Code blocks in Docusaurus are very similar to Quarto. One important thing to keep in mind is that the syntax highlighting theme comes from Docusaurus rather than Quarto. See the [theming](https://docusaurus.io/docs/markdown-features/code-blocks#theming) documentation for additional details.

If you use the `filename` attribute in Quarto, it will automatically become the code block `title` in Docusaurus:

```` markdown
```{.python filename="hello.py"}
1 + 1
```
````

![](images/docusaurus-code-title.png)

Code folding is also automatically applied. So, for example the following executable code block:

```` python
```{{python}}
#| code-fold: true
1 + 1
```
````

Is rendered as a collasable block in Docusaurus:

![](images/docusaurus-code-fold.png)

## Callouts & Tabsets

Like Quarto, Docusaurus includes support for [Callouts](/docs/authoring/callouts.qmd) and [Tabsets](/docs/output-formats/html-basics.qmd#tabsets). When including these components in a document, you should use the Quarto standard markdown syntax, which will be automatically translated to the appropriate Docusaurus constructs.

For example, here is a Quarto callout:

``` markdown
::: {.callout-important}
Note the Quarto callout syntax is used here.
:::
```

Which renders in Docusaurus as:

![](images/docusaurus-callout.png)

Here is a Quarto tabset:

``` markdown
::: {.panel-tabset group="fruits"}

## Apple
This is an apple 🍎

## Orange
This is an orange 🍊

## Banana
This is a banana 🍌

:::
```

Which renders in Docusaurus as:

![](images/docusaurus-tabs.png){.border}

## HTML and MDX

Docusaurus websites use a flavor of markdown ([MDX](https://mdxjs.com/)) that has some major differences from Pandoc (Quarto's native markdown renderer), the biggest of which is that while Quarto allows embedding of HTML, MDX does not. Rather, MDX allows direct embedding of JavaScript code and React JSX components (which look like HTML but have some significant differences in behavior).

Quarto's support for Docusaurus accounts for these differences, and enables you to embed raw HTML as well as use MDX components and JavaScript when required.

### HTML Blocks

Docusaurus websites don't allow arbitrary HTML content. Rather, JSX is used to emit HTML tags. While these JSX tags look and act like HTML tags most of the time, there are some important caveats and constraints, most notably that the `class` attribute must be written as `className`, and `style` attributes need to be specified as JavaScript objects rather than CSS strings.

If you need to include raw HTML that doesn't conform to JSX, you should use a raw ```` ```{=html} ```` code block. For example:

```` html
```{=html}
<p style="color: green;">Paragraph</p>
```
````

If you need to embed HTML code (e.g. a badge, video, or tweet) you should definitely use raw HTML blocks as shown above to avoid errors which will occur if JSX encounters tags it can't parse.

Note that HTML produced by computations (e.g. a Pandas data frame displayed in a notebook) often use raw HTML with `class` and/or `style` tags. This computational output is automatically included in a raw ```` ```{=html} ```` code block so that it renders correctly in Docusaurus.

### MDX Blocks

You can also use MDX components and JavaScript within Quarto documents that target Docusaurus. To do this, enclose them in an ```` ```{=mdx} ```` raw code block. For example:

```` html
```{=mdx}
export const Highlight = ({children, color}) => (
  <span
    style={{
      backgroundColor: color,
      borderRadius: '2px',
      color: '#fff',
      padding: '0.2rem',
    }}>
    {children}
  </span>
);

<Highlight color="#25c2a0">Docusaurus GREEN</Highlight> and <Highlight color="#1877F2">Rams blue</Highlight> are my favorite colors.

I can write **Markdown** alongside my _JSX_!
```
````

Which is rendered as follows:

![](images/docusaurus-mdx.png){.border}

Note that ordinary markdown content can also be included in `mdx` blocks alonside JavaScript and React components.

## LaTeX Math

By default, Quarto renders LaTeX math within Docusaurus projects using [WebTeX](https://github.com/KTHse/webtex), a service that creates PNG images for publishing on the web given TeX expressions as input.

{{< include _webtex-detail.md >}}

### KaTeX

It is possible to configure Docusaurus to use KaTeX for math rendering. See the Docusaurus documentation on [using KaTeX](https://docusaurus.io/docs/markdown-features/math-equations) to learn more about this option.

Once you've confirmed that KaTeX is rendering equations correctly in your site, you should update your `_quarto.yml` file to specify that `katex` rather than `webtex` should be used for rendering equations:

``` {.yaml filename="_quarto.yml"}
format:
  docusaurus-md:
    html-math-method: katex
```
```````

## File: docs/output-formats/gfm.qmd
```````
---
title: GitHub (GFM)
format: html 
format-name: gfm
---

## Overview

While markdown is the input format for Quarto, it can also in some cases be an output format (for example, if you have a website or CMS that accepts markdown as input and want to incorporate computations from Python or R).

This article covers using Quarto to generate [GitHub Flavored Markdown](https://github.github.com/gfm/) (GFM). You might want to do this in order to:

-   Generate a GitHub README.md from a Jupyter notebook

-   Create pages for a GitHub wiki that include computations (e.g. plot output).

## GFM Format

Use the `gfm` format to create GitHub Flavored Markdown from Quarto. For example:

``` yaml
---
title: "My Project"
format: gfm
---
```

See the GFM [format reference](/docs/reference/formats/markdown/gfm.qmd) for a complete list of all options available for GFM output.

To create a `README.md` using Quarto, start with a notebook (.ipynb) or computational markdown file (.qmd) that has README as its file name stem, for example:

````{.markdown filename="README.qmd"}
---
title: "My Project"
format: gfm
jupyter: python3
---

This is a GitHub README that has content dynamically generated from Python:
    
```{{python}}
1 + 1
```
````

Render the README with:

```{.bash filename="Terminal"}
quarto render README.qmd
```

Which will create `README.md` alongside your input file.

## Preview Mode

When you `quarto preview` a GitHub Flavored Markdown document, by default an HTML preview that approximates the look of markdown rendered on GitHub is shown. If you'd prefer to see the raw generated markdown, use the `preview-mode: raw` option. For example:

``` yaml
---
title: "My Project"
format: 
  gfm:
    preview-mode: raw
---
```

{{< include _webtex.md >}}


## GitHub Wikis

If you want to use Quarto to incorporate computations into a GitHub wiki start by [cloning the wiki for local editing](https://docs.github.com/en/communities/documenting-your-project-with-wikis/adding-or-editing-wiki-pages#adding-or-editing-wiki-pages-locally).

Then, simply create a computational markdown file (.ipynb, .qmd) for each page in the wiki. You can render all of these files at once into their corresponding .md files using [Quarto Projects](/docs/projects/quarto-projects.qmd). For example:

```{.bash filename="Terminal"}
quarto render
```

You don't even strictly need a Quarto project file to do this as `quarto render` will render all input files in a directory by default if there is no project file.
```````

## File: docs/output-formats/html-basics.qmd
```````
---
title: "HTML Basics"
format: html
comments:
  hypothesis: true
---

## Overview

Use the `html` format to create HTML output. For example:

``` yaml
---
title: "My document"
format:
  html:
    toc: true
    html-math-method: katex
    css: styles.css
---
```

This example highlights a few of the options available for HTML output. This document covers these and other options in detail. See the HTML [format reference](/docs/reference/formats/html.qmd) for a complete list of all available options.

## Table of Contents

Use the `toc` option to include an automatically generated table of contents in the output document. Use the `toc-depth` option to specify the number of section levels to include in the table of contents. The default is 3 (which means that level-1, 2, and 3 headings will be listed in the contents). For example:

``` yaml
toc: true
toc-depth: 2
```

Use the `toc-expand` option to specify how much of the table of contents to show initially (defaults to 1 with auto-expansion as the user scrolls). Use `true` to expand all or `false` to collapse all.

``` yaml
toc: true
toc-expand: 2
```

You can customize the title used for the table of contents using the `toc-title` option:

``` yaml
toc-title: Contents
```

If you want to exclude a heading from the table of contents, add both the `.unnumbered` and `.unlisted` classes to it:

``` markdown
### More Options {.unnumbered .unlisted}
```

The HTML format by default floats the table of contents to the right. You can alternatively position it at the `left`, or in the `body`. For example:

``` yaml
format:
  html:
    toc: true
    toc-location: left
```

If you would like to display a table of contents both in the body and floating left or right, you can specify `left-body` or `right-body` respectively.

The floating table of contents can be used to navigate to sections of the document and also will automatically highlight the appropriate section as the user scrolls. The table of contents is responsive and will become hidden once the viewport becomes too narrow. See an example on the right of this page.

Note that the `toc-location` option is not available when you disable the standard HTML theme (e.g. if you specify the `theme: none` or `theme: pandoc` option).

{{< include _document-options-section-numbering.md >}}

## Code Links and Other Links

Use `code-links` and `other-links` to add links that will appear in the page navigation under the headings "Code Links" and "Other Links" respectively. For example, consider the following document YAML header:

``` yaml
---
format:
  html:
    other-links:
      - text: NASA Open Data
        href: https://data.nasa.gov/
    code-links:
      - text: Data Import Code
        icon: file-code
        href: data-import.py
---
```

When rendered this results in:

![](images/html-other-links.png){fig-alt="Screenshot of a HTML page shdwing the headers 'Other Links' and 'Code Links' below the Table of Contents on the right of the page. The 'Other Links' header is followed by a link with the text 'NASA Open Data', and the header 'Code Links' is followed by a link with the text 'Data Import Code'."}

You can provide the following options for items in `code-links` and `other-links`:

| Option   | Description                                                         |
|--------------------|----------------------------------------------------|
| `text`   | The text to be displayed for the link.                              |
| `href`   | The URL for the link.                                               |
| `icon`   | The [bootstrap icon](https://icons.getbootstrap.com/) for the link. |
| `rel`    | The rel used in the `a` tag for this link.                          |
| `target` | The target used in the `a` tag for this link.                       |

### GitHub and Binder Links

For projects there are also two special values you can pass as items to `code-links`:

`repo`

:   Add a link to "GitHub Repo" under "Code Links" that points at the GitHub repository of your project.

`binder`

:   Add a link to “Launch Binder” under "Code Links" if your project is configured to [Use Binder](/docs/projects/binder.qmd).

## CSS Styles

To add a CSS stylesheet to your document, just provide the `css` option. For example:

``` yaml
format:
  html: 
    css: styles.css
```

Using the `css` option works well for simple tweaks to document appearance. If you want to do more extensive customization see the documentation on [HTML Themes](html-themes.qmd).

## LaTeX Equations

By default, LaTeX equations are rendered using [MathJax](https://www.mathjax.org/). Use the `html-math-method` option to choose another method. For example:

``` yaml
format:
  html:
    html-math-method: katex
```

You can also specify a `url` for the library to load for a given method:

``` yaml
html-math-method:
  method: mathjax
  url: "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
```

Available math rendering methods include:

| Method    | Description                                                                                                                                                                                                                      |
|-----------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `mathjax` | Use [MathJax](https://www.mathjax.org/) to display embedded TeX math in HTML output. The default configuration for [MathJax](https://docs.mathjax.org/) is [`tex-chtml-full.js`](https://docs.mathjax.org/en/latest/web/components/combined.html?highlight=tex-chtml-full.js#tex-chtml-full) which loads all [MathJax's extensions](https://docs.mathjax.org/en/latest/input/tex/extensions.html) except `colorv2` and `physics` (available using `\require{physics}`).                                                                                                                                         |
| `katex`   | Use [KaTeX](https://github.com/Khan/KaTeX) to display embedded TeX math in HTML output.                                                                                                                                          |
| `webtex`  | Convert TeX formulas to `<img>` tags that link to an external script that converts formulas to images.                                                                                                                           |
| `gladtex` | Enclose TeX math in `<eq>` tags in HTML output. The resulting HTML can then be processed by [GladTeX](https://humenda.github.io/GladTeX/) to produce images of the typeset formulas and an HTML file with links to these images. |
| `mathml`  | Convert TeX math to [MathML](https://www.w3.org/Math/).                                                                                                                                                                          |
| `plain`   | No special processing (formulas are put inside a `span` with `class="math").`                                                                                                                                                    |

Note that there is more detailed documentation on each of these options in the Pandoc [Math Rendering in HTML](https://pandoc.org/MANUAL.html#math-rendering-in-html) documentation.

## Tabsets

You can use tabsets to present content that will vary in interest depending on the audience. For example, here we provide some example code in a variety of languages:

::: panel-tabset
## R

``` r
fizz_buzz <- function(fbnums = 1:50) {
  output <- dplyr::case_when(
    fbnums %% 15 == 0 ~ "FizzBuzz",
    fbnums %% 3 == 0 ~ "Fizz",
    fbnums %% 5 == 0 ~ "Buzz",
    TRUE ~ as.character(fbnums)
  )
  print(output)
}
```

## Python

``` python
def fizz_buzz(num):
  if num % 15 == 0:
    print("FizzBuzz")
  elif num % 5 == 0:
    print("Buzz")
  elif num % 3 == 0:
    print("Fizz")
  else:
    print(num)
```

## Java

``` java
public class FizzBuzz
{
  public static void fizzBuzz(int num)
  {
    if (num % 15 == 0) {
      System.out.println("FizzBuzz");
    } else if (num % 5 == 0) {
      System.out.println("Buzz");
    } else if (num % 3 == 0) {
      System.out.println("Fizz");
    } else {
      System.out.println(num);
    }
  }
}
```

## Julia

``` julia
function FizzBuzz(num)
  if num % 15 == 0
    println("FizzBuzz")
  elseif num % 5 == 0
    println("Buzz")
  elseif num % 3 == 0
    println("Fizz")
  else
    println(num)
  end
end
```
:::

Create a tabset via a markdown div with the class name panel-tabset (e.g. `::: {.panel-tabset}`). Each top-level heading within the div creates a new tab. For example, here is the markdown used to implement the first two tabs displayed above:

```` markdown
::: {.panel-tabset}
## R

``` {.r}
fizz_buzz <- function(fbnums = 1:50) {
  output <- dplyr::case_when(
    fbnums %% 15 == 0 ~ "FizzBuzz",
    fbnums %% 3 == 0 ~ "Fizz",
    fbnums %% 5 == 0 ~ "Buzz",
    TRUE ~ as.character(fbnums)
  )
  print(output)
}
```

## Python

``` {.python}
def fizz_buzz(num):
  if num % 15 == 0:
    print("FizzBuzz")
  elif num % 5 == 0:
    print("Buzz")
  elif num % 3 == 0:
    print("Fizz")
  else:
    print(num)
```

:::
````

### Tabset Groups

If you have multiple tabsets that include the same tab names, you can define a tabset `group`. Tabs within a `group` are all switched together (so in the example above once a reader switches to R or Python in one tabset the others will follow along). For example:

``` markdown
::: {.panel-tabset group="language"}
## R

Tab content

## Python

Tab content
:::
```

### Active Tabset

By default the first tab in the tabset will be active when a page loads. 
To have a different tab active on page load, add the `.active` class to the tab heading.
For example, here the "Python" tab will be active on page load:

```markdown
::: {.panel-tabset}
## R

Tab content

## Python {.active}

Tab content
:::
```

## Self Contained

HTML documents typically have a number of external dependencies (e.g. images, CSS style sheets, JavaScript, etc.). By default these dependencies are placed in a `_files` directory alongside your document. For example, if you render `report.qmd` to HTML:

``` {.bash filename="Terminal"}
quarto render report.qmd --to html
```

Then the following output is produced:

``` ini
report.html
report_files/
```

You might alternatively want to create an entirely self-contained HTML document (with images, CSS style sheets, JavaScript, etc. embedded into the HTML file). You can do this by specifying the `embed-resources` option:

``` yaml
format:
  html:
    embed-resources: true
```

This will produce a standalone HTML file with no external dependencies, using `data:` URIs to incorporate the contents of linked scripts, style sheets, images, and videos. The resulting file should be self contained, in the sense that it needs no external files and no net access to be displayed properly by a browser.

## Anchor Sections

Hover over a section title to see an anchor link. Enable/disable this behavior with:

``` yaml
format:
  html:
    anchor-sections: true
```

Anchor links are also automatically added to figures and tables that have a [cross reference](/docs/authoring/cross-references.qmd) defined.

## Smooth Scrolling

Enable smooth scrolling within the page. By default, smooth scroll is not enabled. Enable/disable it with:

``` yaml
format:
  html:
    smooth-scroll: true
```

## External Links

By default external links (i.e. links that don't target the current site) receive no special visual adornment or navigation treatment (the current page is navigated). You can use the following options to modify this behavior:

+---------------------------+--------------------------------------------------------------------------------------------------------------------+
| Option                    | Description                                                                                                        |
+===========================+====================================================================================================================+
| `link-external-icon`      | `true` to show an icon next to the link to indicate that it's external (e.g. [external](#){.external}).            |
+---------------------------+--------------------------------------------------------------------------------------------------------------------+
| `link-external-newwindow` | `true` to open external links in a new browser window or tab (rather than navigating the current tab).             |
+---------------------------+--------------------------------------------------------------------------------------------------------------------+
| `link-external-filter`    | A regular expression that can be used to determine whether a link is an internal link. For example                 |
|                           |                                                                                                                    |
|                           | `^(?:http:|https:)\/\/www\.quarto\.org\/custom`                                                                    |
|                           |                                                                                                                    |
|                           | will treat links that start with http://www.quarto.org as internal links (and others will be considered external). |
+---------------------------+--------------------------------------------------------------------------------------------------------------------+

External links are identified either using the `site-url` (if provided) or using the `window.host` if no `site-url` or `link-external-filter` is provided. For example, here we enable both options and a custom filter:

``` yaml
format:
  html:
    link-external-icon: true
    link-external-newwindow: true
    link-external-filter: '^(?:http:|https:)\/\/www\.quarto\.org\/custom'
```

You can also specify one or both of these behaviors for an individual link using the `.external` class and `target` attribute. For example:

``` python
[example](https://example.com){.external target="_blank"}
```

## Reference Popups

If you hover your mouse over the citation, footnote and cross-reference in this sentence you'll see a popup displaying the reference contents:

   Hover over @xie2015 to see a reference to the definitive book on knitr[^1]. @lst-hover shows you how to disable hover behaviour.

This behavior is enabled by default. You can disable it with the following options:

::: {#lst-hover}
```{.yaml}
format:
  html:
    citations-hover: false
    footnotes-hover: false
    crossrefs-hover: false
```
:::

## Commenting

This page has commenting with [Hypothes.is](https://web.hypothes.is/) enabled via the following YAML option:

``` yaml
comments:
  hypothesis: true
```

You can see the Hypothesis UI at the far right of the page. Rather than `true`, you can specify any of the available Hypothesis [embedding options](/docs/reference/projects/websites.qmd#hypothesis) as a sub-key of `hypothesis`. For example:

``` yaml
comments:
  hypothesis: 
    theme: clean
```

You can enable [Utterances](https://utteranc.es/){.external} commenting using the `utterances` option. Here you need to specify at least the GitHub repo you want to use for storing comments:

``` yaml
comments:
  utterances:
    repo: quarto-dev/quarto-docs
```

You can also specify the other options [documented here](/docs/reference/projects/websites.qmd#utterances).

You may also enable [Giscus](https://giscus.app) for commenting using the `giscus` option. Giscus will store comments in the 'Discussions' of a Github repo.

``` yaml
comments:
  giscus: 
    repo: quarto-dev/quarto-docs
```

Like utterances, you need to specify at least the Git repo you want to use for storing comments. In addition, the repo that you use must:

1.  Be public

2.  Have the Giscus app installed.

3.  Have discussion enabled

Review the [Giscus documentation](https://giscus.app) for instructions on setting up Giscus in your repository. Additional options are [covered here](/docs/reference/projects/websites.qmd#giscus).

### Disabling Comments

If you have comments enabled for an entire website or book, you can selectively disable comments for a single page by specifying `comments: false`. For example:

``` yaml
title: "Home Page"
comments: false
```

## Includes

{{< include _document-options-includes.md >}}

For example:

``` yaml
format:
  html:
    include-in-header:
      - text: |
          <script src="https://examples.org/demo.js"></script>
      - file: analytics.html
      - comments.html
    include-before-body: header.html
```

## Minimal HTML

The default Quarto HTML output format includes several features by default, including bootstrap themes, anchor sections, reference popups, tabsets, code block copying, and responsive figures. You can disable all of these built in features at once using the `minimal` option. For example:

``` yaml
---
title: "My Document"
format:
  html:
    minimal: true
---
```

When specifying `minimal: true` you can still selectively re-enable features you do want, for example:

``` yaml
---
title: "My Document"
format:
  html:
    minimal: true
    code-copy: true
---
```

[^1]: knitr is an R package for creating dynamic documents.
```````

## File: docs/output-formats/html-code.qmd
```````
---
title: "HTML Code Blocks"
format: 
  html:
    code-tools: true
execute:
  warning: false
---

## Overview

There are wide variety of options available to customize the display of source code within HTML documents, including:

1.  Hiding some or all code that was executed by [Knitr](https://yihui.name/knitr) or [Jupyter](https://jupyter.org).
2.  Code folding for executed code (hidden by default and expandable by readers).
3.  Handling code that overflows the available horizontal display space.
4.  View the source code of the markdown file used to generate the document.
5.  Syntax highlighting themes and other options to control the appearance of code.
6.  Copy to clipboard button for code blocks.
7.  Generating hyperlinks to online documentation for functions used within code blocks via the [downlit](https://downlit.r-lib.org/) package (note that this option currently only works when using the Knitr engine).

Details on using all of these options are provided below.

## Hiding Code

For many documents you may want to hide all of the executable source code used to produce dynamic outputs. You can do this by specifying `echo: false` in the document `execute` options. For example:

``` yaml
---
title: "My Document"
execute:
  echo: false
jupyter: python3
---
```

Note that we can override this option on a per code-block basis. For example:

```{{python}}
#| echo: true

import matplotlib.pyplot as plt
plt.plot([1,2,3,4])
plt.show()
```

Code block options are included in a special comment at the top of the block (lines at the top prefaced with `#|` are considered options).

## Folding Code

Use the `code-fold` option to include code but have it hidden by default using the HTML `<details>` tag. For example, click the **Code** button to see the code that produced this plot.

```{r}
#| code-fold: true

library(ggplot2)
dat <- data.frame(cond = rep(c("A", "B"), each=10),
                  xvar = 1:20 + rnorm(20,sd=3),
                  yvar = 1:20 + rnorm(20,sd=3))

ggplot(dat, aes(x=xvar, y=yvar)) +
  geom_point(shape=1) + 
  geom_smooth() 
```

Here we specify both `code-fold: true` as well as custom summary text (the default is just "Code" as shown above):

``` yaml
format:
  html:
    code-fold: true
    code-summary: "Show the code"
```

Valid values for `code-fold` include:

| Value   | Behavior                     |
|---------|------------------------------|
| `false` | No folding (default)         |
| `true`  | Fold code (initially hidden) |
| `show`  | Fold code (initially shown)  |

Use the `code-fold` and `code-summary` chunk attributes to control this on a chunk-by-chunk basis:

```{{r}}
#| code-fold: true
#| code-summary: "Show the code"
```

## Code Overflow

In some cases the width of source code will overflow the available horizontal display space. By default, this will result in a horizontal scroll bar for the code block. However if you prefer not to have scrollbars you can have the longer lines wrap instead.

To set the global default behavior use the `code-overflow` option. For example:

``` yaml
format:
  html:
    code-overflow: wrap
```

Valid values for `code-overflow` are:

| Option   | Description                                                                                  |
|------------------|------------------------------------------------------|
| `scroll` | Scroll code blocks that exceed available width (default, corresponds to `white-space: pre`). |
| `wrap`   | Wrap lines of code that exceed available width (corresponds to `white-space: pre-wrap`).     |

You can also override the global default on a per-code-block basis. For computational cells you do this with the `code-overflow` cell option:

```{{python}}
#| code-overflow: wrap

# very long line of code....
```

For a static code block, add the `.code-overflow-scroll` or `.code-overflow-wrap` CSS class:

```` python
```{.python .code-overflow-wrap}
# very long line of code....
```
````

Note that irrespective of these options, code will always wrap within printed HTML output (as it would otherwise be clipped off the edge of the page).

## Code Tools

You can include a **Code** menu in the header of your document that provides various tools for readers to interact with the source code. Specify `code-tools: true` to activate these tools:

``` yaml
format:
  html:
    code-fold: true
    code-tools: true
```

If you have a document that includes folded code blocks then the **Code** menu will present options to show and hide the folded code as well as view the full source code of the document:

![](images/code-tools-01.png){.border fig-alt="A screen shot of the header of a rendered Quarto document showing the result of setting both the code-fold and code-tools option to true. There is a drop-down menu labeled 'Code' to the right of the page title with a triangle pointing down. The menu is open and there are three options listed vertically beneath it: 'Hide All Code,' 'Show All Code,' and 'View Source.'"}

This document specifies `code-tools: true` in its options so you should see the **Code** menu above next to the main header.

You can control which of these options are made available as well as the "Code" caption text using sub-options of `code-tools`. For example, here we specify that we want only "View Source" (no toggling of code visibility) and no caption on the code menu:

``` yaml
format:
  html: 
    code-tools:
      source: true
      toggle: false
      caption: none
```

By default, the source code is embedded in the document and shown in a popup window like this:

![](images/code-tools-source.png){fig-alt="A screenshot of this webpage with a pop-up window labeled 'Source Code' over it. This 'Source Code' window contains the raw markdown and R code used to write this page. There is an 'X' on the upper right corner of the 'Source Code' pop up to close it."}

You can alternatively specify a URL for the value of `source`:

``` yaml
format:
  html: 
    code-tools:
      source: https://github.com/quarto-dev/quarto-web/blob/main/index.md
```

If you are within a project and have specified a `repo-url` option then you can just use `repo` and the correct link to your source file will be generated:

``` yaml
format:
  html: 
    code-tools:
      source: repo
```

Note that the `code-tools` option is not available when you disable the standard HTML theme (e.g. if you specify the `theme: none` option).

## Appearance

By default code blocks are rendered with a left border whose color is derived from the current theme. You can customize code chunk appearance with some simple options that control the background color and left border. Options can either be booleans to enable or disable the treatment or can be legal CSS color strings (or they could even be SASS variable names!).

Here is the default appearance for code blocks (`code-block-bg: true`):

![](images/code-bg.png){fig-alt="A block of code with a gray background."}

You can instead use a left border treatment using the `code-block-border-left` option:

``` yaml
code-block-border-left: true
```

![](images/code-default.png){fig-alt="A block of code with a gray vertical stripe running along its left border. This code block has no background."}

You can combine a background and border treatment as well as customize the left border color:

``` yaml
code-block-bg: true
code-block-border-left: "#31BAE9"
```

![](images/code-custom.png){fig-alt="A block of code with a gray background and a blue vertical stripe running along its left border."}

## Code Filename {#code-filename}

Use the `filename` attribute on code blocks If you are documenting the contents of a file and want to be especially clear about the name of the file the code is associated with.

For example, the following code:

```` markdown
```{.python filename="matplotlib.py"}
import matplotlib.pyplot as plt
plt.plot([1,23,2,4])
plt.show()
```
````

Results in this HTML output:

```{.python filename="matplotlib.py"}
import matplotlib.pyplot as plt
plt.plot([1,23,2,4])
plt.show()
```

Non-HTML formats will still have the filename, but it will simply be shown in bold above the code block.

## Highlighting

Pandoc will automatically highlight syntax in [fenced code blocks](https://pandoc.org/MANUAL.html#fenced-code-blocks) that are marked with a language name. For example:

    ```python
    1 + 1
    ```

Pandoc can provide syntax highlighting for over 140 different languages (see the output of `quarto pandoc --list-highlight-languages` for a list of all of them). If you want to provide the appearance of a highlighted code block for a language not supported, just use `default` as the language name.

You can specify the code highlighting style using `highlight-style` and specifying one of the supported themes. These themes are "adaptive", which means they will automatically switch between a dark and light mode based upon the theme of the website. These are designed to work well with sites that include a dark and light mode.

-   a11y
-   arrow
-   atom-one
-   ayu
-   breeze
-   github
-   gruvbox

All of the standard Pandoc themes are also available:

-   pygments
-   tango
-   espresso
-   zenburn
-   kate
-   monochrome
-   breezedark
-   haddock

As well as an additional set of extended themes, including:

-   dracula
-   monokai
-   nord
-   oblivion
-   printing
-   radical
-   solarized
-   vim-dark

The `highlight-style` option determines which theme is used. For example:

``` yaml
highlight-style: github
```

Highlighting themes can provide either a single highlighting definition or two definitions, one optimized for a light colored background and another optimized for a dark color background. When available, Quarto will automatically select the appropriate style based upon the code chunk background color's darkness. Users may always opt to specify the full name (e.g. `atom-one-dark`) to by pass this automatic behavior.

By default, code is highlighted using the `arrow` theme, which is optimized for accessibility. We've additionally introduced the `arrow-dark` theme which is designed to provide accessible highlighting against dark backgrounds.

Examples of the light and dark themes:

#### Arrow (light)

![](images/arrow.png){fig.alt="A block of code showcasing the Arrow (light) theme."}

#### Arrow (dark)

![](images/arrow-dark.png){fig.alt="A block of code showcasing the Arrow (dark) theme."}

#### Ayu (light)

![](images/ayu.png){fig.alt="A block of code showcasing the Ayu (light) theme."}

#### Ayu (dark)

![](images/ayu-dark.png){.preview-image fig.alt="A block of code showcasing the Ayu (dark) theme."}

### Custom Highlighting

In addition to the built in themes available for syntax highlighting, you can also specify your own syntax highlighting by providing the path to a valid theme file (which is based upon the KDE XML syntax highlighting descriptions). Highlighting is implemented using [skylighting](https://github.com/jgm/skylighting).

For example:

``` yaml
---
highlight-style: custom.theme
---
```

In addition, if you'd like to provide adaptive themes, you may also pass both a light and dark theme file:

``` yaml
---
highlight-style:
  light: custom-light.theme
  dark: custom-dark.theme
---
```

Note that as with adaptive text higlighting themes, when you provide a dark and light `highlight-style`, background colors specified in the themes will be ignored in favor of the overall theme specified background colors.

{{< include _code-annotation.md >}}

## Line Numbers {#line-numbers}

If you want to display line numbers alongside the code block, add the `code-line-numbers` option. For example:

``` yaml
format:
  html:
    code-line-numbers: true
```

Here's how a code block with line numbers would display:

``` {.python code-line-numbers="true"}
import matplotlib.pyplot as plt
plt.plot([1,23,2,4])
plt.show()
```

You can also enable line numbers for an individual code block using the `code-line-numbers` attribute. For example:

```` python
``` {.python code-line-numbers="true"}
import matplotlib.pyplot as plt
plt.plot([1,23,2,4])
plt.show()
```
````

## Executable Blocks

The documentation on [computations](/docs/get-started/computations/index.qmd) covers how to include executable code blocks (code which is actually executed, with its output being included in the rendered document). We won't additionally cover that here, but we will talk about how to include code blocks that demonstrate executable syntax (e.g. for writing a tutorial).


{{< include ../computations/_unexecuted-blocks.md >}}

## Copy Button

Hover over the code block below and you will see a copy icon in the top-right corner:

```{r eval=FALSE}
library(dygraphs)
dygraph(nhtemp, main = "New Haven Temperatures") %>% 
  dyRangeSelector(dateWindow = c("1920-01-01", "1960-01-01"))
```

This behavior is enabled by default but you configure it using the `code-copy` option:

``` yaml
format:
  html:
    code-copy: false
```

Valid values for `code-copy` include:

|         |                                |
|---------|--------------------------------|
| `hover` | Show button on hover (default) |
| `true`  | Always show code copy button   |
| `false` | Never show code copy button    |

## Code Linking

The `code-link` option enables hyper-linking of functions within code blocks to their online documentation:

``` yaml
format:
  html:
    code-link: true
```

Code linking is currently implemented only for the knitr engine (via the [downlit](https://downlit.r-lib.org) package).
A limitation of downlit currently prevents code linking if `code-line-numbers` and/or `code-annotations` are also `true`.
```````

## File: docs/output-formats/html-lightbox-figures.qmd
```````
---
title: "Lightbox Figures"
lightbox: true
aliases: 
  - /docs/prerelease/1.4/lightbox.html
---

{{< include /docs/_require-1.4.qmd >}}

## Overview

Quarto uses the [GLightbox javascript library](https://biati-digital.github.io/glightbox/) to add lightbox styling and behavior to images in your HTML documents. Lightbox images allow a reader to click to see a larger version of the image (including any caption).  

For example, the following images have lightbox treatment:

::: {layout-ncol=3}

![Photo by <a href="https://unsplash.com/@hush52?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Hush Naidoo Jade Photography</a> on <a href="https://unsplash.com/photos/white-flower-in-clear-glass-vase-SutAduhzdRQ?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a>](images/lightbox/hush-naidoo-jade-photography-SutAduhzdRQ-unsplash.jpg){group="lightbulbs" fig-alt="A photo of a lightbulb with a flower growing inside against a black background."}

![Photo by <a href="https://unsplash.com/@ale_s_bianchi?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Alessandro Bianchi</a> on <a href="https://unsplash.com/photos/light-bulb-illustration-_kdTyfnUFAc?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a>](images/lightbox/alessandro-bianchi-_kdTyfnUFAc-unsplash.jpg){group="lightbulbs" fig-alt="A photo of a lightbulb with a glowing filament against a black background."}

![Photo by <a href="https://unsplash.com/@ajoshuamelo?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Joshua Melo</a> on <a href="https://unsplash.com/photos/powered-on-edison-light-bulbs-peFHn8r4t1o?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash">Unsplash</a>](images/lightbox/joshua-melo-peFHn8r4t1o-unsplash.jpg){group="lightbulbs" fig-alt="A photo of a lightbulb with a glowing filament in front of a background of other lightbulbs."}

:::

To enable lightbox treatment for all images in a document add `lightbox: true` in the YAML header:

``` markdown
---
title: Simple Lightbox Example
lightbox: true
---

![A Lovely Image](mv-1.jpg)
```


## Enabling Lightbox

You can enable lightbox either for all images within a document, or for only selected images within a document. To enable lightbox for all images within a document, use the following yaml:

``` yaml
---
lightbox: true
---
```

When lightbox is set to automatically select images, it will match any image used as a figure or which appears as a block (by itself within a paragraph). By default, images that appear inline with other content will not receive lightbox treatment.

### Applying Lightbox to Specific Images

You can select specific images to receive the lightbox treatment by applying the `lightbox` class on the images you'd like to receive the treatment. In this case, there is no need to include `lightbox` in the front matter, the use of the `lightbox` class will automatically enable lightbox. For example:

``` markdown
---
title: Simple Lightbox Example
---

![A Lovely Image](mv-1.jpg){.lightbox}

![Another Lovely Image](mv-2.jpg)
```

will result in the first image receiving a lightbox treatment, while the second image will not.

## Disabling Lightbox Treatment

You can disable lightbox for the whole document using the following yaml:

``` yaml
---
lightbox: false
---
```

When lightbox is explicitly disabled, no images will receive the lightbox treatment, even if the image is marked with a `lightbox` class (as described above).

### Disabling Lightbox for Specific Images

If automatic lightboxing of images is enabled, you can select specific images to not receive the treatment by marking them with a `nolightbox` class. For example:

``` markdown
---
title: Simple Lightbox Example
lightbox: auto
---

![A Lovely Image](mv-1.jpg)

![Another Lovely Image](mv-2.jpg){.nolightbox}
```

In this example, the first image will receive the lightbox treatment, while the second image will not.

## Galleries

In addition to simply providing a lightbox treatment for individual images, you can also group images into a 'gallery'. When the user activates the lightbox, they will be able to page through the images in the gallery without returning to the main document. To create galleries of images, apply a `group` attribute (with a name) to the images that you'd like to gather into a gallery. Images with the same group name will be placed together in a gallery when given a lightbox treatment.

For example, the following three images will be treated as a gallery:

``` markdown
![A Lovely Image](mv-1.jpg){group="my-gallery"}

![Another Lovely Image](mv-2.jpg){group="my-gallery"}

![The Last Lovely Image](mv-3.jpg){group="my-gallery"}
```

## Options

Quarto supports a number of options to customize the lightbox behavior for a document. Options include:

| Option          | Description                                                                                                                                                              |
|---------------------|---------------------------------------------------|
| `match`         | Set this to `auto` if you'd like any image to be given lightbox treatment. If you omit this, only images with the class `lightbox` will be given the lightbox treatment. |
| `effect`        | The effect that should be used when opening and closing the lightbox. One of `fade`, `zoom`, `none`. Defaults to `zoom`.                                                 |
| `desc-position` | The position of the title and description when displaying a lightbox. One of `top`, `bottom`, `left`, `right`. Defaults to `bottom`.                                     |
| `loop`          | Whether galleries should 'loop' to first image in the gallery if the user continues past the last image of the gallery. Boolean that defaults to `true`.                 |
| `css-class`     | A class name to apply to the lightbox to allow css targeting. This will replace the lightbox class with your custom class name.                                          |

A complete example:

``` yaml
---
title: Complete Lightbox Example
lightbox:
  match: auto
  effect: fade
  desc-position: right
  loop: false
  css-class: "my-css-class"
---
```

## Per Image Attributes

The following options may be specified as attributes on individual images to control the lightbox behavior:

| Option          | Description                                                                                                                         |
|--------------------|----------------------------------------------------|
| `desc-position` | The position of the title and description when displaying a lightbox. One of `top`, `bottom`, `left`, `right`. Defaults to `bottom` |

## Using Lightbox with Computational Cells

The Quarto lightbox treatment will use figure information for computational outputs. For example, the following plot will receive a lightbox treatment and will include a properly prefixed caption when the user zooms into the plot.

```` markdown
---
lightbox: auto
---

```{{r}}
#| label: fig-basic
#| fig-cap: Simple demo R plot 
plot(1:10, rnorm(10))
```
````

If your computational cell produces multiple subfigures, each of the subfigures will receive the lightbox treatment and when zoom, the user may page back and forth through the subfigures. For example, the following will produce a 'gallery' lightbox view which includes both of the subfigures, allowing the viewer to easily navigate between sub figures:

```` markdown
```{{r}}
#| label: fig-plots
#| fig-cap: |
#|   The below demonstrates placing more than one image in a gallery. Note
#|   the usage of the `layout-ncol` which arranges the images on the page
#|   side by date. Adding the `group` attribute to the markdown images places
#|   the images in a gallery grouped together based upon the group name
#|   provided.
#| fig-subcap:
#|   - "This is a caption for the first sub figure"
#|   - "This is a caption for the second sub figure"
#| layout-ncol: 2
plot(ToothGrowth)
plot(PlantGrowth)
```
````

### Advanced Customization In Computations

Options for lightbox can be passed using the code cell option `lightbox` like the following:

```` markdown
```{{r}}
#| fig-cap: Simple demo R plot 
#| lightbox:
#|   group: r-graph
#|   description: This is 1 to 10 plot
plot(1:10, rnorm(10))
```
````

It is possible to create several plots, and group them in a lightbox gallery. Use list in YAML for options when you have several plots, on per plot.

```` markdown
```{{r}}
#| fig-cap: 
#|   - Caption for first plot
#|   - Caption for second plot
#| lightbox: 
#|   group: cars
#|   description: 
#|     - This is the decription for first graph
#|     - This is the decription for second graph
plot(mtcars)
plot(cars)
```
````
```````

## File: docs/output-formats/html-multi-format.qmd
```````
---
title: Including Other Formats
format: 
  html: default
  ipynb: default
  docx: default
aliases:
  - /docs/prerelease/1.3/multi-format.html
---

{{< include ../_require-1.3.qmd >}}

## Overview

HTML pages (either standalone or in a website) can automatically include links to other formats specified in the document front matter. For example, the following document front matter:

``` yaml
title: Sample Page
author: Norah Jones
date: last-modified
toc: true
format: 
  html: default
  ipynb: default
```

Results in an HTML page that includes a link to the additional notebook format in the right margin below the table of contents:

![](images/other-format.png){.border fig-alt="Screenshot of a HTML page that includes a link to the Jupyter format below the table of contents under the heading Other Formats."}

If a table of contents is enabled for the page, the additional formats will be automatically placed within the table of contents as a new section. If no table of contents is displayed, the additional formats will be displayed in the right margin at the top of the document.

Links to additional formats are displayed by default, but you can control whether they are shown or even which specific formats are included with the `format-links` YAML option.

::: callout-note
## Rendering All Formats in Standalone HTML Documents

The Render buttons in RStudio and VS Code will not automatically render all formats if the document isn't part of a Quarto website. To render all formats use `quarto render` on the command line:

``` {.bash filename="Terminal"}
quarto render multi-format.qmd
```
:::

## Rendering Formats with the Same Extension

If your formats share a file extension, for example, both HTML pages and Revealjs presentations use `.html`, their outputs will overwrite each other. To include formats with the same extension, use `output-file` to distinguish one. For example, to include a link to a RevealJS presentation provide a distinct `output-file`:

``` {.yaml filename="document.qmd"}
title: Sample Page
format: 
  html: default
  revealjs: 
    output-file: document-revealjs.html
```

## Specifying Formats to Link

You can provide an explicit list of formats to include in the **Other Formats** section by providing a list as the value for `format-links`. For example, this document front matter will result in only the link to the Jupyter notebook format, excluding the PDF format:

``` yaml
title: Sample Page
author: Norah Jones
date: last-modified
toc: true
format: 
  html: default
  ipynb: default
  pdf: default
format-links: [ipynb]
```

You can also customize the links by passing `format-links` an object with keys:

* `format`, the format to be linked
* `text`, the text to be displayed for the link
* `icon`, the name of a [Bootstrap icons](https://icons.getbootstrap.com)

For example, here a link to the `typst` format is displayed as the text "PDF" along with a PDF file icon:

```yaml
title: Sample Page
author: Norah Jones
date: last-modified
toc: true
format: 
  html: default
  typst: default
format-links:
  - html
  - format: typst
    text: PDF
    icon: file-pdf
```

You can also provide `format-links` items using the same options as [Code Links and Other Links](html-basics.html#code-links-and-other-links). 
For example, rather than another format, you could to add a link to an external URL:

```yaml
format-links:
  - text: Other Link
    href: https://quarto.org/
    icon: hand-thumbs-up
```

## Hiding All Links

To prevent format links from being shown at all, specify `format-links: false` in your document front matter. For example this front matter will not display the **Other Formats** links:

``` yaml
title: Sample Page
author: Norah Jones
date: last-modified
toc: true
format: 
  html: default
  ipynb: default
format-links: false
```

## Controlling Formats at a Project Level

In a Quarto Project, to control the formats and their behavior for a specific folder, provide the `format`{spellcheck="false"} and `format-links`{spellcheck="false"} options in a `_metadata.yml`{spellcheck="false"} file. Similarly, you can specify these options for an entire project by including them in the `_quarto.yml` project file. See [Directory Metadata](/docs/projects/quarto-projects.qmd#directory-metadata) or [Project Metadata](/docs/projects/quarto-projects.qmd#project-metadata) for additional details.

The `format`{spellcheck="false"} option isn't merged like all other [metadata](/docs/projects/quarto-projects.qmd#metadata-merging) across `_quarto.yml`{spellcheck="false"}, `_metadata.yml`{spellcheck="false"}, and the document YAML. If you have some formats specified at a project or directory level, you'll also need to explicitly list them in the document YAML. For example, suppose you have HTML options set at the project level:

``` {.yaml filename="_quarto.yml"}
format:
  html:
    toc: true
```

In order to get an HTML document with a link to the PDF format, you'll need to list both formats in the YAML header:

``` {.yaml filename="document.qmd"}
format: 
  html: default
  pdf: default
```
```````

## File: docs/output-formats/html-publishing.qmd
```````
---
title: "Publishing HTML"
---

## Overview

This article covers the various ways you can publish Quarto HTML documents, including publishing to a hosting service or sharing a standalone HTML file using E-mail, Dropbox, etc.

Note that it's also possible to publish collections of Quarto documents as a website. See the article on [Publishing Basics](/docs/publishing/index.qmd) for additional details.

## Publish Command

The `quarto publish` command provides a straightforward way to publish documents to [Quarto Pub](/docs/publishing/quarto-pub.qmd), [GitHub Pages](/docs/publishing/github-pages.qmd), [Netlify](/docs/publishing/netlify.qmd), and [Posit Connect](/docs/publishing/rstudio-connect.qmd).

For example, here are the commands to publish `document.qmd` to each of these services:

```{.bash filename="Terminal"}
quarto publish quarto-pub document.qmd
quarto publish gh-pages document.qmd
quarto publish netlify document.qmd
quarto publish connect document.qmd
```

For simple publishing of individual documents there's not much more to learn than `quarto publish`.

Here's a brief overview of the various supported services and when they might be an appropriate choice:

| Destination                                                | Description                                                                                                                                                                                     |
|------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [Quarto Pub](/docs/publishing/quarto-pub.qmd)                | Publishing service for Quarto documents, websites, and books. Use Quarto Pub when you want a free, easy to use service for publicly available content.                                          |
| [GitHub Pages](/docs/publishing/github-pages.qmd)            | Publish content based on source code managed within a GitHub repository. Use GitHub Pages when the source code for your document or site is hosted on GitHub.                                   |
| [Posit Connect](/docs/publishing/rstudio-connect.qmd)        | Publishing platform for secure sharing of data products within an organization. Use Posit Connect when you want to publish content within an organization rather than on the public internet. |
| [Posit Cloud](/docs/publishing/posit-cloud.qmd)         | Create data projects and publish results from your web browser. Use Posit Cloud when you want to organize all your static documents and interactive applications in one place.                  |
| [Netlify](/docs/publishing/netlify.qmd)                      | Professional web publishing platform. Use Netlify when you want support for custom domains, authentication, previewing branches, and other more advanced capabilities.                          |
| [Other Services](/docs/publishing/other.qmd)                 | Content rendered with Quarto uses standard formats (HTML, PDFs, MS Word, etc.) that can be published anywhere. Use this if one of the methods above don't meet your requirements.               |

: {tbl-colwidths="\[25,75\]"}

Note that the documentation linked to above generally references publishing an entire project (website or book) but all of the commands work just the same if you publish an individual document or presentation as demonstrated above.

## Standalone HTML

You can optionally render Quarto documents into self contained HTML, whereby all of the content required to render the article (images generated by plots, required CSS and JavaScript, etc.) are bundled into a single HTML file. Use the `embed-resources` option to do this:

``` yaml
format:
  html:
    embed-resources: true
```

Then, you can share this HTML file using the same means you use to share other document types like spreadsheets, presentations, and PDFs (e.g by uploading it to Dropbox or any other file sharing service).

Note that when using `embed-resources: true`, math libraries like [MathJax](https://www.mathjax.org/) and [KaTeX](https://katex.org/) are not embedded by default because they are quite large and often time consuming to download. If you do want to embed math libraries, add the `self-contained-math: true` option:

``` yaml
format:
  html:
    embed-resources: true
    self-contained-math: true
```
```````

## File: docs/output-formats/html-themes-more.qmd
```````
---
title: "More About Quarto Themes"
---

As a part of Quarto, we've developed a simple single file format that describes declarations, variables, and rules that should be layered into Scss files when compiling them into css. The basic structure of a theme file is:

-   A single text file that contains valid Scss

-   Special comments are used to denote regions of functions, defaults, mixins, and rules (region decorators).

-   At least one of these region decorators must be present in order for the theme file to be valid.

-   More than one of each type of region decorator are permitted. If more than one of any type is present, all regions of a given type will be merged into a single block of that type in the order in which they are encountered in the file.

-   When compiling, the sections will be layered according to type, functions first, then variables, then mixins, then rules.

-   The directory that contains your theme file will be added to the load path, allowing `@use` or `@import` statements to be resolved using the same directory that contains the theme file.

Here is an example file:

``` css
/*-- scss:functions --*/
@function colorToRGB ($color) {
  @return "rgb(" + red($color) + ", " + green($color) + ", " + blue($color)+ ")";
}

/*-- scss:defaults --*/
$h2-font-size:          1.6rem !default;
$headings-font-weight:  500 !default;

/*-- scss:rules --*/
h1, h2, h3, h4, h5, h6 {
  text-shadow: -1px -1px 0 rgba(0, 0, 0, .3);
}
```

## Bootswatch Sass Theme Files

We've merged Bootswatch themes for Bootstrap 5 into this single file theme format in our repo here:

<https://github.com/quarto-dev/quarto-cli/tree/main/src/resources/formats/html/bootstrap/themes>

From time to time, as the Bootswatch themes are updated, we will update these merged theme files.

## Bootstrap / Bootswatch Layering

When using the Quarto `html` and `dashboard` formats, we allow the user to specify theme information in the document front matter (or project YAML). The theme information consists of a list of one or more of

-   A valid built in Bootswatch theme name

-   A theme file (valid as described above).

For example the following would use the cosmo Bootswatch theme and provide customization using the custom.scss file:

``` yaml
theme:
  - cosmo
  - custom.scss
```

When compiling the CSS for a Quarto website or HTML page, we merge any user provided theme file(s) or Bootswatch themes with the Bootstrap Scss in the following layers:

    Uses
        Bootstrap
        Theme(s)       /*-- scss:uses --*/
        
    Functions
        Bootstrap
        Theme(s)       /*-- scss:functions --*/

    Variables
        Themes(s)      /*-- scss:defaults --*/
        Bootstrap
        
    Mixins                 
        Bootstrap
        Theme(s)       /* -- scss:mixins --*/

    Rules
        Bootstrap
        Theme(s)       /*-- scss:rules --*/

We order the themes according to the order that they are specified in the YAML, maintaining the order for declarations and rules and reversing the order for variables (allowing the files specified later in the list to provide defaults variable values to the files specified earlier in the list). Layering of the example themes above would be as follows:

    Uses
        Bootstrap
        cosmo           /*-- scss:uses --*/
        custom.scss     /*-- scss:uses --*/

    Functions
        Bootstrap
        cosmo           /*-- scss:functions --*/
        custom.scss     /*-- scss:functions --*/

    Variables
        custom.scss     /*-- scss:defaults --*/
        cosmo           /*-- scss:defaults --*/
        Bootstrap

    Mixins
        Bootstrap
        cosmo            /* -- scss:mixins --*/
        custom.scss      /* -- scss:mixins --*/

    Rules
        Bootstrap
        cosmo           /*-- scss:rules --*/
        custom.scss     /*-- scss:rules --*/

## `revealjs` Layering

The same system applies for `revealjs` and its themes.
`revealjs` themes shipped with Quarto do not have a uniform variable naming convention, and so different SCSS files are likely to be needed to make effective changes to different themes.

Nevertheless, the following examples illustrate what's possible:

``` yaml
# In this configuration, `custom.scss` takes precedence
format:
  revealjs:
    theme:
      - blood
      - custom.scss
# In this configuration, the `blood` theme takes precedence
format:
  revealjs:
    theme:
      - custom.scss
      - blood
```

## `_brand.yml` Layering

Quarto supports [**brand.yml**](https://posit-dev.github.io/brand-yml/brand/defaults.html), see the [Brand guide](/docs/authoring/brand.qmd) for more details.
By default, styling information in `_brand.yml` takes the lowest precedence.
To change this, use the `"brand"` string in your theme configuration in YAML:

``` yaml
# In this configuration, the `blood` theme takes precedence
# over `custom.scss` *and* the information in `_brand.yml`
format:
  revealjs:
    theme:
      - custom.scss
      - blood
# In this configuration, the information in `_brand.yml` takes
# precedence over the `blood` theme and `custom.scss`, in that
# order
format:
  revealjs:
    theme:
      - blood
      - custom.scss
      - brand
```
```````

## File: docs/output-formats/html-themes.qmd
```````
---
title: "HTML Theming"
tbl-colwidths: [40,60]
---

## Overview

HTML documents rendered with Quarto use Bootstrap 5 by default. This can be disabled or customized via the `theme` option:

``` yaml
theme: default # bootstrap 5 default
theme: cosmo   # cosmo bootswatch theme
theme: pandoc  # pandoc default html treatment
theme: none    # no theme css added to document
```

Quarto includes 25 themes from the [Bootswatch](https://bootswatch.com/) project (for example, this website uses the [cosmo](https://bootswatch.com/cosmo/) theme). Available themes include:

{{< include _theme-list.md >}}


Use of any of these themes via the `theme` option. For example:

``` yaml
format:
  html:
    theme: united
```

You can also customize these themes or create your own new themes. Learn how to do this below in [Theme Options].

## Basic Options

If you are using a Bootstrap theme or the Pandoc theme, there are a set of options you can provide in document metadata to customize its appearance. These include:

+--------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Option                                                       | Description                                                                                                                                                    |
+==============================================================+================================================================================================================================================================+
| `max-width`                                                  | The maximum width occupied by page content. Defaults to 1400px for bootstrap themes and 36em for the pandoc theme.                                             |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `mainfont`                                                   | Sets the [`font-family`](https://developer.mozilla.org/en-US/docs/Web/CSS/font-family) property for the document.                                              |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `fontsize`                                                   | Sets the base CSS [`font-size`](https://developer.mozilla.org/en-US/docs/Web/CSS/font-size) for the document.                                                  |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `fontcolor`                                                  | Sets the default text [`color`](https://developer.mozilla.org/en-US/docs/Web/CSS/color) for the document.                                                      |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `linkcolor`                                                  | Sets the default text [`color`](https://developer.mozilla.org/en-US/docs/Web/CSS/color) for hyperlinks.                                                        |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `monofont`                                                   | Sets the [`font-family`](https://developer.mozilla.org/en-US/docs/Web/CSS/font-family) property for `<code>` elements.                                         |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `monobackgroundcolor`                                        | Sets the [`background-color`](https://developer.mozilla.org/en-US/docs/Web/CSS/background-color) property for `<code>` elements.                               |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `linestretch`                                                | Sets the CSS [`line-height`](https://developer.mozilla.org/en-US/docs/Web/CSS/line-height) property (affects distance between lines of text, defaults to 1.5). |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `backgroundcolor`                                            | Sets the [`background-color`](https://developer.mozilla.org/en-US/docs/Web/CSS/background-color) for the document.                                             |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `margin-left`, `margin-right`, `margin-top`, `margin-bottom` | Sets the CSS [`margin`](https://developer.mozilla.org/en-US/docs/Web/CSS/margin) properties for the document body.                                             |
+--------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------+

For example. here we set the font-size a bit larger and specify that we want a bit more space between lines of text:

``` yaml
title: "My Document"
format:
  html: 
    theme: cosmo
    fontsize: 1.1em
    linestretch: 1.7
```

{{< include _theme-options.md >}}

{{< include _theme-custom.md >}}


## Dark Mode

In addition to providing a single theme for your html output, you may also provide a light and dark theme. For example:

``` yaml
theme:
  light: flatly
  dark: darkly
```

Setting the above themes in your `_quarto.yml` results in both a dark and light version of your output being available. For example:

------------------------------------------------------------------------

##### Flatly Themed Output

![](images/html-light.png){fig-alt="A screenshot of the header of the light version of this page showcasing the Flatly theme."}

------------------------------------------------------------------------

##### Darkly Themed Output

![](images/html-dark.png){fig-alt="A screenshot of the header of the dark version of this page showcasing the Darkly theme."}

------------------------------------------------------------------------

When providing both a dark and light mode for your html output, Quarto will automatically create a toggle to allow your reader to select the desired dark or light appearance. The toggle will automatically appear in the top right corner of your html output. When possible, the toggle will use browser local storage to maintain the user's preference across sessions.

To honor the user's operating system or browser preference for light or dark mode, specify `respect-user-color-scheme: true`:

``` yaml
format:
  html:
    respect-user-color-scheme: true
```

Otherwise, the order of light and dark elements in the theme or brand will determine the default appearance for your html output. For example, since the `light` option appears first in the first example, a reader will see the light appearance by default, if `respect-user-color-scheme` is not enabled.

Quarto will automatically select the appropriate light or dark version of the text highlighter that you have specified when possible. For more information, see [Code Highlighting](html-code.qmd#highlighting).

As of Quarto 1.7, `respect-user-color-scheme` requires JavaScript support: users with JavaScript disabled will see the author-preferred (first) brand or theme.

### Mode-specific content

To display content only in light mode, use the `.light-content` CSS class; to display content only in dark mode, use the `.dark-content` class.

Usually you should provide light and dark content in the same place and at the same size, so that page layout is unaffected when switching between modes.

For example, the paragraph produced by the following code will contain different text in light and dark mode:

````
::: {.light-content}
This text will be shown in light mode.
:::

::: {.dark-content}
This text will be shown in dark mode.
:::
````

::: {.light-content}
This text will be shown in light mode.
:::

::: {.dark-content}
This text will be shown in dark mode.
:::


::: {.callout-tip collapse="true"}
## How this works

The document `body` element has the `.quarto-light` class when it is in light mode, and the `.quarto-dark` class when it is in dark mode.

CSS rules hide all elements with the `.light-content` class when the body has `.quarto-dark`, and all elements with the `.dark-content` class when the body has `.quarto-light`.
:::


The [cell renderings](../computations/execution-options.qmd#cell-renderings) feature applies the `.light-content` and `.dark-content` CSS classes to computational output such as plots and tables.


### Customizing Themes

As when providing a single theme, you may provide a custom theme for dark and light mode, or a list of `scss` files to customize the light and dark appearance. This website, for example uses the following to use a light `cosmo` theme and then customizes the `cosmo` theme with additional Sass variables when in dark mode:

``` yaml
theme:
  light: [cosmo, theme.scss]
  dark: [cosmo, theme-dark.scss]
```

Below are some of the lines of `theme-dark.scss` which turn the light cosmo theme dark:

``` css
/*-- scss:defaults --*/
// Base document colors
$body-bg: #181818;
$body-color: #ccc;
$link-color: #75AADB;

// Code blocks
$code-block-bg-alpha: -.9;
```

For more information about available Sass variables, see [HTML Customization Using Sass Variables](html-themes-more.qmd).

{{< include _theme-variables.md >}}
```````

## File: docs/output-formats/hugo.qmd
```````
---
title: Hugo
format-name: hugo
ssg-name: Hugo
ssg-description: |
  [Hugo](https://gohugo.io/) is a very popular open source website publishing system
ssg-preview: hugo serve
ssg-build: hugo
---

{{< include _ssg-intro.qmd >}}

## Site Config

There are a couple of changes you should make to your Hugo `config.toml` in preparation for using Quarto with Hugo. First, make sure that `.qmd` and `.ipynb` files and other source code or data files are not published as part of the site. For example:

``` toml
ignoreFiles = [ "\\.qmd$", "\\.ipynb$", "\\.py$" ]
```

Next, configure Hugo's markdown renderer to allow raw HTML (as many R and Python packages will produce computational output using raw HTML rather than markdown):

``` toml
[markup.goldmark.renderer]
unsafe= true
```

## Creating a Page

Hugo articles and posts that use Quarto should live in their own directory (taking advantage of the Hugo [Page Bundles](https://gohugo.io/content-management/page-bundles/) feature). This allows any content generated/referenced by the page (e.g. plot output) to live right alongside the markdown source.

To add Quarto documents to a Hugo site:

1.  Create a directory within `content` that will hold your Quarto article.

2.  Add an `index.qmd` document to the directory. When rendered this will create an `index.md`, which in turn will ensure that Hugo treats it as a [Page Bundle](https://gohugo.io/content-management/page-bundles/) (automatically copying images and other referenced resources to the publish directory).

3.  Add the requisite Hugo [front matter](https://gohugo.io/content-management/front-matter/), then also specify `format: hugo-md` and any other required Quarto options.

For example, let's say we wanted to create a new article named `hello-quarto` within the `content` directory. The filesystem would look like this:

``` ini
mysite/
  content/
    hello-quarto/
      index.qmd
```

Here's what the source code of `index.qmd` might look like:

    ---
    title: Hello, Quarto
    date: "2012-04-06"
    categories: 
      - Matplotlib
      - Coordinates
    format: hugo-md
    jupyter: python3
    ---

    ## Polar Axis

    For a demonstration of a line plot on a polar axis, see @fig-polar.

    ```{{python}}
    #| label: fig-polar
    #| fig-cap: "A line plot on a polar axis"

    import numpy as np
    import matplotlib.pyplot as plt

    r = np.arange(0, 2, 0.01)
    theta = 2 * np.pi * r
    fig, ax = plt.subplots(subplot_kw={'projection': 'polar'})
    ax.plot(theta, r)
    ax.set_rticks([0.5, 1, 1.5, 2])
    ax.grid(True)
    plt.show()
    ```

{{< include _ssg-workflow.qmd >}}


## Shortcodes

Note that Hugo [shortcodes](https://gohugo.io/content-management/shortcodes/) and Quarto [shortcodes](/docs/extensions/shortcodes.qmd) share the same basic syntax (e.g. `{{{< var foo >}}}`). This is normally not a problem as shortcodes not recognized by Quarto are passed through unmodified to Hugo.

However, in some cases the use of a Hugo shortcode throws off Pandoc markdown processing, and its necessary to "protect" the Hugo shortcode from processing by Pandoc. This can typically be handled by escaping the shortcode with an extra brace. For example:

``` default
{{{{< ref "foo/index.md" >}}}}
```

It's possible that this won't be enough if the presence of the shortcode changes how Pandoc processes the surrounding markdown (e.g. this is currently known to occur for links). In this case you need to use a markdown raw block around the entire construct. For example:

```` default
```{=markdown}
[click here]({{< ref "foo/index.md" >}})
```
````

Or for inline content, use a markdown raw inline:

``` default
For more info, `[click here]({{< ref "foo/index.md" >}})`{=markdown}
```

{{< include _webtex.md >}}
```````

## File: docs/output-formats/ms-word-templates.qmd
```````
---
title: Word Templates
format: html
---

## Using Templates

If you want to customize the appearance of MS Word output, Pandoc supports a special type of template called a *reference document*. Here's an example of specifying a custom reference document for `docx`:

``` yaml
format:
  docx:
    reference-doc: custom-reference-doc.docx
```

Reference documents include sample text that uses all of the output styles used by Pandoc.

To use a reference doc template, just copy it to your document's directory and reference it as shown above.

## Creating Templates {#sec-docx-create-template}

To create a new reference doc based on the Pandoc default, execute the following command:

    $ quarto pandoc -o custom-reference-doc.docx \
       --print-default-data-file reference.docx

Then, open `custom-reference-doc.docx` in MS Word and modify styles as you wish:

![You can open the Styles pane from the HOME tab in the MS Word toolbar.](images/word-styles.png){.preview-image fig-alt="Screenshot of Microsoft Word document open with Styles pane open in a pane over the left side of the document."}

When you move the cursor to a specific element in the document, an item in the styles list will be highlighted. If you want to modify the style of any type of element, you can click the drop-down menu on the highlighted item, and you will see a dialog box like this:

![](images/word-modify-styles.png){fig-alt="Modify Style dialog box with a properties section for selecting what is to be styled, and a formatting section for selecting the style settings. The color selection dropdown in the formatting section is open."}

After you finish modifying the styles, you can save the document and use it as the template for future Word documents.

## Applying Custom Styles

Pandoc provides default styles for elements like paragraphs or code blocks and default formatting for inline elements like bold. Custom styles can be defined using divs for blocks and spans for text, so a specific style is used instead of the default. 

Set the `custom-style` attribute with the name of the style defined in the default or user-provided reference document. 

For example, this applies a text style called `Emphasis` to the `Get out` text instead of the default style for text:

```markdown
[Get out]{custom-style="Emphasis"}, he said.
```

This will apply the paragraph style called `Poetry` to the content inside the Div (`:::`):

```markdown
Dickinson starts the poem simply:

::: {custom-style="Poetry"}
| A Bird came down the Walk---
| He did not know I saw---
:::
```

If the `reference.docx` file does not already contain the styles, they will be added to the output file with standard text as their base style. If the styles are already defined, their definitions will not be modified.

A possible workflow could be:

1. Create a document setting `custom-style` for all the styles you need,
2. Render this document so that the styles are created in the output document, 
3. Save this document as a reference document for future rendering

This ensures that the names of the styles used in `custom-style` exactly match the names of the styles defined in the reference document.

Overall, this mechanism allows for great customization by allowing authors to define new styles in the reference document. For advanced users, this could be coupled with [filters](/docs/extensions/filters.qmd) to apply a `custom-style` attribute to a filtered set of elements in the document.
```````

## File: docs/output-formats/ms-word.qmd
```````
---
title: Word Basics
format: html
---

## Overview

Use the `docx` format to create MS Word output. For example:

``` yaml
---
title: "My Document"
format:
  docx:
    toc: true
    number-sections: true
    highlight-style: github
---
```

This example highlights a few of the options available for MS Word output. This document covers these and other options in detail. See the Word [format reference](/docs/reference/formats/docx.qmd) for a complete list of all available options.

To learn about creating custom templates for use with the `docx` format, see the article on [Word Templates](ms-word-templates.qmd).

{{< include _document-options-begin.md >}}
```````

## File: docs/output-formats/page-layout.qmd
```````
---
title: Page Layout
format: html
page-layout: full
aliases:
  - /docs/prerelease/1.3/grid.html
---

## Overview

Quarto provides a default layout for HTML pages that should work well for many documents. However, if the default layout isn't working for your content, you can adjust it. 

On this page, learn about:

* The three high level layout options for your pages in [Page Layout](#page-layout).

* How to adjust the width of the individual layout components (sidebar, body, margins, and gutter) to fit your content in [Grid Customization](#grid-customization). 

## Page Layout {#page-layout}

By default Quarto HTML documents display content centered at a width optimized for readability (typically from 600px to 900px wide). While this is a sound default layout for traditional articles, for other types of pages (e.g. landing or index pages) you may want to use other layouts.

The `page-layout` option can be use to control the layout used. For example:

``` yaml
format: 
  html:
    page-layout: full
```

The various `page-layout` options are described below.

### Article

```
page-layout: article
```

Article layout provides a content area with a page based grid layout that provides margins, areas for sidebars, and a reading width optimized body region. The precise size of the document regions will vary slightly depending upon the sidebar (if present) and the presence or absence of margin or complex layout elements. To learn more, checkout the guide to [Article Layout](/docs/authoring/article-layout.qmd).

### Full

```
page-layout: full
```

Full layout uses the article grid system, but automatically expands the content area to use the sidebar and margin region if no content is placed within those regions. This is useful for layouts that don't need to be constrained to reading width and that will benefit from additional horizontal space (e.g. landing or index pages)

### Custom

```
page-layout: custom
```

Custom layout provides a simple HTML content container with no default grid system, padding, or margins. The default HTML framing provided will look like this:

``` html
<div class="page-layout-custom">
  <!-- body content here -->
</div>
```

In websites, custom layouts do not include navigation sidebars but do include the site navbar and footer.

#### CSS Grid

If you are using `page-layout: custom`, you'll likely want to utilize the [Bootstrap CSS Grid](https://getbootstrap.com/docs/5.1/layout/css-grid/) layout system (which is available by default in Quarto documents) for creating more sophisticated layouts.

For example, here's a simple 2-column grid:

```markdown
::: {.grid}

::: {.g-col-4}
This column takes 1/3 of the page
:::

::: {.g-col-8}
This column takes 2/3 of the page
:::

:::
```

Bootstrap's CSS Grid system includes facilities for responsiveness, wrapping, nesting, and fine grained customization of column behavior.

Note that this isn't the traditional Bootstrap grid used in older versions of Bootstrap -- rather, it's a brand new layout system introduced in Bootstrap 5.1 based on the CSS Grid standard. Quarto uses this newer system because it has more sophisticated layout capabilities akin to what LaTeX offers for print documents.

See the [Bootstrap CSS Grid](https://getbootstrap.com/docs/5.1/layout/css-grid/) documentation for additionals details.

## Grid Customization {#grid-customization}

{{< include ../_require-1.3.qmd >}}

You can control the width of the layout components in HTML documents with YAML options and SCSS. For example, if long entries in a sidebar are being wrapped, it may make sense to increase the width of sidebar: 

::: {layout-ncol=2}
![Default Layout](images/grid-default.png){fig-alt="Screenshot of a Quarto website displaying the default layout of the sidebar, body and margin."}

![Wider Sidebar](images/grid-wide-sidebar.png){fig-alt="Screenshot of a Quarto website with altered layout, devoting more space to the sidebar."}
:::

This change can be made by adding the `grid` option to the `_quarto.yml` file, increasing the `sidebar-width` from its default of 250px:

```{.yaml filename="_quarto.yml"}
format:
  html:
    grid:
      sidebar-width: 350px
```

There are four variables to control the four components of the layout: the sidebar, the body, the margin, and the gutters. 

The rest of this section describes these components, and their default values, as well as how to customize them either with YAML or SCSS  variables. You can also find [Additional Examples](#more-examples) of customization in action.

### HTML Page Layout

Quarto HTML documents are arranged in a structure composed of a sidebar on the left, the body of the document, the margin of the document on the right, and the space between these elements, known as gutters. This is illustrated below:

![](images/grid.png){fig-alt="A screenshot of a page in the Quarto documentation site, with rectangles drawn around the sidebar, body and margin, and arrows indicating the gutters between them."}

The width of these four components is controlled by four variables. These variables, along with their default values are:

::: {style="width: 60%; margin: auto;"}
| Element                             | Size  |
|-------------------------------------|-------|
| `sidebar-width`{spellcheck="false"} | 250px |
| `body-width`{spellcheck="false"}    | 800px |
| `margin-width`{spellcheck="false"}  | 250px |
| `gutter-width`{spellcheck="false"}  | 1.5em |

: Default values for the width of layout components
:::

The values of these variables don't directly specify the display width of the corresponding component, instead they specify a maximum base value. The maximum values are scaled to create minimum values, and together they are used to compute the size and position of each component across different layout types (fixed vs. floating), responsive sizes (large screen vs. mobile size), and page contents (margin vs. no margin content). 

### Customizing Component Widths

You can control the component width variables using YAML or SCSS variables. To set these options in YAML, you may use the `grid` option :

```yaml
format:
  html: 
    grid:
      sidebar-width: 300px
      body-width: 900px
      margin-width: 300px
      gutter-width: 1.5rem
```

Similarly, in a [custom theme `scss` file](/docs/output-formats/html-themes.qmd#theme-options), you may set variables like:

``` css
// The left hand sidebar
$grid-sidebar-width: 300px !default;

// The main body
$grid-body-width: 900px !default;

// The right hand margin bar
$grid-margin-width: 300px !default;

// The gutter that appears between the above columns
$grid-column-gutter-width: 1.5rem !default;
```

`sidebar-width`, `body-width`, and `margin-width` should be specified in pixels (`px`) as the values will be used when computing other sizes. Requiring pixel sizing is a limitation of our approach to the Quarto's layout, but also typically makes sense since the overall document width is usually tied to the browser size and responsive breakpoints rather than font size or other relative measures. 

`gutter-width` may be specified in pixels or other units such as `em` or `rem` which are responsive to the document font size.

### Additional Examples {#more-examples}

Increasing the margin width may make sense on a website that has many figures or tables in the margin. For example, this YAML increases the `margin-width` by 200px over the default value:

```yaml
format:
  html:
    grid:
      margin-width: 450px
```

::: {layout-ncol=2}
![Default Layout](images/grid-default.png){fig-alt="Screenshot of a Quarto website displaying the default layout of the sidebar, body and margin."}

![Wider Margin](images/grid-wide-margin.png){fig-alt="Screenshot of a Quarto website with altered layout, devoting more space to the margin."}
:::

The effect of changing `margin-width` without changing `body-width` is to increase the overall page width (there is less white space on the far left and right of the page). Alternatively, to keep the overall page width the same `body-width` can be decreased by the same amount as `margin-width` increased:

```yaml
format:
  html:
    grid:
      margin-width: 450px
      body-width: 600px
```

::: {layout-ncol=2}
![Default Layout](images/grid-default.png){fig-alt="Screenshot of a Quarto website displaying the default layout of the sidebar, body and margin."}

![Wider Margin, Narrower Body](images/grid-wide-margin-narrow-body.png){fig-alt="Screenshot of a Quarto website with altered layout, devoting more space to the margin and less to the body."}
:::
```````

## File: docs/output-formats/pdf-basics.qmd
```````
---
title: PDF Basics
format: html
---

## Overview

Use the `pdf` format to create PDF output. For example:

``` yaml
---
title: "My document"
format:
  pdf:
    toc: true
    number-sections: true
    colorlinks: true
---
```

This example highlights a few of the options available for PDF output. This article covers these and other options in detail. See the PDF [format reference](/docs/reference/formats/pdf.qmd) for a complete list of all available options.

If you want to produce raw LaTeX output (a .tex file) rather than a PDF, all of the options documented here are still available (see the [LaTeX Output] section below for additional details).

::: callout-note
Note that while we will focus here exclusively on the use of LaTeX to create PDFs, Pandoc also has support for creating PDFs using ConTeXt, roff ms, or HTML (via wkhtmltopdf). See the Pandoc documentation on [Creating a PDF](https://pandoc.org/MANUAL.html#creating-a-pdf) for additional details.
:::

### Prerequisites

In order to create PDFs you will need to install a recent distribution of TeX. We recommend the use of TinyTeX (which is based on TexLive), which you can install with the following command:

```{.bash filename="Terminal"}
quarto install tinytex
```

See the article on [PDF Engines](pdf-engine.qmd) for details on using other TeX distributions and PDF compilation engines.

## Document Class

Quarto uses [KOMA Script](https://ctan.org/pkg/koma-script) document classes by default for PDF documents and books. KOMA-Script classes are drop-in replacements for the standard classes with an emphasis on typography and versatility.

For PDF documents this results in the following Pandoc options set by default:

``` yaml
format:
  pdf:
    documentclass: scrartcl
    papersize: letter
```

You can set `documentclass` to the standard `article`, `report` or `book` classes, to the KOMA Script equivalents `scrartcl`, `scrreprt`, and `scrbook` respectively, or to any other class made available by LaTeX packages you have installed.

::: callout-note
Setting your `documentclass` to either `book` or `scrbook` will automatically handle many of the common needs for printing and binding PDFs into a physical book (i.e., chapters start on odd pages, alternating margin sizes, etc).
:::

See the [Output Options] section below for additional details on customizing LaTeX document options.

{{< include _document-options-begin.md >}}


## Output Options

There are numerous options available for customizing PDF output, including:

-   Specifying document classes and their options

-   Including lists of figures and tables

-   Using the `geometry` and `hyperref` packages

-   Numerous options for customizing fonts and colors.

For example, here we use a few of these options:

``` yaml
---
title: "My Document"
format: 
  pdf: 
    documentclass: report
    classoption: [twocolumn, landscape]
    lof: true
    lot: true
    geometry:
      - top=30mm
      - left=20mm
      - heightrounded
    mainfont: Times New Roman
    colorlinks: true
---
```

See the Pandoc documentation on metadata [variables for LaTeX](https://pandoc.org/MANUAL.html#variables-for-latex) for documentation on all available options.

## Fonts

Using `xelatex`, the default engine, or the `lualatex` engine, you can specify fonts with the YAML options:

| Option         | Document Element         |
|----------------|--------------------------|
| `sansfont`     | Headings                 |
| `mainfont`     | Main body text           |
| `monofont`     | Code                     |
| `mathfont`     | Math                     |
| `CJKmainfont`  | The CJK main font family |

Values for these options should be the family name of system installed fonts. For example:

```{.yaml}
---
format: 
  pdf:
    mainfont: "Times New Roman"
---
```

Fonts are set using the [`fontspec`](https://ctan.org/pkg/fontspec) package.
You can set additional font features using the corresponding `<fontoption>options` key.
For example, you could set headings to the color `#39729E`:

```{.yaml}
---
format: 
  pdf:
    sansfont: "Open Sans"
    sansfontoptions: 
      - Color=39729E
---
```

### `pdflatex` 

If you use the `pdflatex` engine, use the `fontfamily` option to specify a font from the [The LaTeX Font Catalogue](https://tug.org/FontCatalogue/). For example:

``` yaml
---
title: pdflatex fonts
format:
  pdf:
    pdf-engine: pdflatex
    fontfamily: anttor
---
```

## Unicode Characters

By default, Quarto uses the `xelatex` engine to produce PDFs from LaTeX. `xelatex` has native support for unicode characters, but it is possible some customization will be required in order to properly typeset specific unicode characters. In particular, it is important that you use a font that supports the characters that you using in your document. To identify fonts on your system that support specific language characters, you can use the following command:

``` {.bash filename="Terminal"}
fc-list :lang=<lang> family
```

Where `<lang>` is a [ISO 639 language code](https://en.wikipedia.org/wiki/List_of_ISO_639_language_codes). For example, to see a list of fonts that support Japanese characters, use:

``` {.bash filename="Terminal"}
fc-list :lang=ja family
```

Select a font name from the list and use that as the document's main font:

``` markdown
---
title: Unicode test
format: pdf
mainfont: "Hiragino Sans GB"
---

## Test Document

青黑體簡體中文,ヒラギノ角
```

Another common example of Unicode characters are documents that include Greek symbols:

````{.markdown filename="greek.qmd"}
---
format: pdf
---

## α

```r
α <- 3
```

α is a great constant.
```
````

Follow the same process as above to discover fonts that support Greek:

``` {.bash filename="Terminal"}
fc-list :lang=el family
```

Then set the appropriate font options:

````{.markdown filename="greek.qmd"}
---
format: 
  pdf:
    mainfont: "EB Garamond"
    sansfont: "Open Sans"
    monofont: "Roboto Mono"
---
````

*(These particular fonts are available from [Google Fonts](https://fonts.google.com).)*

With fonts with appropriate support, Greek symbols render correctly in headings, the main text and code cells:

![Greek symbols in a rendered PDF](images/pdf-unicode-greek.png){.border fig-alt="Screenshot of at PDF displaying the Greek symbol alpha in a heading, main text and code cell."}


 
## Citations

{{< include _pdf-citations.md >}}


## Raw LaTeX

When creating a PDF document, Pandoc allows the use of [raw LaTeX](https://pandoc.org/MANUAL.html#extension-raw_tex) directives intermixed with markdown.
Although Pandoc allows LaTeX to appear unescaped in Markdown, we instead recommend to wrap the content in a raw block. For example:

```` markdown
```{=latex}
\begin{tabular}{|l|l|}\hline
Age & Frequency \\ \hline
18--25  & 15 \\
26--35  & 33 \\
36--45  & 22 \\ \hline
\end{tabular}
```
````

Raw LaTeX can be specified as a block element (as shown above), or as an inline element, such as `` `\textrm{hello}`{=latex} ``.
Raw LaTeX commands will be preserved and passed unchanged to the LaTeX writer.

::: callout-warning
While it's very convenient to use raw LaTeX, raw LaTeX is ignored when rendering to other formats like HTML and MS Word. If you plan on rendering to other formats then the example above would be better written using native [markdown tables](/docs/authoring/markdown-basics.qmd#tables).
:::

In some cases raw LaTeX will require additional LaTeX packages. The [LaTeX Includes] section below describes how to include `\usepackage` commands for these packages in your document.

## LaTeX Includes

{{< include _document-options-includes.md >}}

For example:

``` yaml
format:
  pdf:
    include-in-header:
      - text: |
          \usepackage{eplain}
          \usepackage{easy-todo}
      - file: packages.tex
      - macros.tex 
```

Any packages specified using includes that you don't already have installed locally will be installed by Quarto during the rendering of the document.

## LaTeX Output

If you want Quarto to produce a LaTeX file (`.tex`) rather than a PDF (for example, if you want to do your own processing of the PDF) there are two ways to accomplish this:

1.  Use the `latex` format rather than the `pdf` format. For example:

    ``` yaml
    format:
      latex:
        documentclass: report
        classoption: [twocolumn, landscape]
        lof: true
        lot: true
    ```

    Note that all of the PDF format options documented above will also work for the `latex` format.

2.  Use the `pdf` format along with the `keep-tex` option. For example:

    ``` yaml
    format:
      pdf:
        documentclass: report
        keep-tex: true
    ```

    This technique will produce a PDF file for preview, but will also create a `.tex` file alongside it that you can do subsequent processing on.

Both techniques will also produce all LaTeX temporary files, including `.bbl` files and so on, that might be required by a publisher that wants LaTeX sources.
```````

## File: docs/output-formats/pdf-engine.qmd
```````
---
title: "PDF Engines"
format: html
---

## Overview

Pandoc supports the use of a wide range of TeX distributions and PDF compilation engines including pdflatex, xelatex, lualatex, tectonic, and latexmk.

While you can employ whatever toolchain you like for LaTeX compilation, we strongly recommend the use of [TinyTeX](https://yihui.org/tinytex/), which is a distribution of [TeX Live](https://tug.org/texlive/) that provides a reasonably sized initial download (\~100 MB) that includes the 200 or so most commonly used TeX packages for Pandoc documents.

We also recommend the use of Quarto's built in PDF compilation engine, which among other things performs automatic installation of any missing TeX packages.

## Installing TeX

To install TinyTeX, use the following command:

``` {.bash filename="Terminal"}
quarto install tinytex
```

TinyTeX is not installed to the system `PATH` so will not affect other applications that use TeX. If you want to use TinyTeX with other applications, add the `--update-path` flag when installing (this will add TinyTex to the system path):

``` {.bash filename="Terminal"}
quarto install tinytex --update-path
```

If you already have another installation of TeX that you prefer to use with Quarto, add the `latex-tinytex: false` in your project or document front matter to prevent Quarto from using its internal version.

If you prefer TeX Live, you can find instructions for installing it here: <https://tug.org/texlive/>.

Note that Quarto's automatic installation of missing TeX packages will work for TinyTeX and TeX Live, but not for other TeX distributions (as it relies on TeX Live's [tlmgr](https://www.tug.org/texlive/tlmgr.html) command).

## Managing TeX

In addition to installing TinyTeX, you may also update or remove the installation of TinyTex. To see the currently installed version of TinyTex, use the command:

``` {.bash filename="Terminal"}
quarto list tools
```

which will provide a list of available tools, the installed versions, and the latest available version:

``` bash
[✓] Inspecting tools

Tool         Status            Installed     Latest
chromium     Not installed     ---           869685
tinytex      Up to date        v2022.10      v2022.10
```

To update to the latest version, use the command:

``` {.bash filename="Terminal"}
quarto update tinytex
```

which will download and install the latest version of TinyTex (following the same behavior as described for installing TinyTex above).

To remove TinyTex altogether, use the command:

``` {.bash filename="Terminal"}
quarto uninstall tinytex
```

::: callout-tip
Each year in April, TeXlive updates their remote package repository to the new year's version of TeX. When this happens, previous year installations of TeX will not be able to download and install packages from the remote repository. When this happens, you may see an error like:

*Your TexLive version is not updated enough to connect to the remote repository and download packages. Please update your installation of TexLive or TinyTex.*

When this happens, you can use `quarto update tinytex` to download and install an updated version of tinytex.
:::

## Quarto PDF Engine

Quarto's built-in PDF compilation engine handles running LaTeX multiple times to resolve index and bibliography entries, and also performs automatic LaTeX package installation. This section describes customizing the built-in engine (see the [Alternate PDF Engines](#alternate-pdf-engines) section below for docs on using other engines).

### PDF Compilation

The following options are available for customizing PDF compilation:

| Option                 | Description                                                         |
|------------------------|---------------------------------------------------------------------|
| `latex-min-runs`       | Number (minimum number of compilation passes)                       |
| `latex-max-runs`       | Number (maximum number of compilation passes)                       |
| `latex-clean`          | Boolean (clean intermediates after compilation, defaults to `true`) |
| `latex-output-dir`     | String (output directory for intermediates and PDF)                 |
| `latex-makeindex`      | String (program to use for `makeindex`)                             |
| `latex-makeindex-opts` | Array (options for `makeindex`program)                              |

### Package Installation

The following options are available for customizing automatic package installation:

| Option               | Description                                                         |
|----------------------|---------------------------------------------------------------------|
| `latex-auto-install` | Boolean (enable/disable automatic package installation)             |
| `latex-tlmgr-opts`   | Array (options for [tlmgr](https://www.tug.org/texlive/tlmgr.html)) |

## Alternate PDF Engines {#alternate-pdf-engines}

You can use the `pdf-engine` and `pdf-engine-opts` to control the PDF engine that Quarto uses to compile the LaTeX output into a PDF. For example:

``` yaml
title: "My Document"
pdf-engine: lualatex
pdf-engine-opts:
  - '--no-shell-escape'
  - '--halt-on-error'
```

The above example will use the `lualatex` PDF engine with some specific options, rather than the default `xelatex`.

## Latexmk

Quarto includes a built-in Latexmk engine, which will run the `pdf-engine` more than once to generate your PDF (for example, if you are using cross references or a bibliography). In addition, this engine will detect and attempt to install missing packages, fonts, or commands if TeX Live is available.

You can disable Quarto's built-in Latexmk engine by setting the `latex-auto-mk` option to `false`. For example:

``` yaml
title: "My Document"
latex-auto-mk: false
```

Engine options can still be set using [`pdf-engine-opts`](#alternate-pdf-engines). For example: 

``` yaml
latex-auto-mk: false
pdf-engine: latexmk
pdf-engine-opts:
  - '-auxdir=custom-aux'
  - '-emulate-aux-dir'
```

The above example will use `latexmk` as a PDF engine and set some options to modify the directory name for auxiliary files.
```````

## File: docs/output-formats/typst-custom.qmd
```````
---
title: "Custom Typst Formats"
---

{{< include /docs/_require-1.4.qmd >}}

## Overview

When you author a Typst document in Quarto, you’ll be using a Quarto format that is in turn based on a Typst template. The default template provides a basic article layout, but Typst provides an easy way to [define your own templates](https://typst.app/docs/tutorial/making-a-template/) to produce highly customized documents. 

Typst templates can be packaged as custom formats for Quarto to allow them to be easily used and shared. On this page, learn about some custom Typst formats available from the Quarto team, as well as how to create your own.

## Custom Formats {#custom-formats}

You can create highly customized output with Typst by defining a new format based on a custom Typst template. The Typst team has created several useful [templates](https://github.com/typst/templates), a few which have been adapted for use with Quarto as custom formats. These formats include:

| Format                                                                         | Usage                                                      |
|--------------------------|----------------------------------------------|
| [Poster](https://github.com/quarto-ext/typst-templates/tree/main/poster)       | `quarto use template quarto-ext/typst-templates/poster`    |
| [IEEE](https://github.com/quarto-ext/typst-templates/tree/main/ieee)           | `quarto use template quarto-ext/typst-templates/ieee`      |
| [AMS](https://github.com/quarto-ext/typst-templates/tree/main/ams)             | `quarto use template quarto-ext/typst-templates/ams`       |
| [Letter](https://github.com/quarto-ext/typst-templates/tree/main/letter)       | `quarto use template quarto-ext/typst-templates/letter`    |
| [Fiction](https://github.com/quarto-ext/typst-templates/tree/main/fiction)     | `quarto use template quarto-ext/typst-templates/fiction`   |
| [Dept News](https://github.com/quarto-ext/typst-templates/tree/main/dept-news) | `quarto use template quarto-ext/typst-templates/dept-news` |

: {tbl-colwidths=\[20,80\]}

The source code for these formats is available at <https://github.com/quarto-ext/typst-templates>.

## Create a Format

To create a new custom Typst format (or package an existing Typst template for use with Quarto) use the `quarto create` command to get started:

``` {.bash filename="Terminal"}
$ quarto create extension format
```

Then, choose `typst` as the base format and provide a name for the extension (e.g. `letter`). A sample Typst format extension will be created based on the code used in the default template that ships with Quarto. It will include the following files which you can edit to implement your custom format:

| File                 | Description                                                                                                                                           |
|-------------------------|-----------------------------------------------|
| `_extension.yml`     | Basic extension metadata (name, author, description, etc.) and format definition.                                                                     |
| `README.md`          | Documentation on how to install and use the format.                                                                                                   |
| `template.qmd`       | A starter document that demonstrates the basics of the format.                                                                                        |
| `typst-template.typ` | The core Typst template function (documentation on creating Typst templates can be found here: <https://typst.app/docs/tutorial/making-a-template/>). |
| `typst-show.typ`     | File that calls the template's function (mapping Pandoc metadata to function arguments).                                                              |

Additional resources you might find useful when creating custom formats include:

-   The official Typst tutorial on [Making a Template](https://typst.app/docs/tutorial/making-a-template/)

-   List of third party templates from the [Awesome Quarto](https://github.com/qjcg/awesome-typst#templates--libraries) repo.

## Advanced Customization

::: callout-note
This section covers advanced customization of Typst format output and can be safely ignored unless you have found the method of defining custom Typst formats described above too limited.
:::

Above we describe a method of creating a Typst format based on specifying two [template partials](/docs/journals/templates.qmd#template-partials) (`typst-template.typ` and `typst-show.typ`). These partials customize components of the default Typst Pandoc template, but leave some of the core scaffolding including definitions required by Pandoc for its Typst output as well as handling of bibliographies and footnotes (this means that your own custom Typst formats do not need to explicitly handle them).

If you would like to fully override the Pandoc template used for rendering Typst, use the `template` option in your custom format (rather than `template-partials`) and provide an alternate implementation of the default template. For example, your `_extensions.yml` might look like this:

``` {.yaml filename="_extensions.yml"}
title: Typst Custom Format
author: Jane Smith
version: "0.2.0"
quarto-required: ">=1.4.11"
contributes:
  formats:
    typst:
      template: template.typ
      template-partials:
        - typst-template.typ
        - typst-show.typ
```

Use the [source code](https://github.com/quarto-dev/quarto-cli/blob/main/src/resources/formats/typst/pandoc/quarto/template.typ) of the default template as a starting point for your `template.typ`. Note that you can call all of the template partials provided by Quarto (e.g. `biblio.typ()` or `notes.typ()`) from within your custom template implementation.

The [AMS](https://github.com/quarto-ext/typst-templates/tree/main/ams) format provides an example of redefining the main template (in that case, it is to prevent automatic bibliography processing by Quarto in deference to the built-in handling of the Typst AMS template).
```````

## File: docs/output-formats/typst.qmd
```````
---
title: "Typst Basics"
tbl-colwidths: [35,65]
aliases: 
  - /docs/prerelease/1.4/typst.html
# project:
#   pre-render:
#     - quarto run ../../tools/snapshot-typst.ts examples/gt-temps.qmd images/typst-tables-gt-temps.png
---

{{< include /docs/_require-1.4.qmd >}}

## Overview

[Typst](https://github.com/typst/typst) is a new open-source markup-based typesetting system that is designed to be as powerful as LaTeX while being much easier to learn and use. Typst creates beautiful PDF output with blazing fast render times.

Use the `typst` format to create a PDF document via Typst. For example:

```{.yaml filename="hello-typst.qmd"}
---
title: "Hello Typst!"
format:
  typst:
    toc: true
    section-numbering: 1.1.a
    columns: 2
---
```

Rendering or previewing this document will invoke the Typst CLI to create `hello-typst.pdf`, a PDF file, from your markdown source file. Quarto includes the Typst CLI so no separate installation of Typst is required.

The above example highlights a few of the options available for Typst output. This document covers these and other options in detail. See the Typst [format reference](/docs/reference/formats/typst.qmd) for a complete list of all available options.

One of the highlights of Typst is the ease of creating highly customized templates. For example, here are some Typst templates that you can use in Quarto as custom formats:

::: {layout-ncol=4}

![IEEE](images/typst-format-ieee.png){.lightbox group="custom-formats" fig-alt="Screenshot of a page showing a article styled according IEEE standards. The title is centered with authors below in two columns."}

![Poster](images/typst-format-poster.png){.lightbox group="custom-formats" fig-alt="Screenshot of a poster in landscape orientiation. The poster includes a logo in the top right, a title in the top left, and content arranged in three columns."}

![Letter](images/typst-format-letter.png){.lightbox group="custom-formats" fig-alt="Screenshot of a page showing a letter. A sender address is across the top of the page, followed by a recipient address left justified. The body of the letter includes a subject line in bold."}

![Dept News](images/typst-format-dept-news.png){.lightbox group="custom-formats" fig-alt="Screenshot of a page showing a department newsletter. The page is split vertically with a white column on the left and a red one on the right. An image spans across the column with the text \"Award Winning Science\" oriented to run vertically down its right side."}

:::

 Learn more about how to use them, and how to create your own in [Custom Formats](typst-custom.qmd).

## Known Limitations

Since Typst is under active development, there are still some limitations to Quarto's Typst support:

-   The default size of images may not reflect the behavior you are used to in other output formats. This is a problem that Typst, pandoc and Quarto are actively working to fix. In the meantime, you can manually [specify image widths](/docs/authoring/figures.qmd#figure-sizing).

-   Advanced page layout (e.g. using the `.column-*` classes as explained in [Article Layout](/docs/authoring/article-layout.qmd)) is not implemented.

-   Various other small things might not yet be implemented. Please [let us know](https://github.com/quarto-dev/quarto-cli/issues/new/choose) if you see things that could use improvement!

## Page Layout

You can control the size of the page (`papersize`), the page margins (`margin`), and the number of columns used for page content (`columns`). For example, the following YAML modifies all three options:

```yaml
---
title: Page Layout
format:
  typst:
    papersize: a5
    margin:
      x: 1cm
      y: 1cm
    columns: 2
---
```

The resulting layout is shown below alongside an example of the default layout:

:::{layout-ncol=2}

![Customized Layout](images/typst-custom-page.png){.border fig-alt="Screenshot of one page of PDF document. The document shows a two columns of text. Compared to the previous screenshot, the page is narrower and longer, and the margins are smaller."}

![Default Layout](images/typst-default-page.png){.border fig-alt="Screenshot of one page of PDF document. The document shows a single column of text."}

:::

You can read more about these page layout options in the sections below.

### Paper Size

The `papersize` option expects a string matching one of Typst's supported [paper sizes](https://typst.app/docs/reference/layout/page/#parameters-paper). The default template is equivalent to:

```yaml
papersize: us-letter
```

### Margins

The `margin` option expects one or more of the suboptions: `x`, `y`, `top`, `bottom`, `left` and `right`. The default template uses margins equivalent to:

```yaml
margin:
  x: 1.25in
  y: 1.25in
```

This sets the margins in the horizontal direction (`x`), i.e. `left` and `right`, as well as the margins in the vertical direction (`y`), i.e. `top` and `bottom` to 1.25 inches.

The values for the margins are specified using Typst's [length](https://typst.app/docs/reference/layout/length/), (e.g. `5cm`) or  [relative length](https://typst.app/docs/reference/layout/relative/) (e.g. `10%`) types. You can specify a single margin:

```yaml
margin:
  left: 1cm
```

Then, any unspecified margins will inherit from the default margins.

### Columns

The `columns` option expects a number - the number of columns your body content should have. The default template sets `columns` to `1`. 


{{< include /docs/output-formats/_document-options-toc.md >}}

The `toc-indent` option controls how far entries are indented in the displayed table of contents. The default is equivalent to:

```{.yaml}
toc-indent: 1.5em
```

{{< include /docs/output-formats/_document-options-section-numbering.md >}}

You can also customize the display of the section numbers with the `section-numbering` YAML option. This option expects a string that describes the numbering schema. For example, the following schema describes numbering sections with numerals, subsection with uppercase letters, and subsubsections with lower case letters, using `.` as a separator:

```yaml
---
section-numbering: 1.A.a
---
```

You can read more about specifying the numbering schema in the [Typst documentation for numbering](https://typst.app//docs/reference/model/numbering#parameters-numbering).

{{< include /docs/output-formats/_code-annotation.md >}}

## Bibliography

{{< include _typst-citations.md >}}

## Typst Blocks

If you want to change the appearance of blocks using native [Typst `#block()`](https://typst.app/docs/reference/layout/block/) calls, you can add the `.block` class to a Div and provide whatever arguments are appropriate. For example:

```` markdown
::: {.block fill="luma(230)" inset="8pt" radius="4pt"}

This is a block with gray background and slightly rounded corners.

:::
````

This gets compiled to

```` default
#block(fill:luma(230), inset:8pt, radius:4pt,
[This is a block with gray background and slightly rounded corners.])
````

## Raw Typst 

If you want to use raw `typst` markup, use a raw `typst` block. For example:

```` default
```{=typst} 
#set par(justify: true)

== Background 
In the case of glaciers, fluid dynamics principles can be used to understand how the movement and behavior of the ice is influenced by factors such as temperature, pressure, and the presence of other fluids (such as water).
```
````

To learn more about `typst` markup, see the tutorial here: <https://typst.app/docs/tutorial/>.

## Typst CSS

To allow similar styling between HTML and Typst, Quarto will translate CSS properties into Typst properties.

You can use CSS properties directly in your Quarto markup, and they will get translated to appropriate Typst elements and properties.

For example, text-related properties `color`, `opacity`, and `background-color` can be applied to spans:

```markdown
Here is a [span with a green background]{style="background-color:green"}.
```

`font-family` and `font-size` can be applied to a div or table:

```markdown
:::{style="font-family: helvetica"}
This div is rendered in Helvetica.
:::
```

See [the Advanced documentation](/docs/advanced/typst/typst-css.qmd#supported-elements-and-properties) for supported elements and properties, and how to add more using Lua filters.

You are most likely to encounter Typst CSS when using libraries that produce HTML tables. 
The translation of the CSS means your table in Typst should look similar to how it looks in HTML without any intervention on your part.

For example, here is a temperature heatmap using `gt` in R, and `pandas` in Python.

::: {.panel-tabset}

#### R - gt
:::: {layout-ncol=2}
![](images/typst-tables-gt-temps.png){height=200px}

````r
```{{r}}
{{< include examples/gt-temps.R >}}
```
````
::::

#### Python - Pandas
:::: {layout-ncol=2}
![](images/typst-tables-pandas-temps.png){height=200px}

````python
```{{python}}
{{< include examples/pandas-temps.py >}}
```
````
::::

:::

Note that [named Typst colors](https://typst.app/docs/reference/visualize/color/#predefined-colors) will be preferred over [named CSS colors](https://developer.mozilla.org/en-US/docs/Web/CSS/named-color). If you want exactly the same color in your HTML and Typst output, specify the color using `rgb()` or hexadecimal `#rrggbb` syntax.

Typst does not support opacity as a filter, so opacity is simulated using the alpha channel of the color.

## Typst File (`.typ`)

The rendering process produces a native Typst file (`.typ)` which is then compiled to PDF using the Typst CLI. This intermediate file is then automatically removed. If you want to preserve the `.typ` file, use the `keep-typ` option. For example:

``` yaml
---
title: "My Document"
format:
  typst:
    keep-typ: true
---
```

You can compile a `.typ` file to PDF directly using the `quarto typst compile` command in a terminal. For example:

``` {.bash filename="Terminal"}
$ quarto typst compile article.typ
```

The `quarto typst` command uses the version of Typst built in to Quarto and supports all Typst CLI actions and flags. For example, to determine the version of Typst embedded in Quarto:

``` {.bash filename="Terminal"}
$ quarto typst --version
```

## Fonts Support

The main font used for the document can be specified with the `mainfont` YAML option. Typst will search by default in installed system fonts. You can set additional paths to search using `font-paths`. For example: 

``` yaml
---
title: "My Document"
format: 
  typst:
    mainfont: "Agbalumo"
    font-paths: myfonts
---
```

This will search for a `*.ttf` or `*.otf` file matching the font name in the `./myfonts/` directory, in addition to searching in installed system fonts.

The `TYPST_FONT_PATHS` environment variable is also taken into account for compatibility with Typst configuration, but setting `font-paths` will take precedence over any path set in the `TYPST_FONT_PATHS` environment variable.

Set the base size of the font used in the document with `fontsize`. The size used in the default template is equivalent to:

```yaml
---
fontsize: 11pt
---
```

## Computation Figure Format

Typst has great support for SVG graphics, so `format: typst` defaults to `fig-format: svg`. This configuration means executable code cells that produce images will produce `.svg` output. 

If you prefer to include raster graphics, set `fig-format` to another value, like for example: 

```yaml
format:
  typst:
    fig-format: png
```

See other figure options on the [Typst reference page](/docs/reference/formats/typst.qmd#figures)

## Includes

{{< include /docs/output-formats/_document-options-includes.md >}}

For example:

``` yaml
format:
  typst:
    include-before-body:
      - text: |
          #show heading: set text(navy)
```
```````

## File: docs/prerelease/1.3/custom-ast-nodes/callout.qmd
```````
---
title: Quarto Callouts Custom Node API
date: last-modified
search: false
---

In Quarto 1.3, callouts are represented as a custom AST node. You can create callout AST nodes in Lua filters with the `quarto.Callout` constructor. The constructor takes a single parameter, a table with entries `type`, `title`, and `content`, as described below. In Lua filters, callouts are represented as a table with the following fields:

- `type`: the type of callout: `note`, `caution`, `warning`, etc (optional in the constructor).
- `title`: The callout title (if any) (optional in the constructor),
- `icon`: the callout icon (or `false` if none) (optional in the constructor)
- `appearance`: `"minimal"`, `"simple"`, or `"default"` (optional in the constructor)
- `collapse`: whether to render the callout as collapsible (optional in the constructor, default `false`)
- `content`: the content of the callout (a `pandoc.Blocks` object, or a plain list in the constructor)
```````

## File: docs/prerelease/1.3/custom-ast-nodes/conditional-block.qmd
```````
---
title: Quarto Conditional Blocks Custom Node API
date: last-modified
search: false
---

In Quarto 1.3, conditional blocks are represented as a custom AST node. You can create conditional block AST nodes in Lua filters with the `quarto.ConditionalBlock` constructor. The constructor takes a single parameter, a table with entries `node`, `behavior`, and `condition`, as described below.
In Lua filters, conditional blocks are represented as a table with the following fields:

- `node`: the div containing the content
- `behavior`: either `content-visible` or `content-hidden`
- `condition`: a list of 2-element lists, such as `{ { "unless-format", "html" } }` (optional in the constructor, default value `{}`). The first element of each sublist must be one of `when-format`, `unless-format`, `when-profile`, and `unless-profile`. The second element is the relevant format or profile.
```````

## File: docs/prerelease/1.3/custom-ast-nodes/tabset.qmd
```````
---
title: Quarto Tabsets Custom Node API
date: last-modified
search: false
---

In Quarto 1.3, tabsets are represented as a custom AST node. You can create conditional blocks in Lua filters with the `quarto.Tabset` constructor, with parameters `tabs`, `level` and `attr` as described above. In
addition, you can use `quarto.Tab` to create the tab objects for the `tabs` field. `quarto.Tab` is more lenient with parameter types, converting strings to `Blocks` and `Inlines` as needed. In Lua filters, tabsets are represented as a table with the following fields:

- `tabs`: a table containing the content for each tab. Each entry is a table with two entries: `title` (a `pandoc.Inlines`) and `content` (a `pandoc.Blocks`) (optional in the contructor, default value `{}`)
- `level`: the level of the tab headings to be used in rendering the tabset (optional in the constructor, default value `2`)
- `attr`: the `Attr` object for the resulting tabset div (optional in the constructor)
```````

## File: docs/prerelease/1.3/_highlights.qmd
```````
Quarto 1.3 includes the following new features:

-   [Confluence Publishing](/docs/publishing/confluence.qmd)---Publish quarto documents and projects to Confluence spaces.

-   [Multi-Format Publishing](/docs/output-formats/html-multi-format.qmd)---Simple discovery of other formats for HTML documents.

-   [Jupyter Cell Embedding](/docs/authoring/notebook-embed.qmd)---Embed code and outputs from Jupyter Notebooks in Quarto documents.

-   [Article Grid Customization](/docs/output-formats/page-layout.qmd#grid-customization)---Customize the widths within the article grid in HTML documents.

-   [Code Block Annotation](/docs/authoring/code-annotation.qmd)---Use annotation to provide contextual comments to help readers understand code.

-   [Quarto Book AsciiDoc Support](/docs/books/book-output.qmd#asciidoc-books)---Output Quarto books to AsciiDoc files

-   [Website Navigation Improvements](/docs/prerelease/1.3/website-nav.qmd)---Improved navigation for Quarto websites.

-   [Mermaid Diagram Theming](/docs/authoring/diagrams.qmd#mermaid-theming)---Mermaid diagram's appearance automatically matches your document's theme (or customize it)

-   [PDF: SVG and Remote Images](/docs/prerelease/1.3/pdf.qmd)---Improved handling for SVG images and remote images in PDF documents.

-   [`kbd` Shortcode](/docs/authoring/markdown-basics.qmd#keyboard-shortcuts)---Show well formatted keyboard shortcuts in Quarto documents.

-   [Extensions: Quarto AST](/docs/prerelease/1.3/ast.qmd)---Use custom AST nodes for Quarto types like Callout when writing extensions.

-   [Extensions: HTML Tables](/docs/prerelease/1.3/tables.qmd)---HTML tables are now processed and accessible to Lua filters in all formats (not just HTML).
```````

## File: docs/prerelease/1.3/_pre-release-feature.qmd
```````
::: {.callout-note}
## Pre-release Feature

This feature is new in the upcoming Quarto 1.3 release. To use the feature now, you'll need to [download](/docs/download/prerelease.qmd) and install the Quarto pre-release.
:::
```````

## File: docs/prerelease/1.3/ast.qmd
```````
---
title: Custom AST Nodes
search: true
---

{{< include /docs/_require-1.3.qmd >}}

## Overview

Quarto now supports custom AST nodes in Pandoc filters. This allows more flexibility in defining and using Lua filters.

We will slowly roll out more extensive changes of the AST, but currently, the following objects are custom AST nodes:

-   [Callouts](custom-ast-nodes/callout.qmd)
-   [Tabsets](custom-ast-nodes/tabset.qmd)
-   [Conditional Blocks](custom-ast-nodes/conditional-block.qmd)

## Example: Callouts

In previous versions of Quarto, callouts would be represented directly as a div with a class starting with `callout`, and the contents laid out in a [particular way](/docs/authoring/callouts.qmd).

While *authoring* documents, this syntax remains unchanged. But when processing the document, the callout divs are now represented as a custom AST node, which can be processed directly in Lua filters. In Quarto 1.3, callouts can be captured in Lua filters more directly. For example, here is a filter that forces every callout to be of type "caution":

``` lua
function Callout(callout)
  -- do something with the callout
  callout.type = "caution"

  -- note that custom AST nodes are passed by reference. You can
  -- return the value if you choose, but you do not need to.
end
```

Finally, custom AST node constructors are available in the `quarto` object: `quarto.Callout`, `quarto.Tabset`, etc. See the pages above for details.
```````

## File: docs/prerelease/1.3/index.qmd
```````
---
title: Quarto 1.3 Pre-Release
date: last-modified
search: false
---

{{< include _highlights.qmd >}}


See the [Pre-Release Download Page](/docs/download/prerelease.qmd) for a complete list of all the changes and bug fixes.


<!--
- Large: Jupyter [Cell Embedding]
    - Notebook preview responsive size
-->
```````

## File: docs/prerelease/1.3/tables.qmd
```````
---
title: HTML Table Processing
---

{{< include /docs/_require-1.3.qmd >}}

## Overview

In Quarto 1.3, we have made some changes to how tables are processed. Recent Pandoc versions have added support for parsing HTML tables into Pandoc's native data structures (including features such as rowspans and colspans), and Quarto now leverages this to make it easier to produce properly formatted tables in more formats.

### HTML tables are now processed in every format

Specifically, Quarto will now attempt to parse HTML tables in `RawBlock` nodes in `html` format and convert them to Markdown tables, regardless of output format (intentionally including non-HTML formats). As a result, you can now use HTML table syntax in your documents and they will be properly converted to Markdown tables for all formats, and libraries which emit computational tables in HTML format can work in other output formats. In addition, this will allow Lua filters to manipulate the content of tables specified in HTML format.

::: callout-note

If you're a library author, we hope that you will consider emitting HTML tables in your output. This will allow your users to use the full power of Quarto's table processing in all formats.

With that said, it's possible that our processing of HTML tables interferes with your library's processing. If this is the case, you can disable Quarto's processing of HTML tables by adding the following data attribute to your table:

```
<table data-quarto-disable-processing="true">
  ...
</table>
```

:::

### Bootstrap classes can be added to tables

Bootstrap table classes given as attributes next to a table caption are now inserted into the `<table>` element. The classes permitted are those that apply expressly to the entire table, and these are: `"primary"`, `"secondary"`, `"success"`, `"danger"`, `"warning"`, `"info"`, `"light"`, `"dark"`, `"striped"`, `"hover"`, `"active"`, `"bordered"`, `"borderless"`, `"sm"`, `"responsive"`, `"responsive-sm"`, `"responsive-md"`, `"responsive-lg"`, `"responsive-xl"`, `"responsive-xxl"`. For example, the following Markdown table will be rendered with row stripes and the rows will also be highlighted on hover:

```
| fruit  | price  |
|--------|--------|
| apple  | 2.05   |
| pear   | 1.37   |
| orange | 3.09   |

: Fruit prices {.striped .hover}
```

### Embedded Markdown content can be specified

In addition, Quarto now supports the specification of embedded Markdown content in tables. This is done by providing a data attribute `qmd` or `qmd-base64` in an embedded `span` or `div` node. These nodes can appear anywhere that such content is allowed: table headers, footers, cells, captions, etc. For example, consider the following table:

```
<table>
  <caption><span data-qmd="As described in @Lovelace1864, computers are great."></span></caption>
  <thead>
    <tr>
      <th><span data-qmd="_Header 1_"></span></th>
      <th><span data-qmd="_Header 2_"></span></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><span data-qmd="{{< video https://www.youtube.com/embed/wo9vZccmqwc >}}"></span></td>
      <td>Regular output</td>
    </tr>
  </tbody>
</table>
```

The `span` nodes with the `data-qmd` attribute will be processed as embedded Markdown content. This allows you to embed arbitrary Markdown content in your tables, including citations, videos, etc. One thing to keep in mind is that the content of `data-qmd` needs to be escaped properly. Authors of libraries which generate table outputs should consider using the `data-qmd-base64` attribute, which will be decoded and then processed by Quarto.

## Limitations

Quarto **doesn't** support processing of:

- nested `<table>` elements.
- invalid HTML tables. Make sure your emitted HTML [passes validation](https://validator.w3.org/).
```````

## File: docs/prerelease/1.3/website-nav.qmd
```````
---
title: Responsive Website Navigation Improvements
---

## Navbar Tools

The navbar can now display a set of tools (e.g. social actions, GitHub view or edit actions, etc.), see [Navbar Tools](/docs/websites/website-navigation.qmd#navbar-tools).

## Responsive Navbar

We've updated the responsive behavior of the navbar to improve the usability of Quarto websites on mobile devices. Changes include:

-   When the items in a navbar collapse into a menu, we've moved the 'hamburger' button which controls the menu to the right side of the navbar. This makes it easier to access the menu on mobile devices.

-   When the items in a navbar collapse into a menu, we place the search icon on right side of the navbar (rather than placing in the collapsed menu). This makes search always available, even when on small screens.

![](images/top-nav.png){.border fig-alt="The top section of a mobile sized Quarto navbar." fig-align="center"}

## Responsive Sidebar

We've updated the responsive behavior of the sidebar to improve the usability of Quarto websites on mobile devices. Changes include:

-   The collapsed sidebar now appears as a vertically smaller band which includes a 'sidebar' icon on the left side. Clicking this icon will expand the sidebar to full width. In addition, this collapsed view includes 'breadcrumbs' for the current page which allow simple navigation up the hierarchy.

-   When revealed, the sidebar will now animate from the side of the screen.

![](images/top-nav-open.png){.border fig-alt="The top section of a mobile sized Quarto navbar with the sidebar fully opened, revealing a sidebar menu." fig-align="center"}
```````

## File: docs/prerelease/1.4/_highlights.qmd
```````
Quarto 1.4 includes the following new features:

-   [Quarto Manuscripts](/docs/manuscripts/index.qmd)---A new project type for scholarly articles, where notebooks are both the source of the article, and part of the published record.

-   [Quarto Dashboards](/docs/dashboards/index.qmd)--A new format for creating interactive dashboards.

-   [Typst Format](/docs/output-formats/typst.qmd)---Support for the `typst` output format. [Typst](https://github.com/typst/typst) is a new open-source markup-based typesetting system that is designed to be as powerful as LaTeX while being much easier to learn and use.

-   Cross-reference changes:
    
    -  Adds a new [Cross-Reference Div Syntax](/docs/authoring/cross-references-divs.qmd) to more flexibly define cross-referenceable elements.
    
    - Allows the definition of [Custom Cross-Reference Types](/docs/authoring/cross-references-custom.qmd) via document or project YAML.
    
    - Adds `lst-label` and `lst-cap` code cell options to create [Cross-referenceable Listings for Executable Code](/docs/authoring/cross-references.qmd#code-listings).

    - Allows [Cross-Referencing Callouts](/docs/authoring/cross-references.qmd#callouts).

    - Adds the prefixes `rem-` and `sol-` to cross-reference Remarks and Solutions in addition to the [existing theorem types](/docs/authoring/cross-references.qmd#theorems-and-proofs).
    
    - Makes other [behind the scenes changes](/docs/prerelease/1.4/crossref.qmd).

-   [Shiny for Python](/docs/dashboards/interactivity/shiny-python/index.qmd)---Support for using Shiny for Python within Quarto documents. 

-   [Inline Execution for Jupyter](/docs/computations/inline-code.qmd)---Support for executing inline expressions when using Jupyter kernels. 

-   [Script Rendering](/docs/computations/render-scripts.qmd) 
    
    - Jupyter---Support for rendering script files (e.g. `.py`, `.jl`, or `.r`) that are [specially formatted](https://jupytext.readthedocs.io/en/latest/formats-scripts.html) as notebooks.

    - Knitr---Support for rendering R script files (e.g. `.r` or `.R`) that are formatted for report using [`knitr::spin()` syntax](https://bookdown.org/yihui/rmarkdown-cookbook/spin.html).
   
-   [Easy Binder Configuration for Quarto Projects](/docs/projects/binder.qmd)---Support for generating files required to deploy a Quarto project using Binder.

-   [Connect Email Generation](/docs/prerelease/1.4/email.qmd)---Extends the `html` output format so that HTML/text emails can be created and selectively delivered through Posit Connect.

-   [Publish to Posit Cloud](/docs/publishing/posit-cloud.qmd)---Adds `posit-cloud` as a venue for `quarto publish`.

-   [Lightbox Treatment for Images and Figures](/docs/output-formats/html-lightbox-figures.qmd)---Support for zooming into images and figures using a `lightbox`. Includes support for grouping multiple images into a gallery.

-   [Lua changes](/docs/prerelease/1.4/lua_changes.qmd)---Quarto v1.4 adds new features to writers of Lua filters.

-   [AST processing changes](/docs/prerelease/1.4/ast.qmd)---Quarto v1.4 improves on the HTML table processing added in v1.3 and adds a way for LaTeX raw blocks to include Quarto-compatible markdown for processing.
```````

## File: docs/prerelease/1.4/_pre-release-feature.qmd
```````
::: {.callout-note}
## Pre-release Feature

This feature is new in the upcoming Quarto 1.4 release. To use the feature now, you'll need to [download](/docs/download/prerelease.qmd) and install the Quarto pre-release.
:::
```````

## File: docs/prerelease/1.4/ast.qmd
```````
---
title: "AST processing changes in v1.4"
---

In Quarto v1.3, we added support for parsing HTML tables as native Pandoc elements, so that sophisticated table layouts are available in more formats. Quarto v1.4 extends this in a few ways.

## Finer control over table processing

In v1.3, this HTML processing could be disabled only by specifying an option in the HTML table itself, using `quarto-disable-processing="true"`.

In v1.4, this behavior can be controlled by document- and project-level metadata, using the `html-table-processing: none` YAML option:

````qmd
---
html-table-processing: none
---

No HTML tables in this document will be processed.

```{{r}}
library(huxtable)
# your huxtable tables won't be processed by quarto
```

````

In addition, you can disable the processing selectively in parts of the document, by surrounding the elements with a fenced div having the attribute `{html-table-processing="none"}`:

````qmd
---
html-table-processing: none
---

No HTML tables in this document will be processed.

::: {html-table-processing="none"}

```{{r}}
library(huxtable)
# your huxtable tables won't be processed by quarto because of
# the surrounding div
```

:::

```{{r}}
library(gt)
# your gt tables will be processed as in 1.3
```
````

## Include Quarto markdown in LaTeX Raw Blocks

In Quarto v1.3, HTML rawblocks can contain the syntax `<span data-qmd="<<markdown-content>>"/>` of `<span data-qmd-base64="<<base64-encoded-markdown-content>>"` to allow libraries that emit raw blocks to benefit
from Quarto features such as crossref resolution and shortcodes.

In Quarto v1.4, this feature is also available in LaTeX formats. If the syntax `\QuartoMarkdownBase64{<<base64-encoded-markdown-content>>}` is detected by Quarto, the contents will be decoded,
processed in Quarto (including user filters), and then inserted back into the LaTeX raw block.

This is useful for third-party libraries that seek to emit LaTeX content that nevertheless 
can have "quarto content". Note that, unlike the HTML feature, Quarto currently only 
supports base-64 encoded content in LaTeX blocks.

Note that, unlike the HTML table parsing feature, this LaTeX feature cannot currently be disabled.
We expect this to not be necessary because `QuartoMarkdownBase64` is unlikely to conflict with
existing LaTeX environments.
```````

## File: docs/prerelease/1.4/crossref.qmd
```````
---
title: "Behind the Scenes Changes to Cross-References"
---

## Changes in HTML output

The changes to cross-references in Quarto 1.4 also introduce some changes to the underlying HTML output of figures and other cross-referencable elements. For most users, these changes will be invisible. However, if you are operating on Quarto HTML output, you may be impacted. In particular:

- The DOM structure for HTML figures used to be such that the following CSS selector would work:
  
  ```
  div#fig-elephant > figure > figcaption.figure-caption
  ```
  
  In Quarto v1.4, this is now
  
  ```
  div#fig-elephant > figure.quarto-float.quarto-float-fig > figcaption.quarto-float-caption.quarto-float-fig
  ```

  Here's a minimal, full HTML output for a figure:

  ```html
  <div id="fig-1" class="quarto-figure quarto-figure-center anchored">
    <figure class="quarto-float quarto-float-fig figure">
    <div aria-describedby="fig-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
      <img src="./img/content.jpg">
    </div>
    <figcaption id="fig-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca" class="quarto-float-caption quarto-float-fig">
    Figure&nbsp;1: This is a caption.
    </figcaption>
    </figure>
  </div>
  ```

  Concretely: 

  - All cross-referenceable elements use the `figure` HTML element with class `quarto-float`.
  - Different float types are differentiated by the CSS class `quarto-float-fig` (or `-tbl`, `-lst`, or the `ref_type` of custom cross-reference types) as well as the additional CSS class `figure`, `table`, etc. 
    If the element is a subfloat, this will be `quarto-subfloat-fig`.
  - Similarly, float captions use the `figcaption` element with class `quarto-float-caption` (or `quarto-subfloat-caption` if they're a subfloat), and also have the `quarto-float-*` CSS classes.
  
  This setup lets all "floats" be uniformly targeted by a single CSS rule, as well as allowing specific float types and their captions be targeted by a single additional CSS selector.

- Images by themselves used to have a surrounding paragraph; they no longer do.

- Floats include an extra div for ARIA referencing, so that captions are referenced appropriately and uniformly. 
  As a result, if a table appears inside a float, its caption will be hoisted to the figure node itself.
```````

## File: docs/prerelease/1.4/email.qmd
```````
---
title: "Connect Email Generation"
---

{{< include /docs/_require-1.4.qmd >}}

## Overview

Quarto v1.4 adds an email generation feature that can be used for HTML documents published in [Posit Connect](https://posit.co/products/enterprise/connect/). This feature extends the HTML output format and enables users to generate HTML and/or text emails that can be selectively delivered when the document is rendered in Connect.

Read full documentation of the feature on the [Posit Connect Documentation](https://docs.posit.co/connect/user/quarto/#email-customization){.external}.
```````

## File: docs/prerelease/1.4/index.qmd
```````
---
title: Quarto 1.4 Pre-Release
date: last-modified
search: false
---

{{< include _highlights.qmd >}}


See the [Pre-Release Download Page](/docs/download/prerelease.qmd) for a complete list of all the changes and bug fixes.
```````

## File: docs/prerelease/1.4/lua_changes.qmd
```````
---
title: "Lua filter changes"
---

{{< include /docs/_require-1.4.qmd >}}

Quarto v1.4 includes the following new features for Lua filters:

## Support for crossreferenceable elements in filters

Quarto v1.4 brings significant changes to the handling of figures, tables, listings, etc.
These changes simplify the writing of Lua filters that targets those elements, but will 
generally require changes in existing.

### The `FloatRefTarget` AST node

In v1.4, crossreferenceable elements all have a single generic type, `FloatRefTarget`. 
This element can be constructed explicitly in a Lua filter.
It can also be used as the element to be processed in a Lua filter directly.

```{.lua}
-- A filter targeting FloatRefTarget nodes
return {
  FloatRefTarget = function(float)
    if float.caption_long then
      float.caption_long.content:insert(pandoc.Str("[This will appear at the beginning of every caption]"))
      return float
    end
  end
}
```

`FloatRefTarget` nodes have the following fields:

- `type`: The type of element: `Figure`, `Table`, `Listing`, etc. Quarto v1.4 supports
  custom node types that can be declared at the document or project level.
- `content`: The content of the Figure, Table, etc. Quarto v1.4
  accepts any content in any `FloatRefTarget` type (so if your tables are better displayed
  as an image, you can use that.).
- `caption_long`: The caption that appears in the main body of the document
- `caption_short`: The caption that appears in the element collations (such as a list of tables, 
  list of figures, etc.)
- `identifier`, `attributes`, `classes`: these are analogous to `Attr` fields in Pandoc AST elements like spans and divs. 
  `identifier`, in addition, needs to be the string that is used in a crossref (`fig-cars`, `tbl-votes`, `lst-query`, and so on).
- `parent_id`: if a `FloatRefTarget` is a subfloat of a parent multiple-element float, then `parent_id` will hold the identifier
  of the parent float.

## Custom formats and Custom renderers

Quarto v1.4 adds support for extensible renderers of quarto AST nodes such as `FloatRefTarget`, `Callout`.
In order to declare a custom renderer, add the following to a Lua filter:

```lua
local predicate = function(float)
  -- return true if this renderer should be used;
  -- typically, this will return true if the custom format is active.
end
local renderer = function(float)
  -- returns a plain Pandoc representation of the rendered figure.
end
quarto._quarto.ast.add_renderer(
  "FloatRefTarget", 
  predicate, 
  renderer)
```

## Relative paths in `require()` calls

In larger, more complex filters, it becomes useful to structure your Lua code in modules.
Quarto v1.4 supports the use of relative paths in `require()` calls so that small modules
can be easily created and reused.

For example:

```{.lua filename="filter.lua"}
local utility = require('./utils')
function Pandoc(doc)
  -- process 
end
```

Using relative paths this way in quarto makes it harder for multiple filters to accidentally
create conflicting module names (as would eventually happen when using the standard Lua
`require('utils')` syntax). It's possible to refer to subdirectories and parent directories as well:

```{.lua filename="filter2.lua"}
local parsing = require('./utils/parsing')
function Pandoc(doc)
  -- process 
end
```

```{.lua filename="utils/parsing.lua"}
local utils = require("../utils")
-- ...
```

## More precise targeting of AST processing phases

Before Quarto 1.4, Lua filters are either "pre" filters (the default setting), or "post" filters.
Those filters are specified like this:

```yaml
# "pre" filters:
filters:
  - pre_filter_1.lua
  - pre_filter_2.lua  
  # ...
# "post" filters:
filters:
  - quarto
  - post_filter_1.lua
  - post_filter_2.lua  
  # ...
```

This syntax continues to work in 1.4. 
In addition, it is now possible to specify more precisely the place where a specific filter will be inserted. 
Quarto's AST processing phase is now split into three parts: `ast`, `quarto`, and `render`.

- `ast`: normalizes the input syntax from Pandoc, recognizing constructs such as `Callout`, `FloatRefTarget`, and so on.
- `quarto`: processes the normalized syntax, for example by resolving cross-references.
- `render`: produces format-specific output from the processed input.

In Quarto 1.4, Lua filters can be inserted before or after any of these stages:

```yaml
filters:
  - at: pre-ast
    path: filter1.lua
  - at: post-quarto
    path: filter2.lua
  - at: post-render
    path: filter3.lua
```

Any of the stages can be prefixed by `pre-` or `post-`.
In Quarto 1.4, `pre-quarto` and `post-ast` correspond to the same insertion location in the filter chain, as do `post-quarto` and `pre-render`.
The "pre" and "post" filter syntax from Quarto 1.3 remains valid. 
"Pre" filters are injected at the `pre-quarto` entry point, and "post" filters are injected at the `post-render` entry point.

The new syntax also supports JSON filters, as 1.3 filters do.
Either use `type: json` explicitly, or use a path that doesn't end in `.lua`.
Conversely, `type: lua` will force the file to be treated as a Lua filter.
```````

## File: docs/prerelease/1.5/_highlights.qmd
```````
Quarto 1.5 includes the following new features:

-   [Typst CSS](/docs/output-formats/typst.qmd#typst-css)---Format tables with borders and colors, and the formatting will be transferred from HTML to Typst.

-   [Typst 0.11.0](/docs/authoring/tables.qmd#features-available-only-in-html-tables)---Typst tables have feature parity with other formats, with colspans, rowspans, and alignment of individual cells.

-   [Website Draft Mode](/docs/websites/website-drafts.qmd)---Improved support for workflows involving draft posts and pages:

    -   Adds the `drafts` option to the `website` key offering new ways to specify drafts: directly in `_quarto.yml`, and via metadata includes and profiles.

    -   Introduces the `draft-mode` option to the `website` key to control how drafts are rendered. Drafts can be `gone`, `unlinked` or `visible`.

    -   Adds a draft banner to draft pages that are rendered.

    -   Improves the linking behaviour of draft documents. Now, in addition to being excluded from search results, listings, and the sitemap, drafts will not appear in navigation, or be linked from in-text hyperlinks when `draft-mode` is `gone` or `unlinked`.

    -   Changes the behavior of `quarto preview` for drafts. Drafts will be `visible` in previews regardless of the `draft-mode` setting. In particular, this allows an easier way to preview the appearance of draft content in navigation and listings.

-   [Website Announcement Bar](/docs/websites/website-tools.qmd#announcement-bar)---Add an announcement bar to your website.

-   [Placeholder Image Shortcodes](/docs/authoring/placeholder.qmd)---Easily add placeholder images to your documents (`{{{< placeholder >}}}`).

-   [Lorem Ipsum Text Shortcodes](/docs/authoring/lipsum.qmd)---Easily add lorem ipsum text to your documents (`{{{< lipsum >}}}`).

-   [Native Julia Engine](/docs/computations/julia.qmd#using-the-julia-engine)---Execute Julia code in Quarto documents without requiring Jupyter.

-   [Project Pre Render Scripts](/docs/projects/scripts.qmd#pre-and-post-render)---Project metadata and the render list are now re-computed after any pre-render scripts have executed.

-   [Element-wide disabling of HTML table processing](/docs/authoring/tables.qmd#library-authors)---Declare the comment `<!--| quarto-html-table-processing: none -->` anywhere in an HTML RawBlock.

-   [Shortcode context awareness](/docs/extensions/shortcodes.qmd#context-awareness)---Shortcode handlers can be made aware of their invocation in `block`, `inline` or `text` contexts.
```````

## File: docs/prerelease/1.5/index.qmd
```````
---
title: Quarto 1.5 Pre-Release
date: last-modified
search: false
---

{{< include _highlights.qmd >}}

See the [Pre-Release Download Page](/docs/download/prerelease) for a complete list of all the changes and bug fixes.
```````

## File: docs/prerelease/1.6/_highlights.qmd
```````
Quarto 1.6 includes the following new features:

- [Support for **brand.yml**](/docs/authoring/brand.qmd): Customize the appearance of your Quarto documents across formats with a single `_brand.yml` file.

- Reveal JS updated to v5.1.0. Adds: 
  - [Jump To Slide](/docs/presentations/revealjs/presenting.html#jump-to-slide): a menu to quickly navigate between slides. 
  - [Scroll View](/docs/presentations/revealjs/presenting.html#scroll-view): a mode to view a presentation as a scrollable page.

- [`{{{< contents >}}}` shortcode](/docs/authoring/contents.qmd): Flexibly rearrange the contents of your document, including moving the results of an executable code cell.

- [Landscape mode](/docs/authoring/article-layout.qmd#landscape-mode) blocks: Use fenced divs with class `.landscape` to set portions of `docx`, `pdf` and `typst` documents to landscape. Thanks to [`@edvinsyk`](https://github.com/edvinsyk)!
```````

## File: docs/prerelease/1.6/_pre-release-feature.qmd
```````
::: {.callout-note}
## Pre-release Feature

This feature is new in the upcoming Quarto 1.6 release. To use the feature now, you'll need to [download](/docs/download/prerelease.qmd) and install the Quarto pre-release.
:::
```````

## File: docs/prerelease/1.6/index.qmd
```````
---
title: Quarto 1.6 Pre-Release
date: last-modified
search: false
---

{{< include _highlights.qmd >}}

See the [Pre-Release Download Page](/docs/download/prerelease) for a complete list of all the changes and bug fixes.
```````

## File: docs/prerelease/1.7/_highlights.qmd
```````
Quarto 1.7 includes the following new features:

- Improvements to dark mode:
  - [Dark Brand](/docs/authoring/brand.qmd#dark-brand): Light and dark brands can be specified for a document or project, enabling dark mode via brand.yml.
  - [`renderings`](/docs/computations/execution-options.qmd#cell-renderings): Plots and tables can have `light` and `dark` renderings.
  - [`respect-user-color-scheme`](/docs/output-formats/html-themes.qmd#dark-mode): If enabled, this option detects the user's operating system / browser preference for whether to show the page in light or dark mode.

-  New [`version` shortcode](/docs/authoring/version.qmd) to insert the version of Quarto used to build your document:
   
   ::: {layout-ncol=2 layout-valign="center"}
   
   ```{.markdown shortcodes="false"}
   Rendered with Quarto {{< version >}}
   ```
   ::: {.border .p-1}
   Rendered with Quarto {{< version >}}
   :::

   :::

- Improvements to the `julia` engine: 
  - [`juliaup` integration](/docs/computations/julia.qmd#juliaup-integration): Use specific versions of Julia in your notebooks.
  - [R and Python support](/docs/computations/julia.qmd#r-and-python-support): Include `{r}` and `{python}` executable code cells via the RCall and PythonCall packages.
  - [Caching](/docs/computations/julia.qmd#caching-julia): Save time rendering long-running notebooks by caching results.
  - [Revise.jl integration](/docs/computations/julia.qmd#revise.jl-integration): Automatically update function definitions in Julia sessions.

-  Updated LaTeX and Beamer template partials:

    - [LaTeX partials](/docs/journals/templates.html#latex-partials)
    - [Beamer partials](/docs/journals/templates.html#beamer-partials)

    These changes reflect the updates made in Pandoc 3.5 to separate the LaTeX and Beamer document templates and introduce some additional partials for both. 
    If you have custom formats that provide custom templates or partials, you may need to update them to work with the new partials.

-  Typst updated to 0.13.0
-  Pandoc updated to 3.6.3
```````

## File: docs/prerelease/1.7/_pre-release-feature.qmd
```````
::: {.callout-note}
## Pre-release Feature

This feature is new in the upcoming Quarto 1.7 release. To use the feature now, you'll need to [download](/docs/download/prerelease.qmd) and install the Quarto pre-release.
:::
```````

## File: docs/prerelease/1.7/index.qmd
```````
---
title: Quarto 1.7 Pre-Release
date: last-modified
search: false
---

{{< include _highlights.qmd >}}

See the [Pre-Release Download Page](/docs/download/prerelease) for a complete list of all the changes and bug fixes.
```````

## File: docs/prerelease/1.8/_highlights.qmd
```````
You can view (in-progress) documentation for the next version of Quarto, v1.8, on our pre-release documentation site, [prerelease.quarto.org](https://prerelease.quarto.org), including a list of [highlights](https://prerelease.quarto.org/docs/prerelease/1.8/).
```````

## File: docs/prerelease/1.8/index.qmd
```````
---
title: Quarto 1.8 Pre-Release
date: last-modified
search: false
---

{{< include _highlights.qmd >}}

See the [Pre-Release Download Page](/docs/download/prerelease.qmd) for a complete list of all the changes and bug fixes.
```````

## File: docs/prerelease/_highlights-prerelease.qmd
```````
### Highlights {#download-section-highlights}

{{< include /docs/prerelease/1.8/_highlights.qmd >}}
```````

## File: docs/prerelease/_highlights-release.qmd
```````
### Highlights {#download-section-highlights}

{{< include /docs/prerelease/1.7/_highlights.qmd >}}
```````

## File: docs/presentations/revealjs/demo/mini/absolute.qmd
```````
## Absolute

![](images/kitten-350-300.jpeg){.absolute top="200" left="0" width="350" height="300"}

![](images/kitten-450-250.jpeg){.absolute top="50" right="50" width="450" height="250"}

![](images/kitten-300-300.jpeg){.absolute bottom="20" right="100" width="300" height="300"}
```````

## File: docs/presentations/revealjs/demo/mini/auto-animate-code.qmd
```````
---
format: 
  revealjs:
    width: 650
    height: 300
---

##  {auto-animate="true"}

``` r
# Fill in the spot we created for a plot
output$phonePlot <- renderPlot({
  # Render a barplot
})
```

##  {auto-animate="true"}

``` r
# Fill in the spot we created for a plot
output$phonePlot <- renderPlot({
  # Render a barplot
  barplot(WorldPhones[,input$region]*1000, 
          main=input$region,
          ylab="Number of Telephones",
          xlab="Year")
})
```
```````

## File: docs/presentations/revealjs/demo/mini/auto-animate-movement.qmd
```````
---
format: 
  revealjs:
    width: 650
    height: 300
---

##  {auto-animate="true"}

Animation

##  {auto-animate="true"}

Implicit

Animation
```````

## File: docs/presentations/revealjs/demo/mini/auto-animate-stack.qmd
```````
--- 
format: 
  revealjs:
    width: 1050
    height: 500
---

## Element Matching  with `data-id` {auto-animate=true auto-animate-easing="ease-in-out"}

::: {.r-hstack style="margin-top: 1em;"}
::: {data-id="box1" auto-animate-delay="0" style="background: #2780e3; width: 200px; height: 150px; margin: 10px;"}
:::

::: {data-id="box2" auto-animate-delay="0.1" style="background: #3fb618; width: 200px; height: 150px; margin: 10px;"}
:::

::: {data-id="box3" auto-animate-delay="0.2" style="background: #e83e8c; width: 200px; height: 150px; margin: 10px;"}
:::
:::

## Element Matching  with `data-id` {auto-animate=true auto-animate-easing="ease-in-out"}

::: {.r-stack style="margin-top: 1em;"}
::: {data-id="box1" style="background: #2780e3; width: 350px; height: 350px; border-radius: 200px;"}
:::

::: {data-id="box2" style="background: #3fb618; width: 250px; height: 250px; border-radius: 200px;"}
:::

::: {data-id="box3" style="background: #e83e8c; width: 150px; height: 150px; border-radius: 200px;"}
:::
:::
```````

## File: docs/presentations/revealjs/demo/mini/auto-animate.qmd
```````
##  {auto-animate="true"}

::: {style="margin-top: 100px;"}
Animating content
:::

##  {auto-animate="true"}

::: {style="margin-top: 200px; font-size: 3em; color: red;"}
Animating content
:::
```````

## File: docs/presentations/revealjs/demo/mini/fragments-custom.qmd
```````
---
format: 
  revealjs: 
    css: custom-blur.css
---

### Advance the slide to see custom fragment style (from blurred to focus)

<br/>

::: {.fragment .custom .blur}
First item to be unblurred
:::

::: {.fragment .custom .blur}
Second one to be revealed
:::
```````

## File: docs/presentations/revealjs/demo/mini/fragments-nested.qmd
```````
---
format: revealjs
---

### Advance the slide to see three different fragment states:

<br/>

::: {.fragment .fade-in}
::: {.fragment .highlight-red}
::: {.fragment .semi-fade-out}
Fade in > Turn red > Semi fade out
:::
:::
:::
```````

## File: docs/presentations/revealjs/demo/mini/fragments.qmd
```````
## Fragments

Click the arrow to advance through the fragments:

::: {style="margin-top: 2em; margin-left: 1em;"}
::: fragment
Fade in
:::

::: {.fragment .fade-out}
Fade out
:::

::: {.fragment .highlight-red}
Highlight red
:::

::: {.fragment .fade-in-then-out}
Fade in, then out
:::

::: {.fragment .fade-up}
Slide up while fading in
:::
:::
```````

## File: docs/presentations/revealjs/demo/mini/stack.qmd
```````
---
format: revealjs
---

## Stack

Click the arrow to advance to the next image in the stack.

::: r-stack
![](images/kitten-450-300.jpeg){.fragment width="450" height="300"}

![](images/kitten-300-450.jpeg){.fragment width="300" height="450"}

![](images/kitten-400-400.jpeg){.fragment width="400" height="400"}
:::
```````

## File: docs/presentations/revealjs/demo/mini/zoom.qmd
```````
---
format: revealjs
---

![](images/kitten-375-300.jpeg){.absolute top="175" left="0" width="375" height="300"}

![](images/kitten-450-200.jpeg){.absolute top="50" right="50" width="450" height="250"}

![](images/kitten-300-300.jpeg){.absolute bottom="20" right="100" width="300" height="300"}
```````

## File: docs/presentations/revealjs/demo/index.qmd
```````
---
title: "Quarto Presentations"
subtitle: "Create beautiful interactive slide decks with Reveal.js"
format:
  revealjs: 
    slide-number: true
    chalkboard: 
      buttons: false
    preview-links: auto
    logo: images/quarto.png
    css: styles.css
    footer: '[https://{{< meta prerelease-subdomain >}}quarto.org](https://{{< meta prerelease-subdomain >}}quarto.org)'
resources:
  - demo.pdf
---

## Hello, There

This presentation will show you examples of what you can do with Quarto and [Reveal.js](https://revealjs.com), including:

-   Presenting code and LaTeX equations
-   Including computations in slide output
-   Image, video, and iframe backgrounds
-   Fancy transitions and animations
-   Activating scroll view

...and much more

## Pretty Code {auto-animate="true"}

-   Over 20 syntax highlighting themes available
-   Default theme optimized for accessibility

``` r
# Define a server for the Shiny app
function(input, output) {
  
  # Fill in the spot we created for a plot
  output$phonePlot <- renderPlot({
    # Render a barplot
  })
}
```

::: footer
Learn more: [Syntax Highlighting](https://{{< meta prerelease-subdomain >}}quarto.org/docs/output-formats/html-code.html#highlighting)
:::

## Code Animations {auto-animate="true"}

-   Over 20 syntax highlighting themes available
-   Default theme optimized for accessibility

``` r
# Define a server for the Shiny app
function(input, output) {
  
  # Fill in the spot we created for a plot
  output$phonePlot <- renderPlot({
    # Render a barplot
    barplot(WorldPhones[,input$region]*1000, 
            main=input$region,
            ylab="Number of Telephones",
            xlab="Year")
  })
}
```

::: footer
Learn more: [Code Animations](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/advanced.html#code-animations)
:::

## Line Highlighting

-   Highlight specific lines for emphasis
-   Incrementally highlight additional lines

``` {.python code-line-numbers="4-5|7|10"}
import numpy as np
import matplotlib.pyplot as plt

r = np.arange(0, 2, 0.01)
theta = 2 * np.pi * r
fig, ax = plt.subplots(subplot_kw={'projection': 'polar'})
ax.plot(theta, r)
ax.set_rticks([0.5, 1, 1.5, 2])
ax.grid(True)
plt.show()
```

::: footer
Learn more: [Line Highlighting](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/#line-highlighting)
:::

## Executable Code

```{r}
#| echo: true
#| fig-width: 10
#| fig-height: 4.5
library(ggplot2)
ggplot(mtcars, aes(hp, mpg, color = am)) +
  geom_point() +
  geom_smooth(formula = y ~ x, method = "loess")
```

::: footer
Learn more: [Executable Code](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/#executable-code)
:::

## LaTeX Equations

[MathJax](https://www.mathjax.org/) rendering of equations to HTML

::: columns
::: {.column width="40%"}
``` tex
\begin{gather*}
a_1=b_1+c_1\\
a_2=b_2+c_2-d_2+e_2
\end{gather*}

\begin{align}
a_{11}& =b_{11}&
  a_{12}& =b_{12}\\
a_{21}& =b_{21}&
  a_{22}& =b_{22}+c_{22}
\end{align}
```
:::

::: {.column width="60%"}
```{=tex}
\begin{gather*}
a_1=b_1+c_1\\
a_2=b_2+c_2-d_2+e_2
\end{gather*}
```
```{=tex}
\begin{align}
a_{11}& =b_{11}&
  a_{12}& =b_{12}\\
a_{21}& =b_{21}&
  a_{22}& =b_{22}+c_{22}
\end{align}
```
:::
:::

::: footer
Learn more: [LaTeX Equations](https://{{< meta prerelease-subdomain >}}quarto.org/docs/authoring/markdown-basics.html#equations)
:::

## Column Layout {.smaller}

Arrange content into columns of varying widths:

::: columns
::: {.column width="35%"}
#### Motor Trend Car Road Tests

The data was extracted from the 1974 Motor Trend US magazine, and comprises fuel consumption and 10 aspects of automobile design and performance for 32 automobiles.
:::

::: {.column width="3%"}
:::

::: {.column width="62%"}
```{r}
knitr::kable(head(mtcars)[,c("mpg",	"cyl", "disp", "hp", "wt")])
```
:::
:::

::: footer
Learn more: [Multiple Columns](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/#multiple-columns)
:::

## Incremental Lists

Lists can optionally be displayed incrementally:

::: incremental
-   First item
-   Second item
-   Third item
:::

. . .

<br/> Insert pauses to make other types of content display incrementally.

::: footer
Learn more: [Incremental Lists](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/#incremental-lists)
:::

## Fragments

Incremental text display and animation with fragments:

<br/>

::: {.fragment .fade-in}
Fade in
:::

::: {.fragment .fade-up}
Slide up while fading in
:::

::: {.fragment .fade-left}
Slide left while fading in
:::

::: {.fragment .fade-in-then-semi-out}
Fade in then semi out
:::

. . .

::: {.fragment .strike}
Strike
:::

::: {.fragment .highlight-red}
Highlight red
:::

::: footer
Learn more: [Fragments](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/advanced.html#fragments)
:::

## Slide Backgrounds {background="#43464B"}

Set the `background` attribute on a slide to change the background color (all CSS color formats are supported).

Different background transitions are available via the `background-transition` option.

::: footer
Learn more: [Slide Backgrounds](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/#color-backgrounds)
:::

## Media Backgrounds {background="#43464B" background-image="images/milky-way.jpeg"}

You can also use the following as a slide background:

-   An image: `background-image`

-   A video: `background-video`

-   An iframe: `background-iframe`

::: footer
Learn more: [Media Backgrounds](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/#image-backgrounds)
:::

## Absolute Position

Position images or other elements at precise locations

![](mini/images/kitten-400-350.jpeg){.absolute top="170" left="30" width="400" height="400"}

![](mini/images/kitten-450-250.jpeg){.absolute .fragment top="150" right="80" width="450"}

![](mini/images/kitten-300-200.jpeg){.absolute .fragment bottom="110" right="130" width="300"}

::: footer
Learn more: [Absolute Position](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/advanced.html#absolute-position)
:::

## Auto-Animate {auto-animate="true" auto-animate-easing="ease-in-out"}

Automatically animate matching elements across slides with Auto-Animate.

::: r-hstack
::: {data-id="box1" auto-animate-delay="0" style="background: #2780e3; width: 200px; height: 150px; margin: 10px;"}
:::

::: {data-id="box2" auto-animate-delay="0.1" style="background: #3fb618; width: 200px; height: 150px; margin: 10px;"}
:::

::: {data-id="box3" auto-animate-delay="0.2" style="background: #e83e8c; width: 200px; height: 150px; margin: 10px;"}
:::
:::

::: footer
Learn more: [Auto-Animate](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/advanced.html#auto-animate)
:::

## Auto-Animate {auto-animate="true" auto-animate-easing="ease-in-out"}

Automatically animate matching elements across slides with Auto-Animate.

::: r-stack
::: {data-id="box1" style="background: #2780e3; width: 350px; height: 350px; border-radius: 200px;"}
:::

::: {data-id="box2" style="background: #3fb618; width: 250px; height: 250px; border-radius: 200px;"}
:::

::: {data-id="box3" style="background: #e83e8c; width: 150px; height: 150px; border-radius: 200px;"}
:::
:::

::: footer
Learn more: [Auto-Animate](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/advanced.html#auto-animate)
:::

## Slide Transitions {.smaller}

The next few slides will transition using the `slide` transition

| Transition | Description                                                            |
|------------|------------------------------------------------------------------------|
| `none`     | No transition (default, switch instantly)                              |
| `fade`     | Cross fade                                                             |
| `slide`    | Slide horizontally                                                     |
| `convex`   | Slide at a convex angle                                                |
| `concave`  | Slide at a concave angle                                               |
| `zoom`     | Scale the incoming slide so it grows in from the center of the screen. |

::: footer
Learn more: [Slide Transitions](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/advanced.html#slide-transitions)
:::

## Tabsets {.smaller .scrollable transition="slide"}

::: panel-tabset
### Plot

```{r}
library(ggplot2)
ggplot(mtcars, aes(hp, mpg, color = am)) +
  geom_point() +
  geom_smooth(formula = y ~ x, method = "loess")
```

### Data

```{r}
knitr::kable(mtcars)
```
:::

::: footer
Learn more: [Tabsets](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/#tabsets)
:::

## Interactive Slides {.smaller transition="slide"}

Include Jupyter widgets and htmlwidgets in your presentations

```{r}
#| echo: false
#| fig-height: 5
library(leaflet)
leaflet() %>%
  addTiles() %>%  # Add default OpenStreetMap map tiles
  addMarkers(lng=174.768, lat=-36.852, popup="The birthplace of R")
```

::: footer
Learn more: [Jupyter widgets](https://{{< meta prerelease-subdomain >}}quarto.org/docs/interactive/widgets/jupyter.html), [htmlwidgets](https://{{< meta prerelease-subdomain >}}quarto.org/docs/interactive/widgets/htmlwidgets.html)
:::

## Interactive Slides {.smaller transition="slide"}

Turn presentations into applications with Observable and Shiny. Use component layout to position inputs and outputs.

```{r}
ojs_define(actors = data.frame(
  x = rnorm(100),
  y = rnorm(100)
))
```

```{ojs}
//| panel: sidebar
viewof talentWeight = Inputs.range([-2, 2], { value: 0.7, step: 0.01, label: "talent weight" })
viewof looksWeight = Inputs.range([-2, 2], { value: 0.7, step: 0.01, label: "looks weight" })
viewof minimum = Inputs.range([-2, 2], { value: 1, step: 0.01, label: "min fame" })
```

```{ojs}
//| panel: fill
import { plotActors } from './actors.js';
plotActors(actors, talentWeight, looksWeight, minimum)
```

::: footer
Learn more: [Observable](https://{{< meta prerelease-subdomain >}}quarto.org/docs/interactive/ojs/), [Shiny](https://{{< meta prerelease-subdomain >}}quarto.org/docs/interactive/shiny/), [Component Layout](https://{{< meta prerelease-subdomain >}}quarto.org/docs/interactive/layout.html)
:::

## Preview Links

Navigate to hyperlinks without disrupting the flow of your presentation.

Use the `preview-links` option to open links in an iframe on top of your slides. Try clicking the link below for a demonstration:

::: {style="text-align: center; margin-top: 1em"}
[Matplotlib: Visualization with Python](https://matplotlib.org/){preview-link="true" style="text-align: center"}
:::

::: footer
Learn more: [Preview Links](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/presenting.html#preview-links)
:::

## Themes

10 Built-in Themes (or [create your own](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/themes.html#creating-themes))

::: {layout-ncol="2"}
![](images/moon.png)

![](images/sky.png)
:::

::: footer
Learn more: [Themes](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/themes.html)
:::

## Easy Navigation

::: {style="margin-bottom: 0.9em;"}
Quickly jump to other parts of your presentation
:::

::: {layout="[1, 20]"}
![](images/presentation-menu.png){width="41"}

Toggle the slide menu with the menu button (bottom left of slide) to go to other slides and access presentation tools.
:::

You can also press {{< kbd m >}} to toggle the menu open and closed.

You can also press {{< kbd g >}} to toggle 'Jump To Slide' modal box to quickly go to one of your slide using its number or id.

::: footer
Learn more: [Navigation](/docs/presentations/revealjs/presenting.qmd#navigation-menu) / [Jump To Slide](/docs/presentations/revealjs/presenting.qmd#jump-to-slide)
:::

## Jump To Slide

::: {style="margin-bottom: 0.9em;"}
Quickly jump to other parts of your presentation
:::

## Chalkboard {chalkboard-buttons="true"}

::: {style="margin-bottom: 0.9em;"}
Free form drawing and slide annotations
:::

::: {layout="[1, 20]"}
![](images/presentation-chalkboard.png){width="41"}

Use the chalkboard button at the bottom left of the slide to toggle the chalkboard.
:::

::: {layout="[1, 20]"}
![](images/presentation-notes-canvas.png){width="41"}

Use the notes canvas button at the bottom left of the slide to toggle drawing on top of the current slide.
:::

You can also press {{< kbd b >}} to toggle the chalkboard or {{< kbd c >}} to toggle the notes canvas.

::: footer
Learn more: [Chalkboard](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/presenting.html#chalkboard)
:::

## Point of View

press {{< kbd o >}} to toggle overview mode:

![](images/overview-mode.png){.border}

Hold down the {{< kbd Alt linux=Ctrl >}} and click on any element to zoom towards it---try it now on this slide.

::: footer
Learn more: [Overview Mode](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/presenting.html#overview-mode), [Slide Zoom](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/presenting.html#slide-zoom)
:::

## Speaker View

press {{< kbd s >}} (or use the tools in presentation menu ![](../images/navigation-menu-icon.png){style="padding-bottom: 1px; margin: 0" width="0.5em" height="0.5em"}) to open speaker view

![](images/speaker-view.png){fig-align="center" style="border: 3px solid #dee2e6;" width="780"}

::: footer
Learn more: [Speaker View](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/presenting.html#speaker-view)
:::

## Scroll View {#scroll-view}

Press {{< kbd r >}} (or use the tools in presentation menu ![](../images/navigation-menu-icon.png){style="padding-bottom: 1px; margin: 0" width="0.5em" height="0.5em"}) to open scroll view

Try it now on this slide --- You'll see a scroll bar on the right and you can scroll down the presentation using your mouse.

Scroll view behavior can be configured using `scroll-view` configuration. 

::: footer
Learn more: [Scroll View](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/presenting.html#scroll-view)
:::

## Authoring Tools {.smaller}

Live side-by-side preview for any notebook or text editor including Jupyter and VS Code

::: columns
::: {.column width="50%"}
![](images/jupyter-edit.png){.border .border-thick}
:::

::: {.column width="50%"}
![](images/jupyter-preview.png){.border .border-thick}
:::
:::

::: footer
Learn more: [Jupyter](https://{{< meta prerelease-subdomain >}}quarto.org/docs/tools/jupyter-lab.html), [VS Code](https://{{< meta prerelease-subdomain >}}quarto.org/docs/tools/vscode.html), [Text Editors](https://{{< meta prerelease-subdomain >}}quarto.org/docs/tools/text-editors.html)
:::

## Authoring Tools {.smaller}

RStudio includes an integrated presentation preview pane

![](images/rstudio.png){.border width="900"}

::: footer
Learn more: [RStudio](https://{{< meta prerelease-subdomain >}}quarto.org/docs/tools/rstudio.html)
:::

## And More...

-   [Touch](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/advanced.html#touch-navigation) optimized (presentations look great on mobile, swipe to navigate slides)
-   [Footer & Logo](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/#footer-logo) (optionally specify custom footer per-slide or hide global footer)
-   [Auto-Slide](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/presenting.html#auto-slide) (step through slides automatically, without any user input)
-   [Multiplex](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/presenting.html#multiplex) (allows your audience to follow the slides of the presentation you are controlling on their own phone, tablet or laptop).

::: footer
Learn more: [Quarto Presentations](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/)
:::
```````

## File: docs/presentations/revealjs/examples/_theme-dark.qmd
```````
---
title: "Presentation"
format:
  revealjs:
    theme: dark
---

## Slide 1

* Eat spaghetti
* Drink wine
```````

## File: docs/presentations/revealjs/examples/background-color.qmd
```````
---
format: revealjs
---

## Slide, `aquamarine` {background-color="aquamarine"}

## Slide, `#806040` {background-color="#806040"}
```````

## File: docs/presentations/revealjs/examples/background-gradient.qmd
```````
---
format: revealjs
---

## Slide with linear-gradient {background-gradient="linear-gradient(to bottom, #283b95, #17b2c3)"}

## Slide with radial-gradient {background-gradient="radial-gradient(#283b95, #17b2c3)"}
```````

## File: docs/presentations/revealjs/examples/background-no-title.qmd
```````
---
format: revealjs
---

## {background-color="aquamarine"}

(A slide with no title)

## {background-color="black" background-image="https://placekitten.com/100/100" background-size="100px" background-repeat="repeat"}

(Another slide with no title)
```````

## File: docs/presentations/revealjs/examples/code-echo.qmd
```````
---
format:
  revealjs:
    height: 500
---

```{python}
#| echo: true
#| fig-align: center

import numpy as np
import matplotlib.pyplot as plt

r = np.arange(0, 2, 0.01)
theta = 2 * np.pi * r
fig, ax = plt.subplots(subplot_kw={"projection": "polar"})
ax.plot(theta, r)
ax.set_rticks([0.5, 1, 1.5, 2])
ax.grid(True)
plt.show()
```
```````

## File: docs/presentations/revealjs/examples/columns.qmd
```````
---
format: 
  revealjs
---

:::: {.columns}

::: {.column width="40%"}
Left column
:::

::: {.column width="60%"}
Right column
:::

::::
```````

## File: docs/presentations/revealjs/examples/creating-slides-1.qmd
```````
---
title: "Habits"
author: "John Doe"
format: revealjs
---

## Getting up

- Turn off alarm
- Get out of bed

## Going to sleep

- Get in bed
- Count sheep
```````

## File: docs/presentations/revealjs/examples/creating-slides-2.qmd
```````
---
title: "Habits"
author: "John Doe"
format: revealjs
---

# In the morning

## Getting up

- Turn off alarm
- Get out of bed

## Breakfast

- Eat eggs
- Drink coffee

# In the evening

## Dinner

- Eat spaghetti
- Drink wine

## Going to sleep

- Get in bed
- Count sheep
```````

## File: docs/presentations/revealjs/examples/creating-slides-3.qmd
```````
---
title: "Habits"
author: "John Doe"
format: revealjs
---

- Turn off alarm
- Get out of bed

---

- Get in bed
- Count sheep
```````

## File: docs/presentations/revealjs/examples/executable-code-figure-size.qmd
```````
---
format: revealjs
---

```{python}
#| echo: false
import altair as alt
from vega_datasets import data
cars = data.cars()
```

```{python}
alt.Chart(cars).mark_point().encode(
    x='Horsepower',
    y='Miles_per_Gallon',
    color='Origin',
).properties(
    width=700,
    height=300
).interactive()
```
```````

## File: docs/presentations/revealjs/examples/footer-and-logo.qmd
```````
---
format:
  revealjs:
    logo: ../../../../quarto.png
    footer: "Footer text"
---

## Slide 1

Footer and logo are shared across all slides.

## Slide 2
```````

## File: docs/presentations/revealjs/examples/image-background.qmd
```````
---
format: revealjs
---

## Slide Title {background-color="black" background-image='{{< placeholder 100 100 >}}' background-size="100px" background-repeat="repeat"}

This slide's background image will be sized to 100px and repeated.
```````

## File: docs/presentations/revealjs/examples/incremental-lists-1.qmd
```````
---
format:
  revealjs:
    incremental: true   
---

## Slide 1

- incremental list, 1
- incremental list, 2

## Slide 2

- incremental list, 3
- incremental list, 4
```````

## File: docs/presentations/revealjs/examples/incremental-lists-2.qmd
```````
---
format: revealjs
---

## Slide 1, incrementally

::: {.incremental}

- Eat spaghetti
- Drink wine

:::

## Slide 2, non-incrementally

- Eat spaghetti
- Drink wine
```````

## File: docs/presentations/revealjs/examples/incremental-lists-3.qmd
```````
---
format: 
  revealjs:
    incremental: true
---

## Slide 1, incrementally

- Eat spaghetti
- Drink wine

## Slide 2, non-incrementally

::: {.nonincremental}
- Eat spaghetti
- Drink wine
:::
```````

## File: docs/presentations/revealjs/examples/incremental-pause.qmd
```````
## Slide with a pause

content before the pause

. . .

content after the pause
```````

## File: docs/presentations/revealjs/examples/index.qmd
```````
---
title: All revealjs examples
format:
  revealjs: 
    slide-level: 0
    slide-number: c/t
# listing: default
---

````{r}
#| echo: false
#| output: asis
files <- fs::dir_ls('.', regexp = '^[^_].*[.]qmd$', all = TRUE)
files <- files[!files %in% c("index.qmd")]
links <- glue::glue("* [{fs::path_ext_remove(files)}]({files})")

bucket_size <- 5
buckets <- split(links, ceiling(seq_along(links) / bucket_size))

# Add new slides after each bucket except last
for (i in 1:(length(buckets)-1)) {
  buckets[[i]] <- c(buckets[[i]], "", "----", "")
}

purrr::map(buckets, \(x) {
  glue::glue("
{glue::glue_collapse(x, sep = '\n')}
")
}) |> unlist() |> cat(sep = "\n")

````
```````

## File: docs/presentations/revealjs/examples/line-highlighting-1.qmd
```````
---
format: revealjs
---

```{.python code-line-numbers="6-8"}
import numpy as np
import matplotlib.pyplot as plt

r = np.arange(0, 2, 0.01)
theta = 2 * np.pi * r
fig, ax = plt.subplots(subplot_kw={'projection': 'polar'})
ax.plot(theta, r)
ax.set_rticks([0.5, 1, 1.5, 2])
ax.grid(True)
plt.show()
```
```````

## File: docs/presentations/revealjs/examples/line-highlighting-2.qmd
```````
---
format: revealjs
---

```{.python code-line-numbers="7,9"}
import numpy as np
import matplotlib.pyplot as plt

r = np.arange(0, 2, 0.01)
theta = 2 * np.pi * r
fig, ax = plt.subplots(subplot_kw={'projection': 'polar'})
ax.plot(theta, r)
ax.set_rticks([0.5, 1, 1.5, 2])
ax.grid(True)
plt.show()
```
```````

## File: docs/presentations/revealjs/examples/line-highlighting-3.qmd
```````
---
format: revealjs
---

```{.python code-line-numbers="|6|9"}
import numpy as np
import matplotlib.pyplot as plt

r = np.arange(0, 2, 0.01)
theta = 2 * np.pi * r
fig, ax = plt.subplots(subplot_kw={'projection': 'polar'})
ax.plot(theta, r)
ax.set_rticks([0.5, 1, 1.5, 2])
ax.grid(True)
plt.show()
```
```````

## File: docs/presentations/revealjs/examples/line-highlighting-4.qmd
```````
---
format:
  revealjs:
    height: 450
---

```{python}
#| echo: true
#| code-line-numbers: "|6|9"

import numpy as np
import matplotlib.pyplot as plt

r = np.arange(0, 2, 0.01)
theta = 2 * np.pi * r
fig, ax = plt.subplots(subplot_kw={'projection': 'polar'})
ax.plot(theta, r)
ax.set_rticks([0.5, 1, 1.5, 2])
ax.grid(True)
plt.show()
```
```````

## File: docs/presentations/revealjs/examples/no-footer-on-a-slide.qmd
```````
---
format:
  revealjs:
    footer: "Footer text"
---

## Slide 1

Footer is shown on all slides

## Slide 2 {footer=false}

unless `{footer=false}` is set
```````

## File: docs/presentations/revealjs/examples/per-slide-footer.qmd
```````
---
format:
  revealjs:
    logo: ../../../../quarto.png
---

## Slide Title

Slide content

::: footer
Custom footer text
:::

## Another Slide Title

::: footer
A different custom footer
:::
```````

## File: docs/presentations/revealjs/examples/scrollable-and-smaller.qmd
```````
---
format:
  revealjs:
    smaller: true
    scrollable: true
---

## Slide 1

* Bullet Point 1
* Bullet Point 2
* Bullet Point 3
* Bullet Point 4
* Bullet Point 5
* Bullet Point 6
* Bullet Point 7
* Bullet Point 8
* Bullet Point 9
* Bullet Point 10
* Bullet Point 11
* Bullet Point 12
* Bullet Point 13
* Bullet Point 14
* Bullet Point 15
* Bullet Point 16

## Slide 2

* Bullet Point 1
* Bullet Point 2
* Bullet Point 3
* Bullet Point 4
* Bullet Point 5
* Bullet Point 6
* Bullet Point 7
* Bullet Point 8
* Bullet Point 9
* Bullet Point 10
* Bullet Point 11
* Bullet Point 12
* Bullet Point 13
* Bullet Point 14
* Bullet Point 15
* Bullet Point 16
```````

## File: docs/presentations/revealjs/examples/scrollable.qmd
```````
---
format: revealjs
---

## Non-scrollable Slide

* Bullet Point 1
* Bullet Point 2
* Bullet Point 3
* Bullet Point 4
* Bullet Point 5
* Bullet Point 6
* Bullet Point 7
* Bullet Point 8
* Bullet Point 9
* Bullet Point 10
* Bullet Point 11
* Bullet Point 12
* Bullet Point 13
* Bullet Point 14
* Bullet Point 15
* Bullet Point 16

## Scrollable Slide {.scrollable}

* Bullet Point 1
* Bullet Point 2
* Bullet Point 3
* Bullet Point 4
* Bullet Point 5
* Bullet Point 6
* Bullet Point 7
* Bullet Point 8
* Bullet Point 9
* Bullet Point 10
* Bullet Point 11
* Bullet Point 12
* Bullet Point 13
* Bullet Point 14
* Bullet Point 15
* Bullet Point 16
```````

## File: docs/presentations/revealjs/examples/slide-with-speaker-notes.qmd
```````
---
format:
  revealjs
---

## Slide with speaker notes

Slide content

::: {.notes}
Speaker notes go here.
:::
```````

## File: docs/presentations/revealjs/examples/smaller.qmd
```````
---
format: revealjs
---

## Slide Title (without `.smaller`)

* Bullet Point 1
* Bullet Point 2

## Slide Title (with `.smaller`) {.smaller}

* Bullet Point 1
* Bullet Point 2
```````

## File: docs/presentations/revealjs/examples/tabset.qmd
```````
---
format: revealjs
---

## Title

::: {.panel-tabset}

### Tab A

Content for `Tab A`

### Tab B

Content for `Tab B`

:::
```````

## File: docs/presentations/revealjs/_callout-auto-stretch-scrollable.qmd
```````
::: {.callout-note}

## Limitation: Auto-stretch and Scrollable 

When a slide is [scrollable](index.qmd#content-overflow) the image size calculations used by [auto-stretch](advanced.qmd#stretch) may not work well and images may not appear. Two solutions depending on your needs are:

- Disable auto-stretch at the presentation level, `auto-stretch: false`, and use `.r-stretch` on individual images only where needed.

- On slides that are scrollable, add the `.nostretch` class to disable auto-stretch on the slide.

:::
```````

## File: docs/presentations/revealjs/advanced.qmd
```````
---
title: "Advanced Reveal"
---

## Title Slide

The main title slide is the first slide of the presentation, and its content is generated based on a variety document options (title, subtitle, date, author, institute, etc.). 

### Custom Background

If you want to provide a custom background for the title slide, then do the following:

1. Use the `title-slide-attributes` key to provide background options.
2. Within this key, specify any of the supported [slide background options](index.qmd#slide-backgrounds),  but with `data-` prepended to them. 

For example:

```yaml
---
title: My Slide Show
title-slide-attributes:
  data-background-image: /path/to/title_image.png
  data-background-size: contain
  data-background-opacity: "0.5"
---
```

### Custom Template

You can replace the default title slide entirely with your own template. To do this, specify a `title-slide.html` [template partial](/docs/journals/templates.qmd#template-partials). For example:

```yaml
title: My Slide Show
format:
  revealjs:
    template-partials:
      - title-slide.html
```

Quarto natively supports a title slide which improves the handling of authors and affiliations. While it is backward compatible with `author` and `institute`, we now recommend that you use standard [author metadata](/docs/authoring/front-matter.qmd#authors-and-affiliations). To provide your own partial for `title-slide.html`, you can start from the source code for this [fancier title slide template](https://github.com/quarto-dev/quarto-cli/blob/main/src/resources/formats/revealjs/pandoc/title-fancy/title-slide.html). Customize this template as required, then save the results to `title-slide.html` alongside your presentation. 

If you prefer pandoc's default title slide you can opt-in using `title-slide-style: pandoc` in your YAML --- this uses this [simpler title slide template partial](https://github.com/quarto-dev/quarto-cli/blob/main/src/resources/formats/revealjs/pandoc/title-slide.html). However, this simpler partial does not leverage our improved handling for [Authors & Affiliations](/docs/journals/authors.qmd), so we recommend using the fancy one as a starter for custom title slides. 

### Centering {#sec-revealjs-title-center}

By default, the title slide is centered while all slides are top aligned (i.e. `center: false`). You can prevent the title slide centering by setting `center-title-slide` options: 

```yaml
title: My Slide Show
format:
  revealjs:
    center-title-slide: false
```

If `center: true` is set, `center-title-slide` will be ignored. There is currently no way to have content slide centered and title slides top aligned. For slide content centering, see @sec-revealjs-slide-center.

## Slide Transitions

Reveal supports a number of animated transition effects for both slide changes and slide background changes. By default no transitions are used, however you can enable them either globally or per-slide using the options described below.

Here are the available transition types:

| Transition | Description                                                            |
|------------|------------------------------------------------------------------------|
| `none`     | No transition (switch instantly)                                       |
| `fade`     | Cross fade                                                             |
| `slide`    | Slide horizontally                                                     |
| `convex`   | Slide at a convex angle                                                |
| `concave`  | Slide at a concave angle                                               |
| `zoom`     | Scale the incoming slide so it grows in from the center of the screen. |

Here's how you would set the global transition style for both slides and backgrounds:

``` yaml
---
title: "Presentation"
format:
  revealjs:
    transition: slide
    background-transition: fade
---
```

You can also specify the `transition-speed` as `default`, `fast`, or `slow`:

``` yaml
---
title: "Presentation"
format:
  revealjs:
    transition: slide
    transition-speed: fast
---
```

You can also specify the `transition` and/or `transition-speed` for an individual slide:

``` markdown
## Slide Title {transition="fade" transition-speed="fast"}
```

You can also specify separate in and out transitions, for example:

``` markdown
## Slide Title {transition="fade-in slide-out"}
```

## Slide Visibility

You can hide a slide by adding the `visibility="hidden"` attribute to the slide heading. For example:

``` markdown
## Slide Title {visibility="hidden"}
```

### Uncounted Slides

When preparing a presentation it can sometimes be helpful to prepare optional slides that you may or may not have time to show. This is easily done by appending a few slides at the end of the presentation, however this means that the Reveal progress bar and slide numbering will hint that there are additional slides.

To "hide" those slides from the numbering system you can use `visibility="uncounted"`. For example:

``` markdown
## Slide 1

## Slide 2

## Slide 3 {visibility="uncounted"}
```

## Presentation Size

All presentations have a "normal" size, that is, the resolution at which they are authored. This default "normal" size is 1050 x 700, which is used to match as nearly as possible the aspect ratio of most laptops.

Reveal will automatically scale presentations uniformly based on the normal size to ensure that everything fits on any given display or viewport without changing the aspect ratio or layout of your content.

You can change the slide size, the margin around content, as well as set limits on content scaling using the following options:

| Option      | Description                                                                              |
|-------------|------------------------------------------------------------------------------------------|
| `width`     | Normal width (defaults to 1050)                                                          |
| `height`    | Normal height (defaults to 700)                                                          |
| `margin`    | Factor of the display size that should remain empty around the content (defaults to 0.1) |
| `min-scale` | Smallest possible scale to apply to content (defaults to 0.2)                            |
| `max-scale` | Largest possible scale to apply to content (defaults to 2.0)                             |

## Absolute Position

The `absolute` class lets you position elements at arbitrary positions on a slide. These elements have CSS `position: absolute` and can be placed relative to the `top`, `left`, `bottom`, and/or `right` edges of the slide.

For example, here we add the `.absolute` class to three images and give them each a distinct position on the slide (note that we use also `width` and `height` to control their dimensions):

``` {.markdown .reveal-demo code-preview="demo/mini/absolute.qmd"}
![](image1.png){.absolute top=200 left=0 width="350" height="300"}

![](image2.png){.absolute top=50 right=50 width="450" height="250"}

![](image3.png){.absolute bottom=0 right=50 width="300" height="300"}
```

The following attributes can be used with `absolute`. All of these values can be specified in CSS units (e.g. `px`, `em`, etc.). If a number with no units is specified (as in the above example) then pixels are assumed.

| Attribute | Description                   |
|-----------|-------------------------------|
| `width`   | Width of element              |
| `height`  | Height of element             |
| `top`     | Distance from top of slide    |
| `left`    | Distance from left of slide   |
| `bottom`  | Distance from bottom of slide |
| `right`   | Distance from right of slide  |

Note that default size of presentation slides is 1050 x 700. See [Presentation Size] for details on customizing this.

## Layout Helpers

Reveal provides some helper classes for controlling the layout of content.

### Stack Layout

The `r-stack` layout class lets you center and place multiple elements on top of each other. This is intended to be used together with [fragments] to incrementally reveal elements.

For example, here we create a div with the `.r-stack` class and then include 3 images (each of which uses `.fragment` so they display incrementally):

``` {.markdown .reveal-demo code-preview="demo/mini/stack.qmd"}
::: {.r-stack}
![](image1.png){.fragment width="450" height="300"}

![](image2.png){.fragment width="300" height="450"}

![](image3.png){.fragment width="400" height="400"}
:::
```

### Fit Text

The `r-fit-text` class makes text as large as possible without overflowing the slide. This is great when you want BIG text without having to manually find the right font size. For example:

``` markdown
::: {.r-fit-text}
Big Text
:::
```

### Center {#sec-revealjs-slide-center}

The `center` class when applied to a slide, will vertically center the slide content by adding the appropriate spacing at the top of the slide. Vertical distances between elements will not be modified. For example:

``` markdown
## This will be centered {.center}

This text is moved as well
```

For controlling title slide centering, see @sec-revealjs-title-center.

### Stretch

The `r-stretch` layout helper lets you resize an element, like an image or video, to cover the remaining vertical space in a slide. For example, here the image will automatically be resized to fit space remaining outside of the slide title and text before and after it:

``` markdown
## Slide Title

Here is an image:

![](image.png){.r-stretch}

Some text after the image.
```

For slides that contain only a single top-level image, the `.r-stretch` class is automatically applied to the image. You can disable this behavior by setting the `auto-stretch: false` option:

``` yaml
format:
  revealjs:
    auto-stretch: false
```

You can also disable auto-stretch for an individual slide by adding the `.nostretch` class:

``` markdown
## Slide Title {.nostretch}
```

Or apply `.nostretch` directly to an individual image:

```markdown
![](image.png){.nostretch fig-align="center" width="800px"}
```

`auto-stretch` will only apply to non-nested images, which means an image in a feature block (e.g fragments, layout panel, columns, ... ) or a custom Div will be ignored. For custom Divs, you can opt-in to `auto-stretch` behavior by adding the class `.r-stretch` to the outer div. 

{{< include _callout-auto-stretch-scrollable.qmd >}}

## Auto Animate

Revealjs can automatically animate elements across slides. All you need to do is add the `auto-animate` attribute to two adjacent slides and Auto-Animate will animate all matching elements between the two.

Here's a simple example to give you a better idea of how it can be used. Note that the slides don't have titles in this example (rather just the `auto-animate` attribute) however they could also include a title.

``` {.markdown .reveal-demo code-preview="demo/mini/auto-animate.qmd"}
## {auto-animate=true}

::: {style="margin-top: 100px;"}
Animating content
:::

## {auto-animate=true}

::: {style="margin-top: 200px; font-size: 3em; color: red;"}
Animating content
:::
```

This example uses the `margin-top` property to move the element but internally Reveal will use a CSS transform to ensure smooth movement. This same approach to animation works with most animatable CSS properties meaning you can transition things like `position`, `font-size`, `line-height`, `color`, `background-color`, `padding` and `margin`.

### Code Animations

You can also animate between code blocks to show changes in code. For example:

```` {.markdown .reveal-demo code-preview="demo/mini/auto-animate-code.qmd"}
## {auto-animate="true"}

```r
# Fill in the spot we created for a plot
output$phonePlot <- renderPlot({
  # Render a barplot
})
```

## {auto-animate=true}

```r
# Fill in the spot we created for a plot
output$phonePlot <- renderPlot({
  # Render a barplot
  barplot(WorldPhones[,input$region]*1000, 
          main=input$region,
          ylab="Number of Telephones",
          xlab="Year")
})
```
````

### Movement Animations

Animations are not limited to changes in style. Auto-Animate can also be used to automatically move elements into their new position as content is added, removed or rearranged on a slide. All without a single line of inline CSS. For example, here the delta between the content on two slides is implicitly animated:

``` {.markdown .reveal-demo code-preview="demo/mini/auto-animate-movement.qmd"}
## {auto-animate=true}

Animation

## {auto-animate=true}

Implicit

Animation
```

### Element Matching

When you navigate between two auto-animated slides we'll do our best to automatically find matching elements in the two slides. For text, we consider it a match if both the text contents and node type are identical. For images, videos and iframes we compare the `src` attribute. We also take into account the order in which the element appears in the DOM.

In situations where automatic matching is not feasible you can give the objects that you want to animate between a matching `data-id` attribute. We prioritize matching `data-id` values above our automatic matching.

Here's an example where we've given several blocks a matching ID since automatic matching has no content to go on. This example also makes use of some additional animation attributes (`auto-animate-easing` and `auto-animate-delay`), which we'll describe in the next section.

``` {.markdown .reveal-demo code-preview="demo/mini/auto-animate-stack.qmd"}
## {auto-animate=true auto-animate-easing="ease-in-out"}

::: {.r-hstack}
::: {data-id="box1" auto-animate-delay="0" style="background: #2780e3; width: 200px; height: 150px; margin: 10px;"}
:::

::: {data-id="box2" auto-animate-delay="0.1" style="background: #3fb618; width: 200px; height: 150px; margin: 10px;"}
:::

::: {data-id="box3" auto-animate-delay="0.2" style="background: #e83e8c; width: 200px; height: 150px; margin: 10px;"}
:::
:::

## {auto-animate=true auto-animate-easing="ease-in-out"}

::: {.r-stack}
::: {data-id="box1" style="background: #2780e3; width: 350px; height: 350px; border-radius: 200px;"}
:::

::: {data-id="box2" style="background: #3fb618; width: 250px; height: 250px; border-radius: 200px;"}
:::

::: {data-id="box3" style="background: #e83e8c; width: 150px; height: 150px; border-radius: 200px;"}
:::
:::
```

### Animation Settings

You can override specific animation settings such as easing and duration either for the whole presentation, per-slide or individually for each animated element. The following configuration attributes can be used to change the settings for a specific slide or element:

| **Attribute**            | **Default** | **Description**                                                                                                                |
|:-------------------------|:-----------:|:-------------------------------------------------------------------------------------------------------------------------------|
| `auto-animate-easing`    |    ease     | A CSS [easing function](https://developer.mozilla.org/en-US/docs/Web/CSS/easing-function).                                     |
| `auto-animate-unmatched` |    true     | Determines whether elements with no matching auto-animate target should fade in. Set to `false` to make them appear instantly. |
| `auto-animate-duration`  |     1.0     | Animation duration in seconds.                                                                                                 |
| `auto-animate-delay`     |      0      | Animation delay in seconds (can only be set for specific elements, not at the slide level).                                    |
| `auto-animate-id`        |  *absent*   | An id tying auto-animate slides together.                                                                                      |
| `auto-animate-restart`   |  *absent*   | Breaks apart two adjacent auto-animate slides (even with the same id).                                                         |

You can override the global defaults for easing, unmatched, and duration as follows:

``` yaml
---
title: "My Slide"
format:
  revealjs:
    auto-animate-easing: ease-in-out
    auto-animate-unmatched: false
    auto-animate-duration: 0.8
---
```

## Fragments {data-link="fragments"}

Fragments are used to highlight or incrementally reveal individual elements on a slide. Every element with the class `fragment` will be stepped through before moving on to the next slide.

Note that fragments as discussed here are a relatively advanced form of incremental content display---see [Incremental Lists](index.qmd#incremental-lists) for documentation on creating incremental bullet lists and inserting content pauses in slides.

The default fragment style is to start out invisible and fade in. This style can be changed by appending a different class to the fragment. For example:

``` {.markdown .reveal-demo code-preview="demo/mini/fragments.qmd"}
::: {.fragment}
Fade in
:::

::: {.fragment .fade-out}
Fade out
:::

::: {.fragment .highlight-red}
Highlight red
:::

::: {.fragment .fade-in-then-out}
Fade in, then out
:::

::: {.fragment .fade-up}
Slide up while fading in
:::
```

### Fragment Classes

Here are all of the available fragment classes:

| **Name**                  | **Effect**                                          |
|:--------------------------|:----------------------------------------------------|
| `fade-out`                | Start visible, fade out                             |
| `fade-up`                 | Slide up while fading in                            |
| `fade-down`               | Slide down while fading in                          |
| `fade-left`               | Slide left while fading in                          |
| `fade-right`              | Slide right while fading in                         |
| `fade-in-then-out`        | Fades in, then out on the next step                 |
| `fade-in-then-semi-out`   | Fades in, then out to 50% on the next step          |
| `grow`                    | Scale up                                            |
| `semi-fade-out`           | Fade out to 50%                                     |
| `shrink`                  | Scale down                                          |
| `strike`                  | Strike through                                      |
| `highlight-red`           | Turn text red                                       |
| `highlight-green`         | Turn text green                                     |
| `highlight-blue`          | Turn text blue                                      |
| `highlight-current-red`   | Turn text red, then back to original on next step   |
| `highlight-current-green` | Turn text green, then back to original on next step |
| `highlight-current-blue`  | Turn text blue, then back to original on next step  |

### Nested Fragments

Multiple fragments can be applied to the same element sequentially by wrapping it. The following example will fade in the text on the first step, turn it red on the second and partially fade out on the third:

``` {.markdown .reveal-demo code-preview="demo/mini/fragments-nested.qmd"}
::: {.fragment .fade-in}
::: {.fragment .highlight-red}
::: {.fragment .semi-fade-out}
Fade in > Turn red > Semi fade out
:::
:::
:::
```

### Fragment Order

By default fragments will be stepped through in the order that they appear in the DOM. This display order can be changed using the `fragment-index` attribute. Note that multiple elements can appear at the same index:

``` markdown
::: {.fragment fragment-index=3}
Appears last
:::

::: {.fragment fragment-index=1}
Appears first
:::

::: {.fragment fragment-index=2}
Appears second
:::
```

### Custom Fragments

Custom effects can be created by specifying CSS styles for `.fragment.effectname` and `.fragment.effectname.visible`. The `visible` class is applied to each fragment as they are navigated through during the presentation. A `custom` class can be added to each fragment to tell reveal.js to avoid applying its default fade-in fragment styles.

For example, the following defines a fragment style where elements are initially blurred but become focused when stepped through.

``` {.markdown .reveal-demo code-preview="demo/mini/fragments-custom.qmd"}
::: {.fragment .custom .blur}
First item to be unblurred
:::

::: {.fragment .custom .blur}
Second one to be revealed
:::
```

with this CSS for the style associated with `blur` class.
````css
.reveal .slides section .fragment.blur {
  filter: blur(5px);
}

.reveal .slides section .fragment.blur.visible {
  filter: none
}
````

## Parallax Background

If you want to use a parallax scrolling background, add the `parallax-background-image` and `parallax-background-size` options. For example:

``` yaml
---
title: "Presentation"
format:
  revealjs:
     parallax-background-image: background.png
     parallax-background-size: "2100px 900px"
     parallax-background-horizontal: 200
     parallax-background-vertical: 50
---
```

Note that the `parallax-background-horizontal` and `parallax-background-vertical` options are not required (the defaults shown above will be used if they are not specified).

## Vertical Slides

Reveal uses classic linear slide navigation by default. If you wish you can also configure slide navigation to nest multiple slides within a single top-level slide to create a vertical stack.

Use the `navigation-mode` option to fine tune Reveal navigation behavior:

| Navigation Mode | Behavior                                                                                                                                                                  |
|-----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `linear`        | Left/right arrows keys step through all slides (both horizontal and vertical).                                                                                            |
| `vertical`      | Left/right arrow keys step between horizontal slides. Up/down arrow keys step between vertical slides. Space key steps through all slides (both horizontal and vertical). |
| `grid`          | When enabled, stepping left/right from a vertical stack to an adjacent vertical stack will land you at the same vertical index.                                           |

If you use `vertical` or `grid` navigation, you should structure your slides using level 1 headings for the horizontal axis and level 2 headings for the vertical axis. For example:

``` markdown
---
title: "Presentation"
format:
  revealjs:
    navigation-mode: vertical
---

# Slide 1

## Slide 1.1

## Slide 1.2

# Slide 2

## Slide 2.1

## Slide 2.2
```

### Slide Controls

When you enable `vertical` or `grid` navigation, controls will appear to provide a visual cue to where you are in the presentation (e.g. if there are vertical slides below you'll see a down control).

By default these controls appear at the edges of the presentation, you can position them in the bottom right corner using the `controls-layout` option. You can also provide an extra visual cue to viewers that the controls are available using the `controls-tutorial` option. For example:

``` yaml
---
title: "Presentation"
format: 
  revealjs:
    navigation-mode: vertical
    controls-layout: bottom-right
    controls-tutorial: true
---
```

Note that using `controls-layout: bottom-right` isn't compatible with including a `logo` (as the logo appears in the bottom right corner as well).

You can also disable the controls entirely with `controls: false`.

::: callout-warning
While vertical slides do provide some additional flexibility over the traditional linear model, they are in practice very confusing for end users (mostly because they are so unexpected). Users will often skip the vertical content because they simply don't know it's there.

If your content benefits from vertical orientation (e.g. you have optional drill-down content that you don't want in the main flow of the presentation), you can by all means use the vertical mode. Just know that if you distribute your slides to users they will very likely not end up viewing any of the vertical content.
:::

## Touch Navigation

You can swipe to navigate through a presentation on any touch-enabled device. 

If you wish to disable this you can set the `touch` option to `false`:

``` yaml
---
title: "Presentation"
format:
  revealjs:
    touch: false
    controls: true
---
```

Note that we also enable `controls` at the same time (as users on phones or tablets don't have access to a keyboard).

## Reveal Plugins

To use [Revealjs plugins](https://github.com/hakimel/reveal.js/wiki/Plugins,-Tools-and-Hardware), you need to package them into a directory with a config file (`plugin.yml`). The config file lets Quarto know how to inject the plugin into the presentation (e.g. what scripts and/or css files to include, what the default configuration should be, etc.).

See the source code of the plugins that are built into Quarto Reveal for examples:

<https://github.com/quarto-dev/quarto-cli/tree/main/src/resources/formats/revealjs/plugins>

To use a plugin, just include a reference to its directory in the list of `revealjs-plugins`. For example:

``` yaml
---
title: "Presentation"
format:
  revealjs:
    revealjs-plugins:
      - myplugin
---
```

Note that many of the most popular Reveal plugins are already included with the Quarto version of Reveal, so there is no need to include them separately. Built-in plugins include:

-   [Multiplex](https://github.com/reveal/multiplex)
-   [RevealMenu](https://github.com/denehyg/reveal.js-menu)
-   [RevealChalkboard](https://github.com/rajgoel/reveal.js-plugins/tree/master/chalkboard)
-   [PdfExport](https://github.com/McShelby/reveal-pdfexport)

### Example

Let's show an example with the [fullscreen](https://github.com/rajgoel/reveal.js-plugins/tree/master/fullscreen) plugin. Here are the steps to bundle this plugin to use within your Quarto HTML presentation:

1.  Create a folder with the name you want for the plugin, here we'll call it `fullscreen`.

2.  Download the plugin files into the created folder. Here the plugin only have a JS file called `plugin.js` that you can find [on the repo *rajgoel/reveal.js-plugins*](https://raw.githubusercontent.com/rajgoel/reveal.js-plugins/master/fullscreen/plugin.js). You can keep the name or rename it, e.g `fullscreen.js`.

3.  In that folder add a `plugin.yml` file, as in [Quarto Reveal examples](https://github.com/quarto-dev/quarto-cli/tree/main/src/resources/formats/revealjs/plugins).

    -   `name` is a mandatory field which should be the name of the JS function the JS plugin is defining. Open the JS script you downloaded to look for it.
    -   Other fields are for the resources to be used. In our example, only a JS script so we'll use `script`

    Our `plugin.yml` would be:

    ``` yaml
    name: RevealFullscreen
    script: [fullscreen.js]
    ```

4.  Now add the plugin reference into your document YAML header, using the path of the folder your created:

    ``` yaml
    format: 
     revealjs:
       revealjs-plugins:
         - fullscreen
    ```

5.  The custom plugin will be loaded in your presentation and you can use it. The plugin *fullscreen* documentation shows an example of adding a Map fullscreen in a slide by adding an attribute on the section, and using stretch on the content. This would translate to having this slide in the `.qmd` file:

    ``` markdown
    ## {fullscreen=true}

    <iframe class="stretch" data-src="https://www.google.com/maps/embed?pb=!1m14!1m12!1m3!1d61206.89156051744!2d-151.77366863890407!3d-16.50433878928727!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!5e0!3m2!1sen!2sde!4v1467468929561"></iframe>
    ```

## Learning More

See these articles lo learn more about using Reveal:

-   [Reveal Basics](index.qmd) covers the basic mechanics of creating presentations.
-   [Presenting Slides](presenting.qmd) describes slide navigation, printing to PDF, drawing on slides using a chalkboard, and creating multiplex presentations.
-   [Reveal Themes](themes.qmd) talks about using and customizing existing themes as well as creating brand new themes.
```````

## File: docs/presentations/revealjs/index.qmd
```````
---
title: "Revealjs"
slide-format: revealjs
---

## Overview

You can create [Revealjs](https://revealjs.com/) presentations using the `revealjs` format. The best way to get a sense for the capabilities of Revealjs is this [demo](demo/){target="_blank"} presentation:

<div>

```{=html}
<iframe class="slide-deck" src="demo/"></iframe>
```

</div>

If you prefer to view the demo in a standalone browser you can do that [here](demo/){target="_blank"}. Check out the [source code](https://github.com/quarto-dev/quarto-web/blob/main/docs/presentations/revealjs/demo/index.qmd) for the demo to see how the slides were created.

See the Revealjs [format reference](/docs/reference/formats/presentations/revealjs.qmd) for a comprehensive overview of all options supported for Revealjs output.

{{< include ../_creating-slides-reveal.md >}}

{{< include ../_incremental-lists-reveal.md >}}

{{< include ../_incremental-pause-reveal.md >}}

{{< include ../_columns-reveal.md >}}


## Content Overflow

If you have a slide that has more content than can be displayed on a single frame there are two slide-level classes you can apply to mitigate this:

1.  Use the `.smaller` class to use a smaller typeface so that more text fits on the slide. For example:

    ``` {.markdown code-preview="examples/smaller.qmd"}
    ## Slide Title {.smaller}
    ```

2.  Use the `.scrollable` class to make off-slide content available by scrolling. For example:

    ``` {.markdown code-preview="examples/scrollable.qmd"}
    ## Slide Title {.scrollable}
    ```

Both of these options can also be applied globally to all slides as follows:

``` {.yaml code-preview="examples/scrollable-and-smaller.qmd"}
---
format:
  revealjs:
    smaller: true
    scrollable: true
---
```

Please note that section title slides are centered by default which prevents them from being scrollable.
If you want to make title slides scrollable, you need to make them non-centered.

``` {.yaml}
---
format:
  revealjs:
    scrollable: true
    center-title-slide: false
---
```

{{< include _callout-auto-stretch-scrollable.qmd >}}

{{< include ../_speaker-notes.md >}}

This is a Revealjs feature from [built-in plugin](https://revealjs.com/plugins/#built-in-plugins) which brings limitation:  the content cannot rely on external dependencies. For instance, if you want to include a mermaid diagram that typically needs mermaid.js, it will need to be embed as an SVG or PNG image.

Press the <kbd>S</kbd> key (or use the [Navigation Menu](presenting.qmd#navigation-menu)) to show the presentation speaker view:

![](images/speaker-view.png){.border fig-alt="Screenshot of reveal.js presentation in Speaker View. On the right, the active slide is shown. The left column contains three sections which show (from top to bottom): the upcoming slide, time (both elapsed and clock time), and a section where speaker notes go."}

You'll typically use this view on one screen (e.g. your laptop) while presenting the slides on another screen.

## Themes

{{< include _theme-basics.md >}}


See the article on [Reveal Themes](themes.qmd) for additional details on customizing themes and creating brand new themes of your own.

## Asides & Footnotes

Asides contain content of more peripheral interest, and are displayed in a smaller, lighter font at the bottom of the slide. Creates asides using a div with the `aside` class. For example:

``` markdown
## Slide Title

Slide content

::: aside
Some additional commentary of more peripheral interest.
:::
```

Footnotes have a similar visual treatment to asides, but include a footnote number. For example, here we use a footnote and an aside on a single slide:

``` markdown
## Slide Title

- Green ^[A footnote]
- Brown
- Purple

::: aside
Some additional commentary of more peripheral interest.
:::
```

Which looks like this when rendered:

![](images/footnote.png){.border fig-alt="Rendered slide with title at the top, followed by a bulleted list (the first item of which has a footnote). The bottom of the slide shows the aside (Some additional commentary of more peripheral interest.), and below that the footnote."}

If you prefer that footnotes be included at the end of the document, specify the `reference-location: document` option:

``` yaml
---
format:
  revealjs:
    reference-location: document
---
```

Note that when specifying this option footnotes can still be viewed while on the slide by hovering over the footnote number.

## Footer & Logo

You can include footer text and a logo at the bottom of each slide using the `footer` and `logo` options. For example:

``` {.yaml code-preview="examples/footer-and-logo.qmd"}
---
format:
  revealjs:
    logo: logo.png
    footer: "Footer text"
---
```

Using `{footer=false}` on a slide heading allows to remove the presentation footer for this slide.

```{.yaml code-preview="examples/no-footer-on-a-slide.qmd"}
---
format:
  revealjs:
    footer: "Footer text"
---

## Slide with default footer

Content

## No footer {footer=false}

No footer is shown on this slide
```

You can also include a custom footer per-slide by adding a footer div at the bottom of the slide. 

``` {.markdown code-preview="examples/per-slide-footer.qmd"}
## Slide Title

Slide content

::: footer
Custom footer text
:::
```

## Code Blocks

Most of the core capabilities of Quarto [HTML Code Blocks](/docs/output-formats/html-code.qmd) are available for Reveal slides, including code folding, code copy, and the ability to pick a custom syntax highlighting theme. Note that if you choose a dark Reveal theme then the default Quarto dark syntax highlighting theme will be used.

### Line Highlighting

You may want to highlight specific lines of code output (or even highlight distinct lines over a progression of steps). You can do this using the `code-line-numbers` attribute of code blocks. For example:

```` {.java code-preview="examples/line-highlighting-1.qmd"}
```{.python code-line-numbers="6-8"}
import numpy as np
import matplotlib.pyplot as plt

r = np.arange(0, 2, 0.01)
theta = 2 * np.pi * r
fig, ax = plt.subplots(subplot_kw={'projection': 'polar'})
ax.plot(theta, r)
ax.set_rticks([0.5, 1, 1.5, 2])
ax.grid(True)
plt.show()
```
````

Note that you can also highlight disparate ranges of lines by separating them with a comma. For example:

```` {.java code-preview="examples/line-highlighting-2.qmd"}
```{.python code-line-numbers="7,9"}
import numpy as np
import matplotlib.pyplot as plt

r = np.arange(0, 2, 0.01)
theta = 2 * np.pi * r
fig, ax = plt.subplots(subplot_kw={'projection': 'polar'})
ax.plot(theta, r)
ax.set_rticks([0.5, 1, 1.5, 2])
ax.grid(True)
plt.show()
```
````

Finally, you can highlight different line ranges progressively by separating them with `|`. For example, here we start by showing all lines, then progress to highlighting line 6, and finally to highlighting line 9:

```` {.java code-preview="examples/line-highlighting-3.qmd"}
```{.python code-line-numbers="|6|9"}
import numpy as np
import matplotlib.pyplot as plt

r = np.arange(0, 2, 0.01)
theta = 2 * np.pi * r
fig, ax = plt.subplots(subplot_kw={'projection': 'polar'})
ax.plot(theta, r)
ax.set_rticks([0.5, 1, 1.5, 2])
ax.grid(True)
plt.show()
```
````

You can use this same option within an executable code cell by using the `code-line-numbers` cell options:

```` {.java code-preview="examples/line-highlighting-4.qmd"}
```{{python}}
#| code-line-numbers: "|6|9"

import numpy as np
import matplotlib.pyplot as plt

r = np.arange(0, 2, 0.01)
theta = 2 * np.pi * r
fig, ax = plt.subplots(subplot_kw={'projection': 'polar'})
ax.plot(theta, r)
ax.set_rticks([0.5, 1, 1.5, 2])
ax.grid(True)
plt.show()
```
````

### Code Block Height

By default, code blocks are limited to a maximum height of 500px. Code that exceeds this height introduces a scrollbar. To avoid a scrollbar you can increase the maximum height with the `code-block-height` option:

```{.yaml}
---
format:
  revealjs: 
    code-block-height: 650px
---
```

## Executable Code

You can include the output of executable code blocks on slides just the same as with other Quarto documents. This works essentially the same for slides as it does for other formats, however there are a couple of special considerations for slides covered below.

### Figure Size

You will frequently need to customize the size of figures created for slides so that they either fill the entire slide or whatever region of the slide you need them to. Quarto provides some help here: for Python the figure sizes for [Matplotlib](https://matplotlib.org/) and [Plotly Express](https://plotly.com/python/plotly-express/) are set to fill the slide area below the title, and for R the Knitr figure width and height are similarly defaulted.

Nevertheless, you will frequently need to change these defaults for a given figure. The details on how to do this vary by graphics library. Here's an example of explicitly sizing an [Altair](https://altair-viz.github.io/) plot:

``` {.python code-preview="examples/executable-code-figure-size.qmd"}
alt.Chart(cars).mark_point().encode(
    x='Horsepower',
    y='Miles_per_Gallon',
    color='Origin',
).properties(
    width=700,
    height=300
).interactive()
```

### Code Echo

Unlike with ordinary documents, within Quarto presentations executable code blocks do not `echo` their source code by default (this is because often the code produces a figure that wants to occupy as much vertical space as possible). You can override this behavior using the `echo` option. For example:

```` {.java code-preview="examples/code-echo.qmd"}
```{{python}}
#| echo: true

import numpy as np
import matplotlib.pyplot as plt

r = np.arange(0, 2, 0.01)
theta = 2 * np.pi * r
fig, ax = plt.subplots(subplot_kw={"projection": "polar"})
ax.plot(theta, r)
ax.set_rticks([0.5, 1, 1.5, 2])
ax.grid(True)
plt.show()
```
````

### Output Location

By default, output from executable code blocks is displayed immediately after the code. You can use the `output-location` option to modify this behavior as follows:

|                   |                                                                                                                                         |
|-------------------|-----------------------------------------------------------------------------------------------------------------------------------------|
| `fragment`        | Display output as a [Fragment](advanced.qmd#fragments) (delay showing it until it is explicitly stepped through by advancing the slide). |
| `slide`           | Display output on the subsequent slide.                                                                          |
| `column`          | Display output in a column adjacent to the code.                                                                                        |
| `column-fragment` | Display output in a column adjacent to the code and delay showing it until it is explicitly stepped through by advancing the slide.        |

For example, here we display cell output on its own slide:

```{{r}}
#| echo: true
#| output-location: slide
library(ggplot2)
ggplot(airquality, aes(Temp, Ozone)) + 
  geom_point() + 
  geom_smooth(method = "loess")
```

See the documentation on [Execution Options](/docs/computations/execution-options.qmd) for more details on the various other ways to customize output from code execution.

## Tabsets

You can add tabbed content to slides using the standard Quarto syntax for [tabsets](/docs/output-formats/html-basics.qmd#tabsets). For example:

``` {.markdown code-preview="examples/tabset.qmd"}
::: {.panel-tabset}

### Tab A

Content for `Tab A`

### Tab B

Content for `Tab B`

:::
```

Note that one significant disadvantage to tabsets is that only the first tab will be visible when printing to PDF.

## Slide Backgrounds

Slides are contained within a limited portion of the screen by default to allow them to fit any display and scale uniformly. You can apply full page backgrounds outside of the slide area by adding a `background` attribute to your slide headings. Five different types of backgrounds are supported: color, gradient, image, video and iframe.

### Color Background

All CSS color formats are supported, including hex values, keywords, `rgba()` or `hsl()`. For example:

``` {.markdown code-preview="examples/background-color.qmd"}
## Slide Title {background-color="aquamarine"}
```

::: {.callout-tip appearance="simple"}
Note that if the background color of your media differs from your presentation's theme (e.g. a dark image when using a light theme) then you should also explicitly set the `background-color` so that text on top of the background appears in the correct color (e.g. light text on a dark background).
:::

### Gradient Background

{{< include /docs/prerelease/1.6/_pre-release-feature.qmd >}}

All CSS gradient formats are supported, including `linear-gradient`, `radial-gradient` and `conic-gradient`.

```{.markdown code-preview="examples/background-gradient.qmd"}
## Slide Title {background-gradient="linear-gradient(to bottom, #283b95, #17b2c3)"}

## Slide Title {background-gradient="radial-gradient(#283b95, #17b2c3)"}
```

### Image Backgrounds

By default, background images are resized to cover the full page. Available options:

| **Attribute**         | **Default** | **Description**                                                                                   |
|:----------------------|:------------|:--------------------------------------------------------------------------------------------------|
| `background-image`    |             | URL of the image to show. GIFs restart when the slide opens.                                      |
| `background-size`     | cover       | See [background-size](https://developer.mozilla.org/docs/Web/CSS/background-size) on MDN.         |
| `background-position` | center      | See [background-position](https://developer.mozilla.org/docs/Web/CSS/background-position) on MDN. |
| `background-repeat`   | no-repeat   | See [background-repeat](https://developer.mozilla.org/docs/Web/CSS/background-repeat) on MDN.     |
| `background-opacity`  | 1           | Opacity of the background image on a 0-1 scale. 0 is transparent and 1 is fully opaque.           |

For example:

``` {.markdown code-preview="examples/image-background.qmd"}
## Slide Title {background-color="black" background-image="https://placekitten.com/100/100" background-size="100px" background-repeat="repeat"}

This slide's background image will be sized to 100px and repeated.
```

Since this image has a dark background and our slides use the default (light) theme, we explicitly set the `background-color` to black so that text drawn on top of it is light.

### Video Backgrounds

Automatically plays a full size video behind the slide.


{{< include _background-video.md >}}

### IFrame Backgrounds

Embeds a web page as a slide background that covers 100% of the reveal.js width and height. The iframe is in the background layer, behind your slides, and as such it's not possible to interact with it by default. To make your background interactive, you can add the `background-interactive` attribute.

| **Attribute**            | **Default** | **Description**                                                                                                                                 |
|:-------------------------|:------------|:------------------------------------------------------------------------------------------------------------------------------------------------|
| `background-iframe`      |             | URL of the iframe to load                                                                                                                       |
| `background-interactive` | false       | Include this attribute to make it possible to interact with the iframe contents. Enabling this will prevent interaction with the slide content. |

For example:

``` markdown
## Slide Title {background-iframe="https://example.com"}
```

### Slide Backgrounds Without a Title

You can always omit the title text, and specify only the slide background information:

``` {.markdown code-preview="examples/background-no-title.qmd"}
## {background-color="aquamarine"}

(A slide with no title)

## {background-color="black" background-image="https://placekitten.com/100/100" background-size="100px" background-repeat="repeat"}

(Another slide with no title)
```

### Main Title Slide Background

The main title slide is the first slide, which is generated via document YAML options. As a result, the methods described above won't work for providing a background for the title slide. Rather, you need to do the following:

1. Provide the title slide background options under `title-slide-attributes`
2. Prepend the background options with `data-`

For example:

```yaml
---
title: My Slide Show
title-slide-attributes:
    data-background-image: /path/to/title_image.png
    data-background-size: contain
    data-background-opacity: "0.5"
---
```

## Learning More

See these articles lo learn about more advanced capabilities of Reveal:

-   [Presenting Slides](presenting.qmd) describes slide navigation, printing to PDF, drawing on slides using a chalkboard, and creating multiplex presentations.
-   [Advanced Reveal](advanced.qmd) delves into transitions, animations, advanced layout and positioning, and other options available for customizing presentations.
-   [Reveal Themes](themes.qmd) talks about using and customizing existing themes as well as creating brand new themes.
```````

## File: docs/presentations/revealjs/presenting.qmd
```````
---
title: "Presenting Slides"
---

## Overview

This article covers the mechanics of presenting slides with Reveal. Basic navigation is done using the following keyboard shortcuts:

+----------------------------+--------------------------------------------+
| Action                     | Keys                                       |
+============================+============================================+
| Next slide                 | <kbd>→</kbd> <kbd>SPACE</kbd> <kbd>N</kbd> |
+----------------------------+--------------------------------------------+
| Previous slide             | <kbd>←</kbd> <kbd>P</kbd>                  |
+----------------------------+--------------------------------------------+
| Navigate without fragments | <kbd>Alt →</kbd> <kbd>Alt ←</kbd>          |
+----------------------------+--------------------------------------------+
| Jump to first/last slide   | <kbd>Shift →</kbd> <kbd>Shift ←</kbd>      |
+----------------------------+--------------------------------------------+

::: {.callout-tip appearance="simple"}
You will often want to enter fullscreen mode when presenting. You can do this by pressing the {{< kbd F >}} key.
:::

In addition to basic keyboard navigation, Reveal supports several more advanced capabilities, including:

-   Navigation menu and overview mode
-   Speaker view (w/ speaker notes,timer, and preview of upcoming slides)
-   Printing to PDF and publishing as self contained HTML
-   Drawing on top of slides & chalkboard/whiteboard mode
-   Multiplex, which allows your audience to follow the slides of the presentation you are controlling on their own phone, tablet or laptop.

These capabilities are described below.

## Navigation Menu {#navigation-menu}

Quarto includes a built in version of the [reveal.js-menu](https://github.com/denehyg/reveal.js-menu) plugin. You can access the navigation menu using the button <kbd>![](images/navigation-menu-icon.png){style="padding-bottom: 1px;" width="15" height="13"}</kbd> located in the bottom left corner of the presentation. Clicking the button opens a slide navigation menu that enables you to easily jump to any slide:

::: {layout="[4,4]"}
![](images/navigation-menu-button.png){.border fig-alt="Screen shot of basic reveal.js slide with no overlays."}

![](images/navigation-menu-open.png){.border fig-alt="Screenshot of reveal.js slide with menu plugin open on the left. The menu bar has the Slides tab open, which shows a selectable list of all of the slides in the presentation."}
:::

::: {.callout-tip appearance="simple"}
You can also open the navigation menu by pressing the {{< kbd M >}} key.
:::

The navigation menu also includes a **Tools** pane that provides access to the various other navigation tools including Fullscreen, Speaker View, Overview Mode, and Print to PDF.

Use the following options to customize the appearance and behavior of the menu:

+-----------+--------------------------------------------------------------------------------------------------------------------+
| Option    | Description                                                                                                        |
+===========+====================================================================================================================+
| `side`    | Side of the presentation where the menu will be shown. `left` or `right` (defaults to `left`).                     |
+-----------+--------------------------------------------------------------------------------------------------------------------+
| `width`   | Width of the menu (`normal`, `wide`, `third`, `half`, `full`, or any valid css length value). Defaults to `normal` |
+-----------+--------------------------------------------------------------------------------------------------------------------+
| `numbers` | Add slide numbers to menu items.                                                                                   |
+-----------+--------------------------------------------------------------------------------------------------------------------+

For example:

``` yaml
format:
  revealjs:
    menu:
      side: right
      width: wide
```

You can hide the navigation menu by specifying the `menu: false` option:

``` yaml
format:
  revealjs:
    menu: false
```

Note that you can still open the menu using the {{< kbd M >}} key even if the button is hidden.

## Jump To Slide {#jump-to-slide}

{{< include /docs/prerelease/1.6/_pre-release-feature.qmd >}}

You can skip ahead to a specific slide using reveal.js' jump-to-slide shortcut. Here's how it works:

-   Press {{< kbd G >}} to activate
-   Type a slide number or an id
-   Press Enter to confirm

You can either enter - a numeric value to navigate to the desired slide number - a string, which will try to locate a slide with a matching id and navigate to it.

This feature can be opt-out by setting `jump-to-slide: false` option:

``` yaml
format:
  revealjs:
    jump-to-slide: false
```

## Overview Mode

Overview mode provides an alternate view that shows you a thumbnail for each slide:

![](images/overview-mode.png){.border fig-alt="Screenshot of slides shown in overview mode, showing a series of thumbnails for the slides in the presentation."}

::: {.callout-tip appearance="simple"}
You can enable Overview Mode by pressing the {{< kbd O >}} key.
:::

## Scroll View {#scroll-view}

{{< include /docs/prerelease/1.6/_pre-release-feature.qmd >}}

Reveal presentations can be presented in [Scroll View](https://revealjs.com/scroll-view/) with vertically scrolled navigation instead of Slides. This is a new view mode introduced in Revealjs 5. It is always available in presentations as an alternative view mode (like [Print view](#print-to-pdf)), and it will be used as the default view on small screens (e.g. viewing a presentation on a mobile).

Our demo presentation can be seen [in scroll view mode](https://{{< meta prerelease-subdomain >}}quarto.org/docs/presentations/revealjs/demo/?view=scroll) and below

<div>

```{=html}
<iframe class="slide-deck" src="demo/index.html?view=scroll"></iframe>
```

</div>

### Entering Scroll View {#scroll-view-toggle}

To enter Scroll View , do one the following:

-   Toggle into Scroll View using the {{< kbd R >}} key

-   Toggle into Scroll View using the [Navigation Menu](#navigation-menu)

-   Toggle into Scroll View by adding `?view=scroll` to the url, e.g. `https://quarto.org/docs/presentations/revealjs/demo/?view=scroll`

You can easily toggle out of Scroll View by the same action.

### Default View Mode

Scroll View can be set as the default mode for the presentation using the `scroll-view` option:

``` yaml
format:
  revealjs:
    scroll-view: true
```

### Scroll View Options

Scroll View can be configured using the following options under `scroll-view`:

+--------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Option             | Description                                                                                                                                                                                                                                               |
+====================+===========================================================================================================================================================================================================================================================+
| `progress`         | `auto`: Show the scrollbar while scrolling and hide while idle (default). Set to `true` to always show, `false` to always hide.                                                                                                                           |
+--------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `snap`             | `mandatory`: When scrolling, it will automatically snap to the closest slide (default). Only snap when close to the top of a slide using `proximity`. Disable snapping altogether by setting to `false`.                                                  |
+--------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `layout`           | `full`: Each slide will be sized to be as tall as the viewport (default). If you prefer a more dense layout with multiple slides visible in parallel, set to `compact`.                                                                                   |
+--------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `activation-width` | Control scroll view activation width. The scroll view is automatically activated when the viewport reaches mobile widths. Set to `0` to disable automatic scroll view or to another value in pixels to automatically trigger on bigger or smaller widths. |
+--------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `activate`         | Activate scroll view by default for the presentation (default `false`). Otherwise, entering scroll view require a manual trigger (See [Entering Scroll View](#scroll-view-toggle)). `scroll-view: true` is equivalent to                                  |
|                    |                                                                                                                                                                                                                                                           |
|                    | ``` yaml                                                                                                                                                                                                                                                  |
|                    | scroll-view:                                                                                                                                                                                                                                              |
|                    |   activate: true                                                                                                                                                                                                                                          |
|                    | ```                                                                                                                                                                                                                                                       |
+--------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

For example, the following specifies that we want a compact layout, proximity snap mode, to always show the progress scrollbar, and to never automatically activate for small screens:

``` yaml
---
title: "Presentation"
format:
  revealjs:
    scroll-view:
      layout: compact
      snap: proximity
      progress: true
      activation-width: 0
---
```

## Slide Zoom

Hold down the {{< kbd Alt linux=Ctrl >}} key and click on any element to zoom towards it. Try zooming in on one of these images:

```{=html}
<iframe class="reveal-demo border" src="demo/mini/zoom.html"></iframe>
```

{{< kbd Alt >}} or {{< kbd Ctrl >}} click again to zoom back out.

## Speaker View

The speaker view shows the current slide along with the upcoming slide, a timer, and any speaker notes associated with the current slide:

![](images/speaker-view.png){.border fig-alt="Screenshot of reveal.js presentation in Speaker View. On the right, the active slide is shown. The left column contains three sections which show (from top to bottom): the upcoming slide, time (both elapsed and clock time), and a section where speaker notes go."}

::: {.callout-tip appearance="simple"}
You can enable Speaker View by pressing the {{< kbd S >}} key.
:::

You can add speaker notes to a slide using a div with class `.notes`. For example:

``` markdown
## Slide with speaker notes

Slide content

::: {.notes}
Speaker notes go here.
:::
```

## Slide Numbers

You can add slide numbers to your presentation using the `slide-number` option. You can also control in which contexts slide numbers appear using the `show-slide-number` option. For example, here we configure slides numbers for printed output only:

``` yaml
---
title: "Presentation"
format:
  revealjs:
    slide-number: true
    show-slide-number: print
---
```

In addition to a simple `true` or `false` value, the `slide-number` option can also specify a format. Available formats include:

| Value | Description                           |
|-------|---------------------------------------|
| `c/t` | Slide number / total slides (default) |
| `c`   | Slide number only                     |
| `h/v` | Horizontal / Vertical slide number    |
| `h.v` | Horizontal . Vertical slide number    |

See [Vertical Slides](advanced.qmd#vertical-slides) for additional information on vertical slides.

The `show-slide-number` option supports the following values:

| Value     | Description                                  |
|-----------|----------------------------------------------|
| `all`     | Show slide numbers in all contexts (default) |
| `print`   | Only show slide numbers when printing to PDF |
| `speaker` | Only show slide numbers in the speaker view  |

## Print to PDF {#print-to-pdf}

Reveal presentations can be exported to PDF via a special print stylesheet.

::: callout-note
Note: This feature has been confirmed to work in [Google Chrome](https://google.com/chrome), [Chromium](https://www.chromium.org/Home) as well as in [Firefox](https://www.mozilla.org/en-US/firefox/).
:::

To Print to PDF, do the following:

1.  Toggle into Print View using the {{< kbd E >}} key (or using the [Navigation Menu](#navigation-menu))
2.  Open the in-browser print dialog {{< kbd Ctrl+P win=Ctrl+P mac=Command+P >}}.
3.  Change the **Destination** setting to **Save as PDF**.
4.  Change the **Layout** to **Landscape**.
5.  Change the **Margins** to **None**.
6.  Enable the **Background graphics** option.
7.  Click **Save** 🎉

If you entered print mode in the same window, you can toggle out of Print View using the same {{< kbd E >}} key, or navigate back to last slide seen using usual back button in your browser.

Here's what the Chrome print dialog would look like with these settings enabled:

![](images/print-to-pdf.png){.border fig-alt="Screenshot of Chrome print dialog with the first slide/page of 27 shown on the left, and print options on the right. The Destination print option has Save as PDF selected."}

### Print Options

There are a number of options that affected printed output that you may want to configure prior to printing:

+---------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Option                    | Description                                                                                                                                                                          |
+===========================+======================================================================================================================================================================================+
| `show-notes`              | Include speaker notes (`true`, `false`, or `separate-page)`                                                                                                                          |
+---------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `slide-number`            | Include slide numbers (`true` or `false`)                                                                                                                                            |
+---------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `pdf-max-pages-per-slide` | Slides that are too tall to fit within a single page will expand onto multiple pages. You can limit how many pages a slide may expand to using the `pdf-max-pages-per-slide` option. |
+---------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `pdf-separate-fragments`  | Slides with multiple fragments are printed on a single page by default. To create a page for each fragment set this option to `true`.                                                |
+---------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

For example, the following specifies that we want to print speaker notes on their own page and include slide numbers:

``` yaml
---
title: "Presentation"
format:
  revealjs:
    show-notes: separate-page
    slide-number: true
---
```

## Preview Links

Reveal makes it easy to incorporate navigation to external websites into the flow of presentations using the `preview-links` option.

When you click on a hyperlink with `preview-links: true`, the link will be navigated to in an iframe that overlays the slide. For example, here we've clicked on a [Matplotlib](https://matplotlib.org/) link and the website opens on top of the slide (you'd click the close button at top right to hide it):

![](images/matplotlib.png){.border fig-alt="Screenshot of matplotlib landing page."}

Available values for `preview-link` include:

+------------+-----------------------------------------------------------------------------------------+
| Value      | Description                                                                             |
+============+=========================================================================================+
| `auto`     | Preview links when presenting in full-screen mode (otherwise navigate to them normally) |
+------------+-----------------------------------------------------------------------------------------+
| `true`     | Always preview links                                                                    |
+------------+-----------------------------------------------------------------------------------------+
| `false`    | Never preview links (the default)                                                       |
+------------+-----------------------------------------------------------------------------------------+

For example, here we set `preview-links` to `auto`:

``` yaml
---
title: "Presentation"
format:
  revealjs:
    preview-links: auto
---
```

You can also set this option on a per-link basis. These two links respectively enable and disable preview:

``` markdown
[Preview](https://example.com){preview-link="true"}

[NoPreview](https://example.com){preview-link="false"}
```

Previewing website in HTML format will use an `<iframe>`, which not all websites will allow (e.g. they could set in their response header [`X-Frame-Options` to `deny`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options), or [`frame-ancestor` restriction in their `Content-Security-Policy`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/frame-ancestors)). If a website disallow `iframe` usage, the preview will not be working in the Quarto document output.

## Slide Tone

Slide tone plays a subtle sound when you change slides. It was [requested by a blind user](https://github.com/yihui/xaringan/issues/214) and enables presenters to hear an auditory signal of their progress through the slides. Enable slide tone with:

``` yaml
format:
  revealjs:
    slide-tone: true
```

The tones increase in pitch for each slide from a low C to a high C note. The tone pitch stays the same for incremental slides.

The implementation of slide tone was adapted from the [slide tone plugin](https://github.com/gadenbuie/xaringanExtra/blob/master/docs/slide-tone/libs/slide-tone/slide-tone.js) in xaringanExtra.

## Auto-Slide

Presentations can be configured to step through slides automatically, without any user input. To enable this you will need to specify an interval for slide changes using the `auto-slide` option (the interval is provided in milliseconds). The `loop` option can additionally be specified to continue presenting in a loop once all the slides have been shown.

For example, here we specify that we want to advance every 5 seconds and continue in a loop:

``` yaml
---
title: "Presentation"
format: 
  revealjs: 
    auto-slide: 5000
    loop: true
---
```

A play/pause control element will automatically appear for auto-sliding decks. Sliding is automatically paused if the user starts interacting with the deck. It's also possible to pause or resume sliding by pressing {{< kbd A >}} on the keyboard.

You can disable the auto-slide controls and prevent sliding from being paused by specifying `auto-slide-stoppable: false`.

### Slide Timing

It's also possible to override the slide duration for individual slides and fragments by using the `autoslide` attribute (this attribute also works on [Fragments](advanced.qmd#fragments){data-heading="Fragments"}). For example, here we set the auto-slide value to 2 seconds:

``` markdown
## Slide Title {autoslide=2000}
```

## Publishing

There are two main ways to publish Reveal presentations:

1.  As a PDF file---see [Print to PDF](#print-to-pdf) above for details on how to do this.

2.  As an HTML file. For HTML, it's often most convenient to distribute the presentation as a single self contained file. To do this, specify the `embed-resources` option:

    ``` yaml
    ---
    title: "Presentation"
    format:
      revealjs:
        embed-resources: true
    ---
    ```

    All of the dependent images, CSS styles, and other assets will be contained within the HTML file created by Quarto.

    ::: {.callout-note appearance="simple"}
    Note that specifying `embed-resources` can slow down rendering by a couple of seconds, so you may want to enable `embed-resources` only when you are ready to publish. Also note that Reveal plugin [Chalkboard] is not compatible with `embed-resources` --- when [Chalkboard] plugin is enabled, specifying `embed-resources: true` will result an error.
    :::

See the documentation on [Publishing HTML](/docs/publishing/index.qmd) for details on additional ways to publish Reveal presentations including GitHub Pages and Posit Connect.

## Navigation Options

There are several navigational cues provided as part of Reveal presentations and corresponding options that control them:

+-------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Option      | Description                                                                                                                                                                  |
+=============+==============================================================================================================================================================================+
| `controls`  | Show arrow controls for navigating through slides (defaults to `auto`, which will show controls when vertical slides are present or when the deck is embedded in an iframe). |
+-------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `progress`  | Show a progress bar at the bottom (defaults to `true`).                                                                                                                      |
+-------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `history`   | Push slide changes to the browser history. Defaults to `true`, which means that the browser Forward/Back buttons can be used for slide navigation.                           |
+-------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `hash-type` | Type of URL hash to use for slides. Defaults to `title` which is derived from the slide title. You can also specify `number`.                                                |
+-------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

For example, the following configuration hides the progress bar and specifies that we want to use browser history:

``` yaml
---
title: "Presentation"
format:
  revealjs:
    progress: false
    history: true
---
```

## Chalkboard

Quarto includes a built-in version of the [reveal.js-chalkboard](https://github.com/rajgoel/reveal.js-plugins/tree/master/chalkboard) plugin. Specify the `chalkboard: true` option to enable the plugin, which enables you to draw on a notes canvas on top of your slides and/or open up an empty chalkboard within your presentation:

``` yaml
---
title: "Presentation"
format:
  revealjs:
    chalkboard: true
---
```

::: {.callout-warning appearance="simple"}
Note that Reveal plugin [Chalkboard] is not compatible with `embed-resources` output --- when [Chalkboard] plugin is enabled, specifying `embed-resources: true` will result an error.
:::

Here are what the notes canvas and chalkboard look like when activated:

::: {layout="[4,4]"}
![](images/drawing-canvas.png){.border fig-alt="Slide with notes canvas activated has a panel on the left to select colors, and a menu bar at the bottom with a paintbrush. One of the words in the slide header has been underlined with the brush in blue."}

![](images/chalkboard.png){.border fig-alt="Screenshot of chalkboard canvas with color selector on the left, and paintbrush tool at the bottom. The background is dark, and the equation 'y = mx + b' has been drawn in white with a chalky texture."}
:::

To toggle the notes canvas on and off use the <kbd>![](images/canvas-icon.png){width="19" height="17"}</kbd> button or the {{< kbd C >}} key.

To toggle the chalkboard on and off use the <kbd>![](images/chalkboard-icon.png){width="19" height="20"}</kbd> button or the {{< kbd B >}} key.

Here are all of the keyboard shortcuts associated with the notes canvas and chalkboard:

| Action                  | Key                   |
|-------------------------|-----------------------|
| Toggle notes canvas     | {{< kbd C >}}         |
| Toggle chalkboard       | {{< kbd B >}}         |
| Reset all drawings      | {{< kbd BACKSPACE >}} |
| Clear drawings on slide | {{< kbd DEL >}}       |
| Cycle colors forward    | {{< kbd X >}}         |
| Cycle colors backward   | {{< kbd Y >}}         |
| Download drawings       | {{< kbd D >}}         |

The following mouse and touch gestures can be used for interacting with drawings:

-   Click on the buttons at the bottom left to toggle the notes canvas or chalkboard

-   Click on the color picker at the left to change the color (the color picker is only visible if the notes canvas or chalkboard is active)

-   Click on the up/down arrows on the right to switch among multiple chalkboard (the up/down arrows are only available for the chalkboard)

-   Click the left mouse button and drag to write on notes canvas or chalkboard

-   Click the right mouse button and drag to wipe away previous drawings

-   Touch and move to write on notes canvas or chalkboard

-   Touch and hold for half a second, then move to wipe away previous drawings

### Restoring Drawings

The {{< kbd D >}} key downloads any active drawings into a JSON file. You can then restore these drawings when showing your presentation using the `src` option. For example:

``` yaml
---
title: "Presentation"
format:
  revealjs:
    chalkboard:
      src: drawings.json
---
```

### Chalkboard Options

The following options are available to customize the behavior and appearance of the chalkboard:

+---------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+
| Option              | Description                                                                                                                                     |
+=====================+=================================================================================================================================================+
| `theme`             | Can be set to either `chalkboard` (default) or `whiteboard`.                                                                                    |
+---------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+
| `boardmarker-width` | The drawing width of the boardmarker; larger values draw thicker line. Defaults to `3`.                                                         |
+---------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+
| `chalk-width`       | The drawing width of the chalk; larger values draw thicker lines. Defaults to `7`.                                                              |
+---------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+
| `chalk-effect`      | A float in the range `[0.0, 1.0]`, the intensity of the chalk effect on the chalk board. Full effect (default) `1.0`, no effect `0.0`.          |
+---------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+
| `src`               | Optional file name for pre-recorded drawings (download drawings using the {{< kbd D >}} key).                                                   |
+---------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+
| `read-only`         | Configuration option to prevent changes to existing drawings. `true`: no changes can be made, `false` (default): changes can be made.           |
+---------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+
| `buttons`           | Add chalkboard buttons at the bottom of the slide (defaults to `true`).                                                                         |
+---------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+
| `transition`        | Gives the duration (in milliseconds) of the transition for a slide change, so that the notes canvas is drawn after the transition is completed. |
+---------------------+-------------------------------------------------------------------------------------------------------------------------------------------------+

For example, the following configuration specifies that we want to use the `whiteboard` theme with a (thicker) boardmarker width, and that we want to hide the chalkboard buttons at the bottom of each slide:

``` yaml
---
title: "Presentation"
format:
  revealjs:
    chalkboard:
      theme: whiteboard
      boardmarker-width: 5
      buttons: false
---
```

If you disable the chalkboard buttons globally you can selectively re-enable them for individual slides with the `chalkboard-buttons` attribute. For example:

``` markdown
## Slide Title {chalkboard-buttons="true"}
```

You can also use `chalkboard-buttons="false"` to turn off the buttons for individual slides.

## Multiplex

Quarto includes a built-in version of the [Reveal Multiplex](https://github.com/reveal/multiplex) plugin. The multiplex plugin allows your audience to follow the slides of the presentation you are controlling on their own phone, tablet or laptop. When you change slides in your master presentations everyone will follow and see the same content on their own device.

Creating a Reveal presentation that supports multiplex is straightforward. Just specify the `multiplex: true` option as follows:

``` yaml
---
title: "Presentation"
format:
  revealjs:
    multiplex: true
---
```

Rendering the presentation will result in two HTML files being created by Quarto:

+-----------------------------+------------------------------------------------------------------------------------------------------------------------------------+
| File                        | Description                                                                                                                        |
+=============================+====================================================================================================================================+
| `presentation.html`         | This is the file you should publish online and that your audience should view.                                                     |
+-----------------------------+------------------------------------------------------------------------------------------------------------------------------------+
| `presentation-speaker.html` | This is the file that you should present from . This file can remain on your computer and does not need to be published elsewhere. |
+-----------------------------+------------------------------------------------------------------------------------------------------------------------------------+

The two versions of the presentation will be synchronized such that when the speaker version switches slides the viewers also all switch to the same slide.

### Multiplex Server {.unlisted}

Behind the scenes there is a multiplex server that is synchronizing slide events between the viewer and speaker versions of the presentation. Note that the this server does not actually see any of the slide content, it is only used to synchronize events.

By default, a server created and hosted by the Revealjs team is used for this: <https://reveal-multiplex.glitch.me/>. This server is used by default when you specify `multiplex: true`.

#### Running your own server

If you want to run your own version of this server its source code is here: <https://github.com/reveal/multiplex/blob/master/index.js>.

You can then configure multiplex to use an alternate server as follows:

``` yaml
---
title: "Presentation"
format:
  revealjs:
    multiplex: 
      url: 'https://myserver.example.com/
---
```

Note that Quarto calls the multiplex server behind the scenes to provision a id and secret for your presentation. If you want to provision your own id and secret you can do so at <https://reveal-multiplex.glitch.me/> (or using your custom hosted server URL) and provide them explicitly in YAML:

``` yaml
---
title: "Presentation"
format:
  revealjs:
    multiplex: 
      id: '1ea875674b17ca76'
      secret: '13652805320794272084'
---
```

Note that the `secret` value will be included in only the speaker version of the presentation.

## Learning More

See these articles lo learn more about using Reveal:

-   [Reveal Basics](index.qmd) covers the basic mechanics of creating presentations.
-   [Advanced Reveal](advanced.qmd) delves into transitions, animations, advanced layout and positioning, and other options available for customizing presentations.
-   [Reveal Themes](themes.qmd) talks about using and customizing existing themes as well as creating brand new themes.
```````

## File: docs/presentations/revealjs/themes.qmd
```````
---
title: "Reveal Themes"
---

## Using Themes

{{< include _theme-basics.md >}}


## Customizing Themes

You can customize the built-in themes by adding your own [Sass](https://sass-lang.com/) theme file to the theme declaration. For example:

``` yaml
---
title: "Presentation"
format:
  revealjs: 
    theme: [default, custom.scss]
---
```

Here's what the contents of `custom.scss` might look like:

``` default
/*-- scss:defaults --*/

$body-bg: #191919;
$body-color: #fff;
$link-color: #42affa;

/*-- scss:rules --*/

.reveal .slide blockquote {
  border-left: 3px solid $text-muted;
  padding-left: 0.5em;
}
```

Theme files use [Sass](https://sass-lang.com/) (a variant of CSS that supports variables and other extended features) and are divided into sections.

-   `/*-- scss:defaults --*/` is used to define variables that affect fonts, colors, borders, etc. (note that variables start with a `$`)

-   `/*-- scss:rules --*/` is used to create CSS rules. Note that CSS rules that target Reveal content generally need to use the `.reveal .slide` prefix to successfully override the theme's default styles.

See the [Sass Variables] documentation for a list of what's available to customize.

## Creating Themes

Creating a new theme is just a matter of re-defining one or more of the default Sass variables (you don't need to re-specify values that you don't want to override) and adding any additional CSS rules you need to.

See the [Sass Variables] documentation for a list of what can be customized within a theme.

For example, here is the source code for the built in `serif` theme:

``` default
/*-- scss:defaults --*/

// fonts
$font-family-sans-serif: "Palatino Linotype", "Book Antiqua", Palatino,
  FreeSerif, serif !default;

// colors
$body-bg: #f0f1eb !default;
$body-color: #000 !default;
$link-color: #51483d !default;
$selection-bg: #26351c !default;

// headings
$presentation-heading-font: "Palatino Linotype", "Book Antiqua", Palatino,
  FreeSerif, serif !default;
$presentation-heading-color: #383d3d !default;

/*-- scss:rules --*/

.reveal a {
  line-height: 1.3em;
}
```

In this theme file you'll notice that the `!default` suffix is placed after variable definitions. This is to make sure that anyone using this theme can override the variable value (without that the value is defined as not overrideable).

You can use a custom theme by just specifying it as the `theme` option (all theme files implicitly inherit from the `default` theme). For example:

``` yaml
---
title: "Presentation"
format:
  revealjs: 
    theme: mytheme.scss
---
```

Here is the source code for all of the built-in themes for inspiration and examples:

<https://github.com/quarto-dev/quarto-cli/tree/main/src/resources/formats/revealjs/themes>

## Sass Variables

Here's a list of all Sass variables (and their default values) used by Reveal themes. Note that some variables are defined using other variables, and several of the color variables use the `lighten()` Sass function to create a lighter variant of another color.

### Colors

| Variable                               | Default                                  |
|----------------------------------------|------------------------------------------|
| `$body-bg`                             | #fff                                     |
| `$body-color`                          | #222                                     |
| `$text-muted`                          | lighten(\$body-color, 50%)               |
| `$link-color`                          | #2a76dd                                  |
| `$link-color-hover`                    | lighten(\$link-color, 15%)               |
| `$selection-bg`                        | lighten(\$link-color, 25%)               |
| `$selection-color`                     | \$body-bg                                |
| `$light-bg-text-color`                 | #222                                     |
| `$light-bg-link-color`                 | #2a76dd                                  |
| `$light-bg-code-color`                 | #4758ab                                  |
| `$dark-bg-text-color`                  | #fff                                     |
| `$dark-bg-link-color`                  | #42affa                                  |
| `$dark-bg-code-color`                  | #ffa07a                                  |

### Fonts

| Variable                               | Default                                  |
|----------------------------------------|------------------------------------------|
| `$font-family-sans-serif`              | "Source Sans Pro", Helvetica, sans-serif |
| `$font-family-monospace`               | monospace                                |
| `$presentation-font-size-root`         | 40px                                     |
| `$presentation-font-smaller`           | 0.7                                      |
| `$presentation-line-height`            | 1.3                                      |

### Headings

| Variable                               | Default                                  |
|----------------------------------------|------------------------------------------|
| `$presentation-h1-font-size`           | 2.5em                                    |
| `$presentation-h2-font-size`           | 1.6em                                    |
| `$presentation-h3-font-size`           | 1.3em                                    |
| `$presentation-h4-font-size`           | 1em                                      |
| `$presentation-heading-font`           | \$font-family-sans-serif                 |
| `$presentation-heading-color`          | \$body-color                             |
| `$presentation-heading-line-height`    | 1.2                                      |
| `$presentation-heading-letter-spacing` | normal                                   |
| `$presentation-heading-text-transform` | none                                     |
| `$presentation-heading-text-shadow`    | none                                     |
| `$presentation-heading-font-weight`    | 600                                      |
| `$presentation-h1-text-shadow`         | none                                     |

### Code Blocks

| Variable                               | Default                                  |
|----------------------------------------|------------------------------------------|
| `$code-block-bg`                       | \$body-bg                                |
| `$code-block-border-color`             | lighten(\$body-color, 60%)               |
| `$code-block-font-size`                | 0.55em                                   |

### Inline Code

| Variable                               | Default                                  |
|----------------------------------------|------------------------------------------|
| `$code-color`                          | var(--quarto-hl-fu-color)                |
| `$code-bg`                             | transparent                              |

### Tabsets

| Variable                               | Default                                  |
|----------------------------------------|------------------------------------------|
| `$tabset-border-color`                 | \$code-block-border-color                |

### Layout

| Variable                               | Default                                  |
|----------------------------------------|------------------------------------------|
| `$border-color`                        | lighten(\$body-color, 30%)               |
| `$border-width`                        | 1px                                      |
| `$border-radius`                       | 3px                                      |
| `$presentation-block-margin`           | 12px                                     |
| `$presentation-slide-text-align`       | left                                     |
| `$presentation-title-slide-text-align` | center                                   |

### Callouts

+--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Variable                 | Notes                                                                                                                                                              |
+==========================+====================================================================================================================================================================+
| `$callout-border-width`  | The left border width of callouts. Defaults to `0.3rem`.                                                                                                           |
+--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `$callout-border-scale`  | The border color of callouts computed by shifting the callout color by this amount. Defaults to `0%`.                                                              |
+--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `$callout-icon-scale`    | The color of the callout icon computed by shifting the callout color by this amount. Defaults to `10%`.                                                            |
+--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `$callout-margin-top`    | The amount of top margin on the callout. Defaults to `1rem`.                                                                                                       |
+--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `$callout-margin-bottom` | The amount of bottom margin on the callout. Defaults to `1rem`.                                                                                                    |
+--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `$callout-color-<type>`  | The colors for the various types of callouts. Defaults:                                                                                                            |
|                          |                                                                                                                                                                    |
|                          | | type        | default                 |                                                                                                                          |
|                          | |-------------|-------------------------|                                                                                                                          |
|                          | | `note`      | [`#0d6efd`]{.color-box} |                                                                                                                          |
|                          | | `tip`       | [`#198754`]{.color-box} |                                                                                                                          |
|                          | | `caution`   | [`#fd7e14`]{.color-box} |                                                                                                                          |
|                          | | `warning`   | [`#ffc107`]{.color-box} |                                                                                                                          |
|                          | | `important` | [`#dc3545`]{.color-box} |                                                                                                                          |
|                          |                                                                                                                                                                    |
|                          | Note that style for callout is to have left border using type color, and header background to use a variation of this color.                                       |
+--------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+

You'll notice that some of the Sass variables use a `presentation-` prefix and some do not. The `presentation-` prefixed variables are specific to presentations, whereas the other variables are the same as ones used for standard Quarto [HTML Themes](/docs/output-formats/html-themes.qmd).

Since all Quarto themes use the same Sass format, you can use a single theme file for both HTML / website documents and presentations.

## Learning More

See these articles to learn more about using Reveal:

-   [Reveal Basics](index.qmd) covers the basic mechanics of creating presentations.
-   [Presenting Slides](presenting.qmd) describes slide navigation, printing to PDF, drawing on slides using a chalkboard, and creating multiplex presentations.
-   [Advanced Reveal](advanced.qmd) delves into transitions, animations, advanced layout and positioning, and other options available for customizing presentations.
-   [More About Quarto Themes](/docs/output-formats/html-themes-more.qmd) describes the layering system in more detail, including interactions with other SCSS files and [`_brand.yml`](/docs/authoring/brand.qmd).
```````

## File: docs/presentations/beamer.qmd
```````
---
title: "Beamer"
slide-format: beamer
---

## Overview

You can create [Beamer](https://ctan.org/pkg/beamer) (LaTeX/PDF) presentations using the `beamer` format. Beamer presentations support core presentation features like incremental content and 2-column layouts, and also provide facilities for customizing column layout, specifying frame attributes, and using Beamer themes.

By default, the Beamer format has `echo: false` and `warning: false`. As a result, executable code cells in standard Beamer documents won't show their source or warnings generated. As with other options, you can override this behavior in the document metadata or individually in each executable cell.

See the Beamer [format reference](/docs/reference/formats/presentations/beamer.qmd) for a complete list of all options available for Beamer output.

{{< include _creating-slides.md >}}

In Beamer, headings below `slide-level` will place content inside a `block` environment:

``` markdown
---
title: "Habits"
author: "John Doe"
format: 
  beamer:
    slide-level: 2
---

## Slide

### Simple block

Content
```

Add the `.alert` or `.example` class to place content inside an `alertblock` or `exampleblock` environment respectively:

``` markdown
---
title: "Habits"
author: "John Doe"
format: 
  beamer:
    slide-level: 2
---

## Slide

### Alert block {.alert}

Content

### Example block {.example}

Content
```

{{< include _incremental-lists.md >}}

{{< include _incremental-pause.md >}}

{{< include _columns.md >}}

The div containers with classes `columns` and `column` can optionally have an `align` attribute. The class `columns` can optionally have a `totalwidth` attribute or an `onlytextwidth` class.

``` markdown
:::: {.columns align=center totalwidth=8em}

::: {.column width="40%"}
contents...
:::

::: {.column width="60%" align=bottom}
contents...
:::

:::: 
```

The `align` attributes on `columns` and `column` can be used with the values `top`, `top-baseline`, `center` and `bottom` to vertically align the columns. It defaults to `top` in `columns`.

The `totalwidth` attribute limits the width of the columns to the given value.

``` markdown
::::  {.columns align=top .onlytextwidth}

::: {.column width="40%" align=center}
contents...
:::

::: {.column width="60%"}
contents...
:::

:::: 
```

The class `onlytextwidth` sets the `totalwidth` to `\textwidth`.

See Section 12.7 of the [Beamer User's Guide](http://mirrors.ctan.org/macros/latex/contrib/beamer/doc/beameruserguide.pdf) for more details.

## Beamer Options

Set additional options to change the appearance of PDF slides using `beamer`:

``` yaml
---
title: "Presentation"
format: 
  beamer: 
    aspectratio: 32
    navigation: horizontal
    theme: AnnArbor
    colortheme: lily
---
```

The options available are:

| Option | Description |
|------------------------|------------------------------------------------|
| `aspectratio` | Slide aspect ratio: `43` for 4:3 \[default\], `169` for 16:9, `1610` for 16:10, `149` for 14:9, `141` for 1.41:1, `54` for 5:4, `32` for 3:2 |
| `beamerarticle` | Produce an article from Beamer slides |
| `beameroption` | Extra beamer options provided to `\setbeameroption{}` |
| `institute` | Author affiliations: can be a list when there are multiple authors |
| `logo` | Logo image for slides |
| `navigation` | Controls navigation symbols (default is `empty` for no navigation symbols; other valid values are `frame`, `vertical`, and `horizontal`) |
| `section-titles` | Enables "title pages" for new sections (default is true) |
| `theme, colortheme, fonttheme, innertheme, outertheme` | Beamer themes |
| `themeoptions` | Options for LaTeX beamer themes (a list) |
| `titlegraphic` | Image for title slide |

## Frame Attributes

Sometimes it is necessary to add the LaTeX `[fragile]` option to a frame in beamer (for example, when using the `minted` environment). This can be forced by adding the `fragile` class to the heading introducing the slide:

``` markdown
# Fragile slide {.fragile}
```

All of the other frame attributes described in Section 8.1 of the [Beamer User's Guide](http://mirrors.ctan.org/macros/latex/contrib/beamer/doc/beameruserguide.pdf) may also be used: `allowdisplaybreaks`, `allowframebreaks`, `b`, `c`, `t`, `environment`, `label`, `plain`, `shrink`, `standout`, `noframenumbering`.

## Background Images

To provide a common background image for all slides in a Beamer presentation, use the `background-image` format option. For example:

``` yaml
---
format:
  beamer:
    background-image: background.png
---    
```
```````

## File: docs/presentations/index.qmd
```````
---
title: Presentations
format: html
slide-format: revealjs
---

## Overview

Quarto supports a variety of formats for creating presentations, including:

-   `revealjs` --- [reveal.js](revealjs/index.qmd) (HTML)

-   `pptx` --- [PowerPoint](powerpoint.qmd) (MS Office)

-   `beamer` --- [Beamer](beamer.qmd) (LaTeX/PDF)

There are pros and cons to each of these formats. The most capable format by far is `revealjs`, so it is highly recommended unless you have specific Office or LaTeX output requirements. Note that `revealjs` presentations can be presented as HTML slides or can be printed to PDF for easier distribution.

Below, we'll describe the basic syntax for presentations that applies to all formats. See the format-specific articles for additional details on their native capabilities.

{{< include _creating-slides.md >}}

{{< include _incremental-lists.md >}}

{{< include _columns.md >}}


## Learning More

See these format-specific articles for additional details on the additional capabilities of each format:

-   `revealjs` --- [reveal.js](revealjs/index.qmd) (HTML)

-   `pptx` --- [PowerPoint](powerpoint.qmd) (MS Office)

-   `beamer` --- [Beamer](beamer.qmd) (LaTeX/PDF)
```````

## File: docs/presentations/powerpoint.qmd
```````
---
title: "PowerPoint"
slide-format: pptx
is_pptx: true
---

## Overview

You can create [PowerPoint](https://en.wikipedia.org/wiki/Microsoft_PowerPoint) presentations using the `pptx` format. PowerPoint presentations support core presentation features like incremental bullets, 2-column layouts, and speaker notes, and can also be rendered using custom [PowerPoint templates].

See the PowerPoint [format reference](/docs/reference/formats/presentations/pptx.qmd) for a complete list of all options available for PowerPoint output.

{{< include _creating-slides.md >}}

{{< include _incremental-lists.md >}}

{{< include _columns.md >}}

{{< include _speaker-notes.md >}}


## PowerPoint Templates

By default PowerPoint output uses a fairly plain looking template. You can customize what template is used via the `reference-doc` option. For example:

``` yaml
---
title: "Presentation"
format:
  pptx:
    reference-doc: template.pptx
---
```

Nearly all templates included with recent versions of PowerPoint (either with `.pptx` or `.potx` extension) are known to work, as are most templates derived from these.

The specific requirement is that the template should contain layouts with the following names (as seen within PowerPoint, click on `Layout` under the `Home` menu to check):

-   Title Slide
-   Title and Content
-   Section Header
-   Two Content
-   Comparison
-   Content with Caption
-   Blank

For each name, the first layout found with that name will be used. If no layout is found with one of the names, Pandoc will output a warning and use the layout with that name from the default `reference-doc` instead.

### Creating a Template

To create a template from scratch, start with the default PowerPoint template as follows:

```{.bash filename="Terminal"}
quarto pandoc -o template.pptx --print-default-data-file reference.pptx 
```

Then edit the `template.pptx` file within PowerPoint as desired, and use it as the value for `reference-doc` (as shown above) when rendering your slides:

## Slide Layouts

When creating slides, the pptx writer chooses from a number of pre-defined layouts, based on the content of the slide:

**Title Slide**

:   This layout is used for the initial slide, which is generated and filled from the metadata fields `date`, `author`, and `title`, if they are present.

**Section Header**

:   This layout is used for what pandoc calls "title slides", i.e. slides which start with a header which is above the slide level in the hierarchy.

**Two Content**

:   This layout is used for two-column slides, i.e. slides containing a div with class `columns` which contains at least two divs with class `column`.

**Comparison**

:   This layout is used instead of "Two Content" for any two-column slides in which at least one column contains text followed by non-text (e.g. an image or a table).

**Content with Caption**

:   This layout is used for any non-two-column slides which contain text followed by non-text (e.g. an image or a table).

**Blank**

:   This layout is used for any slides which only contain blank content, e.g. a slide containing only speaker notes, or a slide containing only a non-breaking space.

**Title and Content**

:   This layout is used for all slides which do not match the criteria for another layout.

These layouts are chosen from the default `pptx` reference doc included with Pandoc, unless an alternative reference doc is specified using `reference-doc`.

## Background Images

To provide a common background image for multiple slides in a PowerPoint presentation, include the background image within the relevant slide layouts of a custom PowerPoint template (see [Creating a Template] for details on creating templates).

To add a background image to an individual slide, add the `background-image` attribute to the slide's heading. For example:

``` markdown
## Slide Title {background-image="background.png"}
```

Note that this also works even if you don't have slide heading text. For example:

``` markdown
## {background-image="background.png"}
```

For background images, only the "stretch" mode is supported, and the background image is centred around the slide in the image's larger axis, matching the observed default behaviour of PowerPoint.
```````

## File: docs/projects/binder.qmd
```````
---
title: "Using Binder With Quarto"
aliases: 
  - /docs/prerelease/1.4/binder.html
---

{{< include /docs/_require-1.4.qmd >}}

## Overview

The [Binder](https://mybinder.org/) project provides a stack of tools designed to make it easy to share computing environments. Binder makes it straightforward to provide users with a link that restores the computing environment, and allows them to interact with your project code.

To use Binder with a Quarto project, you need to include a set of configuration files that describe your computational environment. Quarto can automatically create these files with the `quarto use binder` command. Run the command from within your Quarto project directory. The command will scan the project and determine the configuration files required to restore the environment. Commit the generated files to your project repository and your project is Binder-ready.

Keep reading for a more detailed walkthrough of the process, or skip ahead to learn about specifying [Dependencies](#dependencies), the specific [Configuration Files](#configuration-files) that may be generated, or how to [Add a Link to Binder](#add-a-link-to-binder) in your document.

## Walkthrough

Consider a Quarto project that contains `_quarto.yml` and the document `histogram.qmd` which contains R executable code cells:

````{.markdown filename="histogram.qmd"}
---
title: Histogram
---

```{{r}}
hist(rnorm(100))
```
````

To build an environment for this project, Binder needs to install Quarto and R, and should use the same Quarto and R versions as those used to build the project locally. A nice addition to the environment is an IDE that makes sense for the project content---with R code cells in a `.qmd` document RStudio would be a good choice.

To have Quarto generate the files describing the requirements, within the project directory, run:

```{.bash filename="Terminal"}
quarto use binder
```

The command will first detect and report the project configuration: 

```{.default}
[✓] Detected Project configuration:

    Quarto       most recent prerelease
    JupyterLab   default               
    Engine       knitr                 
    R            4.3.2 (2023-10-31)    
    Editor       rstudio               

No files which provide dependencies were discovered. If you continue, no dependencies will be restored when running this project with Binder.

Learn more at:
https://www.quarto.org/docs/prerelease/1.4/binder.html#dependencies

? Do you want to continue? (Y/n) ›
```

Quarto detects the versions of Quarto and R in use, that our Quarto document uses the Knitr engine, and chooses an appropriate editor for the project.

Quarto will also detect files that describe R, Python or Julia dependencies - you can read more about these below in [Dependencies](#dependencies). This project has none of these files, since the R code requires no additional packages.

If you continue, Quarto will list the files it will create: 

```{.default}
The following files will be written:
┌─────────────┬────────────────────────────────────────┐
│ postBuild   │ Configures Quarto and supporting tools │
├─────────────┼────────────────────────────────────────┤
│ apt.txt     │ Installs Quarto required packages      │
├─────────────┼────────────────────────────────────────┤
│ runtime.txt │ Installs R and configures RStudio      │
└─────────────┴────────────────────────────────────────┘

 ? Continue? (Y/n) › 
```
 
After a final confirmation, Quarto will then write these files to the project:

```{.default}
Writing configuration files
[✓] postBuild
[✓] apt.txt
[✓] runtime.txt
```

These configuration files need to be committed to the project repository, along with the project files. 

At [mybinder.org](https://mybinder.org/) you provide a link to the project repository. Binder builds the computational environment from the configuration files, and provides you a link where users can interact with the contents of your repository in the computing environment it has built. 

You can try the Binder out for this project by following this Binder URL:
<https://mybinder.org/v2/gh/cwickham/binder-example/HEAD?urlpath=rstudio>

The `?urlpath=rstudio` at the end of this link, means the link will open an RStudio session. The Binder environment can take a little while to start up, but once it does, you should be in an RStudio instance with the project open. Since the computational environment has been configured, you can render the project in the usual ways (via the RStudio interface, or with `quarto render ` in the Terminal).

Depending on the language and engine your project uses Quarto may generate files other than those shown for this project. You can read more about the files that `quarto use binder` might create below in [Configuration Files](#configuration-files).

Most projects will have additional dependencies such as R, Python or Julia packages. As mentioned, Quarto can detect the common files that specify these dependencies. You can read more about these files next in [Dependencies](#dependencies).

## Dependencies

When your project is restored to a new computational environment using Binder, any dependencies that the project has must also be restored. The `quarto use binder` command won't detect computational dependencies from within your Quarto documents, but it will detect the files commonly used to describe them. The most common ways to describe them for the each environment are as follows:

| Language | Environment                                                                                                                     | File               |
|----------|---------------------------------------------------------------------------------------------------------------------------------|--------------------|
| R        | [renv](https://rstudio.github.io/renv/index.html)                                                                               | `renv.lock`        |
| R        | [Binder R Config](https://mybinder.readthedocs.io/en/latest/using/config_files.html#install-r-install-an-r-rstudio-environment) | `install.R`        |
| Python   | [Conda](https://docs.conda.io/projects/conda/en/stable/)                                                                        | `environment.yml`  |
| Python   | [Pip](https://pip.pypa.io/en/stable/user_guide/#requirements-files)                                                             | `requirements.txt` |
| Julia    | [Pkg](https://pkgdocs.julialang.org/v1/toml-files/)                                                                             | `project.toml`     |

Often these files are created as the result of using a virtual environment. See [Virtual Environments](/docs/projects/virtual-environments.qmd) for more about using Quarto with virtual environments.

## Configuration Files

The following files may be generated by the `quarto use binder` command. Note that the command will prompt before overwriting any user files that it didn't generate or any files that have been modified since they were generated.

`postBuild`

:   The post build script runs code after restoring the environment. This script is generated with commands required to ensure the proper version of Quarto is present in the environment, install any required tools like TinyTex or Chromium, and to configure VSCode and the Quarto extension for VSCode when applicable.

`apt.txt`

:   Provides a list of Debian packages to install with `apt-get`. This file is generated with all Quarto package dependencies.

`runtime.txt`

:   For R projects, this file will be generated with the appropriate R version, which is used to ensure that the same R version is present in the computational environment. This also will result in RStudio being configured and available when the computational environment is restored by a user.

`install.R`

:   For R projects, an `install.R` file will be generated to activate any `renv` environment that is present.


`.jupyter`

:   For projects using QMD files with the Jupyter engine, a `.jupyter` directory will be generated which will configure support for VSCode from within the JupyterLab environment.

You can read more about how Binder uses these configuration files in the [Binder documentation](https://mybinder.readthedocs.io/en/latest/using/config_files.html#config-files). 


::: callout-tip
Files generated by the `quarto use binder` command should be committed into your repo so they are available when the repo is used by Binder to restore the computational environment.
:::

## Add a Link to Binder

If your project is hosted on GitHub, you can add a link to the Binder for your project by adding `code-links: binder` to your document YAML:

```{.yaml filename="histogram.qmd"}
---
title: Histogram
code-links: binder
---
```

When rendered you'll see a "Launch Binder" link under Code Links:

![](images/code-links-binder.png){fig-alt="Screenshot of the Code Links section on a rendered HTML page showing a link with the text Launch Binder."}

If you have a manuscript project, you can also use `code-links: binder` in your manuscript configuration to get a link on your manuscript webpage:

```{.yaml filename="_quarto.yml"}
manuscript:
  code-links: binder
```
```````

## File: docs/projects/code-execution.qmd
```````
---
title: "Managing Execution"
format: html
---

## Overview

Rendering a list of input files has the potential to be quite time consuming depending on the computations required. There are a number of techniques you can use to minimize the time required to rebuild a site that has expensive computations.

## Incremental Render

When working on a project you are typically iterating on a single document at a time. You can render a single file (or single directory or list of files) incrementally by specifying it on the command-line:

``` {.bash filename="Terminal"}
quarto render introduction.qmd
quarto render subdir/
```

Even though you are rendering only part of the project, any associated project-handling code is still executed. So for example in a book project the entire book is still produced (using previously rendered versions of the other chapters).

## Freeze

{{< include _freeze-basics.md >}}

### Using Freeze

Freeze is generally used when you have either a large number of collaborators or many computational documents created over a longer period of time. In both cases it can be challenging to fully re-execute every document when you render the site. This could be because some documents have esoteric or environment-specific requirements (e.g. require access/authentication to a data source) or due to general fragility of dependencies over time. Using freeze ensures that you can always reproducibly render your site.

The computational results of documents executed with `freeze` are stored in the `_freeze` directory, and re-used when needed to fulfill document renders. You should check the contents of `_freeze` into version control so that others rendering the project don't need to reproduce your computational environment to render it in their environment.

Note that you'll still want to take care to fully re-render your project when things outside of source code change (e.g. input data). You can remove previously frozen output by deleting the `_freeze` folder at the root of your project.

### Virtual Environments {#freeze-virtual-environments}

You can also combine `freeze` with the use of virtual environments to divide your project into sub-directories that each have their own set of dependencies. This allows multiple collaborators to use a set of localized dependencies for the documents they are responsible for, but at the same time still be able to render the entire project without requiring all of its dependencies.

To learn how to create and use a virtual environment, see the full documentation on [Virtual Environments](virtual-environments.qmd)

Here's an example workflow of using virtual environments with freeze:

1.  Include `freeze: true` in the project execution options:

    ``` yaml
    execute:
      freeze: true
    ```

2.  Create a sub-directory of documents (e.g. `research`), initialize and use a virtual environment within it:

    ``` default
    research/
      document1.qmd
      document2.qmd
      env/
      requirements.txt
    ```

3.  When working within this sub-directory, activate the virtual environment before rendering its documents. For example:

    ``` {.bash filename="Terminal"}
    cd research
    source env/bin/activate
    quarto render               # render all files in subdir
    quarto render document1.qmd  # render a single-file
    ```

This sub-directory render won't use the cached `freeze` results but instead will re-run all of the computations using the directory-specific virtual environment. You can of course also include sub-directories within this directory and their documents will also be rendered using the parent virtual environment.

## Cache

You can use the `cache` option to cache the results of computations (using the [knitr cache](https://yihui.org/knitr/demo/cache/) for R documents, [Jupyter Cache](https://jupyter-cache.readthedocs.io/en/latest/) for Jupyter documents, or [`engine: julia`'s](../computations/julia.qmd#caching-1) built-in support):

``` yaml
execute:
  cache: true
```

Note that cache invalidation is triggered by changes in chunk source code (or other cache attributes you've defined). You may however need to manually refresh the cache if you know that some other input (or even time) has changed sufficiently to warrant an update. To do this, render either individual files or an entire project using the `--cache-refresh` option:

``` {.bash filename="Terminal"}
quarto render mydoc.qmd --cache-refresh # single doc
quarto render --cache-refresh           # entire project
```

## Notebooks

{{< include ../computations/_jupyter-execute.md >}}

## Working Dir

By default, the working directory for rendering files within a project is the directory of the file itself. If you prefer to use the main project directory instead, you can add the `execute-dir: project` option to your config:

``` yaml
project:
  execute-dir: project
```

Note that from within your code you can always determine the location of the currently executing Quarto project using the `QUARTO_PROJECT_DIR` environment variable.
```````

## File: docs/projects/environment.qmd
```````
---
title: "Environment Variables"
---

## Overview

You may have one or more environment variables that you want to make sure are set whenever you render your project. For example, you might be using environment variables to:

1.  Provide the URL of a server to download data from.
2.  Set the address of a proxy server (e.g. `HTTP_PROXY`).
3.  Provide credentials for accessing a remote server (note that below we cover best practices for using credentials stored in environment variables).
4.  Tune the behavior of executable code (e.g. `OMP_NUM_THREADS`, `ARROW_IO_THREADS`, etc.)
5.  Provide options for language interpreters (e.g. `PYTHONINSPECT` or `TZDIR`).
6.  Determine which versions of Python and R are used (e.g. `QUARTO_PYTHON`, `QUARTO_R`, `PY_PYTHON`, or `RETICULATE_PYTHON`).

Quarto projects can define a set of standard environment variables as well as vary which environment variables are defined based on the [active project profile](profiles.qmd). It's also possible to use environment variables that are defined only on the local system and not checked in to version control.

## Environment File

If you include an `_environment` file at the root level of your project alongside `_quarto.yml` the values defined within the file will be read and set into the environment when the project configuration is read. For example:

``` {.ini filename="_environment"}
HTTP_PROXY="https://proxy.example.com/"
OMP_NUM_THREADS=4
```

These environment variables will be available both within Quarto's execution context as well as in child processes (e.g. Jupyter kernels).

Note that variables defined in environment files *do not take precedence* over definitions that already exist in the external environment. Rather, they provide defaults that will be applied when no external variable of the same name is already defined.

You can include comments in environment files, as well as reference other environment variables. For example:

``` {.ini filename="_environment"}
# database server
DATABASE_SERVER=https://db.example.com
DATABASE_API=${DATABASE_SERVER}/api
```

When referencing another environment variable, it must either also be defined within the same file or already exist in the external environment. See the complete environment variable [parsing rules](https://github.com/denoland/deno_std/tree/main/dotenv#parsing-rules) for additional details on the syntax of environment files.

## Profile Environments

If you are using [Project Profiles](profiles.qmd) to adapt your projects for different scenarios, you can create a custom environment file that will be activated along with the profile. For example, if you have a profile named `production`, then the variables defined in `_environment-production` will be read and applied.

Here, we customize the `OMP_NUM_THREADS` environment variable to use more cores when running in production:

``` {.ini filename="_environment-production"}
OMP_NUM_THREADS=16
```

Note that profile environments are merged with the default `_environment` so you need only define the variables that vary in your profile and can rely on the defaults for others.

::: callout-important
If you have secrets (e.g. access tokens) that you need to specify using environment variables you shouldn't use profile environments (as they are often checked in to version control). We'll cover the recommended technique for this in [Managing Secrets](#managing-secrets) below.
:::

## Local Environment

When working on a project locally you may want to use different values for some environment variables. For example, you might want to add some variables that provide additional diagnostic output for Python execution.

You can do this by creating an `_environment.local` file. The values in the local file will override those specified in the default file:

``` {.ini filename="_environment.local"}
PYTHONDEVMODE=1
```

Note that `_environment.local` is not intended to be checked in to version control. Rather, it's designed for values that you want to activate only on your system. To facilitate this, Quarto automatically adds the following to your project `.gitignore` file:

``` {.ini filename=".gitignore"}
/_*.local
```

This is especially useful when your environment variables contain secrets, which we'll explore in more depth in the following section.

## Managing Secrets {#managing-secrets}

Frequently, credentials or authorization tokens are provided to code via environment variables. In many cases these credentials are required to render the project (for example, if the project is accessing data in a remote database or web service).

It's especially critical that these credentials are not checked in to version control. Typically, this is accomplished by a combination of:

1.  When running on a server or CI service, provide the environment variable as an encrypted secret. Details on how to do this vary between services (GitHub Actions has [deployed secrets](https://docs.github.com/en/actions/security-guides/encrypted-secrets), Posit Connect supports [content variables](https://docs.rstudio.com/connect/user/content-settings/#content-vars), etc.)

2.  For local development, define variables in the `_environment.local` file (and ignore this file in version control, as Quarto does by default). For example, here we specify AWS credentials in a local environment file:

    ``` {.ini filename="_environment.local"}
    AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE
    AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI
    ```

One problem this leaves is ensuring that these variables are always specified. The next section on required variables covers how to do this.

## Required Variables

If there are certain environment variables that need to be specified in order to render the project, you can create an `_environment.required` file. This file can be copied to `_environment.local` as a starting point for local authoring, and also serves as documentation for server environments regarding which variables need to be defined.

Returning to the example of AWS credentials, this `_environment.required` file provides documentation that these credentials will be required to render the project:

``` {.ini filename="_environment.required"}
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
```

Then, the `.local` file (which again, is not checked in to version control) would be populated with the actual credentials:

``` {.ini filename="_environment.local"}
AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE
AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI
```

Further, any server environment that wants to render this project could validate that the required variables have been specified, and fail to run (with an appropriate error message) if they are not.
```````

## File: docs/projects/profiles.qmd
```````
---
title: "Project Profiles"
editor: visual
---

## Overview

Project profiles enable you to adapt the options, environment, and content of your projects for different scenarios. For example:

-   You may want to have distinct execution behavior when running on a production server. For example, you may want to use `freeze` or `cache` when rendering locally but always execute all of the code when running on a CI server.
-   You may want to provide distinct access credentials for databases or web services depending on the profile.
-   You may want to create different versions of a book from the same source code (e.g. a basic and advanced version).

When a project profile is activated a number of things occur:

1)  Profile specific `config` is merged with the top-level `_quarto.yml`.
2)  Profile specific [environment variables](environment.qmd#profile-environments) are applied.
3)  Divs can use the `when-profile` attribute to target content specifically for that project.
4)  The `QUARTO_PROFILE` environment variable includes the profile name so that other code (e.g. Python or R code) can condition its behavior on the active profile.

### Examples

Here's an example of a `_quarto.yml` file that is extended by a `production` configuration defined in `_quarto-production.yml`. When activated, the `production` profile overrides the default rendering execution behavior (disabling the use of `freeze`):

``` {.yaml filename="_quarto.yml"}
project:
  type: website
  
execute: 
  freeze: true
```

``` {.yaml filename="_quarto-production.yml"}
execute:
  freeze: false
```

When the `production` profile is active, its configuration will be [merged](quarto-projects.qmd#metadata-merging) over the default project config (in this case resulting in the use of the frozen computational results being disabled).

Here's an example of using the `when-profile` attribute to include content only when the `advanced` profile is active:

``` markdown
::: {.content-visible when-profile="advanced"}
This content will only appear in the advanced version.
:::
```

The next section covers how to activate profiles, then subsequent sections go into more depth on the various capabilities of profiles.

## Activating Profiles

One or more named profiles can be activated by using either the `QUARTO_PROFILE` environment variable or the `--profile` command line argument.

Here we activate a profile using the `QUARTO_PROFILE` environment variable:

``` {.bash filename="Terminal"}
export QUARTO_PROFILE=production
quarto render
```

Here we activate a profile by passing the `--profile` argument on the Quarto command line:

``` {.bash filename="Terminal"}
quarto render --profile production
```

The use of the `--profile` command line argument entirely replaces any defined `QUARTO_PROFILE` within the environment.

Note that more than one profile can be activated at once. For example, here we activate both the `production` and `advanced` profiles:

``` {.bash filename="Terminal"}
quarto render --profile production,advanced
```

## Profile Configuration

Define profile-specific configuration by adding an additional project file that includes the name of the profile (for example, `_quarto-advanced.yml` for the `advanced` profile). For example, here we customize the `title` and `output-dir` based on the currently active profile:

``` {.yaml filename="_quarto.yml"}
project:
  title: "My Website"
  type: website
```

``` {.yaml filename="_quarto-advanced.yml"}
project:
  title: "My Website (Advanced)"
  output-dir: _site-advanced
```

::: {.callout-warning}
## `metadata-files` are not resolved in profiles

Instead of using `metadata-files` in a profile configuration, copy the contents of your metadata file directly into the profile configuration file.
:::

It's important to note that multiple profiles can be active. So the following enables you to vary configuration based on both `advanced` and `production` profiles:

``` {.yaml filename="_quarto.yml"}
project:
  title: "My Website"
  type: website
  
execute:
  freeze: true
```

``` {.yaml filename="_quarto-advanced.yml"}
project:
  title: "My Website (Advanced)"
  output-dir: _site-advanced
```

``` {.yaml filename="_quarto-production.yml"}
execute:
  freeze: false
```

The `advanced` and `production` profiles would each be applied if you specify them both:

``` {.bash filename="Terminal"}
# multiple profiles in environment
export QUARTO_PROFILE=advanced,production
quarto render

# multiple profiles on command line
quarto render --profile advanced,production
```

## Profile Content

You can also specify that content within your project only be included when a certain profile is active. You do this using the `.content-visible` class along with the `when-profile` attribute to a div or span. For example, here we defined a div that is included only for the `advanced` profile:

``` markdown
::: {.content-visible when-profile="advanced"}
This content will only appear in the advanced version.
:::
```

You can also exclude content from a given profile using the `unless-profile` attribute. Here we include content only when the profile is not `advanced`:

``` markdown
::: {.content-visible unless-profile="advanced"}
This content will appear in all versions save for advanced.
:::
```

It might be more clear to re-write the above using `.content-hidden`:

``` markdown
::: {.content-hidden when-profile="advanced"}
This content will be hidden in the advanced profile
:::
```

## Profile Groups

Often times a set of profile names form a mutually exclusive group, and you want to make sure that at least one of the profiles is always active. For example, here we define distinct chapter lists for `basic` and `advanced` profiles, along with a profile `group` entry indicating that they form a group:

``` {.yaml filename="_quarto.yml"}
project:
  type: book
  
book:
  title: "My Book"
  author: "Norah Jones"

profile:
  group: 
    - [basic, advanced]
```

``` {.yaml filename="_quarto-basic.yml"}
book:
  chapters:
    - intro.qmd
    - using.qmd
    - summary.qmd
```

``` {.yaml filename="_quarto-advanced.yml"}
book:
  chapters:
    - intro.qmd
    - using.qmd
    - advanced.qmd
    - summary.qmd
```

You'll note that the base options for `book` do not include a chapter list (as we rely on the profiles for distinct lists). This means that to successfully render the project, you always need to have a profile defined---this might be inconvenient especially for local authoring and preview.

By specifying a `group` we indicate that one of the profiles must be defined, and that the first one listed should be used as the default when no others are present.

## Default Profile

When authoring a Quarto project that uses profiles you might want to change which profile(s) are rendered by default to try out different variations of the project.

While you could certainly do this by defining environment variables in your shell, this isn't particularly convenient when using the integrated render and preview functionality in VS Code and RStudio.

To define a default profile that is used when an explicit `QUARTO_PROFILE` or `--profile` CLI argument is not present, add a `default` option to the `profile` key. For example, here we indicate that `development` should be the active profile if not otherwise specified:

``` {.yaml filename="_quarto.yml"}
profile:
  default: development
```
```````

## File: docs/projects/quarto-projects.qmd
```````
---
title: "Project Basics"
format: html
---

## Overview

Quarto projects are directories that provide:

-   A way to render all or some of the files in a directory with a single command (e.g. `quarto render myproject`).

-   A way to share YAML configuration across multiple documents.

-   The ability to redirect output artifacts to another directory.

-   The ability to freeze rendered output (i.e. don't re-execute documents unless they have changed).

In addition, projects can have special "types" that introduce additional behavior (e.g. [websites](/docs/websites/website-basics.qmd) or [books](/docs/books/book-basics.qmd)).

::: callout-note
If you are just getting started with Quarto and/or you don't have previous experience with markdown publishing systems, you probably want to skip learning about projects for now. Once you are comfortable with the basics, come back to this article to learn more.
:::

## Creating Projects

Use the `quarto create project` command to create a new project, using the prompt.

``` {.bash filename="Terminal"}
quarto create project
```

``` {.bash filename="Output"}
 ? Type
 ❯ default
   website
   blog
   manuscript
   book
   confluence
```

Or define the type and the project name as arguments.

``` {.bash filename="Terminal"}
quarto create project <type> <name>
```


## Shared Metadata

One of the most important features of Quarto Projects is the ability to share YAML metadata options across multiple documents. Shared metadata can be defined at both the project and directory level.

### Project Metadata

All Quarto projects include a `_quarto.yml` configuration file. Any document rendered within the project directory will automatically inherit the metadata defined at the project level. Here is an example of what the `_quarto.yml` file might look like:

``` {.yaml filename="_quarto.yml"}
project:
  output-dir: _output

toc: true
number-sections: true
bibliography: references.bib  
  
format:
  html:
    css: styles.css
    html-math-method: katex
  pdf:
    documentclass: report
    margin-left: 30mm
    margin-right: 30mm
```

Note that the project file contains both global options that apply to all formats (e.g. `toc` and `bibliography`) as well as format-specific options.

You can further customize project metadata based on different project profiles (e.g. development vs. production or creating multiple versions of a book or website). See the article on [Project Profiles](profiles.qmd) for additional details.

### Directory Metadata

You can also define metadata that should be inherited by only files within a directory. To do this, add a `_metadata.yml` file to the directory where you want to share metadata. For example, the following `_metadata.yml` sets up default Revealjs options for a series of presentations and disables `search` for documents within the directory:

``` {.yaml filename="_metadata.yml"}
format:
  revealjs: 
    menu: false
    progress: false
search: false
```

Options provided within these files use the same schema as `_quarto.yml` and are merged with any options you've already provided in `_quarto.yml`.

### Metadata Merging

Metadata defined within `_quarto.yml`, `_metadata.yml`, and document-level YAML options are merged together. Document level options take priority, followed by directory options and finally project-level options:

+------------------------+-----------------------------------------------------+
| File                   | Role                                                |
+========================+=====================================================+
| `_quarto.yml`          | Project level default options                       |
+------------------------+-----------------------------------------------------+
| `dir/_metadata.yml`    | Directory level default options (overrides project) |
+------------------------+-----------------------------------------------------+
| `dir/document.qmd`     | Document options (overrides directory and project)  |
+------------------------+-----------------------------------------------------+

Note that when metadata is combined, objects and arrays are merged rather than simply overwriting each other. For example, here is how project and directory level options that affect output format and bibliographies would be merged:

+------------------------------------+------------------------------------------+-------------------------------+
| ``` {.yaml filename="_quarto.yml"} | ``` {.yaml filename="dir/_metadata.yml"} | ``` {.yaml filename="merged"} |
| format:                            | format:                                  | format:                       |
|   html:                            |   html:                                  |   html:                       |
|     toc: true                      |     code-fold: true                      |     toc: true                 |
| bibliography:                      | bibliography:                            |     code-fold: true           |
|   - refs.bib                       |   - proj.bib                             | bibliography:                 |
|                                    |                                          |   - refs.bib                  |
|                                    |                                          |   - proj.bib                  |
| ```                                | ```                                      | ```                           |
+------------------------------------+------------------------------------------+-------------------------------+

: {tbl-colwidths="\[33,33,33\]"}

The one exception to metadata merging is `format`. 
If the document-level YAML defines a format, it must define the complete list of formats to be rendered. 

### Metadata Includes

You might find it convenient to break your metadata into multiple files. You can do this using the `metadata-files` option. For example, here we include some website options with a separate `_website.yml` in the `_quarto.yml`:

``` {.yaml filename="_quarto.yml"}
project:
  type: website
  
metadata-files:
  - _website.yml
```

``` {.yaml filename="_website.yml"}
website:
  navbar:
    background: primary
    left:
      - href: index.qmd
        text: Home
      - about.qmd
```

Files listed in `metadata-files` are merged with the parent file in the same fashion that project, directory, and document options are merged. This means that included files can both provide new options as well as combine with existing options.

### Local Config

Sometimes its useful to define local changes to project configuration that are not checked in to version control. You can do this by creating a `_quarto.yml.local` config file. For example, here we specify that we want to use the execution cache when running locally:

```{.yaml filename="_quarto.yml.local"}
execute:
  cache: true
```

Note that Quarto automatically writes an entry to `.gitignore` to ensure that `.local` files are not committed (note that [environment variables](environment.qmd#local-environment) can also be defined in a similar `.local` file).

## Rendering Projects

You can render files within a project either one-by-one or all at once (in either case, shared project metadata will be used).

To render all of the documents within a project, just use `quarto render` within the project directory (or target a specific directory with a command line argument):

``` {.bash filename="Terminal"}
# render project in current dir
quarto render 

# render project in 'myproject'
quarto render myproject
```

You can also render only the files within a sub-directory of a project. For example, if the current directory contains a project with sub-directories `tutorials`, `how-to`, and `articles`, you can render just the contents of `articles` as follows:

``` {.bash filename="Terminal"}
# render only documents in the 'articles' sub-directory
quarto render articles
```

Note that when rendering a project, command line arguments you pass to `quarto render` will be used for each file in the project. For example, this command will render only the PDF format:

``` {.bash filename="Terminal"}
quarto render --to pdf
quarto render myproject --to pdf
```

If you are working with Quarto from R, you can also render a project from the R console using the **quarto** R package.

``` r
library(quarto)
quarto_render()
```

{{< include _render-targets.md >}}

### Engine prioritization

Quarto supports different engines to execute code. Historically, the R, Python and Julia languages were only supported by one engine, each, so there was no need to choose an execution engine. With the addition of the native Julia engine, this changed.

When determining which execution engine to use for a given notebook, Quarto checks the available engines in a predefined order, which means that the Jupyter engine is always preferred for Julia over the native engine.

Starting with Quarto 1.7, instead of specifying `engine: julia` in the frontmatter of every notebook in a project, you can set a different prioritization order in your project file using the `engines` key.

All the engines you list there will be checked first in the order you provide. The remaining engines will be checked by Quarto in the usual predefined order. To enable the native Julia engine project-wide, it is therefore enough to add this line to your project file:

```{.yaml filename="_quarto.yml"}
engines: ['julia']
```

## Learning More

These articles provide additional documentation on more advanced features of Quarto projects:

-   [Managing Execution](code-execution.qmd) covers various techniques you can use to minimize the time required to rebuild a site that has expensive computations.

-   [Project Profiles](profiles.qmd) describes how you can adapt both the options and content of your projects for different scenarios (e.g. development vs. production or creating multiple versions of a book or website).

-   [Environment Variables](environment.qmd) covers how to define environment variables that should be set whenever your project is rendered (including how to vary those variables by project profile and/or for use in local development).

-   [Project Scripts](scripts.qmd) describes how to add periodic or pre/post render scripts to projects for special processing of input data and project outputs.

-   [Virtual Environments](virtual-environments.qmd) explores how to create project-specific package libraries, which helps with faithfully reproducing your environment over time as well as ensuring that upgrading a package in one project doesn't break other projects.
```````

## File: docs/projects/scripts.qmd
```````
---
title: "Project Scripts"
aliases: 
  - /docs/prerelease/1.5/pre-render.html
---

## Overview

Many more complex projects have additional processing that needs to take place periodically (e.g. data import and preparation) or even before/after each render. Project scripts are a way to incorporate this processing into your workflow.

## Periodic Scripts

You can use the `quarto run` command to run a TypeScript, R, Python, or Lua script. For example:

```{.bash filename="Terminal"}
quarto run import.py
```

Available script interpreters for `quarto run` include:

| Language   | Interpreter                                                                              |
|----------------|-------------------------------------------------------|
| TypeScript | [Deno](https://deno.land/) (embedded in Quarto)                                          |
| Python     | Python from `PATH` (or [launcher](https://www.python.org/dev/peps/pep-0397/) on Windows) |
| R          | Rscript from `PATH`                                                                      |
| Lua        | [Lua 5.3](https://www.lua.org/manual/5.3/) (embedded in Pandoc)                          |

Using TypeScript or Lua enables you to create scripts with no additional installation requirements. On the other hand, if your project is already using Python or R then scripts in those languages might be more convenient.

If you are using TypeScript, please be sure to consult the section below on [Deno Scripts](#deno-scripts) for additonal details on the Deno standard library and importing external scripts.

## Pre and Post Render

You can arrange for one or more scripts to execute before and/or after each render using the `pre-render` and `post-render` project options. For example:

``` yaml
project:
  type: website
  pre-render: prepare.py
  post-render: 
    - compress.ts
    - fix-links.py
```

Note that `pre-render` and `post-render` also support arbitrary shell commands. So you could for example use `make` to do data preparation this way:

``` yaml
project:
  type: website
  pre-render: make prepare
```

Pre and post render scripts are run with the main project directory.

The following environment variables are passed to pre and post-render scripts (note that all paths are *relative* to the main project directory):

| Variable                      | Description                                                                                                                                                                   |
|-----------------|-------------------------------------------------------|
| `QUARTO_PROJECT_RENDER_ALL`   | Set to "1" if this is a render of all files in the project (as opposed to an incremental render or a render for preview). This is unset if Quarto is not rendering all files. |
| `QUARTO_PROJECT_OUTPUT_DIR`   | Output directory                                                                                                                                                              |
| `QUARTO_PROJECT_INPUT_FILES`  | Newline separated list of all input files being rendered (passed only to `pre-render`)                                                                                        |
| `QUARTO_PROJECT_OUTPUT_FILES` | Newline separated list of all output files rendered (passed only to `post-render`).                                                                                           |

The project metadata and render list will be re-computed after any pre-render scripts have executed, allowing them to modify this project data.
For example, a pre-render script might generate additional `qmd` files or `ipynb` files that should be rendered.

Note that pre-render scripts cannot modify the project directory, the output directory, or the project type. 
If a pre-render script modifies any of these values, an error will be returned and the render will fail.

If you have a `pre-render` step that is expensive, you may want only run it when the entire project is being rendered. Here's how you would do this in the various supported script languages:

::: panel-tabset
## TypeScript

``` js
if (!Deno.env.get("QUARTO_PROJECT_RENDER_ALL")) {
  Deno.exit();
}
```

## Python

``` python
import os
if not os.getenv("QUARTO_PROJECT_RENDER_ALL"):
  exit()
```

## R

``` r
if (!nzchar(Sys.getenv("QUARTO_PROJECT_RENDER_ALL"))) {
  quit()
}
```

## Lua

``` lua
if not os.getenv("QUARTO_PROJECT_RENDER_ALL") then
  os.exit();
end
```
:::

### Advanced: large input and output file lists

In some execution environments, the maximum size of an environment might be limited. In this case, a pre- or post-render script invocation might fail when Quarto attempts to build the appropriate environment variables.

In such scenarios, you can declare the environment variable `QUARTO_USE_FILE_FOR_PROJECT_INPUT_FILES` (respectively, `QUARTO_USE_FILE_FOR_PROJECT_OUTPUT_FILES`) to direct Quarto to use the
declared file as the destination of the file list that would have been written in `QUARTO_PROJECT_INPUT_FILES` (respectively, `QUARTO_PROJECT_OUTPUT_FILES`).

## Deno Scripts {#deno-scripts}

If you want to create project scripts with TypeScript, `quarto run` enables you to use the [Deno](https://deno.land/) TypeScript interpreter bundled with Quarto. This interpreter also includes much of Deno's [standard library](https://docs.deno.com/runtime/manual/basics/standard_library). For example, to use the Deno YAML parser you would do this:

### Quarto 1.6 breaking changes

::: callout-warning

Quarto 1.6 includes updates to Deno and Deno's standard library which forced us to make breaking changes to the import syntax. We apologize for the inconvenience.

:::

``` typescript
import { parse } from "stdlib/yaml"; // Quarto 1.6 syntax
import { parse } from "https://deno.land/std/yaml/mod.ts"; // Quarto 1.5 and earlier syntax

const config = parse(Deno.readTextFileSync("_quarto.yml"));
```

Although Deno hosts its standard library online, it's important to note that in Quarto 1.5, the library is *not downloaded from a remote server* (in fact, importing from remote servers is disabled entirely in the Quarto Deno interpreter).
Quarto 1.6 ships with a version of Deno that has an unfortunate interaction between its standard library and the feature that disables downloading the library from the remote servers.
As a result, Quarto 1.6 might download some files (once, and then cache them) when the standard library is invoked.
Future versions of Quarto will ship with Deno 2, which does not suffer from this issue.

If you want to enforce the behavior from Quarto 1.5, you can set the [environment variable](/docs/advanced/environment-vars.qmd) `QUARTO_RUN_NO_NETWORK` to `true`.
Note that this means that the imports from `stdlib/` will not work in general.

You may come across example code that embeds versions directly in Deno library imports. For example:

``` typescript
import { format } from "https://deno.land/std@0.119.0/datetime/mod.ts";
import { format } from "jsr:@std/datetime@^0.224.0"
```

These version-bound imports **will not work** with Quarto (as its local standard library cache is populated with unversioned URLs). The correct form of the above import is thus:

``` typescript
import { format } from "stdlib/datetime";
```

You may also see examples of Deno code that imports 3rd party libraries directly from URLs.
As noted above, this functionality is generally not available in Quarto Deno scripts.
Rather, you should download any external libraries you wish to use, include them with your project source code, and import them using relative file paths.

### Making `.ts` scripts portable across multiple versions of Quarto

If you need your project or extension to both include TypeScript project scripts and work with Quarto 1.5 and 1.6, use the following technique:

``` typescript
const multiImport = async (...sources: string[]) => {
    for (const source of sources) {
        try {
            return await import(source);
        } catch (e) {}
    }
}
const { readLines } = await multiImport(
  "stdlib/io", // Quarto 1.6 syntax
  "https://deno.land/std/io/mod.ts", // Quarto 1.5 syntax
);
```
```````

## File: docs/projects/virtual-environments.qmd
```````
---
title: "Virtual Environments"
format: html
---

Virtual environments provide a project-specific version of installed packages. This both helps you to faithfully reproduce your environment (e.g. if you are collaborating with a colleague or deploying to a server) as well as isolate the use of packages so that upgrading a package in one project doesn't break other projects.

There are several popular flavors of virtual environment, we will cover the following ones here:

1.  [venv](https://packaging.python.org/guides/installing-using-pip-and-virtual-environments/#creating-a-virtual-environment) (built into Python 3)

2.  [conda](https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html) (built into Anaconda/Miniconda)

3.  [renv](https://rstudio.github.io/renv/articles/renv.html) (package for managing R environments)

Below we'll provide some example workflows for using these tools with Quarto. In these examples we'll assume that you are already within a project directory that contains Quarto documents (so the virtual environment will be created as a sub-directory of the project).

We'll also cover using virtual environments with [JupyterLab](#jupyterlab), [RStudio](#rstudio), and [VS Code](#vs-code).

Quarto can also detect the virtual environments discussed on this page to configure your project for Binder. Read more at [Using Quarto with Binder](binder.qmd).

## Using venv {#using-venv .platform-table}

Here we'll provide a brief run through of creating a venv for a Quarto project. See the [full documentation](https://packaging.python.org/guides/installing-using-pip-and-virtual-environments/#creating-a-virtual-environment) on using virtual environments with Python for additional details.

To create a new Python 3 virtual environment in the directory `env`:

+--------------+------------------------------------------------+
| Platform     | Command                                        |
+==============+================================================+
| Mac/Linux    | ```{.bash filename="Terminal"}                 |
|              | python3 -m venv env                            |
|              | ```                                            |
+--------------+------------------------------------------------+
| Windows      | ```{.powershell filename="Terminal"}           |
|              | py -m venv env                                 |
|              | ```                                            |
+--------------+------------------------------------------------+

To use the environment you need to activate it. This differs slightly depending on which platform / shell you are using:

+---------------+-----------------------------------------+
| Shell         | Command                                 |
+===============+=========================================+
| Mac/Linux     | ```{.bash filename="Terminal"}          |
|               | source env/bin/activate                 |
|               | ```                                     |
+---------------+-----------------------------------------+
| Windows\      | ```{.powershell filename="Terminal"}    |
| (Command)     | env\Scripts\activate.bat                |
|               | ```                                     |
+---------------+-----------------------------------------+
| Windows\      | ```{.powershell filename="Terminal"}    |
| (PowerShell)  | env\Scripts\Activate.ps1                |
|               | ```                                     |
+---------------+-----------------------------------------+

::: callout-note
#### PowerShell Note

Note that you may receive an error about running scripts being disabled when activating within PowerShell. If you get this error then execute the following command:

```{.bash filename="Terminal"}
Set-ExecutionPolicy -ExecutionPolicy Unrestricted -Scope CurrentUser
```
:::

Once you've activated the environment, you need to ensure that you have the packages required to render your documents. This will typically encompass `jupyter` / `jupyterlab` plus whatever other packages are used in your Python code. Use `pip` to install packages into your environment. For example:

+--------------+------------------------------------------------------+
| Platform     | Command                                              |
+==============+======================================================+
| Mac/Linux    | ```{.bash filename="Terminal"}                       |
|              | python3 -m pip install jupyter matplotlib pandas     |
|              | ```                                                  |
+--------------+------------------------------------------------------+
| Windows      | ```{.powershell filename="Terminal"}                 |
|              | py -m pip install jupyter matplotlib pandas          |
|              | ```                                                  |
+--------------+------------------------------------------------------+

Assuming you installed all of the required packages (likely more than just `pandas` and `matplotlib`) you should now be able to `quarto render` documents within the directory.

To deactivate an environment use the `deactivate` command:

```{.bash filename="Terminal"}
deactivate
```

### Saving Environments {.platform-table}

To make your environment reproducible, you need to create a `requirements.txt` file that enumerates all of the packages in use. To do this use the `pip freeze` command:

+--------------+----------------------------------------------+
| Platform     | Command                                      |
+==============+==============================================+
| Mac/Linux    | ```{.bash filename="Terminal"}               |
|              | python3 -m pip freeze > requirements.txt     |
|              | ```                                          |
+--------------+----------------------------------------------+
| Windows      | ```{.powershell filename="Terminal"}         |
|              | py -m pip freeze > requirements.txt          |
|              | ```                                          |
+--------------+----------------------------------------------+

You should generally check the `requirements.txt` file into version control.

### Restoring Environments {.platform-table}

To reproduce the environment on another machine you create an empty environment, activate it, and then `pip install` using `requirements.txt`:

First, follow the [instructions above](#using-venv) for creating and activating a virtual environment for your platform/shell.

Then, install packages from `requirements.txt`:

+--------------+------------------------------------------------+
| Platform     | Command                                        |
+==============+================================================+
| Mac/Linux    | ```{.bash filename="Terminal"}                 |
|              | python3 -m pip install -r requirements.txt     |
|              | ```                                            |
+--------------+------------------------------------------------+
| Windows      | ```{.bash filename="Terminal"}                 |
|              | py -m pip install -r requirements.txt          |
|              | ```                                            |
+--------------+------------------------------------------------+

## Using conda {.platform-table}

This section will cover the basics of creating and using conda environments with Quarto projects. See this article on [managing project specific environments](https://towardsdatascience.com/managing-project-specific-environments-with-conda-406365a539ab) with Conda for additional details.

To create a new environment in the directory `env`:

```{.bash filename="Terminal"}
conda create --prefix env python
```

If this is the first time you've used conda in your shell, you may need to execute one of the following commands before using other conda tools:

+--------------------+---------------------------------------+
| Shell              | Command                               |
+====================+=======================================+
| Newer Mac\         | ```{.bash filename="Terminal"}        |
| (Zsh)              | conda init zsh                        |
|                    | ```                                   |
+--------------------+---------------------------------------+
| Linux / Older Mac\ | ```{.bash filename="Terminal"}        |
| (Bash)             | conda init bash                       |
|                    | ```                                   |
+--------------------+---------------------------------------+
| Windows\           | ```{.powershell filename="Terminal"}  |
| (Command)          | conda init cmd.exe                    |
|                    | ```                                   |
+--------------------+---------------------------------------+
| Windows\           | ```{.powershell filename="Terminal"}  |
| (PowerShell)       | conda init powershell                 |
|                    | ```                                   |
+--------------------+---------------------------------------+

You will likely need to exit and restart your terminal for `conda init` to be reflected in your session.

To use the environment you need to activate it, which you do as follows:

+--------------+--------------------------------------+
| Platform     | Command                              |
+==============+======================================+
| Mac/Linux    | ```{.bash filename="Terminal"}       |
|              | conda activate ./env                 |
|              | ```                                  |
+--------------+--------------------------------------+
| Windows      | ```{.powershell filename="Terminal"} |
|              | conda activate .\env                 |
|              | ```                                  |
+--------------+--------------------------------------+

Once you've activated the environment, you need to ensure that you have the packages required to render your documents. This will typically encompass `jupyter` / `jupyterlab` plus whatever other packages are used in your Python code. Use `conda install` to install packages into your environment. For example:

```{.bash filename="Terminal"}
conda install jupyter
conda install pandas matplotlib 
```

Assuming you installed all of the required packages (likely more than just `pandas` and `matplotlib`) you should now be able to `quarto render` documents within the directory.

Use `conda deactivate` to exit an activated environment:

```{.bash filename="Terminal"}
conda deactivate
```

### Saving Environments

To make your environment reproducible, you need to create a `environment.yml` file that enumerates all of the packages in use. Do this using the `conda env export` command:

```{.bash filename="Terminal"}
conda env export > environment.yml
```

You should generally check the `environment.yml` file into version control.

### Restoring Environments

To reproduce the environment on another machine you just pass the `environment.yml` file as an argument to `conda env create`:

```{.bash filename="Terminal"}
conda env create --prefix env -f environment.yml
```

### More information

For more on conda's `environment.yml`, see Conda's [Managing Environments](https://conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html) documentation.

## Using renv

The [renv](https://rstudio.github.io/renv/articles/renv.html) package provides functionality similar to the venv and conda, but for R packages. To create a new renv environment, install the **renv** package from CRAN then call the `renv::init()` function:

``` r
install.packages("renv")
renv::init()
```

As part of initialization, your `.Rprofile` file is modified to ensure that the renv is activated automatically at the start of each R session.

If you plan on using **both** R and Python in your project, you can have renv automatically create and manage a Python virtual environment as follows:

``` r
renv::use_python()
```

To install R packages use the standard R `install.packages` function. You can also install GitHub packages using the `renv::install` function. For example:

``` r
install.packages("ggplot2")      # install from CRAN
renv::install("tidyverse/dplyr") # install from GitHub
```

To install Python packages just use `pip` as described above from the built-in RStudio terminal.

### Saving Environments

To record the current versions of all R (and optionally Python) packages, use the `renv::snapshot()` function:

``` r
renv::snapshot()
```

This will record an `renv.lock` file for R packages and a `requirements.txt` file for Python packages). These files should be checked into version control.

### Restoring Environments

To reproduce the environment on another machine use the `renv::restore()` function:

``` r
renv::restore()
```

## JupyterLab {#jupyterlab .platform-table}

To use Jupyter or JupyterLab within a Python virtual environment you just need to activate the environment and then launch the Jupyter front end. For example:

+----------------------+--------------------------------------+
| Shell                | Command                              |
+======================+======================================+
|                      | ```{.bash filename="Terminal"}       |
| Mac/Linux            | source env/bin/activate              |
|                      | python3 -m jupyter lab               |
|                      | ```                                  |
+----------------------+--------------------------------------+
|                      | ```{.powershell filename="Terminal"} |
| Windows\             | env\Scripts\activate.bat             |
| (Command)            | py -m jupyter lab                    |
|                      | ```                                  |
+----------------------+--------------------------------------+
|                      | ```{.powershell filename="Terminal"} |
| Windows\             | env\Scripts\Activate.ps1             |
| (PowerShell)         | py -m jupyter lab                    |
|                      | ```                                  |
+----------------------+--------------------------------------+

All of the Python packages installed within the `env` will be available in your Jupyter notebook session. The workflow is similar if you are using conda environments.

## RStudio {#rstudio}

If you are using Quarto within RStudio it is strongly recommended that you use the [current release](https://www.rstudio.com/products/rstudio/download/) of RStudio from <https://www.rstudio.com/products/rstudio/download/> (the documentation below assumes you are using this build).

### renv

If you are using **renv**, RStudio will automatically do the right thing in terms of binding Quarto to the R and/or Python packages in your project-local environments.

If you need to install R packages, use `install.packages`; if you need to install Python packages, simply use `pip` or `conda` within the terminal as described above.

### venv / condaenv

RStudio will automatically activate any venv or condaenv that it finds within a project directory. Just be sure to create an RStudio project within the same directory where you created your `env` and things will work as expected with no additional configuration.

::: callout-note

## Using python and r together

If your quarto document includes both `{python}` and `{r}` code blocks, then quarto will automatically use Knitr engine and [reticulate](https://rstudio.github.io/reticulate/) R package to execute the python content and may use a different version of python than is included in your environment. To direct RStudio to use a specific version of python, you can specify explicitly a path to an installed python version, e.g. by adding the following line to the `.Rprofile` file in your project directory:

```r
Sys.setenv(RETICULATE_PYTHON = "/path/to/your/env/bin/python")
```

More about Python Version Configuration for **reticulate** at <https://rstudio.github.io/reticulate/articles/versions.html>
:::

If you need to install Python packages, simply use `pip` or `conda` within the terminal as described above.

## VS Code {#vs-code}

If you create a virtual environment with `venv` in the `env/` directory as described above, Visual Studio Code should automatically discover that environment when you load a workspace from the environment's parent directory.

Visual Studio Code will also automatically detect a conda environment, but you need to bind it to the current session with the **Python: Select Interpreter** command.

If you have installed the Quarto executable in a conda environment rather than in a system-wide install, you need to launch VSCode from a terminal with that conda environment activated in order for VSCode to detect the conda installation of Quarto.
The Quarto path setting in the Quarto VSCode extension does not work with Quarto installed in conda environments.

You can read more about VS Code support for Python virtual environments here: <https://code.visualstudio.com/docs/python/environments>.
```````

## File: docs/publishing/_confluence_examples/confluence-demo.qmd
```````
---
title: Confluence Demo
format: confluence-html
---

## Overview

Write your content in Quarto documents and publish to Confluence.
```````

## File: docs/publishing/ci.qmd
```````
---
title: "Publishing with Continuous Integration (CI)"
---

## Overview

Continuous Integration (CI) refers to the practice of automatically publishing content from code checked in to a version control system. While publishing using CI is a bit more involved to configure, it has several benefits, including:

-   Content is automatically published whenever source code changes (you don't need to remember to explicitly render).

-   Rendering on another system ensures that your code is reproducible (but note that this can be double-edged sword if rendering has special requirements---see the discussion below on [Rendering for CI]).

-   Not checking rendered output into version control makes diffs smaller and reduces merge conflicts.

This article covers how to implement CI for Quarto using GitHub Actions (a service run by GitHub), ordinary shell commands (which can be made to work with any CI service), and with Posit Connect.

## Rendering for CI

Before you start using a CI server you'll need to think about where you want executable code (e.g. R, Python, or Julia code) to run and where you want `quarto render` to run. You might reflexively assume that you'll always want to run everything on the CI server, however doing so introduces a number of complexities:

1.  You need to make sure that the appropriate version of Quarto is available in the CI environment.

2.  You need to reconstitute all of the dependencies (required R, Python, or Julia packages) in the CI environment.

3.  If your code needed any special permissions (e.g. database or network access) those permissions need also be present on the CI server.

4.  Your project may contain documents that can no longer be easily executed (e.g. blog posts from several years ago that use older versions of packages).

In light of the above, you can think about rendering as a continuum that extends from running everything (including `quarto render`) locally all the way up to running everything remotely on CI:

-   **Local Execution and Rendering** --- Run everything in your local environment and then check output (e.g. the `_site` directory) into version control. In this scenario the CI server is merely making sure that the checked in content is copied/deployed to the right place every time you commit. You might choose this approach to place minimal requirements on software that needs to be present on the CI server.

-   **Local Execution with CI Rendering** --- Execute R, Python, or Julia code locally and use Quarto's ability to [freeze computational output](/docs/projects/code-execution.qmd#freeze) to save the results of computations into the `_freeze` directory. Render the site on the CI server (which will use the computations stored in `_freeze`). Use this approach when its difficult to arrange fully re-executing code on the CI server.

-   **CI Execution and Rendering** --- Execute all code and perform rendering on the CI server. While this is the gold standard of automation and reproducibility, it will require you to capture your R, Python, or Julia dependencies (e.g. in an `renv.lock` file or `requirements.txt` file) and arrange for them to be installed on the CI server. You will also need to make sure that permissions (e.g. database access) required by your code are available on the CI server.

Below we'll describe how to implement each of these strategies using [GitHub Actions], ordinary [Shell Commands] (which you should be able to adapt to any CI environment), or [Posit Connect](rstudio-connect.qmd).

## GitHub Actions

[GitHub Actions](https://docs.github.com/en/actions){data-heading="GitHub Actions"} is a Continuous Integration service from GitHub, and an excellent choice if your source code is already managed it a GitHub repository. Quarto makes available a set of [standard](https://github.com/quarto-dev/quarto-actions) GitHub Actions that make it easy to install Quarto and then render and publish content.

Learn about using GitHub Actions with various publishing services here:

-   [Quarto Pub](quarto-pub.qmd#github-action)
-   [GitHub Pages](github-pages.qmd#github-action)
-   [Netlify](netlify.qmd#github-action)

If you want to use the standard Quarto actions as part of another workflow see the [GitHub Actions for Quarto](https://github.com/quarto-dev/quarto-actions) repository.

## Posit Connect

If you are publishing a source code version of your content to Posit Connect it's possible to configure Connect to retrieve the code from a Git repository and then render and execute on the Connect Server.

To learn more about this, see the documentation on [Git Backed Content](https://docs.rstudio.com/connect/user/git-backed/) for Posit Connect.

## Shell Commands

This section covers using the `quarto publish` command on a server where no user interaction is possible. This involves the following steps:

1.  Rendering your content.
2.  Specifying where to publish (which service/server, publishing target id, etc.).
3.  Providing the appropriate publishing credentials.

{{< include _netlify-ci-example.md >}}

Below we'll cover the various components of a publishing script as well as provide a few additional complete examples.

### Rendering for Publish

By default when you execute the publish command, your site or document will be automatically re-rendered:

```{.bash filename="Terminal"}
quarto publish
```

This is generally recommended, as it ensures that you are publishing based on the very latest version of your source code.

If you'd like to render separately (or not render at all) you can specify the `--no-render` option:

```{.bash filename="Terminal"}
quarto publish --no-render
```

By default, the call to `quarto publish` will execute all R, Python, or Julia code contained in your project. This means that you need to ensure that the requisite version of these tools (and any required packages) are installed on the CI server. How to do this is outside the scope of this article---to learn more about saving and restoring dependencies, see the article on [Virtual Environments](/docs/projects/virtual-environments.qmd).

If you want to execute code locally then only do markdown rendering on CI, you can use Quarto's [freeze](/docs/projects/code-execution.qmd#freeze) feature. For example, if you add this to your `_quarto.yml` file:

``` yaml
execute:
  freeze: true
```

Then when you render locally computations will run and their results saved in a `_freeze` folder at the root of your project. Then, when you run `quarto publish` or `quarto render` on the CI server these computations do not need to be re-run (only markdown rendering will occur on the server).

### Publishing Destination

There are two ways to specify publishing destinations for the `quarto publish` command:

1.  Via the contents of a `_publish.yml` file created from a previous publish.
2.  Using command line parameters (e.g. `--id` and `--server`).

When you execute the `quarto publish` command, a record of your publishing destination is written to a `_publish.yml` file alongside your source code. For example:

``` yaml
- source: project
  netlify:
    - id: "5f3abafe-68f9-4c1d-835b-9d668b892001"
      url: "https://tubular-unicorn-97bb3c.netlify.app"
```

You can check the `_publish.yml` file into source control so it is available when you publish from the CI server. If you execute the `quarto publish` command with no arguments and the above `_publish.yml` is in the project directory, then the publish will target Netlify with the indicated `id`:

```{.bash filename="Terminal"}
quarto publish netlify
```

You can also specify a publishing destination via explicit command line arguments. For example:

```{.bash filename="Terminal"}
quarto publish netlify --id 5f3abafe-68f9-4c1d-835b-9d668b892001
```

If you have multiple publishing targets saved within `_publish.yml` then the `--id` option can be used to select from among them.

### Publishing Credentials

You can specify publishing credentials either using environment variables or via command line parameters. The following environment variables are recognized for various services:

| Service         | Variables                                                                 |
|-----------------|---------------------------------------------------------------------------|
| Quarto Pub      | `QUARTO_PUB_AUTH_TOKEN`                                                   |
| Netlify         | `NETLIFY_AUTH_TOKEN`                                                      |
| Posit Connect   | `CONNECT_SERVER` and `CONNECT_API_KEY`                                    |
| Confluence      | `CONFLUENCE_AUTH_TOKEN`, `CONFLUENCE_USER_EMAIL`, and `CONFLUENCE_DOMAIN` |

Set these environment variables within your script before calling `quarto publish`. For example:

```{.bash filename="Terminal"}
export NETLIFY_AUTH_TOKEN="45fd6ae56c"
quarto publish netlify 
```

Note that you can also specify the publishing target `--id` as a command line argument. For example:

```{.bash filename="Terminal"}
export CONNECT_SERVER=https://connect.example.com/
export CONNECT_API_KEY=7C0947A852D8
quarto publish connect --id DDA36416-F950-4647-815C-01A24233E294
```

### Complete Examples

Here are a few complete examples that demonstrate various ways to write publishing shell scripts:

```{.bash filename="Terminal"}
# publish (w/o rendering) to quarto pub based on _publish.yml
export QUARTO_PUB_AUTH_TOKEN="45fd6ae56c"
quarto publish quarto-pub --no-render
```

```{.bash filename="Terminal"}
# render and publish to netlify based on _publish.yml
export NETLIFY_AUTH_TOKEN="45fd6ae56c"
quarto publish netlify
```

```{.bash filename="Terminal"}
# publish (w/o rendering) to netlify with explicit id
export NETLIFY_AUTH_TOKEN="45fd6ae56c"
quarto publish netlify --id DDA36416-F950-4647-815C-01A24233E294 --no-render
```

```{.bash filename="Terminal"}
# publish (w/o rendering) to connect based on _publish.yml
export CONNECT_SERVER=https://connect.example.com/
export CONNECT_API_KEY=7C0947A852D8
quarto publish connect --no-render
```

```{.bash filename="Terminal"}
# render and publish to connect with explicit id
export CONNECT_SERVER=https://connect.example.com/
export CONNECT_API_KEY=7C0947A852D8
quarto publish connect --id DDA36416-F950-4647-815C-01A24233E294
```

```{.bash filename="Terminal"}
# render and publish to Confluence based on _publish.yml
export CONFLUENCE_AUTH_TOKEN=7C0947A852D8
export CONFLUENCE_USER_EMAIL=email@domain.com
export CONFLUENCE_DOMAIN=https://domain.atlassian.net/
quarto publish confluence --no-browser --no-prompt
```
```````

## File: docs/publishing/confluence.qmd
```````
---
title: "Confluence"
provider: confluence
provider-name: Confluence
aliases:
  - /docs/prerelease/1.3/confluence.html
---

{{< include ../_require-1.3.qmd >}}

## Overview

[Atlassian Confluence](https://www.atlassian.com/software/confluence) is a publishing platform for supporting team collaboration. Confluence has a variety of hosting options which include both free and paid subscription plans.

::: callout-important

## Confluence Cloud Only

Publishing is currently limited to Confluence Cloud. 
We do not yet support publishing to Confluence Server or Confluence Data Center.

:::

Quarto provides support for publishing individual documents, as well as projects composed of multiple documents, into [Confluence Spaces](https://support.atlassian.com/confluence-cloud/docs/use-spaces-to-organize-your-work/).

::: {layout-ncol="2"}
![A Quarto Document](images/confluence-qmd.png){fig-alt="A screenshot of a Quarto document with the title Using R - Doc in the RStudio Editor."}

![Published to Confluence](images/confluence-page.png){fig-alt="A screenshot of a document with the title Using R - Doc in a Confluence Space."}
:::

::: {layout="[800,969]"}
![A Quarto Project](images/confluence-project.png){fig-alt="A screenshot of a Quarto project in VS Code. On the left in the Explorer, the project folder is called 'Guide-site', and contains folders 'authoring', and 'computation', along with some other files. A document from the folder 'python' inside the folder 'computations' with the title 'Using Python - site' is open in the Source Pane. "}

![Published to Confluence](images/confluence-site.png){fig-alt="A screenshot of Space in Confluence. On the left in the Sdiebar under Pages is a page called 'Guide-site'. Nested under this page are pages called 'authoring', and 'computation', along with some other pages. The 'computation' page item is expanded and shows a page called 'Using Python - site', nested under a page called 'python'. A page is displayed on the right with the title 'Using Python - site'"}
:::

Managing Confluence content with Quarto allows you to author content in Markdown, manage that content with your usual version control tools like Git and GitHub, and leverage Quarto's tools for including computational output.

The next section, [Confluence Publishing Basics](#publishing-basics), walks through the process of publishing a single page to Confluence, including how to [set up your Confluence account](#setting-up-account) in Quarto, and how to [specify a destination](#selecting-destination) for your document in your Confluence Space.

Before you use Confluence Publishing for your own project you'll want to read the remaining sections on this page:

-   [Publishing Projects](#collection-of-documents) describes how to publish a collection of documents, including how your [project structure](#project-structure) translates to the structure of pages in your Confluence Space.

-   [Publishing Workflow](#publishing-workflow) describes the model for making updates to Confluence pages published from Quarto, including the page permissions that are set when you publish from Quarto.

-   [Authoring for Confluence](#authoring) describes some of the differences between authoring for Confluence and authoring for a Quarto website.

-   [Publishing Settings](#publishing-settings) covers how to manage your publishing settings.

::: callout-important
## Be Careful with Sensitive or Confidential Content

Publishing Quarto documents to a public Confluence space will make the content of those documents public. It is your responsibility to understand the permissions of your Confluence Space and verify your publishing destination to protect against any sensitive or confidential content from being made publicly available.
:::

## Confluence Publishing Basics {#publishing-basics}

To demonstrate the process of publishing to Confluence, we'll take a single document, [`confluence-demo.qmd`](_confluence_examples/confluence-demo.qmd), and publish it as a page to a Confluence space. Here's the contents of `confluence-demo.qmd`:

``` markdown
---
title: Confluence Demo
format: confluence-html
---

## Overview

Write your content in Quarto documents and publish to Confluence.
```

Notice that the format is set to `confluence-html` in the document YAML. This allows the local preview of the document to mimic the eventual appearance on Confluence. You can preview your document locally as you would any other Quarto document, by using the **Render** command in VS Code and RStudio, or by using `quarto preview` from the command line:

``` {.bash filename="Terminal"}
quarto preview confluence-demo.qmd
```

The result of previewing `confluence-demo.qmd` locally is shown below:

![](images/confluence-demo-preview.png){fig-alt="Screenshot of the result of previewing the file confluence-demo.qmd."}

The preview attempts to provide an accurate idea of how your content will look. However, some items in the preview are merely placeholders, like the publishing date, author, and read time in the header. When the document is published to Confluence, these items will be generated by Confluence.

To publish a document to Confluence use `quarto publish confluence` followed by the file name:

``` {.bash filename="Terminal"}
quarto publish confluence confluence-demo.qmd
```

Unless you've published to Confluence before, you'll be prompted to set up an account and select a destination for your page.

### Setting Up Your Account {#setting-up-account}

When you publish to Confluence for the first time, you'll be prompted to set up a Confluence account in Quarto. To prepare, log in to Confluence, and navigate to the space, or page within a space, which you wish to publish to.

You'll first be prompted for your Confluence Domain. This is the first part of the URL to the Confluence page you wish to publish to. For example:

``` {.bash filename="Terminal"}
? Confluence Domain: ›
❯ e.g. https://mydomain.atlassian.net/
```

Next, you'll be asked to enter the Email Address for the account used in this Confluence Domain (if you are unsure, look at your account profile on Confluence):

``` {.bash filename="Terminal"}
? Confluence Account Email: › 
```

Finally, you'll be asked for an API Token:

``` {.bash filename="Terminal"}
? Confluence API Token: ›
❯ Create an API token at https://id.atlassian.com/manage/api-tokens
```

Confluence API Tokens are specific to your account. You'll need to [create a token](https://id.atlassian.com/manage/api-tokens), copy, and then paste it into this prompt. For more information on Access Tokens please see the [Confluence Documentation on API Tokens](https://support.atlassian.com/atlassian-account/docs/manage-api-tokens-for-your-atlassian-account/).

Quarto saves this account information (domain, email and token) so it can be used for future calls to `quarto publish confluence`. The final prompt will ask you to select a destination for your page.

### Selecting a Destination {#selecting-destination}

Pages in Confluence are arranged in a hierarchy: every page has a parent. When you publish from Quarto to Confluence you'll be asked to specify the parent for your page by providing its URL:

``` {.bash filename="Terminal"}
? Space or Parent Page URL: ›
❯ Browse in Confluence to the space or parent, then copy the URL
```

If you want your page to be at the top level of your space, specify the space itself, e.g.:

```         
https://domain.atlassian.net/wiki/spaces/ABBR
```

Otherwise, specify the URL for the parent page, e.g.:

```         
https://domain.atlassian.net/wiki/spaces/ABBR/pages/123456
```

Once the destination is specified, Quarto will render the page for publishing, publish it to Confluence, and open a browser to view the published page.

An example of the published version of `confluence-demo.qmd` is shown below:

![](images/confluence-demo-published.png){fig-alt="Screenshot of the published confluence-demo.qmd file on Confluence. In the sidebar, the page Confluence Demo is listed under Pages at the top level."}

In the sidebar navigation this page is listed at the top level under Pages because the destination was set to the space URL.

## Publishing Projects {#collection-of-documents}

To publish a collection of documents, organize your documents in a [Quarto project](/docs/projects/quarto-projects.qmd), and use the `confluence` project type. Here's a minimal `_quarto.yml` file for a Confluence project:

``` {.yaml filename="_quarto.yml"}
project:
  type: confluence
```

Include this file in a project directory, then arrange your `.qmd` or `.ipynb` documents into whatever hierarchy you want to use for publishing. For example:

``` default
_quarto.yml
index.qmd
team.qmd
projects/
  planning.qmd
  retrospectives.qmd
```

Alternatively, to get started with a template project in a new directory, use `quarto create`: 

``` {.bash filename="Terminal"}
quarto create project confluence
```

As with documents, you can preview your project using the **Render** command in VS Code and RStudio, or by using `quarto preview` from the command line:

``` {.bash filename="Terminal"}
quarto preview
```

The project preview produces an HTML website with navigation automatically added to the sidebar. This navigation is for convenience, the navigation for the published pages will be handled internally by Confluence.

::: callout-tip
The project preview attempts to style your content as it will appear on Confluence, however, you may notice some differences in appearance.
:::

To publish your project run `quarto publish confluence` from your project folder:

``` {.bash filename="Terminal"}
quarto publish confluence 
```

You'll be walked through the same steps as publishing a single document, [setting up an account](#setting-up-account), if needed, and [selecting a destination](#selecting-destination) for your project on Confluence, before publishing your project to Confluence.

### Project Structure {#project-structure}

The hierarchy of documents inside folders in your project will be respected in the publishing process. Confluence's concept of folders is that pages can have children, so your folders will be represented by pages in Confluence.

When a project is published, a single page is created in Confluence to hold it. Documents at the top level of the project are published as pages nested under this project page. Folders inside the project are represented by a page, and any documents (or other folders) inside the folder are represented as pages nested under the folder page.

As an example, consider the following project structure:

```         
example-project/
├── _quarto.yml
├── project-roadmap.qmd
├── reports-folder
│   ├── 2023-01.qmd
│   └── 2023-03.qmd
└── team-members.qmd
```

The Confluence structure resulting from publishing this project to the top level of the space is shown below:

![](images/confluence-project-structure.png){fig-alt="A zoomed in view of the navigation sidebar in Confluence. Under Pages is a page called Project Example Site, nested under this page are pages called Team Members, Project Roadmap, and Reports-folder. Under the Reports-folder page are pages called: Reports, March, and January." width="60%"}

The titles used in the Confluence sidebar navigation are taken from the page and project title, as specified in the document YAML and `_quarto.yml` respectively, and generated from the folder name for folders. Quarto may add some additional characters to meet the Confluences requirement that every page in a space has a unique name.

### `index.qmd`

Pages in Confluence that represent folders will have no content unless an `index.qmd` is found inside the folder. If an `index.qmd` file exists its content will populate the folder page. For example, consider the following `index.qmd`:

````{.markdown filename="index.qmd"}
---
title: Reports
---

Monthly reports on project progress
````

Adding this to the folder `reports-folder` and re-publishing the site, changes the name of the page representing this folder to "Reports" and adds this contents to the page.

![](images/confluence-index.png){fig-alt="Screenshot of a page in Confluence titled Reports, with a single sentence 'Monthly reports on project progress'. In the sidebar navigation this page is called 'Reports' and is nested under the page called 'Project Example Site'."}

## Publishing Workflow {#publishing-workflow}

In Confluence, many people are able to make direct edits to pages. However, managing your content from Quarto requires a shift in perspective: edits to pages are made only in the Quarto project, and only one account should publish those changes to Confluence.

Publishing to Confluence is a one-way street: there is no way to bring back content edits from Confluence to your Quarto project. Edits that are made on Confluence will be overwritten next time the page is published from Quarto. Updating a page requires editing the document in Quarto, and rerunning:

``` {.bash filename="Terminal"}
quarto publish confluence 
```

To help avoid a situation where someone inadvertently edits a page being managed in Quarto, the permissions for pages are set when you publish so everyone with access to the space can view the page, but only you, the publisher, can edit the page.

![](images/confluence-permissions.png){fig-alt="Screenshot of the Confluence permissions on a page, with two items: Everyone is set to View; and Charlotte Wickham (Me) is set to Can Edit"}

Permission to edit the page includes publishing updates, so any updates to a page need to be published from the same account as the original publish.

::: callout-note

## Publishing without Control over Permissions

We attempt to detect if you are publishing to a destination where you do not have control over page permissions and you'll receive a warning. You may proceed with the publish, but any page you publish can be both viewed and edited by anyone with access to the space.

:::

If you delete a page on Confluence, and republish it from Quarto, you'll see the error:

```         
ERROR: API Error: 404 - Not Found
```

This occurs because Quarto stores and reuses the location of your page on Confluence in `_publish.yml`. If the page is deleted on Confluence, this location will no longer exist. To solve the problem, delete the corresponding entry in `_publish.yml`, and publish again. You'll then be prompted to set the destination. You can read more about `_publish.yml` in the [Publishing Settings](#publishing-settings) section.

## Authoring {#authoring}

Authoring for Confluence is very similar to authoring HTML documents and Quarto webpages. However, you should be aware of some key limitations as well as some features specific to Confluence publishing.

### Content Limitations

The `confluence-html` format supports nearly all of the standard Quarto markdown content types, including tables, callouts, and cross references.

However, there is currently no support for Citations, Videos, Diagrams, Tabsets, or Equations. In the future, we may add these features if there is a Confluence equivalent that can support the functionality.

### Links

When creating links between pages in your Confluence Project, you can provide the source file as the link target (rather than the path to the Confluence page). You can also add hash identifiers (`#`) to the source file if you want to link to a particular section in the document. For example:

``` markdown
[about](about.qmd)
[about](about.qmd#section)
```

### Raw Confluence Blocks

Raw Confluence blocks allow you to include content that should pass through Quarto unchanged and be interpreted directly by Confluence. For example, [Confluence's Storage Format](https://confluence.atlassian.com/doc/confluence-storage-format-790796544.html) includes specific tags for a task list. To include a Confluence task list in your document, use these tags inside a raw Confluence block:

````markdown
```{=confluence}
<ac:task-list>
    <ac:task>
        <ac:task-status>incomplete</ac:task-status>
        <ac:task-body>task list item</ac:task-body>
    </ac:task>
</ac:task-list>
```
````

When published to Confluence this results in the following list:

![](images/confluence-task-list.png){fig-alt="A screenshot of list with one item. To the left of the item text is an unchecked checkbox." width=25%}


### Website Limitations

Confluence projects are a special type of website that don't support the traditional Website features like Listings, Themes and Navigation (as these things are taken care of internally by Confluence).

### Confluence Limitations

As discussed in [Publishing Workflow](#publishing-workflow) edits to page content made in Confluence are overwritten when content is published from Quarto. This is also the case for any inline comments made on Confluence. Page level emojis and page level comments are preserved across publishes.

## Publishing Settings {#publishing-settings}

Once you have published to Confluence, you might be interested in understanding how to manage your publishing and account settings.

### \_publish.yml

The `_publish.yml` file is used to specify the publishing destination. This file is automatically created (or updated) whenever you execute the `quarto publish` command, and is located within the project or document directory.

The service, id, and URL of the published content is specified in `_publish.yml`. For example:

``` yaml
- source: project
  confluence:
    - id: "5f3abafe-68f9-4c1d-835b-9d668b892001"
      url: "https://myteam.atlassian.net/wiki/spaces/TEAMSPACE/pages/123456/Plan"
```

The next time you publish the same document or project, the `_publish.yml` file will be used to provide account and space information so that you are not prompted for this information again.

If you have an existing Confluence Space that you want to publish to, you should manually create a `_publish.yml` file that looks like the example above, but with the appropriate `id` and `url` values for your document.

Account information is not stored in `_publish.yml`, so it is suitable for checking in to version control and being shared by multiple publishers.

### Account Management

You can list and remove saved Confluence accounts using the `quarto publish accounts` command:

``` markdown
$ quarto publish accounts
 ? Manage Publishing Accounts
 ❯ ✔ Confluence: jj@posit.co
   ✔ Netlify: jj@posit.co
 ❯ Use the arrow keys and spacebar to specify 
   accounts you would like to remove. Press 
   Enter to confirm the list of accounts you
   wish to remain available.
```
```````

## File: docs/publishing/github-pages.qmd
```````
---
title: "GitHub Pages"
editor: visual
provider: gh-pages
provider-token: GITHUB_TOKEN
---

## Overview

[GitHub Pages](https://pages.github.com/) is a website hosting service that enables you to publish content based on source code managed within a GitHub repository.

There are three ways to publish Quarto websites and documents to GitHub Pages:

1.  Render sites on your local machine to the `docs` directory, check the rendered site into GitHub, and then configure your GitHub repo to publish from the `docs` directory.

2.  Use the `quarto publish` command to publish content rendered on your local machine.

3.  Use a [GitHub Action](#github-action) to automatically render your files (a single Quarto document or a Quarto project) and publish the resulting content whenever you push a source code change to your repository.

We'll cover each of these methods below, but first an important pre-requisite: you need to have a Git repository on your local machine that is synced to GitHub. The URL of the published website will be derived from the combination of your username and the repository name (e.g. `https://username.github.io/reponame/`).

You can optionally configure a [custom domain](#custom-domain) for a GitHub Pages site, but before exploring that, get your site up and running with the default domain.

## Render to `docs` {#render-to-docs}

The simplest way to publish using GitHub Pages is to render to the `docs` directory and then check that directory into your repository. If you prefer not to check rendered output into version control see the discussion of using [Publish Command](#publish-command) below.

To get started, change your project configuration to use `docs` as the `output-dir`. For example:

``` {.yaml filename="_quarto.yml"}
project:
  type: website
  output-dir: docs
```

Then, add a `.nojekyll` file to the root of your repository that tells GitHub Pages not to do additional processing of your published site using Jekyll (the GitHub default site generation tool):

+---------------+---------------------------------+
| Mac/Linux     | ``` {.bash filename="Terminal"} |
|               | touch .nojekyll                 |
|               | ```                             |
+---------------+---------------------------------+
| Windows       | ``` {.bash filename="Terminal"} |
|               | copy NUL .nojekyll              |
|               | ```                             |
+---------------+---------------------------------+

Now, render your site and push it to GitHub:

``` {.bash filename="Terminal"}
quarto render
git add docs
git commit -m "Publish site to docs/"
git push
```

Finally, configure your GitHub repository to publish from the `docs` directory of your `main` branch:

![](images/gh-pages-docs-dir.png){.border}

Once you've made this configuration change GitHub will trigger a deployment of your website. Your site will also be updated whenever you commit and push to `main`.

## Publish Command {#publish-command}

The `quarto publish` command is an easy way to publish locally rendered documents and websites. Before attempting to use `quarto publish` (either locally or from a GitHub Action) you should be sure to configure the [Source Branch](#source-branch) and [Ignore Output](#ignoring-output) as described below.

### Source Branch {#source-branch}

Before attempting to publish you should ensure that the **Source** branch for your repository is `gh-pages` and that the site directory is set to the repository root (`/`). You can modify these options in **Settings** : **Pages** for your repository. For example, if you already have a `gh-pages` branch:

![](images/gh-pages-user-site.png){.border}

If you do not already have a `gh-pages` branch, you can create one as follows. First, make sure you have committed all changes to your current working branch with `git status`. Then:

``` {.bash filename="Terminal"}
git checkout --orphan gh-pages
git reset --hard # make sure all changes are committed before running this!
git commit --allow-empty -m "Initialising gh-pages branch"
git push origin gh-pages
```

Double-check that the last `git push` action has indeed set the **Settings** : **Pages** for your repository as expected in the previous figure. Get back to your original repository branch with, for example, `git checkout main`.

### Ignoring Output {#ignoring-output}

{{< include _ignoring-output.md >}}

### Publishing

Once you have configured the source branch and updated your `.gitignore`, navigate to the directory where your project / git repository is located, make sure you are not on the `gh-pages` branch, and execute the `quarto publish` command for GitHub Pages:

``` {.bash filename="Terminal"}
quarto publish gh-pages
```

The publish command will confirm that you want to publish, render your content, copy the output to a special `gh-pages` branch, push that branch to GitHub, and then open a browser to view your site once it is deployed.

#### Private Sites

If you are publishing to a private (i.e. password protected) website then the logic within `quarto publish`that waits for your site to be available before opening a browser won't work correctly. In this case you should pass the `--no-browser` option to bypass this:

``` {.bash filename="Terminal"}
quarto publish gh-pages --no-browser
```

#### Documents

To publish a document rather than a website or book, provide the path to the document (note that you can publish only one document from a given GitHub repository):

``` {.bash filename="Terminal"}
quarto publish gh-pages document.qmd
```

#### Options

Here are all of the available command line options for `quarto publish gh-pages`:

{{< include _cli-options.md >}}

## GitHub Action

Using the `quarto publish {{< meta provider >}}` command to publish locally rendered content is the most simple and straightforward way to publish. Another option is to use [GitHub Actions](https://docs.github.com/en/actions) to render and publish your site (you might prefer this if you want execution and/or rendering to be automatically triggered from commits).

There are a few different ways to approach rendering and publishing content. Below, we'll provide a how-to guide for publishing with GitHub Actions. For more conceptual background on the various approaches, see the discussion on [Rendering for CI](ci.qmd#rendering-for-ci).

### Freezing Computations

{{< include _freeze-basics.md >}}

Note that an alternative approach is to execute the code as part of the GitHub Action. For now we'll keep things simpler by executing code locally and storing the computations by using freeze. Then, further below, we'll cover [Executing Code](#executing-code) within a GitHub Action.

### Publish Action

Before configuring the publishing action, it's important that you run `quarto publish gh-pages` locally, once. This will create the `_publish.yml` configuration required by the subsequent invocations of the GitHub Action. To do this, run the following from within your project:

``` bash
quarto publish gh-pages
```

Once you've completed a local publish, add a `publish.yml` GitHub Action to your project by creating this YAML file and saving it to `.github/workflows/publish.yml`:

``` {.yaml filename=".github/workflows/publish.yml"}
on:
  workflow_dispatch:
  push:
    branches: main

name: Quarto Publish

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: Check out repository
        uses: actions/checkout@v4

      - name: Set up Quarto
        uses: quarto-dev/quarto-actions/setup@v2

      - name: Render and Publish
        uses: quarto-dev/quarto-actions/publish@v2
        with:
          target: {{< meta provider >}}
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

This action will run whenever you push to the `main` branch of your repository. It will also run when you manually trigger the action from the **Actions** tab of your repository. The action will render your content and publish it to GitHub Pages, thus you need to ensure that GitHub Actions has permission to write to your repository. This is done by checking the **Read and write permissions** box under **Workflow permissions** in the **Actions** section of your repository **Settings**.

Once you've done this, check all of the newly created files (including the `_freeze` directory) into your repository and then push to GitHub. A GitHub Pages site will be created for your repository, and every time you push a new change to the repository it will be automatically rebuilt to reflect the change. Consult the **Pages** section of your repository **Settings** to see what the URL and publish status for your site is.

{{< include _github-action-executing-code.md >}}

### Example: Jupyter with venv

Here is a complete example of a GitHub Action that installs Python, Jupyter, and package dependencies from `requirements.txt`, then executes code and renders output to GitHub Pages:

``` {.yaml filename=".github/workflows/publish.yml"}
on:
  workflow_dispatch:
  push:
    branches: main

name: Quarto Publish

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: Check out repository
        uses: actions/checkout@v4

      - name: Set up Quarto
        uses: quarto-dev/quarto-actions/setup@v2

      - name: Install Python and Dependencies
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'
          cache: 'pip'
      - run: pip install jupyter
      - run: pip install -r requirements.txt

      - name: Render and Publish
        uses: quarto-dev/quarto-actions/publish@v2
        with:
          target: gh-pages
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

### Example: Knitr with renv

Here is a complete example of a GitHub Action that installs R and package dependencies from `renv.lock`, then executes code and renders output to GitHub Pages:

``` {.yaml filename=".github/workflows/publish.yml"}
on:
  workflow_dispatch:
  push:
    branches: main

name: Quarto Publish

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: Check out repository
        uses: actions/checkout@v4

      - name: Set up Quarto
        uses: quarto-dev/quarto-actions/setup@v2

      - name: Install R
        uses: r-lib/actions/setup-r@v2
        with:
          r-version: '4.2.0'

      - name: Install R Dependencies
        uses: r-lib/actions/setup-renv@v2
        with:
          cache-version: 1

      - name: Render and Publish
        uses: quarto-dev/quarto-actions/publish@v2
        with:
          target: gh-pages
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

### Additional Options

It's possible to have a Quarto project in a larger GitHub repository, where the Quarto project does not reside at the top-level directory. In this case, add a `path` input to the invocation of the `publish` action. For example:

``` yaml
- name: Render and Publish
  uses: quarto-dev/quarto-actions/publish@v2
  with:
    target: {{< meta provider >}}
    path: subdirectory-to-use
  env:
    GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

By default, `quarto publish` will re-render your project before publishing it. However, if you store the rendered output in version control, you don't need the GitHub action to re-render the project. In that case, add the option `render: false` to the `publish` action:

``` yaml
- name: Render and Publish
  uses: quarto-dev/quarto-actions/publish@v2
  with:
    target: {{< meta provider >}}
    render: false
  env:
    GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

See the full definition of the Quarto [publish action](https://github.com/quarto-dev/quarto-actions/blob/main/publish/action.yml) to learn about other more advanced options.

## Custom Domain {#custom-domain}

A custom domain allows you to use your own domain name instead of the default `username.github.io` domain for your GitHub Pages site.
To use a custom domain you need to complete two steps:

1. Add your domain to your GitHub repository settings
2. Configure records with your DNS provider

### 1. Add your domain to your GitHub repository settings 

Add a `CNAME` file to your project root directory (i.e., alongside `_quarto.yml`) that contains your custom domain:

::: {layout-ncol="2"}

```{.default filename="website/"}
├── _site/
├── _quarto.yml
├── CNAME
├── about.qmd
└── index.qmd
```

```{.default filename="CNAME"}
blog.example.com
```
::::

Quarto will recognize the `CNAME` file as a [site resource](/docs/websites/website-tools.qmd#site-resources) and will copy it your site output directory when you render.

Re-render and publish your site to ensure `CNAME` is available to GitHub Pages. 

::: {.callout-note}

The GitHub Pages documentation describes adding your domain to your repository in the  **Settings** pane. 
However, this creates a `CNAME` file in the location of your rendered site, 
which will be overwritten whenever you render your site with Quarto.

:::


### 2. Configure records with your DNS provider

The records you need to configure with your DNS provider depend on whether you are using an apex domain (e.g., `example.com`) or a subdomain (e.g., `www.example.com` or `blog.example.com`). 

Apex domains require an `ALIAS`, `ANAME`, or `A` record, whereas subdomains require a `CNAME` record. 
Find the appropriate values from the [DNS records summary table in the GitHub Pages documentation](https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#dns-records-for-your-custom-domain).
For apex domains, pay particular attention to the DNS record values, you may need to overwrite addresses your DNS provider has added by default.

## User Site

In addition to creating sites tied to various repositories, you can also create a user site that is served from your root user domain (e.g. `https://username.github.io`). This is an ideal place to publish a blog or personal home page. To create a user site:

1.  Create a Git repo with the name `username.github.io` (where "username" is your GitHub username) and sync it to your local machine.

2.  Set the **Source** branch for your user site to `gh-pages` as described in [Source Branch](#source-branch).
```````

## File: docs/publishing/hugging-face.qmd
```````
---
title: "Hugging Face Spaces"
provider: huggingface
provider-name: Hugging Face
---

## Overview

Hugging Face is a comprehensive platform that offers a wide array of machine learning models, particularly in natural language processing (NLP) and computer vision. It is designed to facilitate the training, deployment, and use of open-access machine learning models, making it easier for developers and researchers to access state-of-the-art models. 

Hugging Face also provides application and static site hosting as part of its [Spaces project](https://huggingface.co/docs/hub/spaces-overview). You can use [Hugging Face Spaces](https://huggingface.co/spaces) to render and host Quarto websites as a way to document and present your work.

Quarto's integration in Hugging Face Spaces happens through a [Docker](https://www.docker.com/) image created by the Quarto team that Hugging Face has made easily available for authors as a template. 

To create and publish a Hugging Face Space using Quarto, you'll start by creating a new space using Quarto's Docker Template. Then you'll edit or replace the example content with your own. Learn more about this process in [Getting Started](#getting-started) below.

Whenever changes are committed to your Hugging Face Space, a new build is initiated which renders and serves your Quarto website. You can make and commit changes directly in the Hugging Face UI. However, previewing your changes via a build on Hugging Face is time-consuming, so for faster iteration we recommend working locally and using the `quarto publish huggingface` command.  This workflow is described below in [Publish Command](#publish-command).

## Getting Started 

### Create a New Space

To get started you'll create a new Hugging Face Space using the Quarto template. 

Visit [the Hugging Face Create a New Space webpage](https://huggingface.co/new-space?template=posit%2Fquarto-template). 

If you're not logged in to Hugging Face, log in first:

![The UI for logging in to Hugging Face](./images/hugging-face-login-ui.png){width=50% fig-align="left" fig-alt="Screenshot of UI for logging in to Hugging Face."}

Start by choosing a name and license for your space:

![The UI for choosing name and license for your space](./images/hugging-face-choose-name-ui.png){.border fig-alt="Screenshot of Hugging Face UI for space creation consisting of three text boxes labelled: Owner, Space name and License."}

If you followed the link above, you will see "Docker" selected for the Space SDK, and "Quarto" chosen as the Docker template. 
If not, select them as shown below:

![The UI for Hugging Face Spaces creation webpage](./images/hugging-face-create-ui.png){.border fig-alt="Screenshot of Hugging Face UI for selecting the space SDK and template. The Docker SDK and Quarto template are highlighted."}

Finally, choose the hardware that will be used to run your space, whether the space will be public or private, and click on "Create Space":

![The UI for choosing hardware configuration and space visibility](./images/hugging-face-hardware-ui.png){.border fig-alt="Screenshot of Hugging Face UI showing: a dropdown labelled 'Space Hardware', two radio buttons labelled Public (selected) and Private, and a button labelled 'Create Space'."}

Hugging Face will then "Build" your space:

::: {.callout-warning}
It can take a couple of minutes for the Space to deploy to Hugging Face after the Docker build process completes. 
To see your changes you will need to do two things: 

1) Wait for your space's status to go from 'Building' to 'Running'(this is visible in the status bar above the Space)

2) Force-reload the web page by holding Shift and hitting the reload button in your browser.
:::

![Build process for a new space based on the Quarto template](images/hugging-face-build.png){.border fig-alt="Screenshot of the Build log in a Hugging Face Space. Log starts with and ends with"}

You'll know the space is finished building when you see the `Running` in the top bar.

![Hugging Face `Running` badge](images/hugging-face-running-button.png){fig-align="left"}

 Once built, your Space will display the rendered example website (you may need to refresh the page in your browser for this to appear):

![A Quarto template website running in a Hugging Face Space](images/hugging-face-complete.png){.border fig-alt="Screenshot of a Hugging Face Space, displaying a website with the title ''."}

### Quarto's Hugging Face Template

You can click on the `Files` tab in the top right to look at the files which make up the template. Quarto's Hugging Face template consists of files used to create an environment to build and render the Quarto website (`Dockerfile`and `requirements.txt`), and the website source itself in `src/`:

- `Dockerfile`: This contains the system setup to build and serve the Quarto site on Hugging Face. You probably won't need to change this file unless you need to add additional system dependencies or modify the Quarto version.

- `requirements.txt`: This is where you should include any Python dependencies which you need for your website. 
These are installed when the Dockerfile builds.

- The `src` directory contains the source files for the Quarto website. You can include Jupyter notebooks or markdown (`.qmd` or `.md`) files. 

- `src/_quarto.yml` defines the navigation for your website. If you want to add new pages or reorganize the existing ones, you'll need to change this file.

You can edit these files directly in the Hugging Face UI but we reccommend cloning your space, and making and previewing changes locally, then using the publish command as described in the next section.

## Publish Command

{{< include ../prerelease/1.5/_pre-release-feature.qmd >}}

The `quarto publish huggingface` command facilitates a workflow where you [make and preview edits](#edit-and-preview) locally before [publishing](#publish) to your Hugging Face space. Before using the command you'll need to complete some [Setup](#setup).

### Setup

To get set up to use `quarto publish huggingface` you should have already:

(@) [Created a space using Quarto's Docker Template](#create-a-new-space) as described above. 

Then complete the following steps, explained at length below:

(@) (Optional) [Create an authorization token if you lack one](#create-an-authorization-token)

(@) [Clone the repository locally](#clone-the-repository-locally)

#### Create an authorization token

In order to publish the results to Hugging Face, `quarto publish` needs access to your credentials. 
If you haven't created such an authorization token yet, visit [Hugging Face's documentation on user access tokens](https://huggingface.co/docs/hub/security-tokens#how-to-manage-user-access-tokens) and follow the instructions to create a token with the `write` role. You'll need this token the first time you run the publish command.

#### Clone the repository locally

The URL for your space, as well as the URL to clone the repository, is `https://huggingface.co/spaces/<your-hugging-face-username>/<name-of-space>`. Use your favorite `git` interface to clone the Hugging Face Space you've just created with the URL above. You can also find instructions in your space under **⋮** > **Clone repository**.  

### Edit and Preview 

Once your repository is set up, use whichever text editor you prefer to make changes to your repository. 
Quarto's Hugging Face template includes a Quarto website in the `src/` directory of the repository. For information on how to create websites with Quarto, see [our documentation](/docs/websites/website-basics.qmd)

To preview your changes, from the root of your repository, run:

```{.bash filename="Terminal"}
quarto preview src
```

### Publish 

When you are happy with the results in the repository, run: 

```{.bash filename="Terminal"}
quarto publish huggingface
```

Quarto will stage, commit, and push all required changes to Hugging Face, as well as fetching remote content and merging it with your repository's contents first.
If the repository you're working on hasn't been configured to take in an explicit user name and authorization token, Quarto will prompt you for such information on the command line.

On completion Quarto will open your space in your default browser. 

## Publishing an Existing Repository

The command `quarto publish huggingface` requires that the `origin` [git remote](https://docs.github.com/en/get-started/getting-started-with-git/managing-remote-repositories) point to a `https://huggingface.co/spaces` URL.
If you used the instructions above, this will happen automatically. 

If you are working from an existing repository already configured with a Quarto template pointing to the right URL, you can use `quarto publish huggingface` directly without needing to create or clone a new space.
```````

## File: docs/publishing/index.qmd
```````
---
title: "Publishing Basics"
---

## Overview

There are a wide variety of ways to publish documents, presentations, and websites created using Quarto. Since content rendered with Quarto uses standard formats (HTML, PDFs, MS Word, etc.) it can be published anywhere. Additionally, there is a `quarto publish` command available for easy publishing to various popular services (GitHub, Netlify, Posit Connect, etc.) as well as various tools to make it easy to publish from a Continuous Integration (CI) system.

## Getting Started

To get started, review the documentation for using one of the following publishing services:

{{< include _providers.md >}}
```````

## File: docs/publishing/netlify.qmd
```````
---
title: "Netlify"
provider: netlify
provider-name: Netlify
provider-token: NETLIFY_AUTH_TOKEN
provider-publish-url: "https://tubular-unicorn-97bb3c.netlify.app"
---

## Overview

[Netlify](https://www.netlify.com/) is a professional web publishing platform with support for many advanced features including custom domains, authentication, branch previews, and instant rollbacks. Netlify also has a free plan that is ideal for personal projects, hobby sites, or experiments.

There are several ways to publish Quarto content to Netlify:

1.  Use the `quarto publish` command to publish content rendered on your local machine.

2.  If you are using GitHub, GitLab, Bitbucket, or Azure DevOps, you can point Netlify at your site's source code and have it deployed whenever your code changes.

3.  If you are using GitHub, you can use a [GitHub Action] to automatically render your project and publish the resulting content whenever your code changes.

4.  If you are using another Continuous Integration (CI) service, you can script the `quarto publish` command to render and publish content to Netlify.

We'll cover each of these methods below, starting with the most straightforward and then proceeding to more sophisticated scenarios.

{{< include _publish-command.md >}}

### Domain Name

The domain name for your published site will by default use a random identifier (e.g. `mystifying-jepsen-fa4396.netlify.app`). You can pick a more descriptive sub-domain (still using `netlify.app` as the main domain) or if you own another domain, assign that one to the site. These options are available (respectively) from the **Site settings** and **Domain settings** panels:

![](images/netlify-control-panel.png)

Within **Site settings**, click the **Change site name** button to specify a different sub-domain:

![](images/netlify-site-settings.png)

If you own another domain that you want to use for your site, follow the directions in **Domain settings**.

## Publish from Git Provider

Netlify has the ability to automatically deploy sites when changes are committed to Git repositories hosted on GitHub, GitLab, Bitbucket, and Azure DevOps. The most straightforward approach to this is to check your rendered site (i.e. the `_site` or `_book` directory) into version control and have Netlify deploy that. We'll cover that scenario first and then explore using a Netlify Build Plugin to render the site on Netlify servers.

### Importing a Project

Start by going to the main Netlify page for your team, choosing **Add new site,** and then **Import an existing project**:

![](images/netlify-import-project.png)

You'll be prompted to authenticate with your version control provider, select a repository, and then finally specify the configuration for publishing the site.

### Publishing Configuration

The build settings for our project will have no **Build command** and will specify `_site` or `_book` (as appropriate) for the **Publish directory**:

![](images/netlify-build-settings.png){.border}

If you have your `_site` or `_book` directory checked into version control then everything is now configured and your site will be deployed to Netlify automatically whenever you commit to your repository.

### Rendering on Netlify

If you prefer not to check your rendered site into version control, you can also use the Quarto [Netlify Build Plugin](https://github.com/quarto-dev/netlify-plugin-quarto) to render on a Netlify build server (note that Netlify servers can only render markdown and cannot execute R, Python, or Julia code).

#### Freezing Computations

{{< include _freeze-basics.md >}}

#### Ignoring Output

{{< include _ignoring-output.md >}}

#### Plugin Configuration

To use the Quarto Netlify Build Plugin, add the following two files to your project:

``` {.toml filename="netlify.toml"}
[[plugins]]
package = "@quarto/netlify-plugin-quarto"
```

``` {.json filename="package.json"}
{
  "dependencies": {
    "@quarto/netlify-plugin-quarto": "^0.0.5"
  }
}
```

Now, commit and push your modified project (including `_freeze`, `netlify.toml`, and `package.json`). Assuming that you configured the project correctly in the previous step (i.e. **Publish directory** set to the `_site` or `_book` directory) then Netlify will begin rendering and publishing your site each time you push a new commit.

## GitHub Action

{{< include _github-action-basics.md >}}

``` {.yaml filename=".github/workflows/publish.yml"}
on:
  workflow_dispatch:
  push:
    branches: main

name: Quarto Publish

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository
        uses: actions/checkout@v4 

      - name: Set up Quarto
        uses: quarto-dev/quarto-actions/setup@v2

      - name: Render and Publish 
        uses: quarto-dev/quarto-actions/publish@v2
        with:
          target: {{< meta provider >}}
          NETLIFY_AUTH_TOKEN: ${{ secrets.NETLIFY_AUTH_TOKEN }}
```

### Netlify Credentials

The final step is to configure your GitHub Action with the credentials required for publishing to Netlify. To do this you need to create a Netlify personal access token and then configure your GitHub action to be able to read it:

1.  If you don't already have an access token, go to the Netlify [applications page](https://app.netlify.com/user/applications), and click on **New Access Token** to create a new personal access token. Give this token a memorable name, and copy the token to the clipboard.

2.  Add the Netlify personal access token to your repository's action **Secrets** (accessible within repository **Settings**). You will see a **New repository secret** button at the top right:

    ![](images/gh-new-repository-secret.png){.border}

    Click the button and add the personal access token from step 1 as a secret named `NETLIFY_AUTH_TOKEN`:

    ![](images/netlify-gh-action-secret.png){.border}

### Ignoring Output

{{< include _ignoring-output.md >}}

### Commit to Publish

Once you've specified your publishing action and Netlify credentials, and pushed your updated repository (including the `_freeze` directory) to GitHub, your action will run with this and subsequent commits, automatically rendering and publishing to Netlify.

{{< include _github-action-executing-code.md >}}

#### Example: Jupyter with venv

Here is a complete example of a GitHub Action that installs Python, Jupyter, and package dependencies from `requirements.txt`, then executes code and renders output to Netlify:

``` {.yaml filename=".github/workflows/publish.yml"}
on:
  workflow_dispatch:
  push:
    branches: main

name: Quarto Publish

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository
        uses: actions/checkout@v4 

      - name: Set up Quarto
        uses: quarto-dev/quarto-actions/setup@v2
        
      - name: Install Python and Dependencies
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'
          cache: 'pip'
      - run: pip install jupyter
      - run: pip install -r requirements.txt
      
      - name: Render and Publish 
        uses: quarto-dev/quarto-actions/publish@v2
        with:
          target: {{< meta provider >}}
          NETLIFY_AUTH_TOKEN: ${{ secrets.NETLIFY_AUTH_TOKEN }}
```

#### Example: Knitr with renv

Here is a complete example of a GitHub Action that installs R and package dependencies from `renv.lock`, then executes code and renders output to Netlify:

``` {.yaml filename=".github/workflows/publish.yml"}
on:
  workflow_dispatch:
  push:
    branches: main

name: Quarto Publish

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository
        uses: actions/checkout@v4 

      - name: Set up Quarto
        uses: quarto-dev/quarto-actions/setup@v2
        
      - name: Install R
        uses: r-lib/actions/setup-r@v2
        with:
          r-version: '4.2.0'
      
      - name: Install R Dependencies 
        uses: r-lib/actions/setup-renv@v2
        with:
          cache-version: 1
      
      - name: Render and Publish
        uses: quarto-dev/quarto-actions/publish@v2
        with:
          target: {{< meta provider >}}
          NETLIFY_AUTH_TOKEN: ${{ secrets.NETLIFY_AUTH_TOKEN }}
```

### Additional Options

It's possible to have a Quarto project in a larger GitHub repository, where the Quarto project does not reside at the top-level directory. In this case, add a `path` input to the invocation of the `publish` action. For example:

``` yaml
- name: Render and Publish
  uses: quarto-dev/quarto-actions/publish@v2
  with:
    target: {{< meta provider >}}
    path: subdirectory-to-use
    NETLIFY_AUTH_TOKEN: ${{ secrets.NETLIFY_AUTH_TOKEN }}
```

By default, `quarto publish` will re-render your project before publishing it. However, if you store the rendered output in version control, you don't need the GitHub action to re-render the project. In that case, add the option `render: false` to the `publish` action:

``` yaml
- name: Render and Publish
  uses: quarto-dev/quarto-actions/publish@v2
  with:
    target: {{< meta provider >}}
    render: false
    NETLIFY_AUTH_TOKEN: ${{ secrets.NETLIFY_AUTH_TOKEN }}
```

## Continuous Integration

You can publish Quarto content to Netlify using any CI service by scripting the `quarto publish` command.

{{< include _netlify-ci-example.md >}}

See the article on [Publishing with CI](ci.qmd) for additional details on the various approaches to rendering and publishing with Continuous Integration.
```````

## File: docs/publishing/other.qmd
```````
---
title: "Other Services"
---

## Overview

There are a wide variety of ways to publish Quarto websites. Other articles cover publishing to [Quarto Pub](quarto-pub.qmd), [GitHub Pages](github-pages.qmd), [Netlify](netlify.qmd), and [Posit Connect](rstudio-connect.qmd). Below we'll describe some general guidelines as well as offer some specific advice for [Firebase](#google-firebase), [Site44], and [Amazon S3]. We'll mostly defer to the documentation provided by the various services, but will note any Quarto website specific configuration required.

The most important thing to understand is that website content is by default written to the `_site` sub-directory and book content to the `_book` directory (you can customize either using the `output-dir` option). Publishing is simply a matter of copying the output directory to a web server or web hosting service.

### Rendering for Publish

Prior to publishing you should always do a final render of your project:

```{.bash filename="Terminal"}
quarto render
```

This is particularly important to remember because changes you make to shared site configuration (e.g. `_quarto.yml`) aren't reflected across your entire site until your render the entire project. To ensure that your output is up to date before publishing you should always do a full `quarto render`.

## Firebase {#google-firebase}

Google Firebase has a [web hosting service](https://firebase.google.com/docs/hosting/quickstart) that enables easy deployment of websites using a set of command line tools.

Firebase websites by default deploy content from the `public` directory of the Firebase project directory. This means that you should set the `output-dir` to `"public"` within `_quarto.yml`:

``` yaml
project:
  type: website
  output-dir: public
```

## Site44 {data-link="Site44"}

[Site44](https://www.site44.com/) is a service that allows you to publish websites from within Dropbox folders. Site44 creates a `Dropbox/Apps/site44` directory, and any folders within that directory are published as websites.

The recommended workflow for deploying Quarto websites to Site44 is to develop your website in a separate project directory, and then, when it's ready for final publishing, copy the contents of the `_site` directory to the folder for your website.

## Amazon S3 {data-link="Amazon S3"}

If you are a user of Amazon Web Services you can serve your website directly from Amazon S3. Note however that this option is a bit more technically involved than GitHub Pages, Netlify, or Site44. See the article on [Hosting a Static Website on Amazon S3](https://docs.aws.amazon.com/AmazonS3/latest/dev/WebsiteHosting.html) for additional details.

## Other Hosts

Any web server or web host can be used to deploy a Quarto website. Here's a recent [CNET roundup](https://www.cnet.com/web-hosting/) of other web hosts you could consider. You can also deploy a Quarto website on any internal (intranet) web server.

You can also render and publish Quarto websites using a Continuous Integration (CI) service. See the articles on [Publishing with CI](ci.qmd) for additional details.
```````

## File: docs/publishing/posit-cloud.qmd
```````
---
title: "Posit Cloud"
editor: visual
heading-pad: '#'
---

{{< include /docs/_require-1.4.qmd >}}

## Overview

On [Posit Cloud](https://posit.cloud), you can create data projects and publish results from your web browser. Use Posit Cloud when you want to organize all your static documents and interactive applications in one place.

There are several ways to publish Quarto content to Posit Cloud:

1.  Use the `quarto publish` command to publish static content rendered on your local machine.

2.  Use the [rsconnect-python](https://docs.posit.co/rsconnect-python/) Python package or [rsconnect](https://rstudio.github.io/rsconnect/) R package to publish code for rendering on Posit Cloud.

3.  Use a Continuous Integration (CI) service like [Jenkins](https://www.jenkins.io/), [Airflow](https://airflow.apache.org/), or [GitHub Actions](https://docs.github.com/en/actions), to render and publish to Posit Cloud.

Each of these options is covered in detail below. If you are just getting started, we strongly recommend using the first approach (`quarto publish`). Then, as your needs evolve, you can consider other more sophisticated options.

## Publish Command

The `quarto publish` command is the easiest way to publish locally rendered content. From the directory where your project is located, execute the `quarto publish` command for Posit Cloud:

```{.bash filename="Terminal"}
quarto publish posit-cloud
```

If you haven't previously published to Posit Cloud you'll be prompted to enter your token and token secret (available under Account > Tokens):

```{.bash filename="Terminal"}
$ quarto publish posit-cloud
 ? Token: › F69A5954CC09A97B7D74C73C6C7384EB
 ? Token secret: › ****************************************
```

After authenticating, your content will be rendered and published, and then a browser will open to view its page on Posit Cloud.

A record of your previous publishes will be stored in a `_publish.yml` file within the project or document directory. This file stores the service, id, and URL of the published content. For example:

``` yaml
- source: project
  posit-cloud:
    - id: "1234"
      url: "https://posit.cloud/content/1234"
```

Account information is not stored in this file, so it is suitable for checking in to version control and being shared by multiple publishers.

You can customize this behavior of `quarto publish` by providing the following command line options:

{{< include _cli-options.md >}}

To publish a document rather than a website or book, provide the path to the document:

```{.bash filename="Terminal"}
quarto publish posit-cloud document.qmd
```

## Publishing with Code

In the preceding example, we rendered content locally and then published it to Posit Cloud. In some cases, however, you may want to publish your source code to Posit Cloud and then have it rendered on the server.

The tools for publishing code differ depending on whether you are using the Knitr (R) or Jupyter (Python) engine, so we'll cover them separately below.

### Knitr (R)

The [rsconnect](https://rstudio.github.io/rsconnect/) R package includes a set of publishing functions that you can use for publishing Quarto projects with R code to Posit Cloud. 

Your credentials can be found in Posit Cloud under Account > Tokens. To add your credentials, use:
```r
library(rsconnect)

setAccountInfo(
  name = 'abcde-nora-jones',
  token = 'F69A5954CC09A97B7D74C73C6C7384EB',
  secret = 'lcVIQGISmcSxG5VJhuRXNWHrWs7wLwaoubm8AcC7',
  server = 'posit.cloud'
)
```

Once your credentials have been added, you can publish your project. Here we publish a document and a website:

``` r
library(rsconnect)

deployDoc("document.qmd")
deployApp("./my-site")
```

#### RStudio IDE

If you are using the RStudio IDE, there is also support for push-button publishing to Posit Cloud. Use the publish button <kbd>![](images/publish-button.png){width="23" height="20"}</kbd> from the source editor or viewer pane to publish a document or a website.

See the Posit Cloud documentation on [Publishing](https://posit.cloud/learn/guide#publish) for additional details.

### Jupyter (Python)

The [rsconnect-python](https://docs.posit.co/rsconnect-python/) Python package provides a command line interface (CLI) that you can use to publish Quarto documents and websites that use Jupyter to Posit Cloud. To use the CLI:

1.  First, install the rsconnect-python package and configure a Posit Cloud credential for publishing (values available under Account > Tokens):

    ```{.bash filename="Terminal"}
    rsconnect add \
              --account 'abcde-nora-jones' \
              --name 'posit.cloud' \
              --token 'F69A5954CC09A97B7D74C73C6C7384EB' \
              --secret 'lcVIQGISmcSxG5VJhuRXNWHrWs7wLwaoubm8AcC7' \
              --server 'posit.cloud'
    ```

2.  Then, use the `rsconnect deploy quarto` command from your project directory:

    ```{.bash filename="Terminal"}
    rsconnect deploy quarto
    ```

See the complete documentation on [Publishing Quarto Content](https://docs.posit.co/connect/user/publishing-cli-quarto/) for additional details on using the CLI for publishing.

## Continuous Integration

You can also deploy Quarto content using a Continuous Integration (CI) service like [Jenkins](https://www.jenkins.io/), [Airflow](https://airflow.apache.org/), or [GitHub Actions](https://docs.github.com/en/actions). In most cases, this will entail scripting the `quarto publish` command, however in the case of GitHub Actions, you can take advantage of the standard Quarto [publish action](https://github.com/quarto-dev/quarto-actions/tree/main/publish).

When publishing to Posit Cloud from a CI service you'll need to consider whether you want to execute your Python or R code directly on the CI server or whether you want to take advantage of previously [frozen](/docs/projects/code-execution.html#freeze) execution results. We'll explore this possibility first and then proceed to the specifics of how to publish from CI.

### Freezing Computations

Depending on how complicated your run-time requirements (packages, database credentials, etc.) are, you might find it more convenient to restrict execution of Python and R code to local contexts that have the required software and credentials.

{{< include _freeze-basics.md >}}

If you'd rather have CI publishing execute all Python and R code contained in your project, you'll need to ensure that the requisite version of these tools (and any required packages) are installed on the CI server. How to do this is outside the scope of this article---to learn more about saving and restoring dependencies, see the article on [Virtual Environments](/docs/projects/virtual-environments.qmd).

### Publish Command

You can publish Quarto content to Posit Cloud using any CI service by scripting the `quarto publish` command. To do this, you'll need to make sure that your credentials are available as environment variables on the CI server.

| Variable             | Description                           |
|----------------------|---------------------------------------|
| `POSIT_CLOUD_TOKEN`  | A user's authentication token.        |
| `POSIT_CLOUD_SECRET` | The secret associated with the token. |

You will furthermore need to specify the ID of the target content to update. This will most frequently be drawn from the `_publish.yml` file that is saved into your project directory during publishing. For example:

```{.yaml filename="_publish.yml"}
- source: project
  posit-cloud:
    - id: 1234
      url: 'https://posit.cloud/content/1234/'
```

Assuming that you have a `_publish.yml` like the above, you can publish to Posit Cloud from CI with the following commands:

```{.bash filename="Terminal"}
export POSIT_CLOUD_TOKEN=F69A5954CC09A97B7D74C73C6C7384EB
export POSIT_CLOUD_SECRET=lcVIQGISmcSxG5VJhuRXNWHrWs7wLwaoubm8AcC7
quarto publish posit-cloud
```

Alternatively, if you don't have a `_publish.yml` file, you can specify the ID on the command line as follows:

```{.bash filename="Terminal"}
quarto publish posit-cloud --id 1234
```

### GitHub Actions

If your CI service is [GitHub Actions](https://docs.github.com/en/actions) then you can take advantage of Quarto's standard [publish action](https://github.com/quarto-dev/quarto-actions/tree/main/publish) to automate deploying to Posit Cloud.

#### User Credentials

Before creating the publish action, you need to ensure that your repository has the credentials required for publishing to Posit Cloud. You can do this as follows:

1.  If you don't already have one, create a token and token secret in Posit Cloud (under Account > Tokens).

2.  Add the token secret to your repository's action **Secrets** (accessible within repository **Settings**). Under **Repository Secrets**, you'll see a **New repository secret** button:

    ![](images/gh-new-repository-secret.png){.border fig-alt="Screenshot of a GitHub repository's Secrets and Variables page for Actions."}

    Click the button and add the API Key from step 1 as a secret named `POSIT_CLOUD_SECRET`:

    ![](images/gh-action-posit-cloud-secret.png){.border fig-alt="Screenshot of a GitHub repository's page for adding a new Actions secret."}

#### Publish Action

To setup your publish action, create a `.github/workflows/publish.yml` file in your repository. If you are [Freezing Computations] (i.e. not running Python or R code within your action), then the file would look something like this:

```{.yaml filename=".github/workflows/publish.yml"}
on:
  workflow_dispatch:
  push:
    branches: main

name: Quarto Publish

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository
        uses: actions/checkout@v4 

      - name: Set up Quarto
        uses: quarto-dev/quarto-actions/setup@v2

      - name: Render and Publish 
        uses: quarto-dev/quarto-actions/publish@v2
        with:
          target: posit-cloud
          POSIT_CLOUD_TOKEN: F69A5954CC09A97B7D74C73C6C7384EB
          POSIT_CLOUD_SECRET: ${{ secrets.POSIT_CLOUD_SECRET }}
```

Once you've pushed your updated repository (including the publish action and `_freeze` directory) to GitHub, your action will run with this and subsequent commits, automatically rendering and publishing to Posit Cloud.

#### Executing Code

If you prefer, you can also configure GitHub Actions to execute Python or R code as part of rendering. While this might reflexively seem like the best approach, consider the following requirements imposed when you execute code within a CI service like GitHub Actions:

{{< include _ci-execute-requirements.md >}}

##### Prerequisites

The best way to ensure that your code can be executed within a GitHub Action is to use a virtual environment like [venv](https://packaging.python.org/guides/installing-using-pip-and-virtual-environments/#creating-a-virtual-environment) or [renv](https://rstudio.github.io/renv/articles/renv.html) with your project (below we'll provide example actions for each). If you aren't familiar with using these tools check out the article on using [Virtual Environments](/docs/projects/virtual-environments.qmd) with Quarto to learn more.

Once you've decided to execute code within your GitHub Action you can remove the `freeze: auto` described above from your `_quarto.yml` configuration. Note that if you want to use `freeze` selectively for some documents or directories that is still possible (for a directory, create a `_metadata.yml` file in the directory and specify your freeze configuration there---this is what Quarto does by default for the `posts` folder of blog projects).

##### Example: Jupyter with venv

Here is a complete example of a GitHub Action that installs Python, Jupyter, and package dependencies from `requirements.txt`, then executes code and renders output to Posit Cloud:

```{.yaml filename=".github/workflows/publish.yml"}
on:
  workflow_dispatch:
  push:
    branches: main

name: Quarto Publish

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository
        uses: actions/checkout@v4 

      - name: Set up Quarto
        uses: quarto-dev/quarto-actions/setup@v2
        
      - name: Install Python and Dependencies
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'
          cache: 'pip'
      - run: pip install jupyter
      - run: pip install -r requirements.txt
      
      - name: Render and Publish 
        uses: quarto-dev/quarto-actions/publish@v2
        with:
          target: posit-cloud
          POSIT_CLOUD_TOKEN: F69A5954CC09A97B7D74C73C6C7384EB
          POSIT_CLOUD_SECRET: ${{ secrets.POSIT_CLOUD_SECRET }}
```

##### Example: Knitr with renv

Here is a complete example of a GitHub Action that installs R and package dependencies from `renv.lock`, then executes code and renders output to Posit Cloud:

```{.yaml filename=".github/workflows/publish.yml"}
on:
  workflow_dispatch:
  push:
    branches: main

name: Quarto Publish

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository
        uses: actions/checkout@v4 

      - name: Set up Quarto
        uses: quarto-dev/quarto-actions/setup@v2
        
      - name: Install R
        uses: r-lib/actions/setup-r@v2
        with:
          r-version: '4.2.0'
      
      - name: Install R Dependencies 
        uses: r-lib/actions/setup-renv@v2
        with:
          cache-version: 1
      
      - name: Render and Publish
        uses: quarto-dev/quarto-actions/publish@v2
        with:
          target: posit-cloud
          POSIT_CLOUD_TOKEN: F69A5954CC09A97B7D74C73C6C7384EB
          POSIT_CLOUD_SECRET: ${{ secrets.POSIT_CLOUD_SECRET }}
```

#### Additional Options

It's possible to have a Quarto project in a larger GitHub repository, where the Quarto project does not reside at the top-level directory. In this case, add a `path` input to the invocation of the `publish` action. For example:

``` yaml
- name: Render and Publish
  uses: quarto-dev/quarto-actions/publish@v2
  with:
    target: posit-cloud
    path: subdirectory-to-use
    POSIT_CLOUD_TOKEN: F69A5954CC09A97B7D74C73C6C7384EB
    POSIT_CLOUD_SECRET: ${{ secrets.POSIT_CLOUD_SECRET }}
```

By default, `quarto publish` will re-render your project before publishing it. However, if you store the rendered output in version control, you don't need the GitHub action to re-render the project. In that case, add the option `render: false` to the `publish` action:

``` yaml
- name: Render and Publish
  uses: quarto-dev/quarto-actions/publish@v2
  with:
    target: posit-cloud
    render: false
    POSIT_CLOUD_TOKEN: F69A5954CC09A97B7D74C73C6C7384EB
    POSIT_CLOUD_SECRET: ${{ secrets.POSIT_CLOUD_SECRET }}
```
```````

## File: docs/publishing/quarto-pub.qmd
```````
---
title: "Quarto Pub"
provider: quarto-pub
provider-name: Quarto Pub
provider-publish-url: "https://njones.quarto.pub/blog"
---

## Overview

[Quarto Pub](https://quartopub.com) is a free publishing service for static content created with Quarto. Quarto Pub is ideal for blogs, course or project websites, books, presentations, and personal hobby sites.

It's important to note that all documents and sites published to Quarto Pub are **publicly visible**. You should only publish content you wish to share publicly.

There are two ways to publish content to Quarto Pub (both are covered in more detail below):

1.  Use the `quarto publish` command to publish content rendered on your local machine (this is the recommend approach when you are getting started).

2.  If you are using GitHub, you can use a [GitHub Action] to automatically render your project and publish the resulting content whenever your code changes.

Before attempting your first publish, be sure that you have created a free [Quarto Pub](https://quartopub.com) account.

::: callout-note
Quarto Pub sites are publicly visible, can be no larger than 100 MB and have a *soft* limit of 10 GB of bandwidth per month. If you want to authenticate users, host larger sites, or use a custom domain, consider using a professional web publishing service like [Netlify](netlify.qmd) instead.
:::

{{< include _publish-command.md >}}

## Managing Sites

If you want to change the "slug" (or URL path) of a published site or remove the site entirely, you can use the site management interface at <https://quartopub.com>, which will display a list of all of your published sites:

![](images/quarto-pub-admin.png){.border}

Click on a site to navigate to an admin page that enables you to change the slug, make the site the default one for your account, or remove the site entirely:

![](images/quarto-pub-admin-site.png){.border}

## User Default Site

In addition to publishing documents and sites to paths within your Quarto Pub sub-domain (e.g. `https://username.quarto.pub/mysite/)` you can also designate one of your sites as the default site that users see when they navigate to your main sub-domain (e.g. `https://username.quarto.pub`). This is an ideal place to publish a blog or personal home page.

To promote one of your sites to the default site, go to your admin page at <https://quartopub.com>, navigate to the site you want to promote, check the **Default Site** option, then **Save** your modified options:

![](images/quarto-pub-default-site.png){.border}

## Multiple Accounts

If you have multiple Quarto Pub accounts it's important to understand the relationship between the use of accounts in the CLI interface (`quarto publish`) and the use of accounts in your browser (for authenticating and managing sites).

When using `quarto publish`, there are a couple of scenarios where a web browser is launched:

1.  When you need to authorize the Quarto CLI to access your account.
2.  After publishing to open the admin page for your published site.

Before publishing with a Quarto Pub account from the CLI you should always be sure to log in to that account within your default web browser. This ensures that when the CLI launches the browser that it binds to the correct Quarto Pub account.

## Access Tokens

When you publish to Quarto Pub using `quarto publish` an access token is used to grant permission for publishing to your account. If no access token is available for a publish operation then the Quarto CLI will automatically launch a browser to authorize one:

``` markdown
$ quarto publish quarto-pub
? Authorize (Y/n) › 
❯ In order to publish to Quarto Pub you need to
  authorize your account. Please be sure you are
  logged into the correct Quarto Pub account in 
  your default web browser, then press Enter or 
  'Y' to authorize.
```

Authorization will launch your default web browser to confirm that you want to allow publishing from Quarto CLI. An access token will be generated and saved locally by the Quarto CLI. You can list and remove saved accounts using the `quarto publish accounts` command:

``` markdown
$ quarto publish accounts
 ? Manage Publishing Accounts
 ❯ ✔ Quarto Pub: jj@rstudio.com
   ✔ Netlify: jj@rstudio.com
 ❯ Use the arrow keys and spacebar to specify 
   accounts you would like to remove. Press 
   Enter to confirm the list of accounts you
   wish to remain available.
```

You can also view (and revoke) access tokens from the admin interface at <https://quartopub.com>:

![](images/quarto-pub-tokens.png){.border}

Within this interface you'll see any token you've created from the Quarto CLI. You may revoke this token if you no longer wish it to be active. Click the **New Token** button to create additional tokens that can be used for publishing non-interactively (e.g. from a CI service):

![](images/quarto-pub-new-token.png){.border}

Once you have an access token you can use it with `quarto publish` by defining the `QUARTO_PUB_AUTH_TOKEN` environment variable. For example:

``` {.bash filename="Terminal"}
# token created at https://quartopub.com/profile/
export QUARTO_PUB_AUTH_TOKEN="qpa_k4yWKEmlu5wkvx173Ls"

# publish to quarto-pub site specified within _publish.yml
quarto publish quarto-pub
```

See the article on [Publishing with CI](ci.qmd) for additional details on non-interactive use of `quarto publish`.

## GitHub Action

{{< include _github-action-basics.md >}}

``` {.yaml filename=".github/workflows/publish.yml"}
on:
  workflow_dispatch:
  push:
    branches: main

name: Quarto Publish

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository
        uses: actions/checkout@v4 

      - name: Set up Quarto
        uses: quarto-dev/quarto-actions/setup@v2

      - name: Render and Publish 
        uses: quarto-dev/quarto-actions/publish@v2
        with:
          target: {{< meta provider >}}
          QUARTO_PUB_AUTH_TOKEN: ${{ secrets.QUARTO_PUB_AUTH_TOKEN }}
```

### Quarto Pub Credentials

The final step is to configure your GitHub Action with the credentials required for publishing. To do this you need to create a Quarto Pub personal access token and then configure your GitHub action to be able to read it:

1.  If you don't already have an access token, go to the Quarto Pub [account profile page](https://quartopub.com/profile), and click on **New Token** to create a token. Give this token a memorable name, and copy the token to the clipboard.

2.  Add the Quarto Pub access token to your repository's action **Secrets** (accessible within repository **Settings**). You will see a **New repository secret** button at the top right:

    ![](images/gh-new-repository-secret.png){.border}

    Click the button and add the personal access token from step 1 as a secret named `QUARTO_PUB_AUTH_TOKEN`:

    ![](images/gh-action-quarto-pub-secret.png){.border}

### Ignoring Output

{{< include _ignoring-output.md >}}

### Commit to Publish

Once you've specified your publishing action and {{< meta provider-name >}} credentials, and pushed your updated repository (including the `_freeze` directory) to GitHub, your action will run with this and subsequent commits, automatically rendering and publishing to {{< meta provider-name >}}.

{{< include _github-action-executing-code.md >}}

#### Example: Jupyter with venv

Here is a complete example of a GitHub Action that installs Python, Jupyter, and package dependencies from `requirements.txt`, then executes code and renders output to {{< meta provider-name >}}:

``` {.yaml filename=".github/workflows/publish.yml"}
on:
  workflow_dispatch:
  push:
    branches: main

name: Quarto Publish

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository
        uses: actions/checkout@v4 

      - name: Set up Quarto
        uses: quarto-dev/quarto-actions/setup@v2
        
      - name: Install Python and Dependencies
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'
          cache: 'pip'
      - run: pip install jupyter
      - run: pip install -r requirements.txt
      
      - name: Render and Publish 
        uses: quarto-dev/quarto-actions/publish@v2
        with:
          target: {{< meta provider >}}
          QUARTO_PUB_AUTH_TOKEN: ${{ secrets.QUARTO_PUB_AUTH_TOKEN }}
```

#### Example: Knitr with renv

Here is a complete example of a GitHub Action that installs R and package dependencies from `renv.lock`, then executes code and renders output to {{< meta provider-name >}}:

``` {.yaml filename=".github/workflows/publish.yml"}
on:
  workflow_dispatch:
  push:
    branches: main

name: Quarto Publish

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository
        uses: actions/checkout@v4 

      - name: Set up Quarto
        uses: quarto-dev/quarto-actions/setup@v2
        
      - name: Install R
        uses: r-lib/actions/setup-r@v2
        with:
          r-version: '4.2.0'
      
      - name: Install R Dependencies 
        uses: r-lib/actions/setup-renv@v2
        with:
          cache-version: 1
      
      - name: Render and Publish
        uses: quarto-dev/quarto-actions/publish@v2
        with:
          target: {{< meta provider >}}
          QUARTO_PUB_AUTH_TOKEN: ${{ secrets.QUARTO_PUB_AUTH_TOKEN }}
```

### Additional Options

It's possible to have a Quarto project in a larger GitHub repository, where the Quarto project does not reside at the top-level directory. In this case, add a `path` input to the invocation of the `publish` action. For example:

``` yaml
- name: Render and Publish
  uses: quarto-dev/quarto-actions/publish@v2
  with:
    target: {{< meta provider >}}
    path: subdirectory-to-use
    QUARTO_PUB_AUTH_TOKEN: ${{ secrets.QUARTO_PUB_AUTH_TOKEN }}
```

By default, `quarto publish` will re-render your project before publishing it. However, if you store the rendered output in version control, you don't need the GitHub action to re-render the project. In that case, add the option `render: false` to the `publish` action:

``` yaml
- name: Render and Publish
  uses: quarto-dev/quarto-actions/publish@v2
  with:
    target: {{< meta provider >}}
    render: false
    QUARTO_PUB_AUTH_TOKEN: ${{ secrets.QUARTO_PUB_AUTH_TOKEN }}
```
```````

## File: docs/publishing/rstudio-connect.qmd
```````
---
title: "Posit Connect"
editor: visual
heading-pad: '#'
---

## Overview

[Posit Connect](https://www.rstudio.com/products/connect/) is a publishing platform for secure sharing of data products within an organization. Use Posit Connect when you want to publish content within an organization rather than on the public internet.

There are several ways to publish Quarto content to Posit Connect:

1.  Use the `quarto publish` command to publish static content rendered on your local machine.

2.  Use the [rsconnect-python](https://docs.rstudio.com/rsconnect-python/) Python package or [quarto](https://quarto-dev.github.io/quarto-r/) R package to publish code for rendering on a Posit Connect server (e.g. for a scheduled report).

3.  Use Connect's support for [Git backed content](https://docs.rstudio.com/connect/user/git-backed/) to automatically re-publish content when code is checked in to a Git repository.

4.  Use a Continuous Integration (CI) service like [Jenkins](https://www.jenkins.io/), [Airflow](https://airflow.apache.org/), or [GitHub Actions](https://docs.github.com/en/actions), to render and publish to Connect.

Each of these options is covered in detail below. If you are just getting started, we strongly recommend using the first approach (`quarto publish`). Then, as your needs evolve, you can consider other more sophisticated options.

## Publish Command

The `quarto publish` command is the easiest way to publish locally rendered content. From the directory where your project is located, execute the `quarto publish` command for Connect:

```{.bash filename="Terminal"}
quarto publish connect
```

If you haven't previously published to Connect you'll be prompted to enter your server's URL:

```{.bash filename="Terminal"}
$ quarto publish connect
 ? Server URL: › 
```

You'll then need to provide a [Connect API Key](https://docs.rstudio.com/connect/user/api-keys/):

```{.bash filename="Terminal"}
$ quarto publish connect
 ? Server URL: › https://connect.example.com/
 ? API Key: › 
```

After authenticating, your content will be rendered and published, and then a browser will open to view its admin page on Connect.

A record of your previous publishes will be stored in a `_publish.yml` file within the project or document directory. This file stores the service, id, and URL of the published content. For example:

``` yaml
- source: project
  connect:
    - id: "3bb5f59f-524a-45a5-9508-77e29a1e8bf0"
      url: "https://connect.example.com/content/3bb5f59f-524a-45a5-9508-77e29a1e8bf0/"
```

Account information is not stored in this file, so it is suitable for checking in to version control and being shared by multiple publishers.

You can customize this behavior of `quarto publish` by providing the following command line options:

{{< include _cli-options.md >}}

To publish a document rather than a website or book, provide the path to the document:

```{.bash filename="Terminal"}
quarto publish connect document.qmd
```

## Publishing with Code

In the preceding example, we rendered content locally and then published it to Connect. In some cases, however, you may want to publish your source code to Connect and then have it rendered on the server (for example, to create a scheduled report that is updated with new data automatically).

The tools for publishing code differ depending on whether you are using the Knitr (R) or Jupyter (Python) engine, so we'll cover them separately below. Note that Quarto must be installed on the Connect server before you attempt to publish with code (this is typically done by an administrator, see the [Quarto Installation](https://docs.rstudio.com/resources/install-quarto/) documentation for additional details).

### Knitr (R)

The [quarto](https://quarto-dev.github.io/quarto-r/) R package includes a set of publishing functions that you can use for publishing Quarto projects with R code to Posit Connect. For example, here we publish a document and a website:

``` r
library(quarto)

quarto_publish_doc(
  "document.qmd", 
  server = "rsc.example.com", 
  account = "njones",
  render = "server"
)

quarto_publish_site(
  server = "rsc.example.com", 
  account = "njones",
  render = "server"
)
```

The `render = "server"` argument is what specifies that you want code rather than just content published.

Note that once you've published for the first time you can update without providing the explicit arguments:

``` r
quarto_publish_site()
```

See the article on [Quarto Publishing from R](https://quarto-dev.github.io/quarto-r/articles/publishing.html) for additional details on using these functions.

#### RStudio IDE

If you are using the RStudio IDE, there is also support for push-button publishing to Posit Connect. Use the publish button <kbd>![](images/publish-button.png){width="23" height="20"}</kbd> from the source editor or viewer pane to publish a document or a website:

![](images/rstudio-publish.png){.border}

See the Connect documentation on [Publishing from the RStudio IDE](https://docs.rstudio.com/connect/user/publishing/) for additional details.

### Jupyter (Python)

The [rsconnect-python](https://docs.rstudio.com/rsconnect-python/) Python package provides a command line interface (CLI) that you can use to publish Quarto documents and websites that use Jupyter to Posit Connect. To use the CLI:

1.  First, install the rsconnect-python package and configure a Posit Connect server for publishing: <https://docs.rstudio.com/connect/user/connecting-cli/>

2.  Then, use the `rsconnect deploy quarto` command from your project directory:

    ```{.bash filename="Terminal"}
    rsconnect deploy quarto
    ```

See the complete documentation on [Publishing Quarto Content](https://docs.rstudio.com/connect/user/publishing-cli-quarto/) for additional details on using the CLI for publishing to Connect.

## Publishing from Git

Content may be deployed to Posit Connect directly from a remote Git repository. Content will automatically fetch from the associated remote Git repository and re-deploy. This allows for integration with Git-centric workflows and continuous deployment automation.

In order to deploy Git-backed content to Posit Connect you'll follow a two step process:

1.  Create and commit a manifest file (this includes information on the R or Python dependencies required to render your content)

2.  Link Posit Connect to the Git repository

Note that Quarto must be installed on the Connect server before you attempt to publish from Git (this is typically done by an administrator, see the [Quarto Installation](https://docs.rstudio.com/resources/install-quarto/) documentation for additional details).

### Creating a Manifest

Consult the Connect documentation on [Git Backed Content](https://docs.rstudio.com/connect/user/git-backed/) for complete details on creating manifests and checking them in to your repository. To give you a general idea of how this works, here is some sample code that creates a manifest for Knitr and Jupyter projects:

``` r
# write a manifest for a Knitr project
install.packages("rsconnect") # if required
rsconnect::writeManifest()
```

```{.bash filename="Terminal"}
# write a manifest for a Jupyter notebook
pip install rsconnect-python # if required
rsconnect write-manifest notebook MyNotebook.ipynb
```

See the documentation on [Git Backed Content](https://docs.rstudio.com/connect/user/git-backed/) for complete details on creating manifests.

### Connecting a Repository

Connect users must have *at least* the `publisher` role in order to create new content from a Git repository.

On the **Content** page, there is a button near the top labeled **Publish**. Clicking on this button will expand a menu which contains an item called "Import from Git", which may be clicked to launch a new content wizard.

![](images/import-from-git.png)

You'll be prompted to provide your repository URL, branch to publish from, and target directory to publish from (e.g., the one containing your `manifest.json`).

See the documentation on [Git Backed Content](https://docs.rstudio.com/connect/user/git-backed/) for complete details on connecting Git repositories to Connect.

## Continuous Integration

You can also deploy Quarto content using a Continuous Integration (CI) service like [Jenkins](https://www.jenkins.io/), [Airflow](https://airflow.apache.org/), or [GitHub Actions](https://docs.github.com/en/actions). In most cases, this will entail scripting the `quarto publish` command, however in the case of GitHub Actions, you can take advantage of the standard Quarto [publish action](https://github.com/quarto-dev/quarto-actions/tree/main/publish).

When publishing to Connect from a CI service you'll need to consider whether you want to execute your Python or R code directly on the CI server or whether you want to take advantage of previously [frozen](/docs/projects/code-execution.qmd#freeze) execution results. We'll explore this possibility first and then proceed to the specifics of how to publish from CI.

### Freezing Computations

Depending on how complicated your run-time requirements (packages, database credentials, etc.) are, you might find it more convenient to restrict execution of Python and R code to local contexts that have the required software and credentials.

{{< include _freeze-basics.md >}}

If you'd rather have CI publishing execute all Python and R code contained in your project, you'll need to ensure that the requisite version of these tools (and any required packages) are installed on the CI server. How to do this is outside the scope of this article---to learn more about saving and restoring dependencies, see the article on [Virtual Environments](/docs/projects/virtual-environments.qmd).

### Publish Command

You can publish Quarto content to Connect using any CI service by scripting the `quarto publish` command. To do this, you'll need to make sure that your Connect server address and credentials are available as environment variables on the CI server.

| Variable          | Description                                                                |
|------------------|------------------------------------------------------|
| `CONNECT_SERVER`  | Address of Posit Connect server (e.g., `https://connect.example.com`).    |
| `CONNECT_API_KEY` | Posit Connect [API Key](https://docs.rstudio.com/connect/user/api-keys/) |

You will furthermore need to specify the ID of the target content to update. This will most frequently be drawn from the `_publish.yml` file that is saved into your project directory during publishing. For example:

```{.yaml filename="_publish.yml"}
- source: project
  connect:
    - id: 4f2ffc46-24b0-4cc7-a854-c5eb671e0dd7
      url: 'https://connect.example.com/content/4f2ffc46-24b0-4cc7-a854-c5eb671e0dd7/'
```

Assuming that you have a `_publish.yml` like the above, you can publish to Connect from CI with the following commands:

```{.bash filename="Terminal"}
export CONNECT_SERVER=https://connect.example.com/
export CONNECT_API_KEY=7C0947A852D8
quarto publish connect
```

Alternatively, if you don't have a `_publish.yml` file, you can specify the ID on the command line as follows:

```{.bash filename="Terminal"}
quarto publish connect --id 4f2ffc46-24b0-4cc7-a854-c5eb671e0dd7
```

### GitHub Actions

If your CI service is [GitHub Actions](https://docs.github.com/en/actions) then you can take advantage of Quarto's standard [publish action](https://github.com/quarto-dev/quarto-actions/tree/main/publish) to automate deploying to Connect.

#### Server Credentials

Before creating the publish action, you need to ensure that your repository has the credentials required for publishing to Connect. You can do this as follows:

1.  If you don't already have one, create a Posit Connect [API Key](https://docs.rstudio.com/connect/user/api-keys/) from the requisite Connect server and then copy it to the clipboard.

2.  Add the Connect API Key to your repository's action **Secrets** (accessible within repository **Settings**). You will see a **New repository secret** button at the top right:

    ![](images/gh-new-repository-secret.png){.border}

    Click the button and add the API Key from step 1 as a secret named `CONNECT_API_KEY`:

    ![](images/gh-action-connect-secret.png){.border}

#### Publish Action

To setup your publish action, create a `.github/workflows/publish.yml` file in your repository. If you are [Freezing Computations] (i.e. not running Python or R code within your action), then the file would look something like this:

```{.yaml filename=".github/workflows/publish.yml"}
on:
  workflow_dispatch:
  push:
    branches: main

name: Quarto Publish

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository
        uses: actions/checkout@v4 

      - name: Set up Quarto
        uses: quarto-dev/quarto-actions/setup@v2

      - name: Render and Publish 
        uses: quarto-dev/quarto-actions/publish@v2
        with:
          target: connect
          CONNECT_SERVER: https://connect.example.com
          CONNECT_API_KEY: ${{ secrets.CONNECT_API_KEY }}
```

Once you've pushed your updated repository (including the publish action and `_freeze` directory) to GitHub, your action will run with this and subsequent commits, automatically rendering and publishing to Connect.

#### Executing Code

If you prefer, you can also configure GitHub Actions to execute Python or R code as part of rendering. While this might reflexively seem like the best approach, consider the following requirements imposed when you execute code within a CI service like GitHub Actions:

{{< include _ci-execute-requirements.md >}}

##### Prerequisites

The best way to ensure that your code can be executed within a GitHub Action is to use a virtual environment like [venv](https://packaging.python.org/guides/installing-using-pip-and-virtual-environments/#creating-a-virtual-environment) or [renv](https://rstudio.github.io/renv/articles/renv.html) with your project (below we'll provide example actions for each). If you aren't familiar with using these tools check out the article on using [Virtual Environments](/docs/projects/virtual-environments.qmd) with Quarto to learn more.

Once you've decided to execute code within your GitHub Action you can remove the `freeze: auto` described above from your `_quarto.yml` configuration. Note that if you want to use `freeze` selectively for some documents or directories that is still possible (for a directory, create a `_metadata.yml` file in the directory and specify your freeze configuration there---this is what Quarto does by default for the `posts` folder of blog projects).

##### Example: Jupyter with venv

Here is a complete example of a GitHub Action that installs Python, Jupyter, and package dependencies from `requirements.txt`, then executes code and renders output to Connect:

```{.yaml filename=".github/workflows/publish.yml"}
on:
  workflow_dispatch:
  push:
    branches: main

name: Quarto Publish

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository
        uses: actions/checkout@v4 

      - name: Set up Quarto
        uses: quarto-dev/quarto-actions/setup@v2
        
      - name: Install Python and Dependencies
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'
          cache: 'pip'
      - run: pip install jupyter
      - run: pip install -r requirements.txt
      
      - name: Render and Publish 
        uses: quarto-dev/quarto-actions/publish@v2
        with:
          target: connect
          CONNECT_SERVER: https://connect.example.com
          CONNECT_API_KEY: ${{ secrets.CONNECT_API_KEY }}
```

##### Example: Knitr with renv

Here is a complete example of a GitHub Action that installs R and package dependencies from `renv.lock`, then executes code and renders output to Connect:

```{.yaml filename=".github/workflows/publish.yml"}
on:
  workflow_dispatch:
  push:
    branches: main

name: Quarto Publish

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository
        uses: actions/checkout@v4 

      - name: Set up Quarto
        uses: quarto-dev/quarto-actions/setup@v2
        
      - name: Install R
        uses: r-lib/actions/setup-r@v2
        with:
          r-version: '4.2.0'
      
      - name: Install R Dependencies 
        uses: r-lib/actions/setup-renv@v2
        with:
          cache-version: 1
      
      - name: Render and Publish
        uses: quarto-dev/quarto-actions/publish@v2
        with:
          target: connect
          CONNECT_SERVER: https://connect.example.com
          CONNECT_API_KEY: ${{ secrets.CONNECT_API_KEY }}
```

#### Additional Options

It's possible to have a Quarto project in a larger GitHub repository, where the Quarto project does not reside at the top-level directory. In this case, add a `path` input to the invocation of the `publish` action. For example:

``` yaml
- name: Render and Publish
  uses: quarto-dev/quarto-actions/publish@v2
  with:
    target: connect
    path: subdirectory-to-use
    CONNECT_SERVER: https://connect.example.com
    CONNECT_API_KEY: ${{ secrets.CONNECT_API_KEY }}
```

By default, `quarto publish` will re-render your project before publishing it. However, if you store the rendered output in version control, you don't need the GitHub action to re-render the project. In that case, add the option `render: false` to the `publish` action:

``` yaml
- name: Render and Publish
  uses: quarto-dev/quarto-actions/publish@v2
  with:
    target: connect
    render: false
    CONNECT_SERVER: https://connect.example.com
    CONNECT_API_KEY: ${{ secrets.CONNECT_API_KEY }}
```
```````

## File: docs/reference/cells/cells-jupyter.qmd
```````
---
title: "Code Cells: Jupyter"
---

[Jupyter](https://jupyter.org) is an open document format that supports computations in many languages including Python, R, and Julia. Learn more about using Jupyter with Quarto in the articles on [Using Python](/docs/computations/python.qmd) and [Using Julia](/docs/computations/julia.qmd).

## Overview

Cell options affect the execution and output of executable code blocks. They are specified within comments at the top of a block. For example:

```{{python}}
#| label: fig-polar
#| echo: false
#| fig-cap: "A line plot on a polar axis"
```
```````

## File: docs/reference/cells/cells-knitr.qmd
```````
---
title: "Code Cells: Knitr"
---

[Knitr](https://yihui.org/knitr/) is an R package for dynamic document generation. Learn more about using Knitr in the article on [Using R](/docs/computations/r.qmd).

## Overview

Cell options affect the execution and output of executable code blocks. They are specified within comments at the top of a block. For example:

``` {{r}}
#| label: fig-polar
#| echo: false
#| fig-cap: "A line plot on a polar axis"
```
```````

## File: docs/reference/cells/cells-ojs.qmd
```````
---
title: "Code Cells: Observable JS"
---

[Observable JS](https://observablehq.com/@observablehq/observables-not-javascript) is a set of enhancements to vanilla JavaScript created by [Mike Bostock](https://en.wikipedia.org/wiki/Mike_Bostock) (also the author of [D3](https://d3js.org/)). Observable JS is distinguished by its [reactive runtime](https://github.com/observablehq/runtime), which is especially well suited for interactive data exploration and analysis.

Learn more about using Observable JS with Quarto in the articles on [Interactive Documents with Observable JS](/docs/interactive/ojs/index.qmd).

## Overview

Cell options affect the execution and output of executable code blocks. They are specified within comments at the top of a block. For example:

```{{ojs}}
//| label: fig-polar
//| echo: false
//| fig-cap: "A line plot on a polar axis"
```
```````

## File: docs/reference/cells/index.qmd
```````
---
title: Code Cells
toc: false
anchor-sections: false
listing:
  id: reference-links
  template: ../../../ejs/links.ejs
  contents: ./reference.yml
---

The options available in an executable code cell depend on the engine used to process them. The engine is chosen automatically, as outlined in the [Guide](/docs/computations/execution-options.qmd#engine-binding).

::: {#reference-links .column-screen-inset-right style="max-width: 850px;"}
:::
```````

## File: docs/reference/formats/markdown/commonmark.qmd
```````
---
title: "CommonMark Options"
spec: https://commonmark.org/
---

CommonMark is a strongly defined, highly compatible specification of Markdown. You can learn more about CommonMark at <https://commonmark.org/>.
```````

## File: docs/reference/formats/markdown/gfm.qmd
```````
---
title: "GFM Options"
spec: https://github.github.com/gfm/
---

GitHub Flavored Markdown, often shortened as GFM, is the dialect of Markdown that is currently supported for user content on GitHub.com and GitHub Enterprise. To learn about GFM see <https://github.github.com/gfm/>.

See the GFM format [user guide](/docs/output-formats/gfm.qmd) for more details on creating GFM output with Quarto.
```````

## File: docs/reference/formats/markdown/markua.qmd
```````
---
title: "Markua Options"
spec: https://leanpub.com/markua/read
---

Markua is a markdown variant used by Leanpub. You can learn more about Markua at <https://leanpub.com/markua/read>.
```````

## File: docs/reference/formats/presentations/beamer.qmd
```````
---
title: "Beamer Options"
spec: https://ctan.org/pkg/beamer
---

Beamer is a LaTeX class for producing presentations and slides. To learn more about Beamer see <https://ctan.org/pkg/beamer>.

See the Beamer format [user guide](/docs/presentations/beamer.qmd) for more details on creating Beamer output with Quarto.
```````

## File: docs/reference/formats/presentations/pptx.qmd
```````
---
title: "PowerPoint Options"
spec: https://en.wikipedia.org/wiki/Microsoft_PowerPoint
---

PowerPoint is the presentation editing software included with Microsoft Office. You can learn more about PowerPoint at <https://en.wikipedia.org/wiki/Microsoft_PowerPoint>.

See the PowerPoint format [user guide](/docs/presentations/powerpoint.qmd) for more details on creating PowerPoint output with Quarto.
```````

## File: docs/reference/formats/presentations/revealjs.qmd
```````
---
title: "Revealjs Options"
spec: https://revealjs.com/
---

Revealjs is an open source HTML presentation framework. To learn more about Revealjs see <https://revealjs.com/>.

See the Revealjs format [user guide](/docs/presentations/revealjs/index.qmd) for more details on creating Revealjs output with Quarto.
```````

## File: docs/reference/formats/wiki/dokuwiki.qmd
```````
---
title: "DocuWiki Options"
spec: https://www.dokuwiki.org/wiki:syntax
---

DokuWiki is a simple to use and highly versatile open source wiki software that doesn't require a database. To learn more about DokuWiki see <https://www.dokuwiki.org>.
```````

## File: docs/reference/formats/wiki/jira.qmd
```````
---
title: "Jira Wiki Options"
spec: https://jira.atlassian.com/secure/WikiRendererHelpAction.jspa?section=all
---

Jira Wiki is the native document format for the Jira issue tracking and project management system from Atlassian. To learn more about Jira Wikis see <https://jira.atlassian.com/secure/WikiRendererHelpAction.jspa?section=all>.
```````

## File: docs/reference/formats/wiki/mediawiki.qmd
```````
---
title: "MediaWiki Options"
spec: https://www.mediawiki.org/wiki/Help:Formatting
---

MediaWiki is the native document format of Wikipedia. To learn more about MediaWiki see <https://www.mediawiki.org>.
```````

## File: docs/reference/formats/wiki/xwiki.qmd
```````
---
title: "XWiki Options"
spec: https://www.xwiki.org/xwiki/bin/view/Documentation/
---

XWiki is an open-source enterprise wiki system. To learn more about XWiki see <https://www.xwiki.org/>.
```````

## File: docs/reference/formats/wiki/zimwiki.qmd
```````
---
title: "ZimWiki Options"
spec: https://zim-wiki.org/
---

Zim is a graphical text editor used to maintain a collection of wiki pages. To learn more about ZimWiki see <https://zim-wiki.org/>.
```````

## File: docs/reference/formats/asciidoc.qmd
```````
---
title: "AsciiDoc Options"
spec: https://asciidoc.org/
---

AsciiDoc is a text document format for writing documentation, articles, and books, ebooks, slideshows, web pages, man pages and blogs. You can learn more about AsciiDoc at <https://asciidoc.org/>.

``` yaml
format: asciidoc
format: asciidoctor
```

::: callout-note
## Asciidoc vs Asciidoctor Format

Pandoc includes support for both the `asciidoc` and `asciidoctor` formats. The `asciidoc` format produces older style syntax that is no longer typically used, while the `asciidoctor` format produces the more current markdown syntax that is part of the formal AsciiDoc specification.

In Quarto, both `asciidoc` and `asciidoctor` are aliases for the `asciidoctor` format.
:::
```````

## File: docs/reference/formats/context.qmd
```````
---
title: "Context Options"
spec: http://www.pragma-ade.nl/
---

Context is a system for typesetting documents based on TEX and METAPOST. You can learn more about Context at <http://www.pragma-ade.nl/>.
```````

## File: docs/reference/formats/dashboard.qmd
```````
---
title: "Dashboard Options"
tbl-colwidths: [25,75]
aliases: 
  - /docs/reference/formats/dashboards.html
---

## Format

The following document and format options are either dashboard-specific or have special behavior within dashboards:

| Option        | Description                                                                                                                                                                                    |
|--------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `title`       | Title (displayed in top left of navigation bar)                                                                                                                                                |
| `author`      | Author (displayed alongside title in smaller font)                                                                                                                                             |
| `logo`        | Logo (displayed left of the title in the navigation bar)                                                                                                                                       |
| `orientation` | `rows` or `columns` (default: `rows`)                                                                                                                                                          |
| `scrolling`   | Use scrolling rather than fill layout? (default: `false`)                                                                                                                                      |
| `expandable`  | Make card content expandable (default: `true`)                                                                                                                                                 |
| `theme`       | Dashboard theme (built in or custom scss)                                                                                                                                                      |
| `nav-buttons` | Buttons to appear on the right side of the navigation bar. Use `linkedin`, `facebook`, `reddit`, `twitter`, `github`, or a custom [Nav Item](/docs/reference/projects/websites.qmd#nav-items). |

For example:

``` yaml
---
title: "Dashboard"
author: "Acme, Inc."
logo: images/acme.png
format:
  dashboard:
     theme: default
     orientation: rows
     expandable: true
     scrolling: false
     nav-buttons:
      - reddit
      - icon: gitlab
        href: https://gitlab.com/
---
```

### Pages

[Pages](/docs/dashboards/layout.qmd#pages) can specify a custom orientation that is distinct from the global orientation:

| Option        | Description                                         |
|---------------|-----------------------------------------------------|
| `orientation` | `rows` or `columns` (default to global orientation) |
| `scrolling`   | `true` or `false` (defaults to global scrolling)    |

For example:

``` {.python .pymd}
---
title: "Dashboard"
format: dashboard
---

# Plots {orientation="columns" scrolling="true"}
```

### Sidebars

Create [Sidebars](/docs/dashboards/layout.qmd#sidebars) by applying the `.sidebar` attribute to a level 1 heading (for global sidebars) or level 2 heading (for page level sidebars).

| Class      | Description                                |
|------------|--------------------------------------------|
| `.sidebar` | Contents should be arranged into a sidebar |

For example:

``` {.python .pymd}
---
title: "Dashboard"
format: dashboard
---

# Plots {.sidebar}
```

### Rows & Columns

Rows and columns support options for customizing their layout and sizing behavior. The following classes can be used to modify layout behavior:

| Class     | Description                                                                      |
|---------------------|---------------------------------------------------|
| `.tabset` | Contents should be arranged into a [Tabset](/docs/dashboards/layout.qmd#tabsets) |
| `.fill`   | Contents should fill available layout space                                      |
| `.flow`   | Contents should flow to their natural size                                       |

Note that in most dashboards, `.fill` and `.flow` are determined automatically based on the contents of cards and don't need to be specified manually.

The following attributes can be used for explicit sizing:

| Option   | Description                                                                                        |
|--------------------------|----------------------------------------------|
| `width`  | Percentage or absolute pixel width (default distributes space evenly across elements in a row)     |
| `height` | Percentage or absolute pixel height (default distributes space evenly across elements in a column) |

For example:

``` {.python .pymd}
---
title: "Dashboard"
format: dashboard
---

## Row {height="65%"}

## Row {height="35%"}
```

Note that if some components specify an explicit `width` or `height` and others do not, then remaining space will be distributed evenly across those elements.

### Cards

Card options enable you to specify a title and various layout behaviors:

| Option       | Description                                                                                                                                                   |
|--------------------------|----------------------------------------------|
| `title`      | Title displayed in card header                                                                                                                                |
| `padding`    | Padding around card content (default: `8px`)                                                                                                                  |
| `expandable` | Make card content expandable (default: `true`)                                                                                                                |
| `width`      | Percentage or absolute pixel width (default distributes space evenly across elements in a row)                                                                |
| `height`     | Percentage or absolute pixel height (default distributes space evenly across elements in a column)                                                            |
| `fill`       | Whether the card should fill it's container or 'flow', matching the height of its content. (Quarto determines the default value based upon the card contents) |

For example:

```` {.python .pymd}
```{{python}}
#| title: "Life Expectancy"
#| padding: 3px
#| expandable: false
#| width: 70%
```
````

These same options can be applied to `.card` divs. For example:

``` {.python .pymd}
::: {.card title="Life Expectancy" padding="3px"}
This is the content.
:::
```

### Value Boxes

[Value Boxes](/docs/dashboards/data-display.qmd#value-boxes) support the following options:

| Option  | Description                                                                                         |
|--------------------------|----------------------------------------------|
| `title` | Title displayed above value                                                                         |
| `icon`  | Icon identifier from [bootstrap icons](https://icons.getbootstrap.com)                              |
| `color` | Background color---this can be any CSS color or one of the theme specific color aliases (see below) |
| `value` | Main display value                                                                                  |

Available themed aliases for `color` include:

{{< include /docs/dashboards/_valuebox-colors.md >}}

Note that value box options can be specified either as cell options or by printing a `dict()` (for Python) or `list()` (for R) (this is helpful when options need to be dynamic). See the [Value Boxes](/docs/dashboards/data-display.qmd#value-boxes) component documentation for details.
```````

## File: docs/reference/formats/docbook.qmd
```````
---
title: "DocBook Options"
spec: https://www.docbook.org/
---

DocBook is an XML schema particularly well suited to books and papers about computer hardware and software (though it is by no means limited to these applications). You can learn more about DocBook at <https://www.docbook.org/>.
```````

## File: docs/reference/formats/docx.qmd
```````
---
title: "MS Word Options"
spec: https://en.wikipedia.org/wiki/Office_Open_XML
search: true
---

MS Word is the word processor included with Microsoft Office. Word uses the OpenXML document format, which you can learn more about at <https://en.wikipedia.org/wiki/Office_Open_XML>.

See the MS Word format [user guide](/docs/output-formats/ms-word.qmd) for more details on creating MS Word output with Quarto.
```````

## File: docs/reference/formats/epub.qmd
```````
---
title: "ePub Options"
spec: https://en.wikipedia.org/wiki/EPUB
---

ePub is an e-book file format that is supported by many e-readers, and compatible software is available for most smartphones, tablets, and computers. You can learn more about ePub at <https://en.wikipedia.org/wiki/EPUB>.
```````

## File: docs/reference/formats/fb2.qmd
```````
---
title: "FictionBook Options"
spec: https://en.wikipedia.org/wiki/FictionBook
---

FictionBook is an open XML-based e-book format. You can learn more about FictionBook at <https://en.wikipedia.org/wiki/FictionBook>.
```````

## File: docs/reference/formats/haddock.qmd
```````
---
title: "Haddock Options"
spec: https://haskell-haddock.readthedocs.io/
---

Haddock is a tool for automatically generating documentation from annotated Haskell source code. You can learn more about Haddock at <https://haskell-haddock.readthedocs.io/>.
```````

## File: docs/reference/formats/html.qmd
```````
---
title: "HTML Options"
spec: https://en.wikipedia.org/wiki/HTML5
search: true
---

HTML is a markup language used for structuring and presenting content on the web. To learn more about HTML see <https://en.wikipedia.org/wiki/HTML5>.

See the HTML format [user guide](/docs/output-formats/html-basics.qmd) for more details on creating HTML output with Quarto.
```````

## File: docs/reference/formats/icml.qmd
```````
---
title: "InDesign Options"
---

ICML is an XML representation of an Adobe InCopy/InDesign document.  
ICML stands for InCopy Markup Language.
```````

## File: docs/reference/formats/ipynb.qmd
```````
---
title: "Jupyter Notebook Options"
spec: https://nbformat.readthedocs.io/
---

Jupyter Notebooks are used to combine software code, computational output, explanatory text and multimedia resources in a single document. Learn more about the Jupyter Notebook format at <https://nbformat.readthedocs.io/>.
```````

## File: docs/reference/formats/jats.qmd
```````
---
title: "JATS Options"
spec: https://jats.nlm.nih.gov/publishing/
---

JATS (Journal Article Tag Suite) is an XML format for marking up and exchanging journal content. You can learn more about JATS here <https://jats.nlm.nih.gov/publishing/>.

``` yaml
format: jats
format: jats_archiving
format: jats_articleauthoring
format: jats_publishing
```
```````

## File: docs/reference/formats/man.qmd
```````
---
title: "Groff Man Page Options"
spec: https://www.gnu.org/software/groff/groff.html
---

The Groff (GNU troff) man page document formats consists of plain text mixed with formatting commands that produce ASCII/UTF8 for display at the terminal. Learn more about Groff at <https://www.gnu.org/software/groff/groff.html>.
```````

## File: docs/reference/formats/ms.qmd
```````
---
title: "Groff Manuscript Options"
spec: hhttps://www.gnu.org/software/groff/groff.html
---

The Groff (GNU troff) manuscript format consists of plain text mixed with formatting commands that produces PostScript, PDF, or HTML. Learn more about Groff at <https://www.gnu.org/software/groff/groff.html>.
```````

## File: docs/reference/formats/muse.qmd
```````
---
title: "Emacs Muse Options"
spec: https://www.gnu.org/software/emacs-muse/manual/
---

Emacs Muse is an authoring and publishing environment for Emacs. It simplifies the process of writing documents and publishing them to various output formats. To learn more about Emacs Muse see <https://www.gnu.org/software/emacs-muse/manual/>.
```````

## File: docs/reference/formats/odt.qmd
```````
---
title: "OpenDocument Options"
spec: https://en.wikipedia.org/wiki/OpenDocument
---

OpenDocument, is an open standard file format for word processing documents It was developed with the aim of providing an open, XML-based file format specification for office applications. To learn more about OpenDocument see <https://en.wikipedia.org/wiki/OpenDocument>.
```````

## File: docs/reference/formats/opml.qmd
```````
---
title: "OPML Options"
spec: https://en.wikipedia.org/wiki/OPML
---

OPML (Outline Processor Markup Language) is an XML format for outlines. To learn more about OPML see <https://en.wikipedia.org/wiki/OPML>.
```````

## File: docs/reference/formats/org.qmd
```````
---
title: "Emacs Org-Mode Options"
spec: https://orgmode.org/
---

Org-Mode is an Emacs major mode for keeping notes, authoring documents, computational notebooks, literate programming, maintaining to-do lists, planning projects, and more. To learn more about Org-Mode see <https://orgmode.org/>.
```````

## File: docs/reference/formats/rst.qmd
```````
---
title: "reStructuredText Options"
spec: https://docutils.sourceforge.io/rst.html
---

reStructuredText is an easy-to-read, what-you-see-is-what-you-get plaintext markup syntax and parser system. It is useful for in-line program documentation (such as Python docstrings), for quickly creating simple web pages, and for standalone documents. You can learn more about reStructuredText at <https://docutils.sourceforge.io/rst.html>.
```````

## File: docs/reference/formats/rtf.qmd
```````
---
title: "RTF Options"
spec: https://en.wikipedia.org/wiki/Rich_Text_Format
---

The Rich Text Format (RTF) is a proprietary document file format with published specification developed by Microsoft Corporation from 1987 until 2008 for cross-platform document interchange with Microsoft products. Learn more about RTF at <https://en.wikipedia.org/wiki/Rich_Text_Format>.
```````

## File: docs/reference/formats/tei.qmd
```````
---
title: "TEI Options"
spec: https://github.com/TEIC/TEI-Simple
---

TEI Simple aims to define a new *highly-constrained* and *prescriptive* subset of the Text Encoding Initiative (TEI) Guidelines suited to the representation of early modern and modern books, a formally-defined set of processing rules which permit modern web applications to easily present and analyze the encoded texts, mapping to other ontologies, and processes to describe the encoding status and richness of a TEI digital text. Learn more about TEI at <https://github.com/TEIC/TEI-Simple>.
```````

## File: docs/reference/formats/texinfo.qmd
```````
---
title: "Texinfo Options"
spec: https://www.gnu.org/software/texinfo/
---

Texinfo is the official documentation format of the [GNU project](http://www.gnu.org/). Texinfo uses a single source file to produce output in a number of formats, both online and printed (DVI, HTML, Info, PDF, XML, etc.). To learn more about Texinfo see <https://www.gnu.org/software/texinfo/>.
```````

## File: docs/reference/formats/textile.qmd
```````
---
title: "Textile Options"
spec: https://www.promptworks.com/textile
---

Textile is a simple text markup language that makes it easy to structure content for blogs, wikis, and documentation. To learn more about Textile see <https://www.promptworks.com/textile>.
```````

## File: docs/reference/formats/typst.qmd
```````
---
title: "Typst Options"
spec: https://typst.app/docs/
---

[Typst](https://github.com/typst/typst) is a new open-source markup-based typesetting system that is designed to be as powerful as LaTeX while being much easier to learn and use. Typst creates beautiful PDF output with blazing fast render times.

See the Typst format [user guide](/docs/output-formats/typst.qmd) for more details on creating Typst output with Quarto.
```````

## File: docs/reference/metadata/brand.qmd
```````
---
title: "Brand"
format: html
---

The `brand` option is used to define cross-format branding. You can read more about using [Brand in the Guide](/docs/authoring/brand.qmd).

Set brand options in the `_brand.yml` file:

```{.yaml filename="_brand.yml"}
color:
  palette:
    blue: "#1c84e5"
  foreground: blue
```

You can also specify brand options in a document header under `brand`:

```{.yaml filename="document.qmd"}
---
brand:
  color:
    palette:
      blue: "#1c84e5"
    foreground: blue
---
```
```````

## File: docs/reference/metadata/citation.qmd
```````
---
title: "Citation Metadata"
---

You can provide citation data for Quarto documents in the document front matter. The citation options are based upon the [Citation Style Language (CSL) specification for items](https://docs.citationstyles.org/en/stable/specification.html), but as YAML (rather than XML).

``` yaml
---
citation:
  type: article-journal
  container-title: ACM Transactions on Embedded Computing Systems
  volume: 21
  issue: 2
  issued: 2022-03
  issn: 1539-9087
  doi: 10.1145/3514174
---
```
```````

## File: docs/reference/metadata/crossref.qmd
```````
---
title: Cross Reference Options
---

The `crossref` option is used to customize the appearance and behavior of cross-references. You can read more about using [Cross-References in the Guide](/docs/authoring/cross-references.qmd).

```yaml
---
crossref:
  labels: roman
  title-delim: "-"
---
```
```````

## File: docs/reference/projects/books.qmd
```````
---
title: "Book Options"
project-type: book
project-type-upper: Book
project-output-dir: _book
---

All available options for `book` projects are documented below. See [Creating a Book](/docs/books/) for an in-depth guide to creating books with Quarto.

{{< include _websites-pre.md >}}

::: {#table-book}
:::

{{< include _websites.md >}}
```````

## File: docs/reference/projects/manuscripts.qmd
```````
---
title: "Manuscript Options"
project-type: manuscript
project-type-upper: Manuscript
project-output-dir: _manuscript
---

All available options for `manuscript` projects are documented below. See [Quarto Manuscripts](/docs/manuscripts/) for an in-depth guide to creating manuscripts with Quarto.

::: {#table-manuscript}
:::
```````

## File: docs/reference/projects/options.qmd
```````
---
title: "Project Options"
project-type: default
project-output-dir: _output
---

{{< include _options.md >}}
```````

## File: docs/reference/projects/websites.qmd
```````
---
title: "Website Options"
project-type: website
is_website: true
project-type-upper: Website
project-output-dir: _site
---

All available options for `website` projects are documented below. See [Creating a Website](/docs/websites/) for an in-depth guide to creating websites with Quarto.

{{< include _websites-pre.md >}}


::: {#table-website}
:::

{{< include _websites.md >}}
```````

## File: docs/reference/dates.qmd
```````
---
title: Quarto Dates and Date Formatting
search: true
aliases: 
  - /reference/date-format.html
---

## Date Parsing

When you write a date for Quarto document, Quarto will attempt to parse a date string by trying a number of standard forms before ultimately attempting to infer the date format. Quarto will try dates formatted as follows, in the following order:

-   `MM/dd/yyyy`
-   `MM-dd-yyyy`
-   `MM/dd/yy`
-   `MM-dd-yy`
-   `yyyy-MM-dd`
-   `dd MM yyyy`
-   `MM dd, yyyy`
-   `YYYY-MM-DDTHH:mm:ssZ`

In addition, you may also provide date keywords, which will provide a dynamic date.

| Keyword         | Date                                                             |
|-----------------|-------------------------------------------------------|
| `today`         | The current local date, with the time portion set to 0.          |
| `now`           | The current local date and time.                                 |
| `last-modified` | The last modified date and time of the input file containing the date. |

## Date Formatting

When specifying a date format in Quarto, there are two ways to represent the format that you'd like.

### Using a Date Style

You can specify a simple date style which will be used to format the date.

For example:

``` yaml
---
date: 03/07/2005
date-format: long
---
```

Valid styles and examples of the formatted output are as follows:

| Style    | Description                                 | Example               |
|----------------|--------------------------------------|-------------------|
| `full`   | A full date that includes the weekday name  | Monday, March 7, 2005 |
| `long`   | A long date that includes a wide month name | March 7, 2005         |
| `medium` | A medium date                               | Mar 7, 2005           |
| `short`  | A short date with a numeric month           | 3/7/05                |
| `iso`    | A short date in ISO format                  | 2005-03-07            |

### Using a Date Format

You can also specify a date format string that will be used to format the date. For example:

``` yaml
---
date: 03/07/2005
date-format: "MMM D, YYYY"
```

The permissible values in this string include:

| **Format String** | **Output**            | **Description**                                                                                               |
|------------------|------------------|------------------------------------|
| `YY`              | 18                    | Two-digit year                                                                                                |
| `YYYY`            | 2018                  | Four-digit year                                                                                               |
| `M`               | 1-12                  | The month, beginning at 1                                                                                     |
| `MM`              | 01-12                 | The month, 2-digits                                                                                           |
| `MMM`             | Jan-Dec               | The abbreviated month name                                                                                    |
| `MMMM`            | January-December      | The full month name                                                                                           |
| `D`               | 1-31                  | The day of the month                                                                                          |
| `DD`              | 01-31                 | The day of the month, 2-digits                                                                                |
| `d`               | 0-6                   | The day of the week, with Sunday as 0                                                                         |
| `dd`              | Su-Sa                 | The min name of the day of the week                                                                           |
| `ddd`             | Sun-Sat               | The short name of the day of the week                                                                         |
| `dddd`            | Sunday-Saturday       | The name of the day of the week                                                                               |
| `H`               | 0-23                  | The hour                                                                                                      |
| `HH`              | 00-23                 | The hour, 2-digits                                                                                            |
| `h`               | 1-12                  | The hour, 12-hour clock                                                                                       |
| `hh`              | 01-12                 | The hour, 12-hour clock, 2-digits                                                                             |
| `m`               | 0-59                  | The minute                                                                                                    |
| `mm`              | 00-59                 | The minute, 2-digits                                                                                          |
| `s`               | 0-59                  | The second                                                                                                    |
| `ss`              | 00-59                 | The second, 2-digits                                                                                          |
| `SSS`             | 000-999               | The millisecond, 3-digits                                                                                     |
| `Z`               | +05:00                | The offset from UTC, ±HH:mm                                                                                   |
| `ZZ`              | +0500                 | The offset from UTC, ±HHmm                                                                                    |
| `A`               | AM PM                 |                                                                                                               |
| `a`               | am pm                 |                                                                                                               |
| `Q`               | 1-4                   | Quarter                                                                                                       |
| `Do`              | 1st 2nd ... 31st      | Day of Month with ordinal                                                                                     |
| `k`               | 1-24                  | The hour, beginning at 1                                                                                      |
| `kk`              | 01-24                 | The hour, 2-digits, beginning at 1                                                                            |
| `X`               | 1360013296            | Unix Timestamp in second                                                                                      |
| `x`               | 1360013296123         | Unix Timestamp in millisecond                                                                                 |
| `w`               | 1 2 ... 52 53         | Week of year ( dependent [`WeekOfYear` ](https://day.js.org/docs/en/plugin/week-of-year)plugin )              |
| `ww`              | 01 02 ... 52 53       | Week of year, 2-digits ( dependent [`WeekOfYear` ](https://day.js.org/docs/en/plugin/week-of-year)plugin )    |
| `W`               | 1 2 ... 52 53         | ISO Week of year ( dependent [`IsoWeek` ](https://day.js.org/docs/en/plugin/iso-week)plugin )                 |
| `WW`              | 01 02 ... 52 53       | ISO Week of year, 2-digits ( dependent [`IsoWeek` ](https://day.js.org/docs/en/plugin/iso-week)plugin )       |
| `wo`              | 1st 2nd ... 52nd 53rd | Week of year with ordinal ( dependent [`WeekOfYear` ](https://day.js.org/docs/en/plugin/week-of-year)plugin ) |
| `gggg`            | 2017                  | Week Year ( dependent [`WeekYear` ](https://day.js.org/docs/en/plugin/week-year)plugin )                      |
| `GGGG`            | 2017                  | ISO Week Year ( dependent [`IsoWeek` ](https://day.js.org/docs/en/plugin/iso-week)plugin )                    |
| `z`               | EST                   | Abbreviated named offset ( dependent [`Timezone` ](https://day.js.org/docs/en/plugin/timezone)plugin )        |
| `zzz`             | Eastern Standard Time | Unabbreviated named offset ( dependent [`Timezone`](https://day.js.org/docs/en/plugin/timezone)plugin )       |

To escape characters, wrap them in square brackets (e.g. `[MM]`).

Example formats and outputs include:

| Format                                 | Output                                |
|------------------------------------|------------------------------------|
| `MMM D, YYYY`                          | Mar 7, 2005                           |
| `DD/MM/YYYY`                           | 07/03/2005                            |
| `[YYYYescape] YYYY-MM-DDTHH:mm:ssZ[Z]` | YYYYescape 2005-03-07T00:00:00-05:00Z |
| `YYYY-MM-DDTHH:mm:ssZ`                 | 2005-03-07T00:00:00-05:00             |
| `dddd MMM D, YYYY`                     | Monday Mar 7, 2005                    |
```````

## File: docs/reference/globs.qmd
```````
---
title: Quarto Glob Syntax
search: true
---

## Overview

Quarto sometimes allows you to provide a path or paths using glob syntax, providing wildcard expansion and other behavior that makes it simple to match a list of files without having to specify each file individually. Globs may be used:

-   When specifying render targets in Quarto projects (see [Render Targets](/docs/projects/quarto-projects.qmd#render-targets)).
-   When defining resources for Quarto websites (see [Site Resources](/docs/websites/website-tools.qmd#site-resources)).
-   When defining documents to include in a listing (see [Listing Contents](/docs/websites/website-listings.qmd#listing-contents)).
-   When automatically creating navigation for sidebars (see [Auto Navigation](/docs/websites/website-navigation.qmd#auto-generation)).

## Glob Syntax

The below is a general reference of the syntax used for globs in Quarto. Note that globs match the filesystem recursively. If you prefer that they don't, then prefix the pattern with a `/` (for example, use `/*.qmd` rather than `*.qmd`).

-   `*` - Matches everything.
-   `{foo,bar}` - Matches `foo` or `bar`.
-   `[abcd]` - Matches `a`, `b`, `c` or `d`.
-   `[a-d]` - Matches `a`, `b`, `c` or `d`.
-   `[!abcd]` - Matches any single character besides `a`, `b`, `c` or `d`.
-   `[[:<class>:]]` - Matches any character belonging to `<class>`.
    -   `[[:alnum:]]` - Matches any digit or letter.
    -   `[[:digit:]abc]` - Matches any digit, `a`, `b` or `c`.
    -   See <https://facelessuser.github.io/wcmatch/glob/#posix-character-classes> for a complete list of supported character classes.
-   `\` - Escapes the next character for an `os` other than `"windows"`.
-   \` - Escapes the next character for `os` set to `"windows"`.
-   `/` - Path separator.
-   `\` - Additional path separator only for `os` set to `"windows"`.
-   `?(foo|bar)` - Matches 0 or 1 instance of `{foo,bar}`.
-   `@(foo|bar)` - Matches 1 instance of `{foo,bar}`. They behave the same.
-   `*(foo|bar)` - Matches *n* instances of `{foo,bar}`.
-   `+(foo|bar)` - Matches *n \> 0* instances of `{foo,bar}`.
-   `!(foo|bar)` - Matches anything other than `{foo,bar}`.
-   `**` - Matches any number of any path segments.
    -   Must comprise its entire path segment in the provided glob.
    -   See <https://www.linuxjournal.com/content/globstar-new-bash-globbing-option>.
```````

## File: docs/reference/index.qmd
```````
---
title: "Reference"
subtitle: Options reference for formats, code cells, and projects. See the [user guide](/docs/guide/index.qmd) for   more in-depth documentation on usage. 
toc: false
tbl-colwidths: [30, 70]
anchor-sections: false
listing:
  id: reference-links
  template: ../../ejs/links.ejs
  contents: ./reference.yml
image: /images/hero_right.png  
---

::: {#reference-links .column-screen-inset-right style="max-width: 850px;"}
:::
```````

## File: docs/tools/_examples/diagrams.qmd
```````
```{dot}
//| echo: fenced
graph G {
  layout=neato
  A -- B;
  B -- C;
  A -- C;
  A -- D;
}
```
```````

## File: docs/tools/_examples/python.qmd
```````
---
title: "matplotlib demo"
format:
  html:
    code-fold: true
jupyter: python3
---

For a demonstration of a line plot on a polar axis, see @fig-polar.



```{python}
#| label: fig-polar
#| fig-cap: "A line plot on a polar axis"

import numpy as np
import matplotlib.pyplot as plt

r = np.arange(0, 2, 0.01)
theta = 2 * np.pi * r
fig, ax = plt.subplots(
  subplot_kw = {'projection': 'polar'} 
)
ax.plot(theta, r)
ax.set_rticks([0.5, 1, 1.5, 2])
ax.grid(True)
plt.show()
```

![](500px-Celestial_spiral_with_a_twist.jpg){#fig-star}

Photo by ALMA (ESO/NAOJ/NRAO)/H. Kim et al. - [Original](https://www.eso.org/public/images/potw1710a/), [CC BY 4.0](https://creativecommons.org/licenses/by/4.0)

$$
\theta = 2\pi r
$$
```````

## File: docs/tools/positron/index.qmd
```````
---
title: Positron
---

## Overview

Positron bundles both the Quarto CLI and the VS Code Quarto extension so it comes ready to work with Quarto out-of-the-box.

The [Quarto VS Code Extension](https://open-vsx.org/extension/quarto/quarto) provides the support for Quarto in Positron, including:

-   Integrated render and preview for Quarto documents.
-   Syntax highlighting for markdown and embedded languages
-   Completion and diagnostics for YAML options
-   Completion for embedded languages (e.g. Python, R, Julia, etc.)
-   Commands and key-bindings for running cells and selected lines.
-   Live preview for LaTeX math as well as Mermaid and Graphviz diagrams

The Quarto extension integrates directly with Positron's native R and Python features.
For example, here the Quarto extension runs a Python cell in the active Python Console and shows a preview of an included image.

![](/docs/tools/images/positron-python.png){.border .preview-image .light-content fig-alt="Screen shot of Positron editor with three vertical sections. The leftmost includes the file explorer, and quarto assist pane. The second pane is the source code for a quarto file with python code, and the active Python Console. The third shows the Environment and Plots for the active console populated with the output of the code cells."}

![](/docs/tools/images/positron-python-dark.png){.border .dark-content .preview-image fig-alt="Screen shot of Positron editor with three vertical sections. The leftmost includes the file explorer, and quarto assist pane. The second pane is the source code for a quarto file with python code, and the active Python Console. The third shows the Environment and Plots for the active console populated with the output of the code cells."}

The Quarto extension also works well with other extensions bundled with Positron, like Jupyter extension, and those you might install separately, like the Julia extension.

{{< include ../_code-oss-editors.md >}}
```````

## File: docs/tools/positron/notebook.qmd
```````
---
title: Positron Notebook Editor
---

{{< include ../_code-oss-notebook.md >}}
```````

## File: docs/tools/positron/visual-editor.qmd
```````
---
title: "Visual Editing in Positron"
---

{{< include ../_code-oss-visual-editor.md >}}
```````

## File: docs/tools/vscode/index.qmd
```````
---
title: VS Code
aliases: 
  - /docs/tools/vscode.html
---

## Overview

Quarto can render Jupyter notebooks represented as plain text (`.qmd`) or as a normal notebook file (`.ipynb`). The [Quarto VS Code Extension](https://marketplace.visualstudio.com/items?itemName=quarto.quarto) includes many tools that enhance working these documents, including:

-   Integrated render and preview for Quarto documents.
-   Syntax highlighting for markdown and embedded languages
-   Completion and diagnostics for YAML options
-   Completion for embedded languages (e.g. Python, R, Julia, etc.)
-   Commands and key-bindings for running cells and selected lines.
-   Live preview for LaTeX math as well as Mermaid and Graphviz diagrams

The Quarto extension integrates directly with the Jupyter, R, and Julia extensions. For example, here the Quarto extension runs a Python cell and shows contextual help for Python functions:

![](/docs/computations/images/python-vscode.png){.border .preview-image fig-alt="Screen shot of VS Code editor with three vertical sections. The leftmost includes the file explorer, and quarto help. The second pane is the source code for a quarto file with python code. The third is interactive with Python running and output of the code cells shown."}

You can install the Quarto extension from the [VS Code Extension Marketplace](https://marketplace.visualstudio.com/items?itemName=quarto.quarto) or the [Open VSX Registry](https://open-vsx.org/extension/quarto/quarto).

{{< include ../_code-oss-editors.md >}}
```````

## File: docs/tools/vscode/notebook.qmd
```````
---
title: VS Code Notebook Editor
aliases: 
  - /docs/tools/vscode-notebook.html
---

{{< include ../_code-oss-notebook.md >}}
```````

## File: docs/tools/vscode/visual-editor.qmd
```````
---
title: "Visual Editing in VS Code"
aliases: 
  - /docs/visual-editor/vscode/index.html
---

{{< include ../_code-oss-visual-editor.md >}}
```````

## File: docs/tools/_jupyter-lab-extension-install.qmd
```````
Installation depends on which version of JupyterLab you have:

::: panel-tabset
## JupyterLab 4

You can install the Quarto JupyterLab extension one of two ways:

1.  **In the JupyterLab UI**: Search for 'Quarto' in the Extension Manager and install the `jupyterlab-quarto` extension. You'll be prompted to refresh the page when complete.

    ![](/docs/tools/images/jupyterlab-extension.png){.border width="50%" fig-alt="Screenshot of the Jupyter Lab Extension Manager with 'quarto' typed in the search box, and one Search Result with the name 'jupyterlab-quarto'."}

2.  **Using `pip`**: 

    +----------------+--------------------------------------------------+
    | Platform       | Commands                                         |
    +================+==================================================+
    | Mac/Linux      | ``` {.bash filename="Terminal"}                  |
    |                | python3 -m pip install jupyterlab-quarto         |
    |                | ```                                              |
    +----------------+--------------------------------------------------+
    | Windows        | ``` {.powershell filename="Terminal"}            |
    |                | py -m pip install jupyterlab-quarto              |
    |                | ```                                              |
    +----------------+--------------------------------------------------+

## JupyterLab 3

You can install the Quarto JupyterLab extension one of two ways:

1.  Using `pip`, you can install the `jupyterlab-quarto` by executing:

    +----------------+---------------------------------------------------+
    | Platform       | Commands                                          |
    +================+===================================================+
    | Mac/Linux      | ``` {.bash filename="Terminal"}                   |
    |                | python3 -m pip install jupyterlab-quarto==0.1.45  |
    |                | ```                                               |
    +----------------+---------------------------------------------------+
    | Windows        | ``` {.powershell filename="Terminal"}             |
    |                | py -m pip install jupyterlab-quarto==0.1.45       |
    |                | ```                                               |
    +----------------+---------------------------------------------------+

    This is the preferred way to install the JupyterLab Quarto extension as this takes advantage of traditional python packaging and doesn't require a rebuild of JupyterLab to complete the installation.

2.  In the JupyterLab UI, you can install the Quarto extension directly using the Extension Manager by searching for 'Quarto' and installing the `@quarto/jupyterlab-quarto` extension. To complete the installation you need to rebuild JupyterLab (you should see a prompt to complete this once you've installed the Quarto extension).

:::
```````

## File: docs/tools/jupyter-lab-extension.qmd
```````
---
title: JupyterLab Extension
format: html
---

## Overview

The Quarto JuptyerLab extension enables JupyterLab Notebooks which use Quarto markdown to properly display the contents of the markdown cells. For example, when the Quarto JupyterLab extension is installed, your Notebook will show rendered previews of elements like Callouts, Divs, Mermaid charts, as well as other Quarto elements (including the document front matter as a title block).

:::{style="text-align: center;"}
![](images/jupyter-lab-extension.png){.border width="50%"}
:::

## Installing the Extension

{{< include _jupyter-lab-extension-install.qmd >}}

## Using the Extension

The Quarto extension, once installed, will automatically render the contents of markdown cells within your notebook. Cells without Quarto specific markdown will render normally, while cells containing Quarto specific markdown will show a preview of the content in a more usable form.

::: callout-note
The Quarto contents shown in your Notebooks will not match the rendered output precisely. For example, callouts shown in the Notebook don't change their display based upon callout options you specify in your markdown.
:::

## Disabling the Extension

1.  If you installed the Quarto JupyterLab extension using `pip`, you can use the following commands to disable and enable the extension.

    To disable extension, use the following command:

    +---------------+-----------------------------------------------------------+
    | Platform      | Commands                                                  |
    +===============+===========================================================+
    | Mac/Linux     | ```{.bash filename="Terminal"}                            |
    |               | python3 -m jupyter labextension disable jupyterlab-quarto |
    |               | ```                                                       |
    +---------------+-----------------------------------------------------------+
    | Windows       | ```{.powershell filename="Terminal"}                      |
    |               | py -m jupyter labextension disable jupyterlab-quarto      |
    |               | ```                                                       |
    +---------------+-----------------------------------------------------------+

    To enable the extension, use the following command:

    +----------------+----------------------------------------------------------+
    | Platform       | Commands                                                 |
    +================+==========================================================+
    | Mac/Linux      | ```{.bash filename="Terminal"}                           |
    |                | python3 -m jupyter labextension enable jupyterlab-quarto |
    |                | ```                                                      |
    +----------------+----------------------------------------------------------+
    | Windows        | ```{.powershell filename="Terminal"}                     |
    |                | py -m jupyter labextension enable jupyterlab-quarto      |
    |                | ```                                                      |
    +----------------+----------------------------------------------------------+

2.  If you installed the Quarto JupyterLab extension using the JupyterLab Notebook Extension Manager, you can use the UI directly to disable and enable the extension.

## Uninstalling the Extension

1.  If you installed the extension using `pip`, you can uninstall the Quarto extension using `pip`, like so:

    +----------------+------------------------------------------------+
    | Platform       | Commands                                       |
    +================+================================================+
    | Mac/Linux      | ```{.bash filename="Terminal"}                 |
    |                | python3 -m pip uninstall jupyterlab-quarto     |
    |                | ```                                            |
    +----------------+------------------------------------------------+
    | Windows        | ```{.powershell filename="Terminal"}           |
    |                | py -m pip uninstall jupyterlab-quarto          |
    |                | ```                                            |
    +----------------+------------------------------------------------+

2.  If you installed the extension using the JupyterLab Notebook Extension Manager, use the Extension Manager to uninstall the extension. To complete the uninstallation you need to rebuild JupyterLab (you should see a prompt to complete this once you've uninstalled the Quarto extension).

## Reporting Issues

Please report issues with the Quarto JuptyerLab extension [here](https://github.com/quarto-dev/quarto/issues/new).
```````

## File: docs/tools/jupyter-lab.qmd
```````
---
title: JupyterLab
format: html
---

## Overview

Quarto can render Jupyter notebooks represented as plain text (.qmd) or as a normal notebook file (.ipynb). One benefit of using .ipynb is that you can use [JupyterLab](https://jupyterlab.readthedocs.io/en/stable/) as your editor.

Here is the "Hello, Quarto" example from the homepage inside JupyterLab:

![](images/jupyter-lab.png){.border .preview-image fig-alt="A Jupyter notebook with, from top to bottom, some yaml frontmatter, a section heading, a code block, and the output of the code block. The contents are the same as the first part of the 'Welcome' page of this website."}

If you look at the source code you'll note that YAML options were provided both at the top of the document and within the code cell. We'll describe working with YAML options in more detail below.

## Workflow

The ideal workflow for authoring Quarto notebooks in JupyterLab is to run the `quarto preview` command from within a terminal:

```{.bash filename="Terminal"}
quarto preview notebook.ipynb
```

The notebook will be rendered and a web browser with a "live preview" opened. Position this browser so that you can see it as you edit and save the notebook:

![](images/jupyterlab-preview.png){fig-alt="Two web browser windows arranged side by side. The window on the left is a JupyterLab window. The contents of this Jupyter document are rendered by Quarto in the window on the right."}

Every time you save within JupyterLab the preview will be automatically updated. You can use `quarto preview` for both HTML and PDF output.

In the screenshot above you'll note that we ran `quarto preview` inside a JupyterLab terminal window---this is generally recommended so that you can see progress and error messages when renders occur.

Preview uses the default format specified within the document---to use an alternate format pass the `--to` option to `quarto preview`. For example:

```{.bash filename="Terminal"}
quarto preview notebook.ipynb --to pdf
```

::: {.callout-note appearance="simple"}
Note that if you are authoring a book or website you can also use [`quarto preview`](/docs/websites/website-basics.qmd#workflow) on the project directory, which will create a live preview for the entire project.
:::

#### Running JupyterLab {.platform-table}

To run JupyterLab, invoke the `jupyter` module from within the shell where you are using Quarto:

+--------------+--------------------------------------+
| Platform     | Command                              |
+==============+======================================+
| Mac/Linux    | ```{.bash filename="Terminal"}       |
|              | python3 -m jupyter lab               |
|              | ```                                  |
+--------------+--------------------------------------+
| Windows      | ```{.powershell filename="Terminal"} |
|              | py -m jupyter lab                    |
|              | ```                                  |
+--------------+--------------------------------------+

#### Render without Preview

You can render a notebook (or group of notebooks) without previewing them using the `quarto render` command:

```{.bash filename="Terminal"}
quarto render notebook.ipynb
```

Use the `--to` argument to render to a specific format:

```{.bash filename="Terminal"}
quarto render notebook.ipynb --to docx
```

Note that the target file (in this case `notebook.ipynb`) should always be the very first command line argument.

#### JupyterLab Extension

The Quarto JuptyerLab extension enables JupyterLab Notebooks which use Quarto markdown to properly display the contents of the markdown cells. For example, when the Quarto JupyterLab extension is installed, your Notebook will show rendered previews of elements like Callouts, Divs, Mermaid charts, as well as other Quarto elements (including the document front matter as a title block).

You can read more about installing the extension in the [Quarto JupyterLab Extension](/docs/tools/jupyter-lab-extension.qmd) documentation.

## YAML Front Matter

The first cell of your notebook should be a **Raw** cell that contains the document title, author, and any other options you need to specify. Note that you can switch the type of a cell to **Raw** using the notebook toolbar:

![](images/jupyter-lab-yaml.png){.border fig-alt="The top section of a JupyterLab document. There is a Raw cell containing yaml front matter."}

In this example we specify that we want code to appear collapsed by default. There are YAML options to control many other aspects of document rendering. See the documentation on [Authoring](/docs/authoring/markdown-basics.qmd) and [Output Formats](/docs/output-formats/html-basics.qmd) for additional details.

## Markdown Cells

Here's the underlying code for the markdown cell:

![](images/jupyter-lab-markdown.png){.border fig-alt="A snippet of a JupyterLab document containing a Markdown cell. The cell contains some text written in Markdown."}

Note that a Quarto cross-reference (`@fig-polar`) is included in the markdown. Any valid Pandoc markdown syntax can be included in markdown cells.

## Output Options

Quarto uses leading comments with a special prefix (`#|`) to denote cell options. Here we specify the `label` and `fig-cap` options so that the plot generated from the cell can be cross-referenced.

![](images/jupyter-lab-output-options.png){fig-alt="A snippet of a JupyterLab document containing a code cell. At the top of cell, before the code, are the Quarto chunk options '#| label: fig-polar' and '#| fig-cap: A line plot on a polar axis.'"}

Note that options must appear at the very beginning of the cell. As with document front-matter, option names/values use YAML syntax.

There are many output options available, including options to optionally hide code, warnings, and/or output. See the documentation on [Output Options](/docs/computations/execution-options.qmd#output-options) for additional details.

## Cell Execution

{{< include ../computations/_jupyter-execute.md >}}


There are many other execution options available (e.g. to control caching, optimizing kernel start-up time, etc.). Learn more about these options in [Execution Options](/docs/computations/execution-options.qmd).

## Plain Text Editing

It's also possible to edit Jupyter notebooks in a plain-text markdown format. You might prefer this if there is more narrative than code in your notebook or if you want to use a file format that is more version control friendly.

Here is the plain text markdown version of the notebook used in the previous examples:

    ---
    title: "Matplotlib Demo"
    author: "Norah Smith"
    date: "5/22/2021"
    format: 
      html:
        code-fold: true
    jupyter: python3
    ---

    ## Polar Axis

    For a demonstration of a line plot on a polar axis, see @fig-polar.

    ```{{python}}
    #| label: fig-polar
    #| fig-cap: "A line plot on a polar axis"

    import numpy as np
    import matplotlib.pyplot as plt

    r = np.arange(0, 2, 0.01)
    theta = 2 * np.pi * r
    fig, ax = plt.subplots(subplot_kw={'projection': 'polar'})
    ax.plot(theta, r)
    ax.set_rticks([0.5, 1, 1.5, 2])
    ax.grid(True)
    plt.show()
    ```

Note that we've added the `jupyter: python3` option to the YAML front matter to indicate which Jupyter kernel to render with. You would render this document with:

```{.bash filename="Terminal"}
quarto render basics-jupyter.qmd
```

Markdown files with embedded code chunks should use the file extension `.qmd`.

::: callout-tip
If you are doing most of your work in .qmd files you should consider using RStudio, which includes full support for editing .qmd files that use Python and Jupyter (including code completion, cell-at-a-time execution, and side-by-side preview). See the article on using [RStudio](rstudio.qmd) for additional details.
:::

#### Converting Notebooks

You can convert between .ipynb and .qmd representations of a notebook using the `quarto convert` command. For example:

```{.bash filename="Terminal"}
quarto convert basics-jupyter.ipynb # converts to qmd
quarto convert basics-jupyter.qmd   # converts to ipynb
```

See `quarto convert help` for additional details on converting notebooks.

#### Jupytext

You can use Jupytext to maintain parallel synchronized versions of `.qmd` and `.ipynb` files. Learn more about Jupytext at <https://jupytext.readthedocs.io/en/latest/>.
```````

## File: docs/tools/neovim.qmd
```````
---
title: Neovim
resources:
 - images/neovim-*.png
---

## Overview

The Quarto Neovim plugin aims to not reinvent the wheel.
Existing plugins in the Neovim ecosystem are leveraged to provide the full experience.
Some of the features provided by [quarto-nvim](https://github.com/quarto-dev/quarto-nvim) and enhanced by plugins found in the [kickstarter configuration](https://github.com/jmbuhr/quarto-nvim-kickstarter) are:

-   Preview for Quarto documents.
-   Syntax highlighting for markdown and embedded languages
-   Completion for embedded languages (e.g. Python, R, Julia, etc.)
-   Commands and key-bindings for running cells and selected lines.
-   Completion for bibliography references, file paths, LaTeX math symbols, emoji.
-   Optional spellchecking and completion.
-   Code snippets.
-   Export of code chunks into standalone scripts.

![](/docs/get-started/hello/images/neovim-overview.png){.border fig-alt="Three windows arranged side by side. The window on the left is a qmd file opened in Neovim. The upper window on the right is a web browser. The contents of the qmd document are rendered by Quarto in the browser window. The third window is a rendered graph showing the output of executing a code chunk in the qmd file."}

More [screenshots](https://github.com/jmbuhr/quarto-nvim-kickstarter#screenshots)

### Installation

Installation instructions for the quarto plugin and the kickstarter configuration can be found in the respective readme files of the repository:

- [quarto-nvim](https://github.com/quarto-dev/quarto-nvim)
- [quarto-nvim-kickstarter](https://github.com/jmbuhr/quarto-nvim-kickstarter)

## Render and Preview

To render and preview, execute the **QuartoPreview** command by pressing `:` to enter command mode and typing the command (there is autocompletion if you press the <kbd>tab</kbd> key).
In the kickstarter configuration, there are more shortcuts starting with <kbd>space q</kbd> (spacebar followed by q, in normal mode).

After running the `QuartoPreview` command in Neovim, the preview will automatically update each time the buffer is saved.

## Running Code Cells

{{< include ../get-started/hello/_neovim-running-cells.md >}}

Here are all of the commands and keyboard shortcuts available for executing cells:

| Quarto Command       | Keyboard Shortcut   |
|----------------------|---------------------|
| Create new terminal  | <kbd>space c _x_</kbd><br> where _x_ is the starting letter of python, r, ipython, julia or bash  |
| Choose terminal      | <kbd>space c c</kbd> |
| Show terminal id     | <kbd>space c s</kbd> |
| Run Current Cell     | <kbd>space Enter</kbd> |
| Run Current Cell     | <kbd>ctrl Enter</kbd> (insert or normal mode)^[if your terminal emulator supports this, see [Running Cells](/docs/get-started/hello/neovim.qmd#running-cells)] |
| Run Selected Line(s) | <kbd>Enter</kbd> (visual mode) |

Note that you can quickly insert a new code cell using the <kbd>Alt+I</kbd> and <kbd>Alt+Shift+I</kbd> keyboard shortcuts, the first being an R and the second being a python code chunk.
Feel free to change this from the kickstarter configuration depending on your most-used language.

## Contextual Assistance

In a code chunk you get autocompletion for the respective language.
Use <kbd>Tab</kbd> and <kbd>Shift+Tab</kbd> to iterate through the suggestions.

![](./images/neovim-code-completion.png)

::: {.callout-note}
The otter in the completion list means that the completion plugin [cmp](https://github.com/hrsh7th/nvim-cmp) got it's completion suggestions from the [otter.nvim](https://github.com/jmbuhr/otter.nvim) plugin, which keeps track of the code in your Quarto document behind the scenes by writing only the code parts to another (an otter) document.
:::

## Code Snippets

Code snippets are templates that make it easier to enter repeating code patterns (e.g. code blocks, callouts, divs, etc.).
You will find them in the autocompletion list and can trigger them with enter.
Sometimes they contain multiple places within the snippet where the cursor can jump to.
Use <kbd>ctrl+n</kbd> to jump to the next site.

For example, we might want to create a two column layout, so we type `col2` and accept the suggestion with <kbd>Enter</kbd> to get

```
::: {layout-ncol=2}

:::
```

If you find other helpful snippets, feel free to add a pull request to extend the ones included in the kickstarter configuration [snippet list](https://github.com/jmbuhr/quarto-nvim-kickstarter/blob/main/snips/snippets/markdown.json).

## Document Navigation

Vim is famously good at letting you navigate documents quickly.
Here, we only have a look at some additional features provided by quarto-nvim.
For the full range of options, refer to the documentation of vim/neovim and of the plugins included in the kickstarter configuration.

- Press <kbd>space l o</kbd> to toggle a section overview
- Navigate to the next code chunk with <kbd>[c</kbd> or the previous one with <kbd>]c</kbd>
- Delete/Change/Yank the code of a chunk with <kbd>dio</kbd>/<kbd>cio</kbd>/<kbd>yio</kbd>
- Delete/Change/Yank a whole code chunk with it's delimiters with <kbd>dao</kbd>/<kbd>cao</kbd>/<kbd>yao</kbd>

Take a look at the files of the kickstarter configuration for more inspiration.

## Extending Quarto: Lua Development in Neovim

Since Lua is already the language used to configure Neovim and the kickstarter configuration installs the Lua Language Server, code completion and diagnostics will be enabled for Quarto [extension development](/docs/extensions/index.qmd).
```````

## File: docs/tools/rstudio.qmd
```````
---
title: RStudio IDE
---

## Overview

{{< include _rstudio.md >}}


## Visual Editor

RStudio IDE includes a visual editor for Quarto markdown, including support for tables, citations, cross-references, footnotes, divs/spans, definition lists, attributes, raw HTML/TeX, and more:

[![](../visual-editor/images/visual-editing.png){fig-alt="An RMarkdown file opened in the RStudio visual editor. The page is titled 'Filter joins'. Underneath is a table containing R syntax, mathematical notation, and definitions for the semi- and anti-joins. Underneath this table is an R code chunk that displays a graphical representation of a semi-join."}](../visual-editor/index.qmd)

To learn more, see the documentation on [Using the Visual Editor](../visual-editor/index.qmd) with RStudio.

## Knitr Engine

Quarto is designed to be highly compatible with existing [R Markdown](https://rmarkdown.rstudio.com/) documents. You should generally be able to use Quarto to render any existing Rmd document without changes.

{{< include _chunk-options.md >}}


## Jupyter Engine

You can also work with Quarto markdown documents that target the Jupyter engine within RStudio. These files will typically include a `jupyter` option in the YAML front matter indicating which kernel to use. For example:

``` yaml
---
title: "Matplotlib Demo"
author: "Norah Smith"
jupyter: python3
---
```

If you want to work within a virtual environment ([venv](https://packaging.python.org/guides/installing-using-pip-and-virtual-environments/#creating-a-virtual-environment)), use the **File :** **New Project...** command, specify the **Jupyter** engine with a venv, and specify which packages you'd like to seed the venv with:

![](images/rstudio-new-jupyter-project.png){fig-alt="A section of the 'New Project Wizard' menu from Rstudio. This section is titled 'Create Quarto Project'. The Quarto logo is displayed on the left. ON the right are fields for 'Type', 'Directory name', and 'Create project as subdirectory of:'. Underneath that are options for 'Engine' and 'Kernel'. The option for 'Engine' is set to 'Jupyter,' and the option for 'Kernel' is set to 'Python 3'. Underneath these are options for 'Create a git repository', and 'Use venv with this project'. The button for 'Use venv...' is selected, and there is a text box to the right with the Python package names 'matplotlib' and 'pandas' filled in. There are buttons for 'Create Project' and 'Cancel' arranged side-by-side in the bottom right of the window. There is an option to 'Open in new session' in the button left corner."}

RStudio will automatically activate this virtual environment whenever you open the project. You can install additional Python packages into the environment using the RStudio **Terminal** tab. For example:

![](images/rstudio-pip-install.png){width="726" fig-alt="An RStudio terminal window. The prompt is prefixed by the word '(env)', indicating that this prompt is taking place in a Python virtual environment named 'env.' The first line is empty and the second line contains the command 'python3 -m pip install scikit-learn.'"}

## YAML Intelligence

YAML code completion is available for project files, YAML front matter, and executable cell options:

![](images/rstudio-yaml-completion.png){.border fig-alt="Quarto document with YAML being edited. Next to the cursor code completion helper is open showing YAML options beginning with the letters preceding the cursor ('to')."}

If you have incorrect YAML it will also be highlighted when documents are saved:

![](images/rstudio-yaml-diagnostics.png){.border fig-alt="Quarto document YAML metadata with an incorrect option underlined in red."}


## R Package

If you are not using RStudio and/or you prefer to render from the R console, you can do so using the **quarto** R package. To install the R package:

``` r
install.packages("quarto")
```

Then, to render a document:

``` r
library(quarto)
quarto_render("document.qmd")
```

To render a website (ie; all qmd in a directory organized as a website):

``` r
library(quarto)
quarto_render()
```

To live preview (automatically render & refresh the browser on save) for a document you are working on, use the `quarto_preview()` function:

``` r
library(quarto)
quarto_preview("document.qmd")
```

If you are working on a [website](/docs/websites/website-basics.qmd) or [book](/docs/books/book-basics.qmd) project, you can also use `quarto_preview()` on a project directory:

``` r
library(quarto)
quarto_preview()
```
```````

## File: docs/tools/text-editors.qmd
```````
---
title: "Text Editors"
---

## Overview

If you are editing plain markdown documents (with no embedded computations) you may want to use your favorite text editor (Vim, Emacs, Sublime, etc.) to author Quarto documents. This articles provides some guidance on the optimal workflow when using text editors with Quarto.

Note that if you are using either the [Jupyter](https://jupyter.org/) or [Knitr](https://yihui.org/knitr/) computational engine you will likely be better off using [JupyterLab](jupyter-lab.qmd) or [VS Code](vscode/index.qmd) (for .ipynb notebooks) or [Positron](positron/index.qmd) or [RStudio](rstudio.qmd) (for .qmd documents) as these environments provide code-completion, incremental cell execution, and other useful tools for working with executable code.

## Workflow

The ideal workflow for authoring Quarto markdown documents is to run the `quarto preview` command from within a terminal:

```{.bash filename="Terminal"}
quarto preview document.qmd
```

The document will be rendered and a web browser with a "live preview" opened. Position this browser so that you can see it as you edit and save the document:

![](images/vim-preview.png){fig-alt="Two application windows arranged side by side. A Quarto document that contains the contents of the Welcome page of this website is open on the right. The contents of this document are rendered in a web browser by Quarto in the window on the right."}

Every time you save the preview will be automatically updated. You can use `quarto preview` for both HTML and PDF output.

Preview uses the default format specified within the document---to use an alternate format pass the `--to` option to `quarto preview`. For example:

```{.bash filename="Terminal"}
quarto preview notebook.qmd --to pdf
```

::: {.callout-note appearance="simple"}
Note that if you are authoring a book or website you can also use [`quarto preview`](/docs/websites/website-basics.qmd#workflow) on the project directory, which will create a live preview for the entire project.
:::

#### Render without Preview

You can render a document (or group of documents) without previewing them using the `quarto render` command:

```{.bash filename="Terminal"}
quarto render document.qmd
```

Use the `--to` argument to render to a specific format:

```{.bash filename="Terminal"}
quarto render document.qmd --to docx
```

### File Extension

Most text editors have a syntax highlighting mode that applies to markdown files (typically with the `.md` extension). You will likely want to configure your editor to also recognize the `.qmd` extension as having markdown content.
```````

## File: docs/triaging/index.qmd
```````
---
title: "Issue and Discussion Triage"
description: |
  This guide provides instructions for effectively triaging issues and discussions on Quarto CLI GitHub repository.
  The primary goal is to ensure that all issues and discussions are managed efficiently, helping maintain a clear and organized project workflow.
engine: markdown
toc-depth: 4
---

## Introduction

### Purpose

This guide provides instructions for effectively triaging issues and discussions on a Quarto CLI GitHub repository.
The primary goal is to ensure that all issues and discussions are managed efficiently, helping maintain a clear and organized project workflow.

### Scope

The document covers the processes for identifying, reviewing, and managing issues and discussions.
This includes assigning responsibilities, prioritizing tasks, and ensuring all issues are directed towards the appropriate project milestones.

### Tech Lead Engagement

Tech leads and other maintainers will be actively engaged in the ongoing triage of new project issues.
Their involvement is crucial to maintaining the project's organization and ensuring that issues are handled promptly and effectively.

### Organization of Issues

Issues will be continuously organized into milestones based on a clear [Planning Horizon](#planning-horizon).
This ensures that the team has a structured approach to managing the project's progress and addressing issues in a timely manner.

### All Issues and Discussions Managed in Quarto CLI Repository

To simplify the team's workflow, it has been decided that all issues will live in the [`quarto-cli`](https://github.com/quarto-dev/quarto-cli) repository rather than being distributed across multiple repositories.
For example, issues related to the [`quarto-web`](https://github.com/quarto-dev/quarto-web) documentation website will be logged in the [`quarto-cli`](https://github.com/quarto-dev/quarto-cli) issues, even if they are not technically CLI issues.

### Planning Horizon

The team's "Planning Horizon" will be limited to the next Milestone.
Issues will not be triaged to milestones beyond this Planning Horizon.
All issues beyond the next Milestone will be triaged to the "Future" milestone, ensuring a focused and manageable workload for the team.

| Milestone                                                       | Meaning                                        | Timeline   |
|-----------------------------------------------------------------|------------------------------------------------|------------|
| [Hot-fix](https://github.com/quarto-dev/quarto-cli/milestone/7) | We will fix this right away.                   | ASAP       |
| Current Release                                                 | We are working on this actively.               | 1-3 Months |
| Next Release                                                    | We will work on this soon.                     | 2-6 Months |
| [Future](https://github.com/quarto-dev/quarto-cli/milestone/2)  | We don't know when or if we will work on this. | Unclear    |

{{< pagebreak >}}

## Triaging Issues

### Reproducibility

- Follow the steps provided to reproduce the issue.
- Confirm the issue exists and gather any additional information if needed.

### Comments

- Leave informative and respectful comments.
- Ask for additional details if needed and provide clear guidance.

### Identification

#### Labels

- Use clear and consistent labels such as [`bug`](https://github.com/quarto-dev/quarto-cli/labels/bug), [`enhancement`](https://github.com/quarto-dev/quarto-cli/labels/enhancement), [`support`](https://github.com/quarto-dev/quarto-cli/labels/support), [`maintenance`](https://github.com/quarto-dev/quarto-cli/labels/maintenance), and [`documentation`](https://github.com/quarto-dev/quarto-cli/labels/documentation) to define the nature of the issue.
  Issues are expected to have exactly one of these labels.
- Assign additional [labels](https://github.com/quarto-dev/quarto-cli/labels/) to categories issues based on their type such as `html`, `website`, `installers`, `crossref`, *etc.*
- Create custom labels if necessary to better categories issues.

#### Prioritization

- Assess the severity and impact of issues to determine priority, *e.g.*:
  - use the [`regression` label](https://github.com/quarto-dev/quarto-cli/labels/regression) for bugs that appeared in a recent release
  - use the [`Hot-fix` milestone](https://github.com/quarto-dev/quarto-cli/milestone/7) or the [`Future` milestone](https://github.com/quarto-dev/quarto-cli/milestone/2), see [Planning Horizon](#planning-horizon).
  - use the number of reactions to the issue to gauge its importance to the community.
- Ensure a milestone is assigned to each issue to indicate its priority and expected completion date.
  - Review the [issues not assigned to a milestone](https://github.com/quarto-dev/quarto-cli/issues?q=is%3Aissue%20state%3Aopen%20no%3Amilestone) and assign them accordingly.

### Assignment and Ownership

- Assign issues to appropriate team members based on expertise and workload (add the [`triaged-to` label](https://github.com/quarto-dev/quarto-cli/labels/triaged-to)).

When an issue is assigned, it is given an owner.
The owner is the individual _currently responsible for moving the issue forward_.

**Note**: Ownership does not imply that the person must resolve the issue themselves or be actively working on it at all times.

The [`triaged-to` label](https://github.com/quarto-dev/quarto-cli/labels/triaged-to) is used when assigning ownership to indicate that an issue has been reassigned to someone else.

- **Healthy actions taken by the owner include**:
  - **Re-assigning to a more appropriate owner**: This can be done, sometimes after consulting with the team, to ensure the issue is handled by the most suitable person.
  - **Triaging to a better Milestone**: Reassessing and assigning the issue to a more relevant Milestone, again, sometimes after team consultation.
  - **Attempting to reproduce the issue**: Providing more information by trying to replicate the issue.
  - **Resolving the issue**:
    - [*Close as completed*]{.badge .rounded-pill .text-bg-primary}: The issue has been resolved with a pull request linked to the issue.
    - [*Close as not planned*]{.badge .rounded-pill .text-bg-primary}: The issue is not planned to be resolved, was marked by CI/CD as [`stale`](https://github.com/quarto-dev/quarto-cli/labels/stale) because of a lack of reproducibility ([`needs-repro` label](https://github.com/quarto-dev/quarto-cli/labels/needs-repro)), is actually a [`support`](https://github.com/quarto-dev/quarto-cli/labels/support) / discussion issue, or is no longer relevant.
    - [*Close as duplicate*]{.badge .rounded-pill .text-bg-primary}: The issue is a duplicate of another issue ([`duplicate`](https://github.com/quarto-dev/quarto-cli/labels/duplicate)).
- **Anti-patterns and discouraged actions**:
  - **Un-assigning the owner**: Making the issue ownerless is discouraged as we promote a workflow where every issue has a designated owner.
    The exception to this rule is for issues in the Future milestone, where having assigned owners is less critical.
  - **Un-assigning the milestone**: Removing the milestone from an issue without reassigning it effectively un-triages it.
    We promote continuous refinement of issue milestones.
  - **Closing without information**: Closing issues without providing a clear explanation or context is discouraged.
    Clear communication is essential for maintaining transparency and understanding.

An owner might encounter obstacles that prevent them from moving an issue forward.
They might need additional information or need to re-balance their workload.
In such cases, we encourage the following actions:

- **Flag the issue with [`needs-discussion`](https://github.com/quarto-dev/quarto-cli/labels/needs-discussion)**: Mark the issue with this label so it can be reviewed at the next team sync.
- **Seek help via Slack**: Post a question in the team Slack channel to get immediate assistance or input from team members.

{{< pagebreak >}}

## Triaging Discussions

### Identification

#### Categories

- Ensure discussions are categorized based on their nature, such as [`Features Requests`](https://github.com/quarto-dev/quarto-cli/discussions/categories/feature-requests), [`Q&A`](https://github.com/quarto-dev/quarto-cli/discussions/categories/q-a), and [`Show and tell`](https://github.com/quarto-dev/quarto-cli/discussions/categories/show-and-tell).

#### Labels

- Assign [labels](https://github.com/quarto-dev/quarto-cli/labels/) to categorize issues based on their type such as `html`, `website`, `installers`, `crossref`, *etc.*

### Participation

- Engage in discussions with clear, respectful, and constructive input.
- Encourage community involvement and acknowledge valuable contributions.

### Reproducibility

- Follow the steps provided to reproduce the user's use case.
- Gather any additional information if needed.

### Comments

- Leave informative and respectful comments.
- Ask for additional details if needed and provide clear guidance (see [Reply Templates](#reply-templates)).

### Upgrading to Issues

- If a discussion appears to be a bug report and can be reproduced, use [*Create issue from discussion*]{.badge .rounded-pill .text-bg-primary} GitHub feature to convert it into an issue.
- [*Close as outdated*]{.badge .rounded-pill .text-bg-primary} the discussion and link to the newly created issue.

### Resolution

- For [`Q&A` discussions](https://github.com/quarto-dev/quarto-cli/discussions/categories/q-a), mark the appropriate answer as the solution if not done already.
- Do not close discussions unless it has been upgraded to an issue.

{{< pagebreak >}}

## Best Practices

### Communication

- Maintain clear and respectful communication at all times.
- Provide concise and constructive feedback.

### Consistency

- Ensure labels, milestones, and comments are used consistently across the repository.
- Regularly review and update triaging practices to maintain effectiveness.

{{< pagebreak >}}

## Appendix

### Templates

#### Issue Reporting Template

- [Bug report](https://github.com/quarto-dev/quarto-cli/tree/main/.github/ISSUE_TEMPLATE/bug_report.yml)
- [Documentation issue](https://github.com/quarto-dev/quarto-cli/blob/main/.github/ISSUE_TEMPLATE/documentation.yml)

#### Discussion Template

- [Feature Requests](https://github.com/quarto-dev/quarto-cli/blob/main/.github/DISCUSSION_TEMPLATE/feature-requests.yml)
- [Q&A](https://github.com/quarto-dev/quarto-cli/blob/main/.github/DISCUSSION_TEMPLATE/q-a.yml)
- [Show and Tell](https://github.com/quarto-dev/quarto-cli/blob/main/.github/DISCUSSION_TEMPLATE/show-and-tell.yml)

### Reply Templates

#### Code of Conduct

````{.markdown shortcodes=false}
> [!IMPORTANT]
> We appreciate your interest in the Quarto project, but the content above violates our [Code of Conduct](https://github.com/quarto-dev/quarto-cli?tab=coc-ov-file#readme).
>
> As a member of the Quarto community, you are expected to follow our Code of Conduct, which outlines the standards of behavior and communication that we value. The Code of Conduct applies to all online interactions within the Quarto project, and it is enforced by the Quarto team. By participating in the Quarto community, you agree to abide by the Code of Conduct and respect the rights and dignity of others. You can find the Code of Conduct at <https://github.com/quarto-dev/quarto-cli?tab=coc-ov-file#readme>.
> 
> Thank you for your cooperation and contribution. 🙏
````

#### Ask reformat

````{.markdown shortcodes=false}
Could you properly format your post using code blocks for code and terminal outputs? Thanks.
If your code contains code blocks, you need to enclose it using more backticks, *i.e.*, usually four ` ```` `.
See <https://quarto.org/bug-reports.html#formatting-make-githubs-markdown-work-for-us>.
````

#### Ask reproducible example

``````{.markdown shortcodes=false}
Could you share a **small self-contained "working" (reproducible)** example to work with, _i.e._, a complete Quarto document or a Git repository? The goal is to make it as easy as possible for us to recreate your problem so that we can fix it: please help us help you! Thanks.

---

You can share a **self-contained "working" (reproducible)** Quarto document using the following syntax, _i.e._, using more backticks than you have in your document (usually four ` ```` `).
See <https://quarto.org/bug-reports.html#small-is-beautiful-aim-for-a-single-document-with-10-lines>.

If you have multiple files (and if it is **absolutely required** to have multiple files), please share as a Git repository.

<table>
<tr><th>R</th><th>Python</th></tr>
<tr><td>

`````md
````qmd
---
title: "Reproducible Quarto Document"
format: html
engine: knitr
---

This is a reproducible Quarto document.

{{< lipsum 1 >}}

```{r}
x <- c(1, 2, 3, 4, 5)
y <- c(1, 4, 9, 16, 25)

plot(x, y)
```

![An image]({{< placeholder 600 400 >}}){#fig-placeholder}

{{< lipsum 1 >}}

The end after @fig-placeholder.
````
`````

</td><td>

`````md
````qmd
---
title: "Reproducible Quarto Document"
format: html
engine: jupyter
---

This is a reproducible Quarto document.

{{< lipsum 1 >}}

```{python}
import matplotlib.pyplot as plt

x = [1, 2, 3, 4, 5]
y = [1, 4, 9, 16, 25]

plt.plot(x, y)
plt.show()
```

![An image]({{< placeholder 600 400 >}}){#fig-placeholder}

{{< lipsum 1 >}}

The end after @fig-placeholder.
````
`````

</td></tr>
</table>

Additionally and if not already given, please share the output of `quarto check` within a code block (*i.e.*, using three backticks ` ```txt `), see <https://quarto.org/bug-reports.html#check>.
``````

#### Reproducible example

``````{.markdown shortcodes=false}
---

You can share a **self-contained "working" (reproducible)** Quarto document using the following syntax, _i.e._, using more backticks than you have in your document (usually four ` ```` `).
See <https://quarto.org/bug-reports.html#small-is-beautiful-aim-for-a-single-document-with-10-lines>.

If you have multiple files (and if it is **absolutely required** to have multiple files), please share as a Git repository.

<table>
<tr><th>R</th><th>Python</th></tr>
<tr><td>

`````md
````qmd
---
title: "Reproducible Quarto Document"
format: html
engine: knitr
---

This is a reproducible Quarto document.

{{< lipsum 1 >}}

```{r}
x <- c(1, 2, 3, 4, 5)
y <- c(1, 4, 9, 16, 25)

plot(x, y)
```

![An image]({{< placeholder 600 400 >}}){#fig-placeholder}

{{< lipsum 1 >}}

The end after @fig-placeholder.
````
`````

</td><td>

`````md
````qmd
---
title: "Reproducible Quarto Document"
format: html
engine: jupyter
---

This is a reproducible Quarto document.

{{< lipsum 1 >}}

```{python}
import matplotlib.pyplot as plt

x = [1, 2, 3, 4, 5]
y = [1, 4, 9, 16, 25]

plt.plot(x, y)
plt.show()
```

![An image]({{< placeholder 600 400 >}}){#fig-placeholder}

{{< lipsum 1 >}}

The end after @fig-placeholder.
````
`````

</td></tr>
</table>

Additionally and if not already given, please share the output of `quarto check` within a code block (*i.e.*, using three backticks ` ```txt `), see <https://quarto.org/bug-reports.html#check>.
``````

#### Accessibility: descriptive link text

````{.markdown shortcodes=false}
Accessibility: For better accessibility, please ensure link text is descriptive and meaningful rather than using generic terms such as "here". This helps all users understand the link's destination. See [Writing meaningful link text (WCAG)](https://www.wcag.com/blog/writing-meaningful-link-text/).
````

#### Accessibility: alternative text

````{.markdown shortcodes=false}
Accessibility: To improve accessibility, please add alternative text to your screenshots. This helps all users, including those using screen readers, to understand the context of the images. A brief description can make a big difference! See [Good Alt Text, Bad Alt Text — Making Your Content Perceivable](https://www.wcag.com/blog/good-alt-text-bad-alt-text-making-your-content-perceivable/).
````
```````

## File: docs/troubleshooting/index.qmd
```````
---
title: "Troubleshooting"
---

This page documents a number of strategies you can employ in case you run into problems with Quarto.
As always, we welcome feedback and bug reports on the [Quarto issue tracker](https://github.com/quarto-dev/quarto-cli/issues),
but this page might help you get up and running quickly.

## Basics

### Check the version of quarto and its dependencies
 
You can check the version of Quarto and its dependencies by running `quarto check`. Here's an example of the output it generates:

```
Quarto 1.6.30
[✓] Checking environment information...
      Quarto cache location: /Users/cscheid/Library/Caches/quarto
[✓] Checking versions of quarto binary dependencies...
      Pandoc version 3.4.0: OK
      Dart Sass version 1.70.0: OK
      Deno version 1.46.3: OK
      Typst version 0.11.0: OK
[✓] Checking versions of quarto dependencies......OK
[✓] Checking Quarto installation......OK
      Version: 1.6.30
      Path: /Users/cscheid/repos/github/cscheid/quarto-regress/releases/v1.6.30/binQuarto 1.5.42

[✓] Checking tools....................OK
      TinyTeX: v2024.03.13
      Chromium: (not installed)

[✓] Checking LaTeX....................OK
      Using: TinyTex
      Path: /Users/username/Library/TinyTeX/bin/universal-darwin
      Version: 2024

[✓] Checking basic markdown render....OK

[✓] Checking Python 3 installation....OK
      Version: 3.12.1
      Path: /.venv/bin/python3
      Jupyter: 5.7.2
      Kernels: julia-1.10, python3

[✓] Checking Jupyter engine render....OK

[✓] Checking R installation...........OK
      Version: 4.3.3
      Path: /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources
      LibPaths:
        - /Users/username/Library/R/arm64/4.3/library
        - /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/library
      knitr: 1.45
      rmarkdown: 2.26

[✓] Checking Knitr engine render......OK
```

### Get a stack trace

Setting `QUARTO_PRINT_STACK=true` in your environment will cause Quarto to print a stack trace when an error occurs.

::: panel-tabset

## Windows

On PowerShell:

```powershell
$env:QUARTO_PRINT_STACK="true"
```

## Unix

On bash-like shells:

```bash
export QUARTO_PRINT_STACK=true
```

:::

### Verbose mode

Quarto will print more information about its internal state if you set `QUARTO_LOG_LEVEL=DEBUG` in your environment.

::: panel-tabset

## Windows

On PowerShell:

```powershell
$env:QUARTO_LOG_LEVEL="DEBUG"
```

## Unix

On bash-like shells:

```bash
export QUARTO_LOG_LEVEL=DEBUG
```

:::

`--log-level debug` can also be passed at command line e.g. `quarto render index.qmd --log-level debug`

If you prefer to have the log be written to file, you can set `QUARTO_LOG` in your environment, or `--log` at command line. 

### Inspect log files {#log-files}

Quarto creates log files that can help you diagnose problems. These are stored in different locations depending on your operating system:

::: panel-tabset

## Windows

`%LOCALAPPDATA%\quarto\logs`

## macOS

`${HOME}/Library/Application Support/quarto/logs`

## Linux

If `$XDG_DATA_HOME` is set, `${XDG_DATA_HOME}/.local/share/quarto/logs`, otherwise `${HOME}/.local/share/quarto/logs`

:::

### Out-of-memory issues

When building a large project or website, you might run into memory limits. In that case, consider adjusting the `QUARTO_DENO_V8_OPTIONS` environment variable.

In this example, we're setting the maximum amount of memory to be allocated by Deno to be 8GB. Adjust this to your computer's limits.

::: panel-tabset

## Windows

On PowerShell:

```powershell
$env:QUARTO_DENO_V8_OPTIONS="--max-old-space-size=8192"
```

## Unix

On bash-like shells:

```bash
export QUARTO_DENO_V8_OPTIONS=--max-old-space-size=8192
```

:::

### Installer issues

::: panel-tabset

## macOS

In macOS, installers write their output to `/var/log/install.log`. Inspecting this file might offer hints to what went wrong.

::: callout-warning

If you're going to ask for help on public forums, be aware that *every* macOS installer writes to the same file `/var/log/install.log`. 
You should make sure you're not accidentally disclosing installation information you would rather not.
:::

:::

### PDF/LaTeX issues

If quarto finds an existing installation of `texlive` in your system, it will use that. If you're seeing
issues with rendering to PDF, make sure you have an up-to-date installation of `texlive`. Alternatively, you can have quarto use its own version, by calling `quarto install tinytex`.

## Environment, Libraries, and Dependencies

One common source of tricky problems is the presence of multiple installations of R and Python in a system. Quarto will attempt to find an R or Python installation, and sometimes your shell environment is pointing to a different one.

### `knitr`

If you suspect that quarto is finding the wrong version of an R installation, you can obtain information about the R installation that Quarto sees by running the following .qmd file:

````
---
engine: knitr
---

```{{r}}
sessionInfo()
Sys.getenv()
.libPaths()

# If the sessioninfo package is available, 
# it provides output that is easier to read,
# and can write its results to a file
sessioninfo:::session_info(to_file = "quarto-session-info-output.txt")
```
````

You can then also run those commands from your R environment, and compare the output. If `sessioninfo` is available, then you
can ask for a difference between the outputs more directly:

```r
sessioninfo:::session_diff(new = "quarto-session-info-output.txt")
```

### `julia`

One potential source of trouble in Julia execution and installationwith both the `jupyter` and `julia` engines are stale library versions in caches.
In those situations, consider removing the contents of the directory described under `Quarto cache location` in `quarto check`.

## Advanced

### Debugging Jupyter engine issues

To enable Jupyter debugging, add the following to your YAML front matter:

```yml
execute:
  debug: true
```

Quarto creates a log of the execution of jupyter notebooks in its [log directory](#log-files) under `jupyter-kernel.log`.

If Jupyter execution is hanging instead of failing, you can force immediate flushing of the log by setting `QUARTO_JUPYTER_FLUSH_LOGS=true` in your environment before running Quarto.

### Jupyter appears to find wrong `IJulia` kernel

Jupyter maintains a global list of installed kernels, which Quarto searches with `jupyter kernelspec list`.
Often, Julia installation upgrades will change their paths, and Jupyter's list of kernelspec files becomes stale.
In that case, you will need to explicitly reinstall the `IJulia` kernel.

### Debugging Lua filters

#### Useful Lua helper functions

Quarto includes a number of useful Lua helper functions that can be used to debug Lua filters. These are available in the `quarto` module, and can be used as follows:

```lua
quarto.log.output(obj) -- prints a potentially complex object to the console
```

#### Filter tracing

Setting `QUARTO_TRACE_FILTERS=<FILENAME>.json` in your environment will cause Quarto to produce a trace of the Lua filters it runs, and write it to disk. This will be a file written to same the directory of the rendered file. We include an interactive Quarto document that can be used to visualize this trace, which you can find in the `quarto-cli` repository at [`tools/trace-viewer/trace-viewer.qmd`](https://github.com/quarto-dev/quarto-cli/tree/main/tools/trace-viewer/trace-viewer.qmd). Run `quarto preview trace-viewer.qmd`, and you will be shown two text fields, "Trace 1" and "Trace 2". Drag and drop the JSON file onto either of the fields and you will be shown the trace. If you wish to compare two traces, drag them onto the two fields.
```````

## File: docs/visual-editor/content.qmd
```````
---
title: "Content Editing"
---

Visual mode supports editing all of Pandoc markdown. Standard formatting commands (headings, bold, italic, etc.) work just the way they do in a conventional word processor.

See the [Using the Editor](index.qmd#using-the-editor) section for more details on how to access core editing commands. Note also that you can access all editing commands via [keyboard shortcuts](options.qmd#shortcuts).

Editing of links, images, blockquotes, lists, tables, etc. is also available, as is the ability to specify Pandoc attributes and insert special characters and emojis.

## Editing Tables

You can insert a table using the **Table** menu. You can then use either the main menu or a context menu to insert and delete table rows and columns:

![](images/visual-editing-table-context.png)

Note that if you select multiple rows or columns the insert or delete command will behave accordingly. For example, to insert 2 rows, first select 2 rows then use the insert command.

When you make a selection of multiple rows and/or columns as illustrated above, you can also copy and paste groups of cells within the table.

## Editing Lists

As described above, you can create a new list by just typing `-` or `1.` at the beginning of an empty paragraph. To add items to the list, just press **Enter** within a list item. To exit the list, press **Enter** within an empty list item.

While this covers many simple list editing tasks, there is a variety of other actions you may want to take within lists, including creating nested lists and adding paragraphs or code blocks to an exiting list item. From an empty list item (pictured at left), the following keyboard gestures can be used to do this:

| **Empty Item**<br> (*enter to exit list*) | **Tab**<br> (*add sublist*)                 | **Backspace** <br> (*add block*)          |
|------------------------|-------------------------|------------------------|
| ![](images/visual-editing-list-item.png)  | ![](images/visual-editing-list-sublist.png) | ![](images/visual-editing-list-block.png) |

You can also use **Shift+Tab** to lift a list item into the previous level.

### Tight Lists

Markdown distinguishes between normal and *tight* lists, where tight lists have less vertical spacing between items. In markdown source code, you designate a tight list by having no empty lines between your list items.

Visual mode creates normal lists by default (you can change this behavior via [Editor Options](options.qmd)). You can toggle between normal and tight lists using the <kbd>⌥⌘ 9</kbd> keyboard shortcut. You can also change the list type using the **Format -\> Edit Attributes** dialog (also accessible via the <kbd>F4</kbd> shortcut). If you have existing tight lists in your markdown source files, they will remain so within the visual editor.

## Pandoc Attributes

Several of Pandoc's block types (e.g. headings, code blocks, and divs) enable you to specify a set of [custom attributes](https://pandoc.org/MANUAL.html#heading-identifiers). Attributes include IDs and class names, as well as arbitrary key-value pairs that are passed through to output formats (e.g. as attributes for HTML tags). For these block types, an edit button will appear at the top right when your cursor is within the block:

![](images/visual-editing-attributes.png)

Note that any ID as well as the first class specified within the attributes are also displayed. Click the edit button or use the <kbd>F4</kbd> keyboard shortcut to edit the attributes.

## Special Characters

### Hard Line Breaks

You can insert a [hard line break](https://practicaltypography.com/hard-line-breaks.html) using the **Insert -\> Special Characters -\> Hard Line Break** command or via the <kbd>⇧ Enter</kbd> keyboard shortcut.

### Non-Breaking Spaces

You can insert a [non-breaking space](https://en.wikipedia.org/wiki/Non-breaking_space) using the **Insert -\> Special Characters -\> Non-Breaking Space** command or via the <kbd>⌃ Space</kbd> keyboard shortcut. Non-breaking spaces are displayed with an alternate background color to distinguish them from normal spaces.

A markdown non-breaking space will result in the `&nbsp;` character within HTML output and a `~` character within LaTeX output.

### Emojis

To insert an emoji, you can use either the **Insert** menu or the requisite markdown shortcut plus auto-complete:

| **Insert -\> Special Characters -\> Emoji...** | Markdown Shortcut                               |
|------------------------------------|------------------------------------|
| ![](images/visual-editing-emoji-dialog.png)    | ![](images/visual-editing-emoji-completion.png) |

For markdown formats that support text representations of emojis (e.g. `:grinning:`), the text version will be written. For other formats the literal emoji character will be written. Currently, the [gfm](/docs/output-formats/gfm.qmd) and [hugo](/docs/output-formats/hugo.qmd) (with `enableEmoji = true` in the site config) formats both support text representation of emojis.

If you want to add support for markdown emoji output to another Quarto format, you can add the `emoji` extension to the `from` option in document metadata. For example:

``` yaml
---
title: "My Document"
from: markdown+emoji
---
```

### Unicode Symbols

To insert an arbitrary Unicode character, use **Insert -\> Special Characters -\> Unicode...**:

![](images/visual-editing-unicode.png)

You can search for characters either by name or by entering an explicit Unicode code point (e.g. "U+0420").

### Smart Punctuation

When the Pandoc [`smart`](https://pandoc.org/MANUAL.html#typography) extension is enabled (which it is by default), straight quotes are interpreted as curly quotes, `---` as em-dashes, `--` as en-dashes, and `...` as ellipses. In addition, non-breaking spaces are inserted after certain abbreviations, such as "Mr."

Visual mode supports these same transformations (so when you type `---` it becomes an em-dash). If you didn't intend for this transformation to occur just hit backspace and it will be reverted.

## Spell-Checking

When RStudio real time spell-checking is enabled (you can do this using **Spelling** preferences), misspelled words will be underlined as you type:

![](images/visual-editing-spelling.png)

To resolve a spelling error, right-click on the misspelled word, then either choose an alternate spelling, ignore the word (which applies to the current document only), or add the word to your user dictionary (which applies to all documents).

If you ignore a word by mistake, right-click it again to unignore it. If you want to edit your personal dictionary, use the **Edit User Dictionary...** button located within **Spelling** preferences.

## Commenting

When reviewing a document you often want to provide inline comments with suggested revisions. This is possible in Quarto using HTML comments (which are ignored by all output formats). Visual mode includes a command for inserting HTML comments as well as special highlighting treatment to easily parse out editing comments from surrounding text.

![](images/visual-editing-comment.png)

Note that the `#` prefix used in the comment is what triggers the special background highlighting. If you remove the `#` it will still be a valid HTML comment, but just won't be highlighted as shown above.

You can insert an HTML comment using the Comment button on the toolbar or via the <kbd>⇧⌘ C</kbd> keyboard shortcut. Remember, HTML comments won't show up in rendered output so they are ideal both for review but also for leaving yourself to-do notes within a document.

## CSS Styles

One of the benefits of authoring with markdown is that your content can be easily published to a wide variety of formats. This is possible in significant measure because of the limitations that markdown imposes: you author in terms of the structure and semantics of your content, rather than worrying about specifically how things will appear.

Sometimes however you know that you'll be publishing to HTML, and you want to exert more control over how things look. In this case, you can use [CSS](https://developer.mozilla.org/en-US/docs/Web/CSS) (Cascading Style Sheets) along with markdown to do custom formatting. This section covers how to:

1.  Define CSS styles for your document; and

2.  Apply those styles to entities within your document.

If you are new to CSS, you may want to [brush up on the basics](https://developer.mozilla.org/en-US/docs/Learn/CSS) before proceeding.

::: {.callout-note appearance="simple"}
CSS styles apply **only** to HTML output, and will not have any impact on the formatting of other output types like PDF or MS Word.
:::

### Defining Styles

The best way to include CSS styles is to create an external stylesheet (e.g. `styles.css`), then include it within the output options of your document. For example:

``` yaml
---
title: "CSS Demo"
format:
  html:
    css: styles.css
---
```

The `styles.css` file might look something like this:

``` css
.important {
  color: maroon;
}

.illustration {
  border: 1px solid rgb(230, 230, 230); 
}
```

Note that it's also possible to define styles inline with a [CSS code chunk](https://bookdown.org/yihui/rmarkdown/language-engines.html#javascript-and-css), but we recommend using an external file for easier manageability.

Within a markdown document you can apply one or more CSS classes to various document entities including headings, images, divs, and spans. CSS classes are applied using [pandoc attributes](content.qmd#pandoc-attributes). Once you've applied a class to an entity, it will derive its formatting from the CSS properties of the specified class.

### Headings

To add a CSS class to a heading, use the edit button at the top right of the heading that appears when your cursor is within it (or use the <kbd>F4</kbd> keyboard shortcut):

![](images/visual-editing-css-heading.png)

Note the presence of the `.important` class within the **Edit Attributes** dialog.

CSS classes applied to headings affect all content beneath the heading (an HTML `<section>` tag is wrapped around the content by Pandoc), so heading classes are a great way to provide custom styles for entire sections of your document.

::: {.callout-note appearance="simple"}
Note that the visual editor doesn't currently render content using styles applied through CSS classes so you won't see the custom formatting while editing. You will however see it when rendering and previewing the HTML version of the document.
:::

### Images

You can apply CSS classes to images (for example, to give them a special border) using the standard **Image** dialog. To do this, double-click the image (or use the <kbd>F4</kbd> shortcut with the image selected) and apply the desired classes:

![](images/visual-editing-css-image.png)

Note again that the visual editor won't display your image with the applied CSS classes while editing, however when actually rendering the document to HTML you'll see the styles reflected.

### Divs

Divs are special entities that allow you to apply identifiers and/or styles to a region of a document. Divs are block elements (like paragraphs).

You can create divs using the **Insert -\> Div** command, and you can apply attributes (including CSS classes) to divs the same way as you apply attributes to headings (clicking the edit button or using the <kbd>F4</kbd> keyboard shortcut when you are within a div):

![](images/visual-editing-css-div.png)

Note the presence of the `.important` class within the **Div Attributes** dialog.

### Spans

Spans are special entities that allow you to apply identifiers and/or styles to a region of text. Spans are inline formatting marks (like bold or italic).

Spans can be created by selecting text and using the **Format -\> Span** command:

![](images/visual-editing-css-span.png)

Here we've applied a span to the text "customize PDF reports" and we've used the span to apply the `.important` CSS class. Note that as with headings and images the formatting is not displayed in the visual editor, but will be visible when the document is rendered.
```````

## File: docs/visual-editor/index.qmd
```````
---
title: "Visual Editing in RStudio"
---

## Overview

The Quarto visual editor provides a [WYSIWYM](https://en.wikipedia.org/wiki/WYSIWYM) editing interface for all of Pandoc markdown, including tables, citations, cross-references, footnotes, divs/spans, definition lists, attributes, raw HTML/TeX, and more. The visual editor also includes support for executing code cells and viewing their output inline:

![](images/visual-editing.png){fig-alt="An RMarkdown file opened in the RStudio visual editor. The page is titled 'Filter joins'. Underneath is a table containing R syntax, mathematical notation, and definitions for the semi- and anti-joins. Underneath this table is an R code chunk that displays a graphical representation of a semi-join."}

The visual editor doesn't attempt to abstract away or obscure the underlying markdown document. Rather, it aims to provide a highly productive writing interface for people that love markdown. You can also still use most markdown constructs (e.g., \## or **bold**) directly for formatting.

### Switching Modes

Markdown documents can be edited in either source or visual mode. To switch into visual mode for a given document, use the <kbd>Source</kbd> or <kbd>Visual</kbd> button at the top-left of the document toolbar (or alternatively the <kbd>⌘⇧ F4</kbd> keyboard shortcut):

![](images/visual-editing-switch-modes.png){fig-alt="A snippet of an RStudio window showing the options bar at the top of a Quarto document."}

Note that you can switch between source and visual mode at any time (editing location and undo/redo state will be preserved when you switch).

## Getting Started

The Quarto visual editor is currently available as a feature of the [RStudio IDE](https://posit.co/download/rstudio-desktop/). The visual editor will eventually also be made available in standalone form.

To get started with the visual editor, download the latest release of RStudio for your platform from:

<https://posit.co/download/rstudio-desktop/>

## Using the Editor

### Keyboard Shortcuts

There are keyboard shortcuts for all basic editing tasks. Visual mode supports both traditional keyboard shortcuts (e.g. <kbd>⌘ B</kbd> for bold) as well as markdown shortcuts (using markdown syntax directly). For example, enclose `**bold**` text in asterisks or type `##` and press space to create a second level heading. Here are some of the most commonly used shortcuts:

| Command      | Keyboard Shortcut | Markdown Shortcut |
|--------------|:-----------------:|:-----------------:|
| Bold         |  <kbd>⌘ B</kbd>   |    `**bold**`     |
| Italic       |  <kbd>⌘ I</kbd>   |    `*italic*`     |
| Code         |  <kbd>⌘ D</kbd>   |   `` `code` ``    |
| Heading 1    |  <kbd>⌥⌘ 1</kbd>  |        `#`        |
| Heading 2    |  <kbd>⌥⌘ 2</kbd>  |       `##`        |
| Heading 3    |  <kbd>⌥⌘ 3</kbd>  |       `###`       |
| Link         |   <kbd>⌘ K</kbd>  |     `<href>`      |
| R Code Chunk |  <kbd>⌥⌘ I</kbd>  | ```` ```{r} ````  |

See the [editing shortcuts](options.qmd#shortcuts) article for a complete list of all shortcuts.

### Insert Anything

You can also use the catch-all <kbd>⌘ /</kbd> shortcut to insert just about anything. Just execute the shortcut then type what you want to insert. For example:

::: {layout-ncol="2"}
![](images/visual-editing-omni-list.png){fig-alt="There is a line of text (with a cursor at the end) where someone has typed '/lis'. There is a drop-down menu underneath this with options for 'Bullet List', 'Numbered List', and 'Definition List' arranged vertically. The title of each item is bolded, has a small icon to the left, and a small description in lighter gray text underneath it."}

![](images/visual-editing-omni-math.png){fig-alt="There is a line of text (with a cursor at the end) where someone has typed '/ma'. There is a drop-down menu underneath this with options for 'Inline Math', 'Display Math', and 'Image...' arranged vertically. The title of each item is bolded, has a small icon to the left, and a small description in lighter gray text underneath it."}
:::

If you are at the beginning of a line (as displayed above), you can also enter plain `/` to invoke the shortcut.

### Editor Toolbar

The editor toolbar includes buttons for the most commonly used formatting commands:

![](images/visual-editing-toolbar.png){fig-alt="A snippet of an RStudio window showing the options bar at the top of an RMarkdown document."}

Additional commands are available on the **Format**, **Insert**, and **Table** menus:

| Format                                                                                           | Insert                                                                                           | Table                                                                                          |
|------------------------|------------------------|------------------------|
| ![](images/visual-editing-format-menu.png){fig-alt="The contents of the Format drop down menu."} | ![](images/visual-editing-insert-menu.png){fig-alt="The contents of the Insert drop down menu."} | ![](images/visual-editing-table-menu.png){fig-alt="The contents of the Table drop down menu."} |

## Learning More

Check out the following articles to learn more about visual markdown editing:

-   [Technical Writing](technical.qmd) covers features commonly used in scientific and technical writing, including citations, cross-references, footnotes, equations, embedded code, and LaTeX.

-   [Content Editing](content.qmd) provides more depth on visual editor support for tables, lists, pandoc attributes, CSS styles, comments, symbols/emojis, etc.

-   [Shortcuts & Options](options.qmd) documents the two types of shortcuts you can use with the editor: standard keyboard shortcuts and markdown shortcuts and describes various options for configuring the editor.

-   [Markdown Output](markdown.qmd) describes how the visual editor parses and writes markdown and describes various ways you can customize this.
```````

## File: docs/visual-editor/markdown.qmd
```````
---
title: "Markdown Output"
---

## Overview

The Quarto visual editor generates markdown using Pandoc. This means that in some cases your markdown will be *rewritten* to conform to standard Pandoc idioms. For example, Pandoc inserts 3 spaces after list bullets and automatically escapes characters that might be used for markdown syntax.

Here is a list of conventions for Pandoc generated markdown that might differ from your own markdown writing style:

-   `*text*` is used in preference to `_text_`
-   Backtick code blocks are written as ```` ``` {.md} ```` rather than ```` ```md ````
-   Backtick code blocks with no attributes are rendered as 4-space indented code blocks
-   Horizontal rules are written as dashes spanning the full width of the document
-   Plain links are written as `<https://yihui.org>` rather than `https://yihui.org`
-   Bullet and numbered lists use additional leading spaces before list item content
-   The blockquote character (`>`) is included on each new line of a blockquote
-   Table captions are written below rather than above tables
-   Multiline HTML and TeX blocks use the explicit raw attribute (e.g. ```` ```{=tex} ````)
-   Inline footnotes are replaced with footnotes immediately below the paragraph
-   Nested divs use `:::` at all levels so long as their attributes are distinct
-   Unnumbered sections are designated with `{.unnumbered}` rather than `{-}`
-   Characters used for markdown syntax (e.g. `*`, `_`, or `#`) are always escaped

While some of this behavior might be bothersome at first, if you decide that visual editing mode is useful for your workflow it's probably best to just adapt to writing your own markdown the same way that Pandoc does. Note that you can also [configure source mode](#canonical-mode) to write markdown using these conventions, ensuring that the same markdown is written no matter which mode edits originate from.

## Writer Options

Some aspects of markdown output can be customized via global, project, or file-level options, including:

-   How to wrap / break lines (fixed column, sentence-per-line, etc.).
-   Where to write footnotes (below the current paragraph or section, or at the end of the document).
-   Whether to use the visual mode markdown writer when saving markdown from source mode (to ensure consistency between documents saved from either mode).

You can set these options within the **R Markdown** [Global Options](options.qmd#global-options) or [Project Options](options.qmd#project-options), or can alternatively set them on a per-file basis using YAML (as described below).

### Line Wrapping

By default, the visual editor writes Markdown with no line wrapping (paragraphs all occupy a single line). This matches the behavior of markdown source editing mode within RStudio.

However, if you prefer to insert line breaks at a particular column (e.g. 72 or 80), or to insert a line break after each sentence, you can set a global or per-project [editor option](options.qmd#global-options) to this effect.

You can also set this behavior on a per-document basis via the `wrap` option. For example, to wrap lines after 72 characters you would use this:

``` yaml
---
editor:
  markdown:
    wrap: 72
---
```

To insert a line break after each sentence, use `wrap: sentence`. For example:

``` yaml
---
editor:
  markdown:
    wrap: sentence
---
```

::: {.callout-note appearance="simple"}
The algorithm used for sentence wrapping will handle English and Japanese text well, but may not detect the end of sentences accurately for other languages.
:::

If you have enabled a global line wrapping option and want to turn off wrapping for a given document, use `wrap: none`.

### References

By default, references are written at the end of the block where their corresponding footnote appears. You can override this behavior using the `references` option.

For example, to write references at the end of sections rather than blocks you would use:

``` yaml
---
title: "My Document"
editor:
  markdown:
    references: 
      location: block
---
```

Valid values for the `references` option are `block`, `section`, and `document`.

Note that you can also set a global or per-project [editor option](options.qmd#global-options) to control reference writing behavior.

If you are aggregating a set of markdown documents into a larger work, you may want to make sure that reference identifiers are unique across all of your documents (e.g. you don't want to have `[^1]` appear multiple times). You can ensure uniqueness via the `prefix` option. For example:

``` yaml
---
title: "My Document"
editor:
  markdown:
    references: 
      location: block
      prefix: "mydoc"
---
```

This will result in footnotes in this document using the specified prefix (e.g. `[^mydoc-1]`), ensuring they are globally unique across the manuscript.

::: {.callout-note appearance="simple"}
Note that if you are within a Quarto [book](/docs/books/book-basics.qmd) project then a references `prefix` is applied automatically so no changes to `editor: markdown` are required.
:::

### Canonical Mode {#canonical-mode}

If you have a workflow that involves editing in both visual and source mode, you may want to ensure that the same markdown is written no matter which mode edits originate from. You can accomplish this using the `canonical` option. For example:

``` yaml
---
title: "My Document"
editor:
  markdown:
    wrap: 72
    references: 
      location: block
    canonical: true
---
```

With `canonical: true`, edits in visual mode and source mode will result in identical markdown output. This is especially useful if you have multiple authors collaborating using version control, with a mixture of source and visual mode editing among the authors.

## Known Limitations

There are a handful of Pandoc markdown extensions not currently supported by visual editing. These are infrequently used extensions, so in all likelihood they won't affect documents you edit, but are still worth noting.

| Extension(s)             | Example            | Behavior                                 |
|--------------------------|--------------------|------------------------------------------|
| Inline footnotes         | \^\[inline\]       | Converted to numeric footnote.           |
| Footnote identifiers     | \[\^longnote\]     | Converted to numeric footnote.           |
| Example lists            | (\@) First example | Read/written as ordinary numbered lists. |
| Auto-list numbers        | #\. First item     | Read/written as ordinary numbered lists. |
| Reference links          | This is a \[link\] | Converted to ordinary links.             |
| MultiMarkdown attributes | \# Heading \[id\]  | Converted to Pandoc attributes.          |

The visual editor is unable to parse non-YAML title blocks (e.g. old-style % titles or MultiMarkdown titles) and also unable to parse non top-level YAML metadata blocks. If these forms of metadata are encountered, visual mode will fail to load with a warning.
```````

## File: docs/visual-editor/options.qmd
```````
---
title: "Shortcuts & Options"
---

## Shortcuts

Visual mode supports both traditional keyboard shortcuts (e.g. <kbd>⌘ B</kbd> for bold) as well as markdown shortcuts (using markdown syntax directly). For example, enclose `**bold**` text in asterisks or type `##` and press space to create a second level heading.

Here are the available keyboard and markdown shortcuts:

| Command             |  Keyboard Shortcut  |  Markdown Shortcut   |
|---------------------|:-------------------:|:--------------------:|
| Bold                |   <kbd>⌘ B</kbd>    |      `**bold**`      |
| Italic              |   <kbd>⌘ I</kbd>    |      `*italic*`      |
| Code                |   <kbd>⌘ D</kbd>    |     `` `code` ``     |
| Strikeout           |                     |     `~~strike~~`     |
| Subscript           |                     |       `~sub~`        |
| Superscript         |                     |      `^super^`       |
| Heading 1           |   <kbd>⌥⌘ 1</kbd>   |         `#`          |
| Heading 2           |   <kbd>⌥⌘ 2</kbd>   |         `##`         |
| Heading 3           |   <kbd>⌥⌘ 3</kbd>   |        `###`         |
| Heading Attributes  |                     |    `{#id .class}`    |
| Link                |   <kbd>⌘ K</kbd>    |       `<href>`       |
| Blockquote          |                     |         `>`          |
| Code Block          |  <kbd>⇧⌘ \\</kbd>   |    ```` ``` ````     |
| R Code Chunk        |   <kbd>⌥⌘ I</kbd>   |   ```` ```{r} ````   |
| Raw Block           |                     | ```` ```{=html} ```` |
| Div                 |                     |        `:::`         |
| Bullet List         |                     |         `-`          |
| Ordered List        |                     |         `1.`         |
| Tight List          |   <kbd>⌥⌘ 9</kbd>   |                      |
| List Check          |                     |        `[x]`         |
| Emoji               |                     |      `:smile:`       |
| Definition          |                     |         `:`          |
| Non-Breaking Space  | <kbd>⌃ Space</kbd>  |                      |
| Hard Line Break     | <kbd>⇧ Enter</kbd>  |                      |
| Paragraph           |   <kbd>⌥⌘ 0</kbd>   |                      |
| Image               |   <kbd>⇧⌘ I</kbd>   |                      |
| Footnote            |  <kbd>⇧⌘ F7</kbd>   |                      |
| Citation            |  <kbd>⇧⌘ F8</kbd>   |         `[@`         |
| Table               |   <kbd>⌥⌘ T</kbd>   |                      |
| Editing Comment     |   <kbd>⇧⌘ C</kbd>   |                      |
| Select All          |   <kbd>⌘ A</kbd>    |                      |
| Clear Formatting    |   <kbd>⌘ \\</kbd>   |                      |
| Edit Attributes     |    <kbd>F4</kbd>    |                      |
| Run Code Chunk      | <kbd>⇧⌘ Enter</kbd> |                      |
| Run Previous Chunks |  <kbd>⇧⌥⌘ P</kbd>   |                      |

::: {.callout-tip appearance="simple"}
For markdown shortcuts, if you didn't intend to use a shortcut and want to reverse its effect, just press the backspace key.
:::

## Insert Anything

You can also use the catch-all <kbd>⌘ /</kbd> shortcut to insert just about anything. Just execute the shortcut then type what you want to insert. For example:

::: {layout-ncol="2"}
![](images/visual-editing-omni-list.png){fig-alt="There is a line of text (with a cursor at the end) where someone has typed '/lis'. There is a drop-down menu underneath this with options for 'Bullet List', 'Numbered List', and 'Definition List' arranged vertically. The title of each item is bolded, has a small icon to the left, and a small description in lighter gray text underneath it."}

![](images/visual-editing-omni-math.png){fig-alt="There is a line of text (with a cursor at the end) where someone has typed '/ma'. There is a drop-down menu underneath this with options for 'Inline Math', 'Display Math', and 'Image...' arranged vertically. The title of each item is bolded, has a small icon to the left, and a small description in lighter gray text underneath it."}
:::

If you are at the beginning of a line (as displayed above) you can also enter plain `/` to invoke the shortcut.

## Global Options

You can customize visual editing options within **R Markdown -> Visual** (note that the visual editor was originally created for use with R Markdown so its options are located there --- these options are also applicable to usage with Quarto):

<img src="images/visual-editing-options.png" class="illustration" width="585" fig-alt="The global options window in RStudio. It is currently displaying the Visual subsection of the R Markdown section."/>

| Option                                              | Description                                                                                                                                                                                           |
|-----------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Use visual editing by default                       | Switch to visual mode immediately when creating new documents.                                                                                                                                        |
| Show document outline by default                    | Show the navigational outline when opening documents in visual mode.                                                                                                                                  |
| Editor content width                                | Maximum width for editing content. This is intended to keep editing similar to the width that users will see.                                                                                         |
| Editor font size                                    | Base font size for editor content (default: inherit from IDE settings).                                                                                                                               |
| Show margin column indicator in code blocks         | Show vertical line that indicates location of editing margin column (e.g. 80).                                                                                                                        |
| Default spacing between list items                  | Whether to use tight or normal spacing between list items by default. See [Tight Lists](content.qmd#tight-lists) for details.                                                                         |
| Automatic text wrapping (line breaks)               | When writing markdown, automatically insert line breaks after sentences or at a specified column (default: flow text; no auto-wrapping). See [Line Wrapping](markdown.qmd#line-wrapping) for details. |
| Write references at end of current                  | Write references (footnotes) at the end of the block or section where they appear, or at the end of the document. See [References](markdown.qmd#references) for details.                              |
| Write canonical visual mode markdown in source mode | Use the visual mode markdown writer when saving markdown from source mode (ensure consistency between documents saved from either mode).                                                              |

## Citation Options

You can customize visual editor citation options within **R Markdown -> Citations**:

<img src="images/visual-editing-options-citations.png" class="illustration" width="585" fig-alt="The global options window in RStudio. It is currently displaying the Citation subsection of the R Markdown section."/>

| Option                                                 | Description                                                                                                                                                                                 |
|--------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Zotero Library                                         | Location of [Zotero](technical.qmd#citations-from-zotero) citation library (Local or Web).                                                                                                  |
| Zotero Data Directory                                  | Location of Zotero local data directory.                                                                                                                                                    |
| Use libraries                                          | Zotero libraries to use as reference sources.                                                                                                                                               |
| Use Better BibTeX for citation keys and BibTeX export. | Optionally use [Better BibTeX](https://retorque.re/zotero-better-bibtex/) to generate citation keys and export BibTeX from Zotero (this option appears only if Better BibTeX is installed). |

## Project Options

Global options that affect the way markdown is written can also be customized on a per-project basis. You can do this using the **R Markdown** pane of the **Project Options** dialog:

<img src="images/visual-editing-project-options.png" class="illustration" width="541" fig-alt="The Project Options dialog in RStudio. It is currently displaying the R Markdown section."/>

By default projects inherit the current global settings for markdown writing and Zotero libraries.

## File Options

Global and project options that affect the way markdown is written can also be customized on a per-file basis . You can do this by including an `editor: markdown` key in the YAML front matter of your document. For example:

``` yaml
---
title: "My Document"
author: "Jane Doe"
editor:
  markdown:
    wrap: 72
---
```

You might want to do this to ensure that multiple authors on different workstations use the same markdown writing options.

You can also instruct RStudio to use these same options when saving files from source mode. To do this add the `canonical` option. For example:

``` yaml
---
editor:
  markdown:
    wrap: 72
    canonical: true
---
```

With `canonical: true`, edits in visual mode and source mode will result in identical markdown output. This is especially useful if you have multiple authors collaborating using version control, with a mixture of source and visual mode editing among the authors.

See the documentation on [Writer Options](markdown.qmd#writer-options) for additional details on markdown writing options.
```````

## File: docs/visual-editor/technical.qmd
```````
---
title: "Technical Writing"
engine: markdown
---

Visual mode includes extensive support for Quarto features frequently used in technical writing including [equations](#equations), [citations](#citations), [cross-references](#cross-references), [footnotes](#footnotes), [embedded code](#embedded-code), and [LaTeX](#latex-and-html). This article describes using these features in more depth.

## Equations {#equations}

LaTeX equations are authored using standard Pandoc markdown syntax (the editor will automatically recognize the syntax and treat the equation as math). When you aren't directly editing an equation it will appear as rendered math:

![](images/visual-editing-math.png){fig-alt="An RMarkdown document opened in the R Studio Visual Editor. The first section is titled 'Inline Math'. It displays two separate lines of text with inline mathematical text. The second section is titled 'Display Math'. It has a line containing two $ characters, a mathematical equation written in LaTeX below that, and a  a line containing two $ characters below that. Underneath that is the rendered output of the mathematical equation."}

As shown above, when you select an equation with the keyboard or mouse you can edit the equation's LaTeX. A preview of the equation will be shown below it as you type.

## Cross References {#cross-references}

[Cross References](/docs/authoring/cross-references.qmd) make it easier for readers to navigate your document by providing numbered references and hyperlinks to various entities like figures, tables, and equations.

Every cross-referenceable entity requires a label (unique identifier) and caption (description). For example, this is a cross-referenceable figure:

``` markdown
![Elephant](elephant.png){#fig-elephant}
```

The presence of the caption ("Elephant") and label (`#fig-elephant`) make this figure referenceable. This enables you to use the following syntax to refer to it elsewhere in the document:

``` markdown
See @fig-elephant for an illustration.
```

Here is what this would look like rendered to HTML:

![](/docs/authoring/images/crossref-figure.png){fig-alt="A line drawing of an elephant. The text 'Figure 1: Elephant' is centered beneath it. The text 'See fig. 1 for an illustration' is aligned to the left underneath that."}

See the article on [Cross References](/docs/authoring/cross-references.qmd) for full documentation on creating cross references and customizing their display.

Use the **Insert -\> Cross Reference...** command to insert a cross reference:

![](images/visual-editing-insert-quarto-crossref.png){.border fig-alt="The 'Insert Cross Reference' window in R Studio. There is a vertical section taking approximately a quarter of the window on the left with options for 'All Types', 'Sections', 'Figures', 'Tables', 'Equations', 'Listings', and 'Theorems'. Running along the top of the right side of the window is a search bar with the text 'fig-env' typed out. Underneath that is a large search results pane that takes up the rest of the window. Each of the search results has a title of the form '@fig-env*', an image icon to the left, the file name where the figure was found the far right side, and some of the surrounding text from where the reference was found underneath it."}

You can also just type the prefix of a cross reference label (e.g. `@fig-env`) and select it via auto-complete:

![](images/visual-editing-complete-quarto-crossref.png){.border fig-alt="A document opened in the R Studio Visual Editor. The text '@fig-env' is highlighted in blue and a pop-up window displaying search results is displayed underneath it.  Each of the search results has a title of the form '@fig-env*', an image icon to the left, the file name where the figure was found the far right side, and some of the surrounding text from where the reference was found underneath it."}

Similar to hyperlinks, you can also navigate to the location of a cross-reference by clicking the popup link that appears when it's selected:

![](images/visual-editing-popup-quarto-crossref.png){.border fig-alt="A document opened in the R Studio Visual Editor. The text '@fig-break-point' is highlighted in blue and a pop-up window displaying where that text links to is displayed beneath it. The pop-up window has 'fig-break-point' in blue, underlined text on top, the text 'Break points provide the graphical equivalent of a browser statement' in black text underneath that, and the file name 'a5-debug.qmd' in light gray text beneath that."}

You can also navigate directly to any cross-reference using IDE global search:

![](images/visual-editing-search-quarto-crossref.png){.border fig-alt="The top part of an RStudio IDE window. The phrase 'fig-en' is typed into the search bar at the center top of the page and search results appear underneath it. Each of the search results has a title of the form 'fig-en*' in black, an image icon to the left, and the file location in parentheses and light gray text to the right."}

## Footnotes {#footnotes}

You can include footnotes using the **Insert -\> Footnote** command (or the <kbd>⇧⌘ F7</kbd> keyboard shortcut). Footnote editing occurs in a pane immediately below the main document:

![](images/visual-editing-footnote.png){.illustration fig-alt="A Markdown document containing three paragraphs opened in the R Studio visual editor. The sentence at the end of the paragraph has a superscript '1' at the end, indicating a footnote. This '1' is surrounded by a blue box. There is a section divider underneath the three paragraphs, under which is another paragraph labeled '1'. "}

::: {.callout-note appearance="simple"}
By default footnotes will be written in markdown immediately below the block in which they appear. You can customize this behavior via [editor options](options.qmd).
:::

## Embedded Code {#embedded-code}

Source code which you include in a Quarto document can either be for display only or can be executed by Jupyter or Knitr as part of rendering. Code can furthermore be either inline or block.

### Displaying Code

To display but not execute code, either use the **Insert -\> Code Block** menu item, or start a new line and type either:

1.  ` ``` ` (for a plain code block); or
2.  ` ```<lang> ` (where `<lang>` is a language) for a code block with syntax highlighting.

Then press the **Enter** key. To display code inline, simply surround text with backticks (`` `code` ``), or use the **Format -\> Code** menu item.

### Code Chunks

To insert an executable code chunk, use the **Insert -\> Code Chunk** menu item, or start a new line and type:

` ```{r} `

Then press the **Enter** key. Note that `r` could be another language supported by `knitr` (e.g., `python` or `sql`) and you can also include a chunk label and other chunk options.

To include [inline R code](/docs/computations/inline-code.qmd), create normal inline code (e.g., by using backticks or the <kbd>⌘ D</kbd> shortcut) but preface it with `{r}` (or `r`). For example, to include the current date using the R function `Sys.Date()` you would use: `` `{r} Sys.Date()` ``. 

Note that when the code displays in visual mode it won't have the backticks (but they will still appear in source mode).

### Running Chunks

You can execute the currently selected R or Python code chunk using either the run button at the top right of the code chunk or using the <kbd>⇧⌘ Enter</kbd> keyboard shortcut:

![](images/visual-editing-execute-code.png){.illustration fig-alt="An R Markdown document opened in the R Studio Visual editor. There is some plain text, a code chunk with a gray background underneath that, and the plot resulting from executing that code underneath that. In the top right corner of the code chunk is a green arrow that is used for executing that code chunk."}

You can execute code chunks up to the current one using the toolbar button or using the <kbd>⌥⌘ P</kbd> keyboard shortcut.

## LaTeX and HTML {#latex-and-html}

You can also include raw LaTeX commands or HTML tags when authoring in visual mode. The raw markup will be automatically recognized and syntax highlighted. For example:

![](images/visual-editing-raw.png){fig-alt="An R Markdown document opened in the R Studio visual editor. The first line reads: 'The implementation of the \\pkg{shiny} package uses lots of 'proglang{JavaScript}. Both '\\pkg' and '\\proglang' are highlighted in pink, indicating that Visual Editor recognizes it as a LaTeX command. The second contains a <kbd> html tag highlighted in pink. Visual Editor recognizes this as an HTML tag and renders the results in the live document."}

The above examples utilize *inline* LaTex and HTML. You can also include blocks of raw content using the commands on the **Format -\> Raw** menu. For example, here is a document with a raw LaTeX block:

![](images/visual-editing-latex-block.png){fig-alt="An R Markdown document opened in the R Studio visual editor. There is raw LaTeX describing a table surrounded by a pink rectangle. The rectangle runs the width of the page. At the top right of the pink rectangle is the label 'latex' and another button labeled by three dots. The "}

::: {.callout-note appearance="simple"}
Note that Pandoc ignores LaTeX commands when not producing LaTeX based output, and ignores HTML tags when not producing HTML based output.
:::

## Citations {#citations}

Visual mode uses the standard Pandoc markdown representation for citations (e.g. `[@citation]`). Citations can be inserted from a variety of sources:

1.  Your document bibliography.
2.  [Zotero](#citations-from-zotero) personal or group libraries.
3.  [DOI](#citations-from-dois) (Document Object Identifier) references.
4.  Searches of [Crossref](https://www.crossref.org/), [DataCite](https://datacite.org/), or [PubMed](https://pubmed.ncbi.nlm.nih.gov/).

If you insert citations from Zotero, DOI look-up, or a search then they are automatically added to your document bibliography.

### Bibliographies

Pandoc supports bibliographies in a wide variety of formats including BibTeX and CSL. Add a bibliography to your document using the `bibliography` YAML metadata field. For example:

``` yaml
---
title: "My Document"
bibliography: references.bib
link-citations: true
---
```

Note that we've also specified the `link-citations` option, which will make your citations hyperlinks to the corresponding bibliography entries.

See the [Pandoc Citations](https://pandoc.org/MANUAL.html#citation-syntax) documentation for additional information on bibliography formats.

### Inserting Citations

You insert citations by either using the **Insert -\> Citation** command or by using markdown syntax directly (e.g. `[@cite]` or `@cite`) .

Citations go inside square brackets and are separated by semicolons. Each citation must have a key, composed of '\@' + the citation identifier from the database, and may optionally have a prefix, a locator, and a suffix. The citation key must begin with a letter, digit, or `_`, and may contain alphanumerics, `_`, and internal punctuation characters (`:.#$%&-+?<>~/`). Here are some examples:

```{=html}
<div class="illustration document-example">
  <div>
    Blah Blah <span class="citation">[</span>see <span class="citation">@doe99</span>, pp. 33-35; also <span class="citation">@smith04</span>, chap. 1<span class="citation">]</span>.
  </div>

<div>
  Blah Blah <span class="citation">[</span><span class="citation">@doe99</span>, pp. 33-35, 38-39 and <em>passim</em><span class="citation">]</span>.
  </div>

<div>
  Blah Blah <span class="citation">[</span><span
    class="citation">@smith04</span>;
  <span class="citation">@doe99</span><span class="citation">]</span>.
</div>
  <div>Smith says blah <span class="citation">[</span><span class="citation">-@smith04</span><span class="citation">]</span>.
  </div>
</div>
```
You can also write in-text citations, as follows:

```{=html}
<div class="illustration document-example">
  <div>
    <span class="citation">@smith04</span> says blah.
  </div>
  <div>
    <span class="citation">@smith04</span> <span class="citation">[</span>p. 33<span class="citation">]</span> says blah.
  </div>
</div>
```
See the [Pandoc Citations](https://pandoc.org/MANUAL.html#citations) documentation for additional information on citation syntax.

Use the <kbd><img src="images/citation_2x.png" width="15" height="14"/></kbd> toolbar button or the <kbd>⇧⌘ F8</kbd> keyboard shortcut to show the **Insert Citation** dialog:

![](images/visual-editing-citation-search.png){.illustration fig-alt="The 'Insert Citation' window in RStudio. There is a vertical section that takes approximately a quarter of the window along the left side. Arranged vertically in this section are options for 'My Sources', 'Bibliography', 'Zotero', 'My Library', 'From DOI', 'Crossref', 'DataCite', and 'PubMed'. Along the top of the section on the right is a search bar. There is a black cursor over the words 'Search for citation' in light gray text. Underneath this search bar is a search results pane. Each of the search results has a title of the form '@citation-ref', an icon to the left, the title of the paper in light gray text underneath running along the length of the search result, and the citation in light gray text to the right. Running along the bottom of the window across both the left and right sections is a box with light gray text that says 'Select Citation Keys'. Underneath this and in the bottom left corner of the window is the text 'Add to bibliography' followed by a drop-down menu that currently has the value 'references.bib.' To the right of that is a button for the 'Use in-text citation' button. Finally, there are 'Insert' and 'Cancel' buttons arranged side-by-side."}

Note that you can insert multiple citations by using the add button on the right side of the item display.

#### Markdown Syntax

You can also insert citations directly using markdown syntax (e.g. `[@cite]`). When you do this a completion interface is provided for searching available citations:

![](images/visual-editing-citations.png){fig-alt="An R Markdown document opened in the R Studio Visual Editor. There is a cursor on at the end of the text '@R-htm', which is in brackets and comes after the text 'htmltools'. There is a dropdown menu underneath this text with search results that all begin '@R-htm'. Each of the search results has a title of the form '@R-htm' in bold, an icon to the left, the title of the cited reference underneath it in gray, and the citation in gray to the right."}

#### Citation IDs

Before inserting a citation from an external source you may wish to customize its ID. Within the **Insert Citation** dialog, click the edit button on the right side of citations to change their ID:

![](images/visual-editing-citations-id.png){.illustration fig-alt="The bottom section of the 'Insert Citation' menu in R Studio. There are two citations currently selected in the 'Selected Citations' section. Each of them are surrounded by a rectangle with rounded corners, and there is an 'x' button to the left of each of them. The first citation is currently selected and there is a cursor in citation ID, indicating that you are able to edit the ID."}

If you insert a new citation via code completion, you will also be provided with the opportunity to change its default citation ID.

For citations inserted from Zotero, you can also use the [Better BibTeX](https://retorque.re/zotero-better-bibtex/) plugin to generate citation IDs (this can be enabled via [Citation Options](options.qmd#citation-options) if you have Better BibTeX installed).

#### Citation Preview

Once you've inserted a citation, place the cursor over it to see a preview of it along with a link to the source if one is available:

![](images/visual-editing-cite-popup.png){fig-alt="An R Markdown document opened in the R Studio Visual Editor. The citation '@fayad2020' is surrounded in brackets. A citation preview that appears as a result of mousing over this citation is displayed. This preview includes a full citation in MLA format of the '@fayad2020' citation."}

### Citations from DOIs {#citations-from-dois}

Use the **From DOI** pane of the **Insert Citation** dialog to insert a citation based on a DOI (e.g. that you have retrieved from a PubMed or other search):

![](images/visual-editing-citation-insert-doi.png){.illustration fig-alt="The 'Insert Citation' window in RStudio. The 'From DOI' option is selected in the left hand section. There is a DOI in the search bar that runs along the top of the section on the right, and the document corresponding to that DOI appears in the search results underneath. The search result has the title of the paper in black, the year published and journal in gray underneath that, the authors in gray underneath that, and the hyperlinked DOI underneath that. To the left of the title is a journal paper icon."}

If you are using markdown syntax, you can also paste a [DOI](https://www.doi.org/) after the `[@` and it will be looked up:

![](images/visual-editing-citations-doi.png){.illustration fig-alt="An R Markdown document opened in the R Studio Visual Editor. There is a DOI in blue text surrounded by brackets in the text. There is a pop-up window over the document titled 'Citation from DOI:' followed by the same DOI.' There is a text box titled 'Citation Id' containing a suggested citation ID that has been highlighted. Underneath that is a text box with citation information. From top to bottom, the information contained is: 'Title', 'Authors', 'Issue Date', 'Publication', 'Page(s)', 'Publisher', and 'DOI'. Underneath that are two more boxes arranged side-by-side. On the left is the 'Create bibliography file:' field with the text 'references.bib' filled in. To the right is the 'Format' drop down menu with 'BibLaTeX' currently selected."}

Once you've confirmed that it's the correct work (and possibly modified the suggested ID), the citation will be inserted into the document and an entry for the work added to your bibliography.

### Citations from Search

Use the **Crossref**, **DataCite**, and **PubMed** panes of the **Insert Citation** dialog to search one of those services for a citation:

![](images/visual-editing-citations-crossref.png){.illustration fig-alt="The 'Insert Citation' window in RStudio. The 'Crossref' option is selected and the text 'xie knitr' is in the search bar at the top of the section on the right. In the search pane are the search results."}

Items inserted from a search will automatically be added to your bibliography.

Note that for PubMed queries you can use the full supported query syntax. For example, this query searches on the author and title fields: `Peterson[Author] AND Embolism[Title]`. You can learn more about building PubMed queries here: <https://pubmed.ncbi.nlm.nih.gov/advanced/>.

### Citations from Zotero {#citations-from-zotero}

[Zotero](https://zotero.org) is a popular free and open source reference manager. If you use Zotero, you can also insert citations directly from your Zotero libraries. If you have Zotero installed locally its location will be detected automatically and citations from your main library (**My Library**) will be available:

![](images/visual-editing-citations-zotero-browse.png){.illustration fig-alt="The 'Insert Citation' window in RStudio. The 'My Library' option is selected. The search bar at the top of the right section is empty, but the search results section is filled with the contents of a Zotero reference manager library. Each of the search result icons has a small 'Z' on the bottom right to indicate that the result comes from a Zotero library."}

Zotero references will also show up automatically in completions:

<img src="images/visual-editing-citation-completions.png" width="426" fig-alt="Someone has typed &apos;@&apos; in the Visual Editor. In light gray to the right of the &apos;@&apos; is a magnifying glass followed by the text &apos;or DOI&apos;. Underneath this is a pop-up menu showing available citations. Each citation has a title of the form &apos;@citation&apos; in black, the title of the cited material in gray underneath it, an icon to the left, and the reference to the right in gray. Some of the icons have a small red &apos;Z&apos; on the bottom right corner, indicating that the corresponding reference comes from a Zotero library."/>

Items from Zotero will appear alongside items from your bibliography with a small "Z" logo juxtaposed over them. If you insert a citation from Zotero that isn't already in your bibliography then it will be automatically added to the bibliography.

If you are running both RStudio and Zotero on your desktop, then no additional configuration is required for connecting to your Zotero library. If however you using RStudio Server and/or want to access your Zotero library over the web, then a few more steps are required (see the [Zotero Web API](#zotero-web-api) section for details).

#### Group Libraries {#group-libraries}

[Zotero Groups](https://www.zotero.org/support/groups) provide a powerful way to share collections with a class or work closely with colleagues on a project. By default, Zotero Group Libraries are not included in the **Insert Citation** dialog or citation completions. However, there are options available to use group libraries at a global, per-project, or per-document level.

For example, here we specify a project-level option to use the *Reproducible Research Series (Year 1)* group library:

<img src="images/visual-editing-citation-zotero-group.png" class="illustration" width="543" fig-alt="The Project Options pane in RStudio. The R Markdown section is selected. Under the &apos;Visual Mode: Zotero&apos; options, there is an option labeled &apos;Use libraries&apos; followed by a drop down menu with the value &apos;Selected Libraries&apos; currently selected. Underneath this is a white box different library options and buttons to select them. The &apos;My Library&apos; option is unselected and the &apos;Reproducible Research Series (Year 1) option is selected."/>

You can also specify one or more libraries within YAML. For example:

``` yaml
---
title: "Reproducible Research"
zotero: "Reproducible Research Series (Year 1)"
---
```

Note that you can also turn off Zotero entirely for a document using `zotero: false`:

``` yaml
---
title: "Reproducible Research"
zotero: false
---
```

#### Zotero Web API {#zotero-web-api}

If you are using RStudio Server and/or don't have Zotero installed locally, you can still access your Zotero library using the Zotero Web API (assuming you have a Zotero web account and have synced your libraries to your account).

::: {.callout-tip appearance="simple"}
If you are running RStudio Desktop, it's generally easier to also run Zotero on your desktop and access your library locally. That said, it is possible to access Zotero web libraries from RStudio Desktop if you prefer that configuration.
:::

##### API Access Key

RStudio accesses Zotero web libraries using the Zotero Web API, so the first step is to [create a Zotero account](https://www.zotero.org/user/register) and then configure Zotero to sync its data to your account. You can do this using the **Sync** tab of the Zotero preferences:

![](images/visual-editing-citations-zotero-sync.png){.illustration fig-alt="The Sync tab of Zotero preferences."}

Once you've configured your library to sync, you need to [create a Zotero API Key](https://www.zotero.org/settings/keys/new) to use with RStudio:

![](images/visual-editing-citations-zotero-keygen.png){.illustration fig-alt="The 'New Private Key' section of Zotero. The 'Allow library access' option is selected."}

Follow the instructions to create a new access key. Note that if you want to use [Group Libraries](#group-libraries) with RStudio that you should change the default to provide read-only access to groups (as illustrated above).

Be sure to **record your key** after generating it (i.e. copy it to the clipboard and/or save it somewhere more permanent) as you won't be able to view it again after you navigate away.

Finally, go to the **R Markdown -\> Citations** preferences to connect Zotero to RStudio using your key:

<img src="images/visual-editing-citations-zotero-options.png" class="illustration" width="585" fig-alt="The global options menu in R Studio. The Citations subsection of the R Markdown section is selected, and there is a value pasted into the &apos;Zotero Web API Key&apos; box."/>

Set the Zotero Library option to "Web", then paste in your Zotero Web API Key. You can use **Verify Key...** button to confirm that your Zotero API key is working correctly.

Once you've confirmed your connection you are ready to start inserting citations from Zotero.
```````

## File: docs/websites/website-about.qmd
```````
---
title: About Pages
---

## Overview

Quarto makes it easy to create a simple about page for an individual or organization. When the `about` option is provided for a document, a special template will be used to layout the content of the current page with a custom layout designed to present a person or organization.

For example:

``` markdown
---
title: "Finley Malloc"
about:
  template: jolla
  image: profile.jpg
  links:
    - icon: twitter
      text: twitter
      href: https://twitter.com
    - icon: github
      text: Github
      href: https://github.com
---

Finley Malloc is the Chief Data Scientist at Wengo Analytics. When not innovating on data platforms, Finley enjoys spending time unicycling and playing with her pet iguana.

## Education

University of California, San Diego | San Diego, CA
PhD in Mathematics | Sept 2011 - June 2015

Macalester College | St. Paul, MN
B.A in Economics | Sept 2007 - June 2011

## Experience

Wengo Analytics | Head Data Scientist | April 2018 - present

GeoScynce | Chief Analyst | Spet 2012 - April 2018
```

The contents of this page will be laid out using the `jolla` template with the `profile.jpg` image, and generate a set of links for the items specified in `links`.

You can write and format the content of the page however you'd like - when the page is rendered, Quarto will use the content and options provided in the `about` option to create the about page, arranging the content of the `about` option with the content in the page itself.

## Templates

Quarto includes 5 built in templates, drawing inspiration from the [Postcards R Package](https://cran.r-project.org/web/packages/postcards/readme/README.html). Built-in templates include:

-   `jolla`
-   `trestles`
-   `solana`
-   `marquee`
-   `broadside`

Each template will position the about elements with the content in a different layout. Select the template using the `template` option:

``` yaml
about:
  template: trestles
```

Here is a preview of each of the templates:

::: panel-tabset
### jolla

![](images/about-jolla.png){.border fig-alt="Screenshot of About page with jolla template. Photo is a centered circle above a heading with the author's name. There is a centered paragraph below the header, a separator line, and then buttons for twitter and github centered at the bottom."}

### trestles

![](images/about-trestles.png){.border fig-alt="Screenshot of About page with trestles template. On the left-hand side there is a rectangular photo above the author's name, and two buttons (one for twitter, and one for github below). On the right hand side there is a paragraph of body text followed by headered sections for Education and Experience."}

### solana

![](images/about-solana.png){.border fig-alt="Screenshot of About page with solana template. The left-hand side has the name as a main header with buttons for twitter and github below it. Below the buttons there is a paragraph of body text, followed by headered sections for Education and Experience. In the upper right-hand column there is a rectangular image."}

### marquee

![](images/about-marquee.png){.border fig-alt="Screenshot of About page with marquee template. A large square image is at the top. Beneath that the author's name is a header, and there is a paragraph of body text, followed by headered sections for Education and Experience. Centered at the bottom of the page are links to Twitter and GitHub with their respective icons next to them."}

### broadside

![](images/about-broadside.png){.border fig-alt="Screenshot of About page with broadside template. The left side is a rectangular image. On the right-hand side the author's name is a header, and there is a paragraph of body text, followed by headered sections for Education and Experience. Centered at the bottom of the page are links to Twitter and GitHub with their respective icons next to them."}
:::

### Image

The image for the about page will be read from the document-level `image` option:

``` yaml
title: Finley Malloc
image: profile.jpg
about:
  template: jolla
```

In addition, you can customize how the image is displayed in the page to better meet your needs by setting the following options.

| option        | description                                                                           | templates                     |
|------------------|----------------------------------|--------------------|
| `image-width` | A valid CSS width for your image.                                                     | all                           |
| `image-shape` | The shape of the image on the about page. Choose from:`rectangle`, `round`, `rounded` | `jolla`, `solana`, `trestles` |
| `image-alt`   | Alternative text for image                                                            | all                           |
| `image-title` | Title for image                                                                       | all                           |

For example:

``` yaml
title: Finley Malloc
image: profile.png
about:
  template: trestles
  image-width: 10em
  image-shape: round
```

### Links

Your about page also may contain a set of links to other resources about you or your organization. Each template will render these links in a slightly different way. Here are the options that you can specify for each link:

| Option       | Description                                                                                                                        |
|-------------------|-----------------------------------------------------|
| `href`       | Link to file contained with the project or an external URL.                                                                        |
| `text`       | Text to display for navigation item (defaults to the document `title` if not provided).                                            |
| `icon`       | Name of one of the standard [Bootstrap 5 icons](https://icons.getbootstrap.com/) (e.g. "github", "twitter", "share", etc.).        |
| `aria-label` | [Accessible label](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes/aria-label) for the navigation item. |

## Partial Page Content

By default, the about page will be generated using the entire contents of the page. If you'd like, however, you may also choose to use only a portion of the page's content to populate the about template. In this case, you can specify an `id` for the about page in the document front matter. When rendering the page, Quarto will find any `div` with that `id` and use the contents of that `div` to populate the about template. The `div` that provided the contents will be replaced with the formatted 'about' content. For example, you could write:

``` markdown
---
title: "Finley Malloc"
about:
  id: hero-heading
  template: jolla
  image: profile.jpg
  links:
    - icon: twitter
      text: twitter
      href: https://twitter.com
    - icon: github
      text: Github
      href: https://github.com
---

### This content appears above the formatted about page content.

:::{#hero-heading}

Finley Malloc is the Chief Data Scientist at Wengo Analytics. When not innovating on data platforms, Finley enjoys spending time unicycling and playing with her pet iguana.

## Education

University of California, San Diego | San Diego, CA
PhD in Mathematics | Sept 2011 - June 2015

Macalester College | St. Paul, MN
B.A in Economics | Sept 2007 - June 2011

## Experience

Wengo Analytics | Head Data Scientist | April 2018 - present

GeoScynce | Chief Analyst | Sept 2012 - April 2018

:::

### This content appears below the formatted about page content.
```
```````

## File: docs/websites/website-basics.qmd
```````
---
title: "Creating a Website"
format: 
  html:
    output-file: index.html
---

## Overview

Quarto Websites are a convenient way to publish groups of documents. Documents published as part of a website share navigational elements, rendering options, and visual style.

Website navigation can be provided through a global navbar, a sidebar with links, or a combination of both for sites that have multiple levels of content. You can also enable full text search for websites.

Quarto websites can be published to a wide variety of destinations including GitHub Pages, Netlify, Posit Connect, or any other static hosting service or intranet web server. See the documentation on [Publishing Websites](/docs/publishing/index.qmd) for additional details.

## Quick Start

Follow the Quick Start for your tool of choice to get a simple website up and running. After covering the basics, read on to learn about website navigation and other more advanced website features.

::: {.panel-tabset group="tools-tabset"}

### VS Code

To create a new website project within VS Code, execute the **Quarto: Create Project** command from the command-palette:

![](images/vscode-create-project-command.png)

Then, select **Website Project**:

![](images/vscode-create-project-website.png){.border}

You'll be prompted to select a parent directory to create the project within. Then, you'll be asked to name the directory for your website project:

![](images/vscode-create-project-directory.png){.border}

The new website project will be created and opened within VS Code. Click the **Preview** button (![](/docs/tools/images/vscode-preview-icon.svg){fig-alt="Preview icon"}) to preview the website:

![](images/vscode-create-project-render.png)

The preview will show to the right of the source file. As you re-render `index.qmd` or render other files like `about.qmd`, the preview is automatically updated.


### RStudio

To create a new website project within RStudio, use the **New Project** command and select **Quarto Website**:

:::{layout-ncol="2"}

![](images/rstudio-project-new-directory.png){.border}

![](images/rstudio-project-website.png){.border}
:::

Then, provide a directory name and other relevant options for the website:

![](images/rstudio-project-website-options.png){.border fig-alt="A section of the 'New Project Wizard' menu from Rstudio. This section is titled 'Create Quarto Website'. The Quarto logo is displayed on the left. On the right are fields for 'Directory name', and 'Create project as subdirectory of:'. Underneath that are options for 'Engine'. The option for 'Engine' is set to 'None'. Underneath are options for 'Create a git repository', and 'Use visual markdown editor'.There are buttons for 'Create Project' and 'Cancel' arranged side-by-side in the bottom right of the window. There is an option to 'Open in new session' in the button left corner."}

Click the **Render** button to preview the website:

![](images/rstudio-project-website-preview.png)

The preview will show to the right of the source file. As you re-render `index.qmd` or render other files like `about.qmd`, the preview is automatically updated.


### Terminal

To create a new website project from the Terminal, use the `quarto create project` command, following the prompt to select the type and to provide a name for the project (will be used as the directory name):

```{.bash filename="Terminal"}
quarto create project website mysite
```

This will create the scaffolding for a simple website in the `mysite` sub-directory. Use the `quarto preview` command to render and preview the website:

```{.bash filename="Terminal"}
quarto preview mysite
```

The website preview will open in a new web browser. As you edit and save `index.qmd` (or other files like `about.qmd`) the preview is automatically updated.

:::


## Workflow

Above we have demonstrated how to create and edit a simple website. In this section we go into more depth on website workflow.

### Config File

Every website has a `_quarto.yml` config file that provides website options as well as defaults for HTML documents created within the site. For example, here is the default config file for the simple site created above:

```{.yaml filename="_quarto.yml"}
project:
  type: website

website:
  title: "today"
  navbar:
    left:
      - href: index.qmd
        text: Home
      - about.qmd

format:
  html:
    theme: cosmo
    css: styles.css
    toc: true
```

See the documentation on [Website Navigation](website-navigation.qmd) and [Website Tools](website-tools.qmd) for additional details on website configuration. See [HTML Documents](/docs/output-formats/html-basics.qmd) for details on customizing HTML format options.

### Website Preview

If you are using VS Code or RStudio, the **Preview** button (VS Code), or **Render** button (RStudio), automatically renders and runs `quarto preview` in an embedded window. You can also do the same thing from the Terminal if need be:

``` {.bash filename="Terminal"}
# preview the website in the current directory
quarto preview
```

Note that when you preview a site (either using VS Code / RStudio integrated tools or from the terminal)  changes to configuration files (e.g. `_quarto.yml`) as well as site resources (e.g. theme or CSS files) will cause an automatic refresh of the preview.

You can customize the behavior of the preview server (port, whether it opens a browser, etc.) using command line options or the `_quarto.yml` config file. See `quarto preview help` or the [project file reference](/docs/reference/projects/options.qmd#preview) for additional details.


::: callout-important
As you preview your site, pages will be rendered and updated. However, if you make changes to global options (e.g. `_quarto.yml` or included files) you need to fully re-render your site to have all of the changes reflected. Consequently, you should always fully `quarto render` your site before deploying it, even if you have already previewed changes to some pages with the preview server.
:::


### Website Render

To render (but not preview) a website, use the `quarto render` command, which will render the website into the `_site` directory by default:

``` {.bash filename="Terminal"}
# render the website in the current directory
quarto render 
```

See the [Project Basics](/docs/projects/quarto-projects.qmd) article to learn more about working with projects, including specifying an explicit list of files to render, as well as adding custom pre and post render scripts to your project.

{{< include ../projects/_render-targets.md >}}


## Linking

When creating links between pages in your site, you can provide the source file as the link target (rather than the `.html` file). You can also add hash identifiers (`#)` to the source file if you want to link to a particular section in the document. For example:

``` markdown
[about](about.qmd)
[about](about.qmd#section)
```

One benefit of using this style of link as opposed to targeting `.html` files directly is that if you at some point convert your site to a [book](/docs/books/book-basics.qmd) the file-based links will automatically resolve to section links for formats that produce a single file (e.g. PDF or MS Word).

## Website Theme

The look of your website is controlled via [HTML themes](/docs/output-formats/html-themes.qmd). These options are set under the `format` option in your website configuration file:

```{.yaml filename="_quarto.yml"}
format:
  html:
    theme: cosmo
    css: styles.css
```

See [HTML Theming](/docs/output-formats/html-themes.qmd) for details on the available options.

## Learning More

Once you've got a basic website up and running check out these articles for various ways to enhance your site:

- [Website Navigation](website-navigation.qmd) describes various ways to add navigation to a website, including top-level navigation bars, sidebars, or hybrid designs that uses both. This article also covers adding full-text search as well as a site-wide footer.

- [Website Tools](website-tools.qmd) covers adding social metadata (e.g. for Twitter Cards) and Google Analytics to your site, as well as enabling users to toggle between dark and light color schemes.

- [Website Options](/docs/reference/projects/websites.qmd) provides a comprehensive reference to all of the available website options.

- [Code Execution](/docs/projects/code-execution.qmd) provides tips for optimizing the rendering of sites with large numbers of documents or expensive computations.

- [Publishing Websites](/docs/publishing/index.qmd) enumerates the various options for publishing websites including GitHub Pages, Netlify, and Posit Connect.
```````

## File: docs/websites/website-blog.qmd
```````
---
title: Creating a Blog
---

## Overview

Quarto websites include integrated support for blogging. Blogs consist of a collection of posts along with a navigational page that lists them in reverse chronological order. Blogs can include a custom about page, publish an RSS feed, and use a wide variety of themes.

You can create websites that consist entirely of a single blog, websites that have multiple blogs, or you can add a blog to a website that contains other content.

## Quick Start

Follow the Quick Start for your tool of choice to get a simple blog up and running. After covering the basics, read on to learn about more advanced blog features.

::: {.panel-tabset group="tools-tabset"}
### VS Code

To create a new blog project within VS Code, execute the **Quarto: Create Project** command from the command-palette:

![](images/vscode-create-project-command.png)

Then, select **Blog Project**:

![](images/vscode-create-project-blog.png){.border}

You'll be prompted to select a parent directory to create the project within. Then, you'll be asked to name the directory for your blog project:

![](images/vscode-create-project-directory.png){.border}

The new blog project will be created and opened within VS Code. Click the **Preview** button (![](/docs/tools/images/vscode-preview-icon.svg){fig-alt="Preview icon"}) to preview the blog:

![](images/vscode-create-project-render-blog.png)

The preview will show to the right of the source file. As you re-render `index.qmd` or render other files like `about.qmd`, the preview is automatically updated.

### RStudio

To create a new blog project within RStudio, use the **New Project** command and select **Quarto Blog**:

::: {layout-ncol="2"}
![](images/rstudio-project-new-directory.png){.border}

![](images/rstudio-project-blog.png){.border}
:::

Then, provide a directory name and other relevant options for the blog:

![](images/rstudio-project-blog-options.png){.border}

Click the **Render** button to preview the blog:

![](images/rstudio-project-blog-preview.png)

The preview will show to the right of the source file. As you re-render `index.qmd` or render other files like `about.qmd`, the preview is automatically updated.

### Terminal

To create a new blog project from the Terminal, use the `quarto create project` command with `blog`, specifying the directory that will hold the new project as first argument:

``` {.bash filename="Terminal"}
quarto create project blog myblog
```

This will create the scaffolding for a simple blog in the `myblog` sub-directory. Use the `quarto preview` command to render and preview the blog:

``` {.bash filename="Terminal"}
quarto preview myblog
```

The blog preview will open in a new web browser. As you edit and save `index.qmd` (or other files like `about.qmd`) the preview is automatically updated.
:::

Here's a summary of the key files created within the starter blog project:

| File                  | Description                |
|:----------------------|:---------------------------|
| `_quarto.yml`         | Quarto project file.       |
| `index.qmd`           | Blog home page.            |
| `about.qmd`           | Blog about page.           |
| `posts/`              | Directory containing posts |
| `posts/_metadata.yml` | Shared options for `posts` |
| `styles.css`          | Custom CSS for website     |

In the following sections we'll take a closer look at the various components of the project.

## Home Page

The home page is a [listing page](website-listings.qmd) for all of the documents in the `posts` directory:

![](images/myblog.png){.border fig-alt="Screenshot of a blog page. There is a navigation bar at the top with the blog title ('myblog') on the left, and on the right: 'About', a GitHub icon, a Twitter icon, and a Search icon. The body has two posts listed with titles, tags, description and preview ordered by date. On the right of the body are categories with counts of posts next to them."}

Here's the source code for the home page:

``` yaml
---
title: "myblog"
listing:
  contents: posts
  sort: "date desc"
  type: default
  categories: true
---
```

When you render a new post, the listing page will automatically updated, adding the most recent post to the top of the list.

::: callout-warning
It is not recommended that you use dynamic dates (for example `today` or `last-modified`) in your blog posts. This will cause the order of your blog and feed to be changed each time the document is rendered or modified.
:::

See the article on [Listing Pages](website-listings.qmd) to learn more about customizing listings, including use a grid layout rather than the default shown above.

### Categories

The listing page is configured to enable categories, which display in the right margin of the page:

``` yaml
---
title: "myblog"
listing:
  # (additional metadata excluded for brevity)
  categories: true
---
```

The categories are read from the front matter of documents included in the listing. For example, here is sample post metadata that includes categories:

``` yaml
---
title: "Post With Code"
description: "Post description"
author: "Fizz McPhee"
date: "5/22/2021"
categories:
  - news
  - code
  - analysis
---
```

See the article on [Categories](website-listings.qmd#categories) to learn more.

## About Page

The `about.qmd` document includes additional information on the blog and its author. For example:

![](images/about-jolla.png){.border fig-alt="Screenshot of an about page. It has a large round circle in the top center with an image shown. Below that is a name in large type, with smaller placeholder body text beneath it. There are two buttons at the bottom, one for twitter, and one for GitHub."}

Here's what the source code of an `about.qmd` might look like:

``` markdown
---
title: "About"
image: profile.jpg
about:
  template: jolla
  links:
    - icon: twitter
      text: Twitter
      href: https://twitter.com
    # (additional links excluded for brevity)
---

## About this blog

This is the contents of the about page for my blog.
```

See the article on [About Pages](/docs/websites/website-about.qmd) to learn about the various options available for customizing page output.

## Posts Directory

The posts that make up the contents of the blog are located in the `posts` directory.

Add a new post to your blog by creating a sub-directory within `posts`, and adding an `index.qmd` file to the directory. That `qmd` file is the new blog post and when you render that, the blog home page will automatically update to include the newest post at the top of the listing.

### Drafts

Add `draft: true` to the document options to indicate a post is a draft. For example:

``` yaml
---
title: "My Post"
description: "Post description"
author: "Fizz McPhee"
date: "5/22/2021"
draft: true
---
```

Draft posts will appear when you preview the site, but will be blank when you render the site and will not appear in listings, navigation, the site map, or site search. You can read more about drafts in [Website Drafts](website-drafts.qmd).

To publish the post when it is complete, simply remove `draft: true` from the document options and then render it.

### Last Updated
To indicate the date of the last modification, but preserve the original publication date, you can add the `date-modified` field to the document options. For example:

``` yaml
---
title: "My Post"
description: "Post description"
author: "Fizz McPhee"
date: "5/22/2021"
date-modified: "5/23/2021"
---
```

### Freezing Posts

Blogs posts that contain executable code often have the problem that posts created last year can't be rendered this year (for example, because the packages used by the post have changed). A similar problem can also arise when a blog has multiple contributors and not everyone has the right software (or the right versions) to render all of the posts. Finally, posts that include computations can often take a while to render, and you don't want the cumulative time required to render the site to grow too large.

The solution to these problems is to *freeze* the output of computational blog posts. When a post is rendered with `freeze: true`, the markdown output from the underlying engine (e.g. Jupyter or Knitr) is saved. When the entire site is rendered these computations are not re-run, but rather read from the previously frozen results.

The only time an article with `freeze: true` is rendered is when you explicitly re-render it. By specifying this option for blog posts you can ensure that posts rendered now will always re-render well with the rest of the site, even if the software required to originally render them isn't available.

In the default blog we include a file (`_metadata.yml`) that establishes [shared metadata](/docs/projects/quarto-projects.qmd#shared-metadata) for all documents within the `posts` directory. In this file, we specify that we want `freeze: true` set by default for all posts:

``` yaml
# options apply to all posts in this folder

# freeze computational output
freeze: true
```

See the article on the [`freeze`](/docs/projects/code-execution.qmd#freeze) option to learn more about freezing computational output within websites.

## Themes

Blogs can use any of the 25 [Bootswatch](https://bootswatch.com/) themes included with Quarto. You can also [create your own](/docs/output-formats/html-themes.qmd#theme-options) themes. The default blog generated by `quarto create project` uses the [cosmo](https://bootswatch.com/cosmo/) theme. Here are links to the available themes along with thumbnails of what the simple default blog looks like under a few of them:

::: {layout="[40,60]"}
::: theme-list
-   [default](https://bootswatch.com/default/)
-   [cerulean](https://bootswatch.com/cerulean/)
-   [cosmo](https://bootswatch.com/cosmo/)
-   [cyborg](https://bootswatch.com/cyborg/)
-   [darkly](https://bootswatch.com/darkly/)
-   [flatly](https://bootswatch.com/flatly/)
-   [journal](https://bootswatch.com/journal/)
-   [litera](https://bootswatch.com/litera/)
-   [lumen](https://bootswatch.com/lumen/)
-   [lux](https://bootswatch.com/lux/)
-   [materia](https://bootswatch.com/materia/)
-   [minty](https://bootswatch.com/minty/)
-   [morph](https://bootswatch.com/morph/)
-   [pulse](https://bootswatch.com/pulse/)
-   [quartz](https://bootswatch.com/quartz/)
-   [sandstone](https://bootswatch.com/sandstone/)
-   [simplex](https://bootswatch.com/simplex/)
-   [sketchy](https://bootswatch.com/sketchy/)
-   [slate](https://bootswatch.com/slate/)
-   [solar](https://bootswatch.com/solar/)
-   [spacelab](https://bootswatch.com/spacelab/)
-   [superhero](https://bootswatch.com/superhero/)
-   [united](https://bootswatch.com/united/)
-   [vapor](https://bootswatch.com/vapor/)
-   [yeti](https://bootswatch.com/yeti/)
-   [zephyr](https://bootswatch.com/zephyr/)
:::

::: theme-thumbnails
**litera**

[![](images/theme-litera.png){style="border: solid silver 1px;" fig-alt="Screenshot of blog with litera theme."}](https://bootswatch.com/litera/)

**solar**

[![](images/theme-solar.png){style="border: solid silver 1px;" fig-alt="Screenshot of blog with solar theme."}](https://bootswatch.com/solar/)

**morph**

[![](images/theme-morph.png){style="border: solid silver 1px;" fig-alt="Screenshot of blog with morph theme."}](https://bootswatch.com/morph/)
:::
:::

## RSS Feed

Blogs typically include an RSS feed that allows their content to be easily syndicated to feed readers and other websites. You can enable RSS for a blog by doing the following:

1.  In the `_quarto.yml` file, add a `site-url` and `description` to the `website` key (without these options being set in the project file, Quarto cannot generate a feed). For example:

    ``` yaml
    website:
      title: "myblog"
      site-url: https://www.myblogexample.io
      description: "A great sample blog"
    ```

2.  In your blog home page `index.qmd` add the `feed: true` option to the listing. For example:

    ``` yaml
    ---
    title: "myblog"
    listing:
      contents: posts
      sort: "date desc"
      type: default
      categories: true
      feed: true
    ---
    ```

Now, when your site is rendered, an RSS feed will also be generated. To learn more, see the article on [RSS Feeds](/docs/websites/website-listings.qmd#feeds).

::: callout-tip
## Including an RSS Link on the Navbar

You can add an RSS link to your navbar by including the following in your `_quarto.yml` project file. For example:

``` yaml
website:
  title: "myblog"
  site-url: https://www.myblogexample.io
  description: "A great sample blog"
  navbar:
    right:
      - icon: rss
        href: index.xml
```
:::

### Category Feeds

You can also generate RSS feeds for specific categories in your blog. For example, to create feeds for the categories `news` and `posts` in a blog, you could write the following:

``` yaml
---
title: "myblog"
listing:
  contents: posts
  sort: "date desc"
  type: default
  categories: true
  feed:
    categories: [news, posts]
---
```

This will create an `index.xml` file with the RSS feed for the listing, but also create an `index-news.xml` and `index-posts.xml` file with RSS feeds for the respective categories.

## Publishing

There are a wide variety of ways to publish Quarto blogs. Blog content is by default written to the `_site` sub-directory. Publishing is simply a matter of copying this directory to a web server or web hosting service.

The article on [Publishing Websites](/docs/publishing/index.qmd) describes in more detail how to publish to the following services:

-   [Quarto Pub](/docs/publishing/quarto-pub.qmd)
-   [GitHub Pages](/docs/publishing/github-pages.qmd)
-   [Netlify](/docs/publishing/netlify.qmd)
-   [Posit Connect](/docs/publishing/rstudio-connect.qmd)
-   [Firebase](/docs/publishing/other.qmd#google-firebase)
-   [Site44](/docs/publishing/other.qmd#site44)
-   [Amazon S3](/docs/publishing/other.qmd#amazon-s3)

## Subscriptions

You may want to allow readers of your blog to subscribe to updates via email. You can use a third party email service to manage and send these emails.

Third party email services will typically take your RSS Feed as input (e.g. `https://www.myblogexample.io/index.xml`) and provide HTML for a subscription widget that you can place on your blog. A good place to locate that widget is often right margin of your blog.

Here are the steps required to add a subscription widget:

1.  Use your email service features to generate the HTML for your subscription widget. MailChimp, for example, provides HTML like this for a minimal subscription widget.

    ``` html
    <span style="font-weight: 600;">Subscribe</span>

    <!-- Begin Mailchimp Signup Form -->
    <link href="http://cdn-images.mailchimp.com/embedcode/slim-10_7_dtp.css" rel="stylesheet" type="text/css">
    <style type="text/css">
        #mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif;  width:170px;}
        /* Add your own Mailchimp form style overrides in your site stylesheet or in this style block.
           We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
        #mc-embedded-subscribe-form{margin-left:-5px;}
    </style>
    <div id="mc_embed_signup">
    <form action="<site_url>" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
        <div id="mc_embed_signup_scroll">

        <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
        <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
        <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_f718424fc5df77c22533bdaa6_a3c37fb57b" tabindex="-1" value=""></div>
            <div class="optionalParent">
                <div class="clear foot" style="margin-top: 10px;">
                    <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">
                    <p class="brandingLogo"></p>
                </div>
            </div>
        </div>
    </form>
    </div>

    <!--End mc_embed_signup-->
    ```

    ::: callout-warning
    The above widget HTML will not work in your blog as the subscription HTML needs to contain value specific to your blog. See your email service provider's instructions for generating a subscription widget.
    :::

2.  Create the file `subscribe.html` in the root of your project.

3.  Paste the HTML for your subscription widget into `subscribe.html` and save the file.

4.  Add `subscribe.html` to the `margin-header` in your `_quarto.yml` file:

    ``` yaml
    website:
      # (additional metadata excluded for brevity)
      margin-header: subscribe.html
    ```

The result looks like this:

![](images/myblog-subscribe.png){.border fig-alt="Screenshot of blog with a Subscribe section in the top of the right-hand section of the bofy. There is an input field marked 'email address' and a button below it labelled 'Subscribe'."}
```````

## File: docs/websites/website-drafts.qmd
```````
---
title: Website Drafts
aliases: 
  - /docs/prerelease/1.5/website-drafts.html
---

## Overview

Use drafts to preview and plan content before it is ready to publish. By default, draft pages will be blank in your rendered site, and will not appear in navigation, listings, search results, or the sitemap. On this page, learn how to specify pages as drafts, control how drafts appear in rendered sites and how drafts appear in site previews.

## Specifying Drafts

To specify a page or post is a draft, you can add `draft: true` to the document YAML:

``` {.yaml filename="posts/post-with-code/index.qmd"}
---
title: "Post with Code"
draft: true
---
```

To specify all documents in directory are drafts set `draft: true` in the [directory metadata](/docs/projects/quarto-projects.html#directory-metadata): 

``` {.yaml filename="posts/_metadata.yml"}
draft: true
```

As an alternative to the `draft` document option, you can also specify the website option `drafts` in `_quarto.yml`:

``` {.yaml filename="_quarto.yml"}
website:
  title: "Cool Website."
  drafts:
    - posts/post-with-code/index.qmd
```

If you would like to specify a list of paths in a separate file, use a [metadata include](/docs/projects/quarto-projects.html#metadata-includes). For example, you could specify your drafts in `drafts.yml`:

``` {.yaml filename="drafts.yml"}
website:
  drafts:
    - posts/post-with-code/index.qmd
```

Then, provide this file to `metadata-files`:

``` {.yaml filename="_quarto.yml"}
website:
  title: "Cool Website."

metadata-files:
  - drafts.yml
```

You can also set the website `drafts` option using [project profiles](/docs/projects/profiles.html).

## Appearance of Drafts

You can use the `draft-mode` option to control the content and linking of draft documents in the rendered website. 
The values for `draft-mode` are:

-   `gone`(default)---Empty and unlinked
-   `unlinked`---Rendered and unlinked
-   `visible`---Rendered and linked

A URL will exist for an empty page but the page itself will be blank. Drafts that are rendered will additionally include a draft banner:

![A rendered draft document will include a "Draft" banner](images/website-drafts-banner.png){.border fig-alt="Screenshot of a post titled 'Post With Code', displaying a banner at the top of the page titled 'Draft'."}

When a draft is unlinked it will not appear in search results, listings, the sitemap, or navigation (sidebars, navbars, and footers).  If another page links to an unlinked draft document, the link will be omitted leaving the content of the link without the hyperlink itself.

As a complete example, consider the following website configuration:

:::{#lst-example}

```{.yaml filename="_quarto.yml"}
project:
  type: website

website:
  title: "Cool Website."
  navbar:
    left:
      - stuff/item1.qmd
      - stuff/item2.qmd
  drafts:                   # <1>
    - stuff/item2.qmd       # <1>
  draft-mode: unlinked      # <2>
```

1. The project is providing a simple list of draft documents. The same thing could be specified using `draft: true` in `stuff/item2.qmd`'s front matter.

2. The draft mode is set to `unlinked`, so drafts are rendered but not linked to. 

A complete `_quarto.yml` example

:::

When rendered the navbar in the above site will omit the item for `stuff/item2.qmd`:

![](images/website-drafts-nav.png){.border fig-alt="Navigation bar for a site with title 'Cool Website.' showing a single navigation item 'Item 1'."}

However, `stuff/item2.qmd` is still available at `stuff/item2.html` and shows the draft banner:

![](images/website-drafts-item2.png){.border fig-alt="Screenshot of a webpage with title 'Item 2'. The navigation bar shows a single navigation item 'Item 1'. Above the navigation bar is a banner with the text 'Draft'."}

## Previewing Drafts

Regardless of the `draft-mode` setting, when you preview a site with `quarto preview` drafts will be `visible`. 
Draft pages will be rendered and display a draft banner, and any links or navigation items pointing at the draft pages will be visible and active. 
For example, when the site described in @lst-example, is previewed a link to `stuff/item2.html` appears in the navigation:

![](images/website-drafts-preview.png){.border fig-alt="Screenshot of a webpage with title 'Item 2'. The navigation bar shows two navigation items 'Item 1' and 'Item 2'. Above the navigation bar is a banner with the text 'Draft'."}

This preview behaviour includes previews generated with the **Render** button in RStudio, and the **Preview** button in VS Code.
```````

## File: docs/websites/website-listings-custom.qmd
```````
---
title: Custom Listings
---

## Overview

In addition to the 3 built in types of listings, you can also build a completely custom display of the items. This custom display can generate any HTML and can optionally still take advantage of the sorting, filtering, and pagination provided by listings.

## Listing Templates

To build a custom listing display, you create an [EJS template](https://ejs.co) that will be used to generate the HTML for a set of items that are passed to the template. EJS templates allow you to generate HTML using plain javascript, making it easy to loop through items and output their values in your custom HTML.


To use a custom template, pass it in the `template` option for a listing:

``` yaml
listing:
  template: gallery.ejs
```

When a listing with a custom template is rendered, the listing contents will be read and processed into a set of items that are passed to the template for rendering. For example, in this case, all the documents in the posts directory will be read into items and passed to the `gallery.ejs` template.

``` yaml
listing:
  contents: posts
  template: gallery.ejs
```

A simple template for outputing a list of documents might look like:

``` html
<ul>
<% for (const item of items) { %>
  <li><a href="<%- item.path %>"><%= item.title %></a></li>
<% } %>
</ul>
```

which produces simple HTML output like:

![](images/listing-custom-output.png){.border}

When rendered, the above template will receive an array of listing items called `items`. When the contents of a listing are loaded from a list of documents, each of those items will be populated with the fields described in [Listing Fields](website-listings.qmd#listing-fields). In addition, any other fields included in a documents metadata will be passed as a property of the item, making it possible to use custom metadata in your documents and the listing display.

::: {.callout-note}

Note that Quarto uses `lodash` to render the EJS templates. The `lodash` uses different syntax for HTML escaping text in templates. 

````
HTML escaped value:   <%- value %>
HTML unescaped value: <%= value %>
````

:::

## Metadata Listings

The `contents` option for a listing most commonly contains a list of paths or globs, but it can also contain metadata. When contents are metadata, the metadata will be read into items and passed to the template. For example:

``` yaml
listing:
  template: custom.ejs
  contents:
    - name: First Item
      href: https://www.quarto.org
      custom-field: A custom value
    - name: Second Item
      href: https://www.rstudio.org
      custom-field: A second custom value
```

could be rendered using:

```` html
```{=html}
<ul>
<% for (const item of items) { %>
  <li>
    <a href="<%- item.href %>"><%= item.name %></a><br/>
    <%= item['custom-field'] %>
  </li>
<% } %>
</ul>
```
````

which produces a simple HTML display like:

![](images/listing-custom-metadata.png){.border}

## Metadata File Listings

The `contents` option for a listing can also point to one or more `yaml` files (which contain metadata). In that case, the metadata will be read from the files into items and passed to the template. For example:

``` yaml
listing:
  template: custom.ejs
  contents:
    - items.yml
```

where the contents of `items.yml` is:

``` yaml
- name: First Item
  href: https://www.quarto.org
  custom-field: A custom value
- name: Second Item
  href: https://www.rstudio.org
  custom-field: A second custom value
```

### Template Examples

Portions of this website are built using custom listings. The best place to start is with [our gallery](/docs/gallery/index.qmd), which is a listing built using a custom template and a metadata file. You can view the source code used to create the gallery page in our [Github repository](https://github.com/quarto-dev/quarto-web).

| File                                                                                       | Description                                                                          |
|-------------------------------------|-----------------------------------|
| [gallery.yml](https://github.com/quarto-dev/quarto-web/blob/main/docs/gallery/gallery.yml) | The metadata that controls what items are displayed in the gallery listing.          |
| [gallery.ejs](https://github.com/quarto-dev/quarto-web/blob/main/docs/gallery/gallery.ejs) | The template used to display the items on the page.                                  |
| [index.qmd](https://github.com/quarto-dev/quarto-web/blob/main/docs/gallery/index.qmd)     | The Quarto document that configures and positions the listing in the `#gallery` div. |

: {tbl-colwidths="\[30,70\]"}

## Sorting, Filtering, and Pagination

By default, sorting, filtering, and pagination are disabled for custom listings templates, but with some simple changes to your template and listing options, you can add this capability to your custom listing. To do this, you need to include the following three things in your custom template:

1.  Include a `list` class on the HTML tag that contains the list of items.

2.  For each item, include `<%= metadataAttrs(item) %>` in the HTML tag that contains the item. This will allow Quarto to write custom attributes that are used for sorting and filtering.

3.  Within each item, include a class that identifies the tag whose text represents the contents of an item's field. The class must be the name of the field prefixed with `listing-`, for example the tag whose inner text is the `item.name` should include a class `listing-name`.

For example, we can modify the above `custom.ejs` template as follows:

``` html
<ul class="list">
<% for (const item of items) { %>
  <li <%= metadataAttrs(item) %>>
    <a href="<%- item.href %>" class="listing-name"><%= item.name %></a><br/>
    <span class="listing-custom-field"><%= item['custom-field'] %><span>
  </li>
<% } %>
</ul>
```

Once you have included these items in your template, you can then enable the options in your listing:

``` yaml
listing:
  sort-ui: true
  filter-ui: true
  page-size: 10
```

The UI elements will now appear on the page and should interact properly with your custom listing.

### Field Display Names

You may want to provide a custom display name for your field to provide a better name than the field name. For example, the field name would appear in the sort UI. You can use `field-display-names` to create mapping from a field to a display name. For example:

``` yaml
listing:
  template: custom.ejs
  contents:
    - items.yml
  sort-ui: true
  filter-ui: true
  page-size: 10
  field-display-names:
    name: "Name"
    custom-field: "Custom"
```

### Date Sorting and Formatting

To properly format and sort date values, you can specify type information for fields in your items. If you specify a field is a date, it will automatically be formatted using the specified date formatting (either default or specified using `date-format`) and will support date sorting in ascending or descending order. If you specify a field as a number, it will support ascending and descending numeric sorting.

You can specify field types as follows:

``` yaml
listing:
  template: custom.ejs
  contents:
    - items.yml
  field-types:
    custom-date: date
    custom-number: number
```

### Required Fields

Since listings are generated using fields that are specified in other documents or via metadata, it can be helpful to ensure that required fields are present. You can note required fields as following:

``` yaml
listing:
  template: custom.ejs
  contents:
    - items.yml
  field-required: [name, custom-field]
```

If the listing page is rendered and any of contents is missing a value for either of the required fields, an error will be thrown noting the field that is required and the file or metadata that has omitted it.

## Template Parameters

You may also make your custom template more dynamic by using parameters to control its behavior. You can provide parameters for custom templates using the `template-params` option like:

```yaml
listing:
  template: custom.ejs
  contents:
    - items.yml
  template-params:
    param1: "param-value"
```

Template parameters can then be accessed in your template using `<%= templateParams.param1 %>`. For example, we can modify the above `custom.ejs` template as follows:

``` html
<h3><%= templateParams.param1 %></h3>
<ul class="pub-list list">
  <% for (const item of items) { %>
      <li <%= metadataAttrs(item) %>>
        <span class="listing-title"><%= item.title %>.</span>
      </li>
  <% } %>
</ul>
```
```````

## File: docs/websites/website-listings.qmd
```````
---
title: "Document Listings"
---

## Overview

Listings enable you to automatically generate the contents of a page (or region of a page) from a list of Quarto documents or other custom data.

Listings are useful for creating blogs, providing navigation for large numbers of documents, or any other scenario where you'd like the contents of a page to be automatically updated as documents are added, updated, and removed.

You can enable listings on a page using the `listing` option in the document front matter. This will instruct Quarto to generate additional content (the 'listings') when the page is rendered. For example, the following YAML in the front matter of a document:

``` yaml
---
title: "Listing Example"
listing: default
---
```

will result in a listing of all documents in the directory (with the exception of the current document). It might look something like this:

![](images/listing-example.png){.border fig-alt="Screenshot of Listing Example page. There is a navbar at the top with the site name on the left, and a collapsed menu icon on the right. The header (Listing example). Below on the left there is a sortable dropdown for the order in which the items are displayed. On the right, across, is a search input box. The items are listed full-width rows that display the item’s metadata (author and date), title, description, and image."}

## Listing Contents

You can control what documents are included in the listing by using the `contents` option, which allows you to provide a set of input files (or globs of input files) that should be included in the listing. For each of the inputs that matches the `contents` of a listing, an item will be included using the metadata in the front matter of the document. 

::: {.callout-note}
To have an item in the list, it must contain at least the "title" metadata.
:::

For example to include all the Quarto documents in the `posts` directory, you would write:

``` yaml
---
title: "Listing Example"
listing:
  contents: posts
---
```

You can write much more complex rules for including content by using globs and using a list of targets in the contents, such as:

``` yaml
---
title: "Listing Example"
listing:
  contents:
    - "reports/*.qmd"
    - "lab-notes/*reports.qmd"
```

Review the [Quarto Glob Reference](/docs/reference/globs.qmd) for more information about supported glob syntax.

::: callout-note
If you provide a path to a directory, it will be treated as `<directory>/**` - the directory will be searched recursively for project inputs.
:::

It is important to note that when providing a list of targets, these will be identified _relative_ to the location of the listings page, not the root of the project file.  For example, if your listings page is located at `/pages/listings.qmd` specifying `contents: "reports/*.qmd"` will search in `/pages/reports/` not `/reports/` for the targeted files.

In addition to specifying lists of files or globs, contents can contain lists of metadata as well. For more about this, see [Custom Listings](website-listings-custom.qmd).

## Listing Types

There are three built-in types of listings that you can choose from. Use the `type` option to choose the appearance of the listing:

``` yaml
---
listing:
  contents: posts
  type: default
---
```

The type field accepts the following values:

+----------------+----------------------------------+
| Type           | Description                      |
+================+==================================+
| `default`      | A blog style list of items.      |
+----------------+----------------------------------+
| `table`        | A table of listings.             |
+----------------+----------------------------------+
| `grid`         | A grid of listing cards.         |
+----------------+----------------------------------+

::: panel-tabset
#### Default

By default, listings will appear in full width rows that display the item's metadata (author and date), title, description, and image.

![](images/listing-default.png){.border alt="A default style listing." fig-alt="The default layout for listings page. The top is a header (Listing Example). Below on the left there is a sortable dropdown for the order in which the items are displayed. On the right, across, is a search input box. The items are listed full-width rows that display the item’s metadata (author and date), title, description, and image."}

#### Grid

Grid style listings display a card for each item.

![](images/listing-grid.png){.border alt="A grid style listing." fig-alt="Listing Example page with grid-style layout cards for each item."}

#### Table

The table listing style provides a traditional tabular layout.

![](images/listing-table.png){.border alt="A table type listing." fig-alt="Listing Example with a text table displaying (from left to right): Date, Title, and Author."}
:::

## Sorting Items

By default, listings created from documents will be ordered by their title. Use the `sort` option to control the order of the listing. For example:

``` yaml
listing:
  contents: posts
  sort: "date"
```

Each `sort` key can include a field name and optionally either `asc` or `desc` to control whether to sort in ascending or descending order. When only the name is specified, sorting by that field will be in ascending order.

The sort key can also contain one or more fields to sort by. For example:

``` yaml
listing:
  contents: posts
  sort:
    - "date"
    - "title desc"
```

This will sort the documents in the `posts` directory first by their date in ascending order, then by their title in descending order.

If you'd like to disable sorting entirely and display the items in the order in which they are specified, you can pass `sort: false` (which will disable sorting and preserve the item's original order).

## Listing Options

It is possible to customize the appearance of listings using the following options for each type of listing display.

### Default

+---------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Option              | Description                                                                                                                                                  |
+=====================+==============================================================================================================================================================+
| `max-items`         | The maximum number of items to include in this listing.                                                                                                      |
+---------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `image-align`       | Whether to place the image on the right or left side of the post content. Defaults to `right`.                                                               |
+---------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `image-height`      | The height of the image being displayed. The width is automatically determined and the image will fill the rectangle without scaling (i.e. cropped to fill). |
+---------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `image-placeholder` | The default image for items if they have no image.                                                                                                           |
+---------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+

### Grids

+---------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Option              | Description                                                                                                                                                  |
+=====================+==============================================================================================================================================================+
| `max-items`         | The maximum number of items to include in this listing.                                                                                                      |
+---------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `image-height`      | The height of the image being displayed. The width is automatically determined and the image will fill the rectangle without scaling (i.e. cropped to fill). |
+---------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `image-placeholder` | The default image for items if they have no image.                                                                                                           |
+---------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `grid-columns`      | The number of columns in the grid display. Defaults to 3.                                                                                                    |
+---------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `grid-item-border`  | Whether to display a border around the item card. Defaults to `true`.                                                                                        |
+---------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `grid-item-align`   | Aligns the content within the card (`left`, `right`, or `center`). Defaults to `left`.                                                                       |
+---------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------+

### Tables

+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
| Options             | Description                                                                                                                                              |
+=====================+==========================================================================================================================================================+
| `max-items`         | The maximum number of items to include in this listing.                                                                                                  |
+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
| `image-height`      | The height of the image being displayed. The width is automatically select and the image will fill the rectangle without scaling (i.e. cropped to fill). |
+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
| `image-placeholder` | The default image for items if they have no image.                                                                                                       |
+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
| `table-striped`     | Display the table rows with alternating background colors (`true` or `false`). Defaults to `false`                                                       |     
+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
| `table-hover`       | Highlight rows of the table when the user hovers the mouse over them (`true` or `false`). Defaults to `false`.                                           |
+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+
| `field-links`       | A list of fields that should link to the document in the table (defaults to `title`).                                                                    |
+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------+

### Advanced Options

+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Option                   | Description                                                                                                                                                                                                                      |
+==========================+==================================================================================================================================================================================================================================+
| `field-display-names`    | A mapping that provides display name for specific fields. For example, to display the title column as 'Report' in a table listing you would write:                                                                               |
|                          |                                                                                                                                                                                                                                  |
|                          | ``` yaml                                                                                                                                                                                                                         |
|                          | listing:                                                                                                                                                                                                                         |
|                          |   field-display-names:                                                                                                                                                                                                           |
|                          |     title: "Report"                                                                                                                                                                                                              |
|                          | ```                                                                                                                                                                                                                              |
+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `image-lazy-loading`     | When `true`, listing images are loaded only as they come into view. When `false`, images are automatically loaded. Default: `true`                                                                                               |
+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `max-description-length` | The maximum length of the description displayed in the listing (in characters). Defaults to 175.                                                                                                                                 |
+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `date-format`            | The date format to use when displaying dates (e.g. `d-M-yyyy`).                                                                                                                                                                  |
|                          |                                                                                                                                                                                                                                  |
|                          | You may either provide a date style (`full`, `long`, `medium`, `short` or `iso`) or a format string for formatting the date.                                                                                                     |
|                          | The behavior of date styles varies depending upon locale, but examples in the `en` locale are as follows:                                                                                                                        |
|                          |                                                                                                                                                                                                                                  |
|                          | full                                                                                                                                                                                                                             |
|                          |                                                                                                                                                                                                                                  |
|                          | :   Saturday, February 5, 2022                                                                                                                                                                                                   |
|                          |                                                                                                                                                                                                                                  |
|                          | long                                                                                                                                                                                                                             |
|                          |                                                                                                                                                                                                                                  |
|                          | :   February 5, 2022                                                                                                                                                                                                             |
|                          |                                                                                                                                                                                                                                  |
|                          | medium                                                                                                                                                                                                                           |
|                          |                                                                                                                                                                                                                                  |
|                          | :   Feb 5, 2022                                                                                                                                                                                                                  |
|                          |                                                                                                                                                                                                                                  |
|                          | short                                                                                                                                                                                                                            |
|                          |                                                                                                                                                                                                                                  |
|                          | :   2/5/22                                                                                                                                                                                                                       |
|                          |                                                                                                                                                                                                                                  |
|                          | iso                                                                                                                                                                                                                              |
|                          |                                                                                                                                                                                                                                  |
|                          | :   2022-05-22                                                                                                                                                                                                                   |
|                          |                                                                                                                                                                                                                                  |
|                          | Learn more about supported date formatting values [here](/docs/reference/dates.qmd).                                                                                                                                             |
+--------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

In addition to the above listing-wide options, each listing type has a variety of options to customize its appearance.

## Categories

In addition to displaying the listing contents, listings can also automatically add a list of categories to the page that they appear on. To enable categories you can set the `categories` option like:

``` yaml
listing:
  categories: true
```

which results in categories appearing in the right sidebar:

![](images/listing-categories.png){.border .column-page-right fig-alt="Default layout listings page with a sidebar on the right showing categories and the counts of items for each category."}

When users click a category, the page will be updated to show only the listing items that match the selected category.

#### Category Appearance

You can choose between a few different display styles for categories:

+--------------+------------------------------------------------------------------------------------------------------------------------------------+
| Option       | Description                                                                                                                        |
+==============+====================================================================================================================================+
| `numbered`   | Displays a list of categories in alphabetical order with the number of items in that category displayed next to the category name. |
+--------------+------------------------------------------------------------------------------------------------------------------------------------+
| `unnumbered` | Display a list of categories in alphabetical order.                                                                                |
+--------------+------------------------------------------------------------------------------------------------------------------------------------+
| `cloud`      | Displays a 'word cloud' of categories.                                                                                             |
+--------------+------------------------------------------------------------------------------------------------------------------------------------+

When multiple listings appear on the page, categories will be enabled based upon the option set in the first listing. If categories are enabled for the first listing, all listings on the page will contribute their item categories to the list of categories and all will be filtered when the user clicks a category.

## Feeds

You can also have an RSS feed generated based upon the contents of a listing. This is great to allow your content to be syndicated or to be accessible via RSS Readers. Include a feed for your listing by including the `feed` option:

``` yaml
listing:
  contents: posts
  feed: true
```

When a feed is enabled for a listing on a page, an RSS file will be automatically generated using the name of the file. For example, `index.qmd` will produce a feed at `index.xml`. A link to the feed will be included in the `head` of the page as well.

Generating feeds requires that the `site-url` be set for the site in your `_quarto.yml` file. For example:

```{.yaml filename="_quarto.yml"}
website:
  site-url: "https://www.quarto.org"
```

You can further customize your feed by passing options to the `feed` key:

```yaml
listing:
  contents: posts
  feed: 
    items: 10
```

The following options are available:

+---------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Option        | Description                                                                                                                                                                                                   |
+===============+===============================================================================================================================================================================================================+
| `items`       | The number of items to include in your feed. Defaults to 20.                                                                                                                                                  |
+---------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `type`        | `full`, `partial` or `metadata`. `full`, the default, includes the full contents of each document in the feed.                                                                                                |
|               | `partial` includes the description, if available, otherwise the first paragraph in the feed.                                                                                                                  |
|               | `metadata` includes only the title, description, and other document metadata in the feed.                                                                                                                     |
+---------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `title`       | The title for this feed. Defaults to the site title provided in your `_quarto.yml` file.                                                                                                                      |
+---------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `image`       | The image for this feed. If not specified, the image for the page the listing appears on will be used, otherwise an image will be used if specified for the site in your `_quarto.yml` file.                  |
+---------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `description` | The description of this feed. If not specified, the description for the page the listing appears on will be used, otherwise the description of the site will be used if specified in your `_quarto.yml` file. |
+---------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `language`    | The language of the feed. Omitted if not specified. See <https://www.rssboard.org/rss-language-codes> for a list of valid language codes.                                                                     |
+---------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `categories`  | Generates a separate feed for each of the categories included in this list of category names.                                                                                                                 |
+---------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

## Listing Fields

When reading the contents of a listing, Quarto uses the metadata read from the front matter of the document or the contents of the document itself to populate the following fields for each item:

+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Field Name      | Description                                                                                                                                                                                                                                                                               |
+=================+===========================================================================================================================================================================================================================================================================================+
| `title`         | The title of the item, read from the `title` field of the front matter (or the first H1 of the document).                                                                                                                                                                                 |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `subtitle`      | The subtitle of the item, read from the `subtitle` field of the front matter.                                                                                                                                                                                                             |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `author`        | The author of the item, read from the `author` field of the front matter.                                                                                                                                                                                                                 |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `description`   | The description of the item, read from the `description` or `abstract` field of the front matter or from the first paragraph of the document.                                                                                                                                             |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `date`          | The date of the item, read from the `date` field of the front matter.                                                                                                                                                                                                                     |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `image`         | The image for this item, read from the `image` field of the front matter, or automatically discovered by taking the first of an image of class `preview-image`, an image with a file name starting with `feature`, `cover`, or `thumbnail`, or the first image to appear in the document. |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `image-alt`     | The alt text for the image for this item.                                                                                                                                                                                                                                                 |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `word-count`    | A word count for this item.                                                                                                                                                                                                                                                               |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `reading-time`  | An estimate of the reading time for this item, computed by counting the words in the item and assuming a reading speed of 200 words per minute.                                                                                                                                           |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `categories`    | Categories for the item, read from the `categories` field of the front matter.                                                                                                                                                                                                            |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `filename`      | The name of the input file.                                                                                                                                                                                                                                                               |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `file-modified` | The last modified date of this input file.                                                                                                                                                                                                                                                |
+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Depending upon the type of listing that you are using, different fields are displayed automatically:

+---------------+---------------+--------------+--------------+
| Field         | Type: Default | Type: Table  | Type: Grid   |
+===============+:=============:+:============:+:============:+
| `title`       | x             | x            | x            |
+---------------+---------------+--------------+--------------+
| `subtitle`    | x             |              |              |
+---------------+---------------+--------------+--------------+
| `author`      | x             | x            | x            |
+---------------+---------------+--------------+--------------+
| `description` | x             |              | x            |
+---------------+---------------+--------------+--------------+
| `date`        | x             | x            | x            |
+---------------+---------------+--------------+--------------+
| `image`       | x             |              | x            |
+---------------+---------------+--------------+--------------+

### Customizing Fields

Though specific columns are displayed by default, each of the types will allow you to display any of the above columns by using the `fields` options. For example, to display more fields in a table (as columns), you write:

``` yaml
listing:
  type: table
  contents: posts
  fields: [image, date, title, author, reading-time]
```

which produces:

![](images/list-fields-list.png){fig-alt="Table with small image thumbnail for each item and custom list of fields: Date, Title, Author, and Reading Time."}

Each type of listing will handle the fields in different ways.

Default

:   For default type listings, the various fields will be placed logically, with the `image` in the right column, the `title`, `subtitle`, and `description` in the center column, and any other fields in the left column.

    ![](images/default-fields.png){.border .column-page-right fig-alt="Default listings layout with the image in the right column, the title, subtitle, and description in the center column, and author, date, reading time, file, and file modified fields in the left column."}

Tables

:   For table type listings, the list of fields will be displayed as columns in the order that the fields appear in the list.

Grid

:   For grid listings, the `image`, `title`, `subtitle`, `reading-time`, `categories`, `description`, `author`, and `date` fields will be arranged on the body of the card. The `filename` and `file-modified` fields will appear in the card footer. Any other fields will appear in a table at the bottom of the card body.

    ![](images/grid-fields.png){.border fig-alt="Grid listing layout item with image thumbnail at the top of the card, followed below by the title, then subtitle, reading time, category tags, and description. Below the description there is a line with author and date, and another line with file and file modified."}

## Including or Excluding Items

You can control what documents are included or excluding based upon the metadata of the items by using the `include` and `exclude` options. These options allow you to specify one or more field names and values that must be present or absent in order for the item to be included or excluded. For example, to include only items authored by `Harlow` or `Tristan`, you write:

``` yaml
listing:
  contents: posts
  type: grid
  include:
    author: "{Harlow,Tristan}*"
```

To exclude any items authored by `Charles`, you write:

``` yaml
listing:
  contents: posts
  type: grid
  exclude:
    author: "Charles*"
```

When including or excluding items based upon a string field value, Quarto will use glob syntax when comparing values. Any other type of comparison will be done by testing for equality.

## User Tools

Listings support interactive tools to allow the viewer of the listing to sort, filter, or page through listings.

### Sorting

Users can use the select box to choose how to sort the items in the listing (or in the case of tables, by clicking on the column headings). By default, the sorting control will allow the user to sort by `title`, `date`, or `author`. You can stop this UI from being displayed to the user with the option:

``` yml
listing:
  sort-ui: false
```

You can control which fields are included in the sort list by providing a list of field names in the `sort-ui` key:

``` yaml
listing:
  sort-ui: [title, date]
```

### Filtering

Listings include a filter box positioned on the top right of the listing content. The filter box allows readers to perform a 'typeahead' search of the listing contents. You can disable the filtering control using the option:

``` yaml
listing:
  filter-ui: false
```

By default, if the filtering control is enabling, all fields that are being displayed in the listing will be searchable. If you'd like to limit searching / filtering to specific fields, you can do so by providing a field list in the `filter-ui` key:

``` yaml
listing:
  filter-ui: [title, date]
```

### Pagination

Listings also natively support pagination of the items. The default number of items displayed on a page depends up the listing type:

| Listing Type | Items Per Page |
|--------------|:--------------:|
| `default`    |       25       |
| `table`      |       30       |
| `grid`       |       18       |

You can control the number of items displayed per page using the option `page-size`:

``` yaml
listing:
  page-size: 36
```

## Listing Location

By default, listings will simply be appended to the main content region of the page. If you'd like to control where a listing appears, set an `id` for that listing and use that `id` on a corresponding div in the page. For example, updating the page used in the previous example to this:

``` yaml
---
title: "Listing Example"
listing:
  id: sample-listings
  contents: posts
  sort: "date desc"
  type: table
---

You can review the following documents for additional information:

::: {#sample-listings}
:::

Learn more about Quarto [here](https://www.quarto.com).
```

Results in a listing page like:

![](images/listing-example-id.png){fig-alt="Default layout listings page with a footer that reads 'Learn more about Quarto here'."}

## Multiple Listings

You can place any number of listings on a single page. The following would populate two listings on a single page:

``` yaml
---
title: Team Documents
listing: 
  - id: lab-reports
    contents: "lab-reports/*.qmd"
    type: table
  - id: meeting-notes
    contents: "meeting-notes/*.qmd"
    type: table
---

## Lab Reports

:::{#lab-reports}
:::

## Meeting Notes

:::{#meeting-notes}
:::
```

## YAML Listing Content

In addition to populating a listing with inputs that match one or more globs, you can also provide items explicitly via a YAML file. For example, the following listing:

``` yaml
---
title: "Listing Example"
listing:
  id: sample-listings
  contents: 
    - posts
    - archived-items.yaml
  sort: "date desc"
  type: table
---
```

will include all the documents in the `posts` directory, but will also merge in the contents of the `archived-items.yaml` file. The contents of the `archived-items.yaml` file should be a list of items, each of which is a map of field names to values. For example:

``` yaml
- title: "Archived Item 1"
  author: Norah Jones
  date: 2020-01-01
  path: "archived/archived-item-.html"
  categories: [archived, technology]
```

This is useful for cases such as migrating existing content to Quarto - you can begin creating new content as Quarto documents, but still include existing content in your listings by providing their metadata via a yaml file.
```````

## File: docs/websites/website-navigation.qmd
```````
---
title: "Website Navigation"
format: html
project-type: website
---

## Overview

There are a variety of options available for providing website navigation, including:

-   Using top navigation (a navbar) with optional sub-menus.

-   Using side navigation with a hierarchy of pages.

-   Combining top and side navigation (where top navigation links to different sections of the site with their own side navigation).

In addition, you can add full text search to either the top or side navigation interface.

## Top Navigation

To add top-navigation to a website, add a `navbar` entry to the `website` config in `_quarto.yml`. For example, the following YAML:

``` yaml
website:
  navbar:
    background: primary
    search: true
    left:
      - text: "Home"
        href: index.qmd
      - talks.qmd
      - about.qmd 
```

Results in a navigation bar that looks something like this:

![](images/nav-bar.png){fig-alt="A navigation bar. The title 'My Site' is on the left. To the right of the title are the words 'Home', 'Talks', and 'About'. 'Home' is slightly lighter than the other two words. On the far right side of the navigation bar is a search box."}

Above we use the `left` option to specify items for the left side of the navigation bar. You can also use the `right` option to specify items for the right side.

The text for navigation bar items will be taken from the underlying target document's title. Note that in the above example we provide a custom `text: "Home"` value for `index.qmd`.

You can also create a navigation bar menu by including a `menu` (which is a list of items much like `left` and `right)`. For example:

``` yaml
left:
  - text: "More"
    menu:
      - talks.qmd
      - about.qmd 
```

Here are all of the options available for top navigation:

| Option           | Description                                                                                                                                                                                                                 |
|------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `title`          | Navbar title (uses the `site: title` if none is specified). Use `title: false` to suppress the display of the title on the navbar.                                                                                          |
| `logo`           | Logo image to be displayed left of the title.                                                                                                                                                                               |
| `logo-alt`       | Alternate text for the logo image.                                                                                                                                                                                          |
| `logo-href`      | Target href from navbar logo / title. By default, the logo and title link to the root page of the site (`/index.html`).                                                                                                     |
| `background`     | Background color ("primary", "secondary", "success", "danger", "warning", "info", "light", "dark", or hex color).                                                                                                           |
| `foreground`     | Foreground color ("primary", "secondary", "success", "danger", "warning", "info", "light", "dark", or hex color). The foreground color will be used to color navigation elements, text and links that appear in the navbar. |
| `search`         | Include a search box (true or false).                                                                                                                                                                                       |
| `tools`          | List of navbar tools (e.g., link to github or twitter, etc.). See [Navbar Tools](#navbar-tools) for details.                                                                                                                |
| `left` / `right` | Lists of navigation items for left and right side of navbar.                                                                                                                                                                |
| `pinned`         | Always show the navbar (true or false). Defaults to false, and uses [headroom.js](https://wicky.nillia.ms/headroom.js/) to automatically show the navbar when the user scrolls up on the page.                              |
| `collapse`       | Collapse the navbar items into a hamburger menu when the display gets narrow (defaults to true).                                                                                                                            |
| `collapse-below` | Responsive breakpoint at which to collapse navbar items to a hamburger menu ("sm", "md", "lg", "xl", or "xxl", defaults to "lg").                                                                                           |
| `toggle-position`| The position of the collapsed navbar hamburger menu when in responsive mode ("left" or "right", defaults to "left").                                                                                                        |
| `tools-collapse` | Collapse tools into the navbar menu when the display becomes narrow.                                                                                                                                                        |


Here are the options available for individual navigation items:

| Option       | Description                                                                                                                                  |
|--------------|----------------------------------------------------------------------------------------------------------------------------------------------|
| `href`       | Link to file contained with the project or external URL.                                                                                     |
| `text`       | Text to display for navigation item (defaults to the document `title` if not provided).                                                      |
| `icon`       | Name of one of the standard [Bootstrap 5 icons](https://icons.getbootstrap.com/) (e.g., "github", "twitter", "share", etc.).                 |
| `aria-label` | [Accessible label](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes/aria-label) for the navigation item.           |
| `rel`        | Value for [rel](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/rel) attribute. Multiple space-separated values are permitted.  |
| `target`     | Value for [target](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a#target) attribute. E.g., `_blank` to open in a new tab.       |
| `menu`       | List of navigation items to populate a drop-down menu.                                                                                       |

: {tbl-colwidths="30,70"}

For more information on controlling the appearance of the navigation bar using HTML themes, see [HTML Themes - Navigation](/docs/output-formats/html-themes.qmd#navigation).

### Navbar Tools {#navbar-tools}

{{< include ../_require-1.3.qmd >}}

In addition to traditional navigation, the navbar can also display a set of tools (e.g., social actions, GitHub view or edit actions, etc.) A tool definition consists of an icon name and an href to follow when clicked. For icon, use the icon name of any of the 1,300+ Bootstrap Icons.

For example:

::: {layout="[60,40]"}
``` yaml
website:
  navbar:
    tools:
      - icon: twitter
        href: https://twitter.com
      - icon: github
        menu:
          - text: Source Code
            href:  https://code.com
          - text: Report a Bug
            href:  https://bugs.com
```

![](images/navbar-tools.png){.border alt="The right section of a Quarto navbar containing a Twitter and Github logo. The Github logo is selected and a menu is underneath it with two items: 'Source Code' and 'Report a Bug"}
:::

Tools specified for a navigation bar will appear on the right side of the Navbar. If you specify a dark theme or reader mode for your website, the controls for those options will appear with any specified tools.

When the navbar is collapsed into a menu on smaller screens, the tools will be placed at the bottom of the menu.

## Side Navigation {#side-navigation}

If your site consists of more than a handful of documents, you might prefer to use side navigation, which enables you to display an arbitrarily deep hierarchy of articles.

If you are reading this page on a desktop device then you will see the default side navigation display on the left (otherwise you'll see a title bar at the top which you can click or touch to reveal the navigation).

To add side navigation to a website, add a `sidebar` entry to the `website` section of `_quarto.yml`. For example:

``` yaml
website:
  sidebar:
    style: "docked"
    search: true
    contents:
      - text: "Introduction"
        href: introduction.qmd
      - section: "Basics"
        href: basics-summary.qmd
        contents:
          - index.qmd
          - basics-knitr.qmd
          - basics-jupyter.qmd
      - section: "Layout"
        contents:
          - layout.qmd
          - layout-knitr.qmd
          - layout-jupyter.qmd
      - section: advanced.qmd
        contents:
          - raw-code.qmd
          - custom-theme.qmd
      - acknowlegment.qmd
```

There are two styles of side navigation available: "docked" which shows the navigation in a sidebar with a distinct background color, and "floating" which places it closer to the main body text. Here's what the "docked" and "floating" styles look like (respectively):

::: column-screen-inset-shaded
|                                                                                                                                                                                                                                                                                            |                                                                                                                                                         |
|:--------------------------------------------------------------------------------------------------------------------------------:|:-------------------------------------------------------------------------------------------------------------------------------------------------------:|
| ![](images/nav-side-anchored.png){.preview-image fig-alt="A screenshot of a Quarto document where the sidebar is colored gray."} | ![](images/nav-side-floating.png){fit-alt="A screenshot of a Quarto document where the sidebar has a white background and is closer to the body text."} |
:::

Here are all of the options available for side navigation:

| Option           | Description                                                                                                                                                                                                                                                        |
|------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `id`             | Optional identifier (used only for hybrid navigation, described below).                                                                                                                                                                                            |
| `title`          | Sidebar title (uses the project title if none is specified).                                                                                                                                                                                                       |
| `logo`           | Optional logo image.                                                                                                                                                                                                                                               |
| `logo-alt`       | Alternate text for the logo image.                                                                                                                                                                                                                                 |
| `logo-href`      | Target href from sidebar logo. By default, the logo and title link to the root page of the site (`/index.html`).                                                                                                                                                   |
| `search`         | Include a search box (true or false). Note that if there is already a search box on the top navigation bar it won't be displayed on the sidebar.                                                                                                                   |
| `tools`          | List of sidebar tools (e.g., link to github or twitter, etc.). See the next section for details.                                                                                                                                                                   |
| `contents`       | List of navigation items to display (typically top level items will in turn have a list of sub-items).                                                                                                                                                             |
| `style`          | "docked" or "floating".                                                                                                                                                                                                                                            |
| `type`           | "dark" or "light" (hint to make sure the text color is the inverse of the background).                                                                                                                                                                             |
| `background`     | Background color ("none", "primary", "secondary", "success", "danger", "warning", "info", "light", "dark", or "white"). Defaults to "light".                                                                                                                       |
| `foreground`     | Foreground color ("primary", "secondary", "success", "danger", "warning", "info", "light", "dark", or hex color). The foreground color will be used to color navigation elements, text and links that appear in the sidebar.                                       |
| `border`         | Whether to show a border on the sidebar. "true" or "false".                                                                                                                                                                                                        |
| `alignment`      | Alignment ("left", "right", or "center").                                                                                                                                                                                                                          |
| `collapse-level` | Whether to show sidebar navigation collapsed by default. The default is 2, which shows the top and next level fully expanded (but leaves the 3rd and subsequent levels collapsed).                                                                                 |
| `pinned`         | Always show a title bar that expands to show the sidebar at narrower screen widths (true or false). Defaults to false, and uses [headroom.js](https://wicky.nillia.ms/headroom.js/) to automatically show the navigation bar when the user scrolls up on the page. |

A single `sidebar` item without an `id` or `title` will result in a global sidebar applied to all pages. A sidebar with an `id` or `title` will only be applied to pages within the contents of the sidebar or pages that specify the sidebar id.

To use a specific sidebar on a page or a group of pages, specify the `sidebar` ID in the front matter of the page or in the `_metadata.yml` file.
For example, to include the sidebar with `id: tutorials` on a page, add the following to the page's front matter:

```yaml
sidebar: tutorials
```

For more information on controlling the appearance of the side navigation using HTML themes, see [HTML Themes - Navigation](/docs/output-formats/html-themes.qmd#navigation). If you need to control the width of the sidebar, see [Page Layout - Grid Customization](/docs/output-formats/page-layout.qmd#grid-customization).

### Auto Generation

Above we describe how to explicitly populate the `contents` of your sidebar with navigation items. You can also automatically generate sidebar navigation from the filesystem. The most straightforward way to do this is to specify the `contents` option as follows:

``` yaml
sidebar:
  contents: auto
```

Using `contents: auto` at the root level will result in all documents in your website being included within the navigation (save for the home page which can be navigated to via the title link). Navigation is constructed using the following rules:

1.  Navigation item titles will be read from the `title` field of documents.

2.  Sub-directories will create sections and will be automatically titled based on the directory name (including adding capitalization and substituting spaces for dashes and underscores). Use an `index.qmd` in the directory to provide an explicit `title` if you don't like the automatic one.

3.  Order is alphabetical (by filename) unless a numeric `order` field is provided in document metadata.

Automatic navigation automatically includes items in sub-directories. If you prefer not to do this, use an explicit `/*` to indicate only the documents in the root directory:

``` yaml
sidebar:
  contents: /*
```

Rather than specifying that all documents should be included, you can also specify a directory name or a glob pattern. For example, the following values for `contents` are all valid (note that the second form for `reports` is non-recursive):

``` yaml
sidebar:
  contents: reports
  
sidebar:
  contents: reports/*
  
sidebar:
  contents: "*.ipynb"
```

Note that in YAML we need to quote any strings that begin with `*` (as we do above for `*.ipynb`).

You can automatically build sidebar `contents` anywhere within a sidebar hierarchy. For example, here we add a section that is automatically generated from a directory:

``` yaml
sidebar:
  contents:
    - about.qmd
    - contributing.qmd
    - section: Reports
      contents: reports
```

You can also include automatically generated items in the middle of a list of normal items by including an item with an `auto` property. Here we add an `auto` entry in the middle of a list of items:

``` yaml
sidebar:
  contents:
    - about.qmd
    - contributing.qmd
    - auto: "*-report.qmd"
```

Note again that we quote the `auto` entry with a `*` in it so that it is correctly parsed.

### Sidebar Tools

In addition to traditional navigation, the sidebar can also display a set of tools (e.g., social actions, GitHub view or edit actions, etc.) A tool definition consists of an icon name and an href to follow when clicked. For `icon`, use the icon name of any of the 1,300+ [Bootstrap Icons](https://icons.getbootstrap.com).

For example:

::: {layout="[60,40]"}
``` yaml
website:
  sidebar:
    tools:
      - icon: twitter
        href: https://twitter.com
      - icon: github
        menu:
          - text: Source Code
            href:  https://code.com
          - text: Report a Bug
            href:  https://bugs.com
```

![](images/tools.png){fit-alt="The top section of a Quarto sidebar containing a Twitter and Github logo. The Github logo is selected and a menu is underneath it with two items: 'Source Code' and 'Report a Bug'"}
:::

## Hybrid Navigation

If you have a website with dozens or even hundreds of pages, you will likely want to use top and side navigation together, where the top navigation links to various sections, each with their own side navigation.

To do this, provide a group of `sidebar` entries and link each group of `sidebar` entries with a `navbar` entry by matching their `title`s and listing the page linked from the `navbar` as the first content in the `sidebar` group. For example, if you are using the [Diátaxis Framework](https://diataxis.fr/) for documentation, you might have separate sections for tutorials, how-to guides, explanations, and reference documents, your page might look like the following.

![](images/nav-bar-hybrid.png){fig-alt="A navigation bar titled 'ProjectX' on the left. To the right of the title are the menu items 'Home', 'Tutorials', 'How-To', 'Fundamentals', and 'Reference'. There is a search bar on the far right side of the navigation bar."}

With hybrid navigation, if then you click on, say, Tutorials, you might land in a page like the following.

![](images/nav-bar-hybrid-sidebar.png){fig-alt="A navigation bar titled 'ProjectX' on the left. To the right of the title are the menu items 'Home', 'Tutorials', 'How-To', 'Fundamentals', and 'Reference'. There is a search bar on the far right side of the navigation bar. The contents of the 'Tutorials' page is shown, with the sidebar showing the items 'Tutorials', 'Tutorial 1', and 'Tutorial 2'."}

To achieve this layout, your site configuration needs to look something like this:

``` yaml
website:
  title: ProjectX
  navbar:
    background: primary
    search: true
    left:
      - text: "Home"
        href: index.qmd
      - text: "Tutorials"
        href: tutorials.qmd
      - text: "How-To"
        href: howto.qmd
      - text: "Fundamentals"
        href: fundamentals.qmd
      - text: "Reference"
        href: reference.qmd

  sidebar:
    - title: "Tutorials"
      style: "docked"
      background: light
      contents:
        - tutorials.qmd
        - tutorial-1.qmd
        - tutorial-2.qmd

    - title: "How-To"
      contents:
        - howto.qmd
        # navigation items

    - title: "Fundamentals"
      contents:
        - fundamentals.qmd
        # navigation items

    - title: "Reference"
      contents:
        - reference.qmd
        # navigation items
    
```

Note that the first sidebar definition contains a few options (e.g., `style` and `background`). These options are automatically inherited by the other sidebars.

An alternative approach is to make the `sidebar` entries available from a drop down menu from the `navbar` items they're grouped with. To do this, provide a list of `sidebar` entries and give them each an `id`, which you then use to reference them from the `navbar`.

::: callout-note
A page that doesn't appear in any sidebar will inherit and display the first sidebar without an `id` or `title` - you can prevent the sidebar from showing on a page by setting `sidebar: false` in its front matter.
:::

![](images/nav-bar-hybrid-dropdown.png){fig-alt="A navigation bar titled 'ProjectX' on the left. To the right of the title are the menu items 'Home', 'Tutorials', 'How-To', 'Fundamentals', and 'Reference'. 'Home' is in a lighter color than the other menu options. The other menu options have a triangle pointing down next to each one, indicating the existence of a drop-down menu. There is a search bar on the far right side of the navigation bar."}

To achieve this, your site configuration needs to look something like this:

``` yaml
website:
  title: ProjectX
  navbar:
    background: primary
    search: true
    left:
      - text: "Home"
        href: index.qmd
      - sidebar:tutorials
      - sidebar:howto
      - sidebar:fundamentals
      - sidebar:reference

  sidebar:
    - id: tutorials
      title: "Tutorials"
      style: "docked"
      background: light
      collapse-level: 2
      contents: 
        # navigation items
        
    - id: howto
      title: "How-To"
      contents:
        # navigation items
        
    - id: fundamentals
      title: "Fundamentals"
      contents: :
        # navigation items
        
    - id: reference
      title: "Reference"
      contents: 
        # navigation items
```

## Breadcrumbs

By default, navigational breadcrumbs are displayed above the page title on each page that is nested deeper than one level in the sidebar navigation. For example, given this `sidebar` definition:

``` .yaml
website:
  sidebar:
    - contents:
      - section: "Tutorials"
        contents:
          - text: "Tutorial Landing"
            href: tutorials.qmd
```

The page `tutorials.html` contains the following breadcrumb:

![](images/nav-breadcrumbs.png){.border fig-alt="Screenshot of a webpage. Above the header 'Tutorials' is the linked text 'Tutorials > Tutorial Landing'." width=50%}

You can disable breadcrumbs for a website using the `bread-crumbs` option:

```{.yaml filename="_quarto.yml"}
website:
  bread-crumbs: false
```

You can also disable breadcrumbs on individual pages:

```{.yaml filename="document.qmd"}
---
title: Page without breadcrumbs
bread-crumbs: false
---
```

{{< include _page-navigation.md >}}

### Separators

If you include a page separator in the sidebar (either between sections or items), page navigation controls will not appear to continue pagination across the separator. For example, in the following sidebar:

``` yaml
{{< meta project-type >}}:
  sidebar:
    contents:
      - section: "First Section"
        contents:
          - href: document1.qmd
          - href: document2.qmd
          - href: document3.qmd
      - text: "---"
      - section: "Second Section"
        contents:
          - href: document4.qmd
          - href: document5.qmd
          - href: document6.qmd
```

When the user reaches the bottom of document3.qmd, they will see previous navigation to go back to document2.qmd, but they will not see next navigation to continue onto document 4. This behavior is useful when you have sections of contents that don't naturally flow together in sequential order. Use the separator to denote this in the sidebar with a horizontal line and to break up pagination.

## Back to Top

You can include a "Back to top" link at the bottom of documents in a website using the `back-to-top-navigation` option. For example:

``` yaml
{{< meta project-type >}}:
  back-to-top-navigation: true
```

Note that you can disable back to top navigation on a page by page basis by specifying `back-to-top-navigation: false`.

{{< include _footer.md >}}

## Hiding Navigation

For some pages (especially those with a completely custom layout) you can hide navigation altogether (`navbar`, `sidebar`, or both). In these case, add the following to the page front matter:

``` yaml
# Hides the sidebar on this page
sidebar: false

# Hides the navbar on this page
navbar: false
```

## Reader Mode

If you'd like users to be able to hide the side navigation and table of contents and have a more focused reading experience, you can enabled `reader-mode`. When enabled, a `reader-mode` toggle will appear on the navbar, if present, or on the sidebar. When pressed, the toggle will 'roll up' the sidebar and table of contents.

![](images/reader-mode.png){fig-alt="Reader mode toggle appearing the top navigation."}

To enable `reader-mode`, use the following in your project:

``` yaml
website:
  reader-mode: true
```

## Site Search

You can add site search by including `search: true` in either your `site-navbar` or `site-sidebar` configuration. For example:

``` yaml
website:
  sidebar:
    style: "docked"
    search: true
    contents:
      - section: "Basics"
        contents:
          - index.qmd
          - basics-jupyter.md
        # etc
```

## GitHub Links

You can add various links (e.g., to edit pages, report issues, etc.) to the GitHub repository where your site source code is hosted. To do this, add a `repo-url` along with one or more actions in `repo-actions`. For example:

``` yaml
website:
  repo-url: https://github.com/quarto-dev/quarto-demo
  repo-actions: [edit, source, issue]
```

The links will be displayed immediately below the page's table of contents:

![](images/repo-actions.png){fig-alt="A screen shot of a Quarto document. Underneath the page table of contents on the right side are three options: 'Edit this page', 'View source' and 'Report an issue'. There is a Github icon to the left of 'Edit this Page.'"}

There are a couple of additional options that enable you to customize the behavior of repository links:

| Option             | Description                                                                                                |
|--------------------|------------------------------------------------------------------------------------------------------------|
| `repo-subdir`      | Subdirectory of repository containing source files (defaults to root directory).                           |
| `repo-branch`      | Repository branch containing the source files (defaults to `main`)                                         |
| `issue-url`        | Provide an explicit URL for the 'Report an Issue' action.                                                  |
| `repo-link-target` | The `target` attribute to use for repo action links. E.g., set to "_blank" to open in a new tab or window. |
| `repo-link-rel`    | The `rel` attribute to use for repo action links.                                                          | 

: {tbl-colwidths="\[40,60\]"}

If you want to suppress the GitHub links on a specific page, you can set `repo-actions` to `false` in the document YAML:

```{.yaml filename="page.qmd"}
---
repo-actions: false
---
```

## Redirects

If you rename or move a page on your site, you may want to create redirects from the old URLs so that existing links don't break. You can do this by adding `aliases` from old pages to renamed pages.

::: callout-note
Redirects are HTML files created directly at the path you specify in your `aliases`. You should use the extension  `.html`, not the `.md` or `.qmd` extension of the original page source.
:::

For example, let's say you renamed `page.qmd` to `renamed-page.qmd`. You would add the following `aliases` entry to `renamed-page.qmd` to create the redirect:

```{.yaml filename="renamed-page.qmd"}
---
title: "Renamed Page"
aliases:
  - page.html
---
```

This can also be useful for situations where you re-organize content on your site into a different directory hierarchy or break one large article into smaller ones.

For re-organizing content into a new directory hierarchy, you may need to specify an absolute path with a leading `/`. For example, if you moved `/old-directory/index.md` to `/new-directory/index.md`:

```{.yaml filename="/new-directory/index.md"}
---
title: "Reorganized page"
aliases: 
  - "/old-directory/index.html"
---
```

When breaking one large article into smaller ones, you may want to add the URL hash of the section that you have broken out into a new page. For example:

```{.yaml filename="learning-more.qmd"}
---
title: "Learning More"
aliases:
  - overview.html#learning-more
---
```

::: callout-tip
Depending on where you are deploying your site there may be more powerful tools available for defining redirects based on patterns. For example, Netlify [`_redirects`](https://docs.netlify.com/routing/redirects/) files or [`.htaccess`](https://www.danielmorell.com/guides/htaccess-seo/redirects/introduction-to-redirects) files. Search your web host's documentation for "redirects" to see if any of these tools are available.
:::

## 404 Pages {#pages-404}

When a browser can't find a requested web page, it displays a [404 error](https://en.wikipedia.org/wiki/HTTP_404) indicating that the file can't be found. Browser default 404 pages can be pretty stark, so you may want to create a custom page with a more friendly message and perhaps pointers on how users might find what they are looking for.

Most web serving platforms (e.g., Netlify, GitHub Pages, etc.) will use a file named `404.html` in the root of your website as a custom error page if you provide it. You can include a custom 404 page in a Quarto website by creating a markdown file named `404.qmd` in the root of your project. For example:

``` markdown
---
title: Page Not Found
---

The page you requested cannot be found (perhaps it was moved or renamed).

You may want to try searching to find the page's new location.
```

Note that you can use HTML alongside markdown within your `404.qmd` file in order to get exactly the appearance and layout you want.

Your 404 page will appear within the chrome of your site (e.g., fonts, css, layout, navigation, etc.). This is so that users don't feel that they've irrecoverably "left" your site when they get a 404 error. If you don't want this behavior, then provide a `404.html` rather than `404.qmd`.

Here are some examples of how various popular websites handle custom 404 pages: <https://blog.fluidui.com/top-404-error-page-examples/>.

#### Non-Root Site Paths

If your website is served from the root of a domain (e.g., `https://example.com/`) then simply providing a `404.qmd` file as described above is all that's required to create a custom 404 page.

However, if your website is **not** served from the root of a domain then you need to provide one additional bit of configuration to make sure that resources (e.g., your site's CSS) are resolved correctly within 404 pages.

For example, if your site is served from `https://example.com/mysite/` then you'd add the following to your project `website` configuration within `_quarto.yml`:

``` yaml
website:
  title: "My Site"
  site-path: "/mysite/"
```

Note that if you are already providing a `site-url` (which is required for generation of sitemaps and [social metadata](website-tools.qmd#social-metadata) preview images) then it's enough to simply include the path within the `site-url`:

``` yaml
website:
  title: "My Site"
  site-url: "https://example.com/mysite/"
```
```````

## File: docs/websites/website-search.qmd
```````
---
title: "Website Search"
---

## Overview

Quarto includes support for full text search of websites and books. By default, Quarto will automatically index the contents of your site and make it searchable using a locally built index. You can also configure Quarto search to use a hosted [Algolia](https://www.algolia.com/products/search-and-discovery/hosted-search-api/) index.

## Search Appearance

Search is enabled by default for websites and books. If the site has a navbar the search UI will appear on the navbar, otherwise it will appear on the sidebar. You can control the location of search with the following options:

| Option     | Description                                                                                                 |
|------------|-------------------------------------------------------------------------------------------------------------|
| `location` | `navbar` or `sidebar` (defaults to `navbar` if one is present on the page).                                 |
| `type`     | `overlay` or `textbox` (`overlay` provides a button that pops up a search UI, `textbox` does search inline).|

For example:

``` yaml
website:
  search: 
    location: navbar
    type: overlay
```

Note that the above example reflects the default behavior so need not be explicitly specified. Note also that search is enabled by default for websites (you can disable it with `search: false`).

The `overlay` option displays the search UI as follows:

![](images/navbar-overlay.png){.border .column-page-outset-right fig-alt="Quarto page with algolia search overlay in 'detached' mode. The webpage behind the search dialog is darkened, and the search dialog itself has a field for entering input tect, and displays a list of matching documents and preview of their tect below."}

The `textbox` option displays search like this:

![](images/navbar-textbox.png){.border .column-page-outset-right fig-alt="Algolia search with textbox in navbar. The search dialog opens as a dropdown in the right-hand side of the screen as an expansion of the textbox."}

When the search is displayed as a textbox, by default, there is no placeholder text. You can specify placeholder text using the `search-text-placeholder` key of the `language` option (note that this is at the top-level, not inside the `website` option):

::: {layout-ncol="2"}
``` yaml
language: 
  search-text-placeholder: Search
```

![](images/search-placeholder-text.png){fig-alt="Search box showing the placeholder text 'Search'."}
:::

## Keyboard Shortcut

In addition to clicking on the search UI, users can activate search using the keyboard shortcuts {{< kbd s >}}, {{< kbd f >}} or {{< kbd / >}}. You can override these shortcuts by specifying the `keyboard-shortcut` option. In this example, search will be activated with {{< kbd ? >}} or {{< kbd H >}}:

``` yaml
website:
  search:
    keyboard-shortcut: ["?", "H"]
```

## Customizing Results

You can use the following `search` options to customize how search results are displayed:

+--------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Option             | Description                                                                                                                                                                                                                       |
+====================+===================================================================================================================================================================================================================================+
| `limit`            | The number of results to display in the search results. Defaults to 20.                                                                                                                                                           |
+--------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `collapse-after`   | The number of sections matching a document to show before hiding additional sections behind a 'more matches' link. Defaults to 2.                                                                                                 |
|                    |                                                                                                                                                                                                                                   |
|                    | ![](images/collapse-after.png){.border fig-alt="Part of a search result that shows a matching result for the search term, and at the bottom reads '3 more matches in this document'"}                                             |
+--------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `copy-button`      | If true, the search textbox will include a small icon that when clicked will copy a url to the search results to the clipboard (this is useful if users would like to share a particular search with results). Defaults to false. |
|                    |                                                                                                                                                                                                                                   |
|                    | ![](images/copy-button.png){.border fig-alt="search box with clickable clipboard icon on the right hand side that, if clicked, will copy the resulting url."}                                                                     |
+--------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `show-item-context`| Control whether page parents are displayed next to items in search results. Use `tree`, `parent`, `root`, or boolean (if true, `tree` is the default). E.g. `tree` results in "Guide \> Authoring \> Figures":                    |
|                    |                                                                                                                                                                                                                                   |
|                    | ![](images/search-item-context.png){.border fig-alt="search box with navigational context shown above the title of the first result." width="260"}                                                                                |
+--------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

## Using Algolia

In addition to the built-in search capability, Quarto websites can also be configured to use an external Algolia search index. When rendering a website, Quarto will produce a JSON file (`search.json` in the site output directory) which can be used to update an Algolia index. For more on creating indexes with Algolia, see [Send and Update Your Data](https://www.algolia.com/doc/guides/sending-and-managing-data/send-and-update-your-data/) using Algolia.

### Basic Configuration

In order for Quarto to connect to your Algolia index, you need to provide basic connection information in your Quarto project file. You can find this connection information for your Algolia index in the Dashboard in the [API Keys](https://www.algolia.com/doc/guides/security/api-keys/) section. The following basic connection information is required:

+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Option                | Description                                                                                                                                                                                      |
+=======================+==================================================================================================================================================================================================+
| `index-name`          | The name of the index to use when performing a search.                                                                                                                                           |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `application-id`      | The unique ID used by Algolia to identify your application.                                                                                                                                      |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `search-only-api-key` | The Search-Only API key to use to connect to Algolia.                                                                                                                                            |
|                       |                                                                                                                                                                                                  |
|                       | ::: callout-important                                                                                                                                                                            |
|                       | Be sure to use the **Search Only** API key, which provides read only access to your index and is safe to include in project files. Never use your Admin API key in a Quarto document or project. |
|                       | :::                                                                                                                                                                                              |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `show-logo`           | Displays a 'search by Algolia' logo in the footer of search results.                                                                                                                             |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

For example:

``` yaml
website:
  search:
    algolia:
      index-name: <my-index-name>
      application-id: <my-application-id>
      search-only-api-key: <my-search-only-api-key>
```

### Custom Index Schema

If you are simply using the `search.json` file generated by Quarto as your Algolia index, the above configuration information is all that is required to set up search using Algolia.

However, if you are generating an index in some other fashion, you may need to provide additional information to specify which fields Quarto should use when searching. You do this by including an `index-fields` key under `algolia` which specifies the names of specific fields in your index.

+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Option    | Description                                                                                                                                                                                                                |
+===========+============================================================================================================================================================================================================================+
| `href`    | The field to use to read the URL to this index entry. The user will be navigated to this URL when they select the matching search result. Note that Quarto groups results by URL (not including the anchor when grouping). |
|           |                                                                                                                                                                                                                            |
|           | This field is required (either as an existing field in your index or with a mapped field name).                                                                                                                            |
+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `title`   | The field to use to read the title of the index entry.                                                                                                                                                                     |
|           |                                                                                                                                                                                                                            |
|           | This field is required (either as an existing field in your index or with a mapped field name).                                                                                                                            |
+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `text`    | The field to use to read the text of the index entry.                                                                                                                                                                      |
|           |                                                                                                                                                                                                                            |
|           | This field is required (either as an existing field in your index or with a mapped field name).                                                                                                                            |
+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `section` | The field to use to read the section of the index entry. Quarto groups results by URL and uses the section information (if present) to show matching subsections of the same document.                                     |
|           |                                                                                                                                                                                                                            |
|           | This field is optional.                                                                                                                                                                                                    |
+-----------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Any or all of the above may be specified in your Quarto project file. For example:

``` yaml
website:
  search:
    algolia:
      index-name: <my-index-name>
      application-id: <my-application-id>
      search-only-api-key: <my-search-only-api-key>
      index-fields:
        href: url
        section: sec
        text: body
```

### Algolia Insights

By default, Algolia provides a number of insights based upon the performance of your Algolia search. In addition, it may be helpful to understand more detailed tracking of the results that are viewed and clicked. You can enable click and conversion tracking using Algolia by setting the `analytics-events` to true:

``` yaml
website:
  search:
    algolia:
      index-name: <my-index-name>
      application-id: <my-application-id>
      search-only-api-key: <my-search-only-api-key>
      analytics-events: true
```

You can confirm that events are being properly sent to Algolia using the [Event Debugger](https://www.algolia.com/events/debugger). Note that the click and conversion events use cookies to maintain an anonymous user identifier---if [cookie consent](website-tools.qmd#cookie-consent) is enabled, search events will only be enabled if cookie consent has been granted.

### Advanced Configuration

In addition to the above configuration, you may also pass Algolia specific parameters when executing a search. For example, you may want to limit results to a particular facet or set of tags. To specify parameters, add the `params` key to your `algolia` yaml and provide params. For information about available parameters, see Algolia's [Search API Parameters](https://www.algolia.com/doc/api-reference/search-api-parameters/).

For example:

``` yaml
website:
  search:
    algolia:
      index-name: <my-index-name>
      application-id: <my-application-id>
      search-only-api-key: <my-search-only-api-key>
      index-fields:
        href: url
        section: sec
        text: body
      params:
        tagFilters: ['tag1','tag2']
```

## Disabling/Forcing Search

You can disable search for an individual document by adding `search: false` to the document metadata. For example:

``` yaml
---
title: "My Document"
search: false
---
```

If you'd like to disable search support for an entire website, you can do so by including the following in your `_quarto.yml` file:

``` yaml
website:
  search: false
```

### Forcing the inclusion of individual elements

If you need elements from the document to be included in the search that otherwise wouldn't, add the `quarto-include-in-search-index` class to the element.
To include only a portion of a paragraph, etc, wrap the text in a span or a div and add the class to the element.
```````

## File: docs/websites/website-tools.qmd
```````
---
title: "Website Tools"
---

## Headers & Footers

You can provide standard headers and footers for pages on your site. These can apply to the main document body or to the sidebar. Available options include:

+-----------------+---------------------------------------------------------------------------------------------+
| Value           | Description                                                                                 |
+=================+=============================================================================================+
| `body-header`   | Markdown to insert at the beginning of each page's body (below the title and author block). |
+-----------------+---------------------------------------------------------------------------------------------+
| `body-footer`   | Markdown to insert below each page's body.                                                  |
+-----------------+---------------------------------------------------------------------------------------------+
| `margin-header` | Markdown to insert above right margin content (i.e. table of contents).                     |
+-----------------+---------------------------------------------------------------------------------------------+
| `margin-footer` | Markdown to insert below right margin content.                                              |
+-----------------+---------------------------------------------------------------------------------------------+

For example (included in \_quarto.yml) :

``` yaml
body-header: | 
  This page brought to you by <https://example.com>
margin-header: |
  ![Logo image](/img/logo.png)
```

Note that links to figures should start with a `/` to work on each level of the website.

## Announcement Bar

![Captured view of the Quarto website, showcasing the dynamic announcement bar feature.](images/website-announcement.png){.border fig-alt="Screenshot showing an announcement bar on Quarto website with an 'info-circle' icon, a dismiss button, and a primary colour type. The content reads 'Alert - this is some information that you should pay attention to'."}

Add an announcement to display a prominent, customizable bar at the top of your website that grabs visitors' attention.
It's perfect for highlighting important information, such as alerts, promotions, or updates.
You can set an icon, make it dismissable, and even include formatted content like bold text.
The announcement bar can be positioned to fit seamlessly within your site's layout (*e.g.*, `below-navbar` or `above-navbar`), ensuring the message is both impactful and integrated.

Here's an example of how you might configure it:

```{.yaml filename="_quarto.yml"}
website:
  announcement: 
    icon: info-circle # <1>
    dismissable: true # <2>
    content: "**Alert** - this is some information that you should pay attention to" # <3>
    type: primary # <4>
    position: below-navbar # <5>
```

1. `icon` - The Bootstrap icon to display in the announcement bar. You can choose from any of the [Bootstrap icons](https://icons.getbootstrap.com/).
2. `dismissable` - Whether the announcement bar can be dismissed by the user. It can be `true` or `false`.
3. `content` - The content of the announcement bar. You can use markdown to format the content.
4. `type` - The type of the announcement bar. It can be one of `primary`, `secondary`, `success`, `danger`, `warning`, `info`, `light`, `dark`.
5. `position` - The position of the announcement bar. It can be one of `below-navbar` or `above-navbar`.

## Social Metadata

You can enhance your website and the content that you publish to it by including additional types of metadata, including:

-   Favicon
-   Twitter Cards
-   Open Graph

{{< include ../books/_book-vs-website-key.qmd >}}

As you read the documentation below, keep in mind to substitute `book` for `website` if you are authoring a book.

### Favicon

The favicon for your site provides an icon for browser tabs and other sites that link to yours. Use the `favicon` option to provide the path to a favicon image. For example:

``` yaml
website:
  favicon: logo.png
```

### Twitter Cards

[Twitter Cards](https://developer.twitter.com/en/docs/twitter-for-websites/cards/overview/abouts-cards) provide an enhanced appearance when someone links to your site on Twitter. When a link to your site is included in a Tweet, Twitter automatically crawls your site and fetches any Twitter Card metadata. To enable the automatic generation of Twitter Card metadata for your site, you can add the following to your `_quarto.yml` configuration file:

``` yaml
website:
  twitter-card: true
```

In this case, Quarto will automatically generate a title, description, and preview image for the content. For more information about how Quarto finds preview images, see [Preview Images].

You may also provide additional metadata to be used when generating the Twitter Card, including:

+---------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Key           | Description                                                                                                                                                                                                                                                                            |
+===============+========================================================================================================================================================================================================================================================================================+
| `title`       | The title of the page. Quarto will automatically use the `title` metadata from the page metadata. If you'd like you can override this just for the Twitter Card by including a `title` in the `twitter-card` metadata.                                                                 |
+---------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `description` | A short description of the content. Quarto will automatically use the `description` metadata from the page metadata. If you'd like you can override this just for the Twitter Card by including a `description` in the `twitter-card` metadata.                                        |
+---------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `image`       | The path to a preview image for this content.  By default, Quarto will use the `image` value from the document metadata, or if that isn't specified, the `image` value from the `website:` metadata.                                                                                   |
|               | If you provide an image, you may also optionally provide an `image-width` and `image-height` to improve the appearance of your Twitter Card.                                                                                                                                           |
|               |                                                                                                                                                                                                                                                                                        |
|               | If `image` is not provided, Quarto will automatically attempt to locate a preview image. For more information, see [Preview Images].                                                                                                                                                   |
+---------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `card-style`  | Either `summary` or `summary_large_image`. If this is not provided, the best style will automatically selected based upon other metadata. You can learn more about Twitter Card styles [here](https://developer.twitter.com/en/docs/twitter-for-websites/cards/overview/abouts-cards). |
+---------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `creator`     | `@username` of the content creator. Note that strings with special characters such as `@` must be quoted in yaml.                                                                                                                                                                      |
+---------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `site`        | `@username` of website. Note that strings with special characters such as `@` must be quoted in yaml.                                                                                                                                                                                  |
+---------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Here is a more comprehensive example of specifying Twitter Card metadata in a `quarto.yml` file:

``` yaml
website:
  twitter-card:
    creator: "@dragonstyle"
    site: "@rstudio"
```

Quarto will automatically merge global metadata found in the `website: twitter-card` key with any metadata provided in the document itself in the `twitter-card` key. This is useful when you need to specify a mix of global options (for example, `site`) with per document options such as `title` or `image`.

### Open Graph

The [Open Graph protocol](http://ogp.me/) is a specification that enables richer sharing of links to articles on the web. It will improve the previews of your content when a link to it is pasted into applications like Slack, Discord, Facebook, Linkedin, and more. To enable the automatic generation of Open Graph metadata for your content, include the following in your `_quarto.yml` configuration file:

``` yaml
website:
  open-graph: true
```

In this case, Quarto will automatically generate a title, description, and preview image for the content. For more information about how Quarto finds preview images, see [Preview Images].

You may also provide additional metadata to be used when generating the Open Graph metadata, including:

+---------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Key           | Description                                                                                                                                                                                                                                          |
+===============+======================================================================================================================================================================================================================================================+
| `title`       | The title of the page. Quarto will automatically use the `title` metadata from the page metadata. If you'd like you can override this just for the Open Graph metadata by including a `title` in the `open-graph` metadata.                          |
+---------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `description` | A short description of the content. Quarto will automatically use the `description` metadata from the page metadata. If you'd like you can override this just for the Open Graph metadata by including a `description` in the `open-graph` metadata. |
+---------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `image`       | The path to a preview image for this content.  By default, Quarto will use the `image` value from the document metadata, or if that isn't specified, the `image` value from the `website:` metadata.                                                 |
|               | If you provide an image, you may also optionally provide an `image-width` and `image-height` to improve the appearance of your Twitter Card.                                                                                                         |
|               |                                                                                                                                                                                                                                                      |
|               | If `image` is not provided, Quarto will automatically attempt to locate a preview image. For more information, see [Preview Images].                                                                                                                 |
+---------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `locale`      | The locale that the Open Graph metadata is marked up in.                                                                                                                                                                                             |
+---------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `site-name`   | The name which should be displayed for the overall site. If not explicitly provided in the `open-graph` metadata, Quarto will use the `website:title` value.                                                                                         |
+---------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Here is a more comprehensive example of specifying Open Graph metadata in a `quarto.yml` file:

``` yaml
website:
  open-graph:
    locale: es_ES
    site-name: Quarto
```

Quarto will automatically merge global metadata found in the `website: open-graph` key with any metadata provided in the document itself in the `open-graph` key. This is useful when you need to specify a mix of global options (for example, `site`) with per document options such as `title` or `image`.

### Preview Images

You can specify a preview image for your article in several different ways:

1.  **Full URL**: You can explicitly provide a full url to the preview image using the `image` field in the appropriate metadata. For example:

    ``` {.yaml filename="page.qmd"}
    title: "My Document"
    image: "https://quarto.org/docs/websites/images/tools.png"
    ```

2.  **Relative Path**: You may provide a document relative path to an image (such as `images/preview-code.png`) or a project relative path to an image (such as `/images/preview-code.png`). If you provide a relative path such as this, you must also provide a `site-url` in your site's metadata. For example in your `_quarto.yml` configuration file:

    ``` {.yaml filename="_quarto.yml"}
    website:
      site-url: "https://www.quarto.org"
    ```

    and in your document front matter:

    ``` {.yaml filename="page.qmd"}
    title: "My Document"
    image: "/docs/websites/images/tools.png"
    ```

3.  **Image Class**: Any image that is being rendered in the page may also be used as a preview image by giving it the class name `preview-image`. Quarto will select the first image it finds with this class. For example, the following image will be used as the preview image when included on a page:

    ``` markdown
    ![](images/tools.png){.preview-image}
    ```

    If you label an image with this class, you must also provide a `site-url` in your site's metadata.

4.  **Image Filename**: If none of the above ways of specifying a preview image have been used, Quarto will attempt to find a preview image by looking for an image included in the rendered document with one of the following names: `preview.png`, `feature.png`, `cover.png`, or `thumbnail.png`.

If you'd like to provide a default that is used when pages specify a preview image in none of the above ways, specify it at the site level:

```{.yaml filename="_quarto.yml"}
website:
  image: "https://quarto.org/quarto-dark-bg.jpeg"
```

If you would like to prevent preview image discovery on a page, set `image` to `false`:

```{.yaml filename="page.qmd"}
---
image: false
---
```

## Google Analytics

You can add [Google Analytics](https://analytics.google.com/) to your website by adding a `google-analytics` key to your `_quarto.yml` file. In its simplest form, you can just pass your Google Analytics tracking Id (e.g. `UA-xxxxxxx`) or Google Tag measurement Id (e.g. `G-xxxxxxx`) like:

``` yaml
website:
  google-analytics: "UA-XXXXXXXX"
```

Quarto will use the key itself to determine whether to embed Google Analytics (analytics.js) or Google Tags (gtag) as appropriate.

In addition to this basic configuration, you can exercise more fine grained control of your site analytics using the following keys.

+----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Key            | Description                                                                                                                                                                                         |
+================+=====================================================================================================================================================================================================+
| `tracking-id`  | The Google tracking Id or measurement Id of this website.                                                                                                                                           |
+----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `storage`      | **cookies -** Use cookies to store unique user and session identification (default).                                                                                                                |
|                |                                                                                                                                                                                                     |
|                | **none -** Do not use cookies to store unique user and session identification.                                                                                                                      |
|                |                                                                                                                                                                                                     |
|                | For more about choosing storage options see [Storage].                                                                                                                                              |
+----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `anonymize-ip` | Anonymize the user ip address. For more about this feature, see [IP Anonymization (or IP masking) in Google Analytics](https://support.google.com/analytics/answer/2763052?hl=en).                  |
+----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `version`      | The version number of Google Analytics to use. Currently supports either 3 (for analytics.js) or 4 (for gtag). This is automatically detected based upon the `tracking-id`, but you may specify it. |
+----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

: {tbl-colwidths="[20,80]"}

### Storage

Google Analytics uses cookies to distinguish unique users and sessions. If you choose to use cookies to store this user data, you should consider whether you need to enable [Cookie Consent] in order to permit the viewer to control any tracking that you enable.

If you choose `none` for storage, this will have the following effects:

-   For Google Analytics v3 (analytics.js)\
    No tracking cookies will be used. Individual page hits will be properly tracked, enabling you to see which pages are viewed and how often they are viewed. Unique user and session tracking will not report data correctly since the tracking cookies they rely upon are not set.

-   For Google Tags (gtag)\
    User consent for ad and analytics tracking cookies will be withheld. In this mode, Google Analytics will still collect user data without the user identification, but that data is currently not displayed in the Google Analytics reports.

## Cookie Consent

Quarto includes the ability to request cookie consent before enabling scripts that set cookies, using [Cookie Consent](https://www.cookieconsent.com).

The user's cookie preferences will automatically control [Google Analytics] (if enabled) and can be used to control custom scripts you add as well (see [Custom Scripts and Cookie Consent]). You can enable the default request for cookie consent using the following:

``` yaml
website:
  cookie-consent: true
```

You can further customize the appearance and behavior of the consent using the following:

+--------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Key          | Description                                                                                                                                                                          |
+==============+======================================================================================================================================================================================+
| `type`       | The type of consent that should be requested, using one of these two values:                                                                                                         |
|              |                                                                                                                                                                                      |
|              | **implied -** (default) This will notify the user that the site uses cookies and permit them to change preferences, but not block cookies unless the user changes their preferences. |
|              |                                                                                                                                                                                      |
|              | **express -** This will block cookies until the user expressly agrees to allow them (or continue blocking them if the user doesn't agree).                                           |
+--------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `style`      | The style of the consent banner that is displayed:                                                                                                                                   |
|              |                                                                                                                                                                                      |
|              | **simple -** (default) A simple dialog in the lower right corner of the website.                                                                                                     |
|              |                                                                                                                                                                                      |
|              | **headline -** A full width banner across the top of the website.                                                                                                                    |
|              |                                                                                                                                                                                      |
|              | **interstitial -** A semi-transparent overlay of the entire website.                                                                                                                 |
|              |                                                                                                                                                                                      |
|              | **standalone -** An opaque overlay of the entire website.                                                                                                                            |
+--------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `palette`    | Whether to use a dark or light appearance for the consent banner:                                                                                                                    |
|              |                                                                                                                                                                                      |
|              | **light -** A light colored banner.                                                                                                                                                  |
|              |                                                                                                                                                                                      |
|              | **dark -** A dark colored banner.                                                                                                                                                    |
+--------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `language`   | The language to be used when displaying the cookie consent prompt specified using an IETF language tag.                                                                              |
|              | If not specified, the document language will be used.                                                                                                                                |
+--------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `policy-url` | The url to the website's cookie or privacy policy.                                                                                                                                   |
+--------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| `prefs-text` | The text to display for the cookie preferences link in the website footer.                                                                                                           |
+--------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

: {tbl-colwidths="[20,80]"}

A custom example might look more like:

``` yaml
website:
  cookie-consent:
    type: express
    style: headline
    palette: dark
  google-analytics:
    tracking-id: "G-XXXXXXX"
    anonymize-ip: true
```

### Cookie Preferences

In addition to requesting consent when a new user visits your website, Cookie Consent will also add a cookie preferences link to the footer of the website. You can control the text of this link using `prefs-text`. If you would rather position this link yourself, just add a link with the id `#open_preferences_center` to the website and Cookie Consent will not add the preferences link to the footer. For example:

``` markdown
Change [cookie preferences]{#open_preferences_center}
```

### Custom Scripts and Cookie Consent

Cookie Consent works by preventing the execution of scripts unless the user has expressed their consent. To control your custom scripts using Cookie Consent:

1.  Insert script tags as `type='text/plain'` (when the user consents, the type will be switched to `text/javascript` and the script will be executed).

<!-- -->

2.  Add a `cookie-consent` attribute to your script tag, setting it one of the following 4 levels:

    +----------------------+------------------------------------------------------------------------------------------------------------------------+
    | Level                | Description                                                                                                            |
    +======================+========================================================================================================================+
    | `strictly-necessary` | Strictly scripts are loaded automatically and cannot be disabled by the user.                                          |
    +----------------------+------------------------------------------------------------------------------------------------------------------------+
    | `functionality`      | Scripts that are required for basic functionality of the website, for example, remembering a user language preference. |
    +----------------------+------------------------------------------------------------------------------------------------------------------------+
    | `tracking`           | Scripts that are used to track users, for example [Google Analytics].                                                  |
    +----------------------+------------------------------------------------------------------------------------------------------------------------+
    | `targeting`          | Scripts that are used for the purpose of advertising to ad targeting, for example Google AdSense remarketing.          |
    +----------------------+------------------------------------------------------------------------------------------------------------------------+

An example script that is used for user tracking would look like:

``` javascript
<script type="text/plain" cookie-consent="tracking">

// My tracking JS code here

</script>
```

## Site Resources

Besides input and configuration files, your site likely also includes a variety of resources (e.g. images) that you will want to publish along with your site. Quarto will automatically detect any files that you reference within your site and copy them to the output directory (e.g. `_site`).

Quarto also recognizes the following files and copies them to your output directory: 

* `404.html`, one option for providing a [404 Page](/docs/websites/website-navigation.qmd#pages-404)
* `robots.txt`, a file specified by the [Robots Exclusion Protocol](https://datatracker.ietf.org/doc/html/rfc9309){.external} that tells search engine crawlers which pages or files on your website they can or cannot access
* `_redirects`, a file used by some publishing providers to provide page redirects, e.g. [Netlify](https://docs.netlify.com/routing/redirects/#syntax-for-the-redirects-file){.external}
* `CNAME`, a file used by some publishing providers to specify a custom domain, e.g. [GitHub Pages](/docs/publishing/github-pages.qmd#custom-domain)
* `.nojekyll`, a file used by GitHub pages to bypass building with Jekyll, e.g. when [publishing from `docs/`](/docs/publishing/github-pages.qmd#render-to-docs)

If this auto-detection fails for any reason, or if you want to publish a file not explicitly linked to from within your site, you can add a `resources` entry to your configuration. For example, here we specify that we want to include all Excel spreadsheets within the project directory as part of the website:

``` {.yaml .yml}
project:
  type: website
  resources: 
    - "*.xlsx"
```

Note that the `*.xlsx` value is quoted: this is because YAML requires that strings that begin with non-alphanumeric characters be quoted.

You can also add a `resources` metadata value to individual files. For example:

``` yaml
title: "My Page"
resources:
  - "sheet.xlsx"
```

Images are the most commonly used type of resource file. If you have global images (e.g. a logo) that you want to reference from various pages within your site, you can use a site-absolute path to refer to the images, and it will be automatically converted to a relative path during publishing. For example:

``` markdown
![](/images/logo.png)
```

## Dark Mode

Quarto websites can support both a light and dark mode. For example, you may use the `flatly` and `darkly` themes (which are designed to be used in tandem as dark and light appearances) as:

``` yaml
theme:
  light: flatly
  dark: darkly
```

For more about selecting the dark and light themes for your website, see [Dark Mode](/docs/output-formats/html-themes.qmd#dark-mode).

::: column-page-outset
+--------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------+
| Light                                                                                                        | Dark                                                                                                      |
+==============================================================================================================+===========================================================================================================+
| ![](images/site-light.png){fig-alt="A Quarto sidebar showing a light theme. The 'Dark mode' toggle is off."} | ![](images/site-dark.png){fig-alt="A Quarto sidebar showing a dark theme. The 'Dark mode' toggle is on."} |
+--------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------+
:::

When enabled, a toggle that allows your reader to control the appearance of the website will appear. The toggle will automatically be added to the website navigation as follows:

1.  If a navbar has been specified, the toggle will appear in the top right corner of the nav bar.
2.  If there is no navbar present, but a sidebar has been specified, the toggle will appear in the same location that the sidebar tools appears (adjacent to the title or logo in the sidebar).
3.  If there is no navbar or sidebar present, the toggle will appear in the top right corner of the page.
```````
